<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="All about coding and writing">
  <meta name="keyword" content="Programming, Programming Languages, Algorithms, Tools">
  <meta property="og:site_name" content="CatCoding">
  <meta property="og:title" content="CKB new script verification with VM pause | CatCoding" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="" />
  <meta property="og:description" content="" />
  <meta property="og:image" content=" http://catcoding.me/css/images/logo.png " />
  <link rel="alternate" type="application/rss+xml" title="CatCoding; Feed" href="https://catcoding.me/atom.xml" />

  
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/gitment.css">

  
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/fonts.css">

  
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/code.css">

  
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/prism.css">

  
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/font-awesome.min.css">

  
<script src="/js/qrious.js"></script>
<script src="/js/gitment.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/geopattern.min.js"></script>
<script src="/js/nprogress.min.js"></script>


  
  <link rel="shortcut icon" href="/css/images/favicon.ico">
  
  <title>
    
    CKB new script verification with VM pause |
    CatCoding
    
  </title>

  <div style='margin:0 auto;width:0px;height:0px;overflow:hidden;'>
    <img src="/css/images/logo.png" width='400px' height='400px' />
  </div>

  
  



<script defer src="https://analytics.us.umami.is/script.js" data-website-id="9767b9c8-6554-4673-af8c-2d22e00617aa"></script>
<meta name="generator" content="Hexo 5.4.2"></head>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>CatCoding</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/links/" class="item-link">Links</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      

        <li class="list-item" style="margin: 0">
       <a class="icon-small" href="/search">
        <span class="fa-stack fa-lg">
          <i class="fa fa-search fa-stack-1x fa-inverse" style="color:#8ccb8c"></i>
        </span>
       </a>
      </li>

       <li class="list-item" style="margin-left: 3px">
        <a class="icon-small" href="/atom.xml">
         <span class="fa-stack fa-lg">
           <i class="fa fa-rss fa-inverse" style="color:orange"></i>
         </span>
        </a>
       </li>
    </ul>
    
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/links/" class="menu-link">Links</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>CKB new script verification with VM pause</h2>
  <p class="post-date">2024-11-07</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>


<main class="app-body flex-box">


  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><p>CKB ç›¸å…³æŠ€æœ¯æ–‡ç« ç¬¬ä¸‰ç¯‡ã€‚</p>
<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>CKB çš„æ¯ä¸€ä¸ªäº¤æ˜“åœ¨æäº¤åˆ°äº¤æ˜“æ± ä¹‹å‰éƒ½ä¼šç»è¿‡ä¸€ä¸ª script verification çš„è¿‡ç¨‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯é€šè¿‡ CKB-VM æŠŠäº¤æ˜“é‡Œçš„ script è·‘ä¸€éï¼Œå¦‚æœå¤±è´¥äº†åˆ™ç›´æ¥ rejectï¼Œå¦‚æœé€šè¿‡äº†æ‰ä¼šç»§ç»­åé¢çš„æµç¨‹ã€‚</p>
<p><img src="/images/ob_what-is-verification.png" alt=""></p>
<p>è¿™é‡Œçš„ script å°±æ˜¯ä¸€ç§å¯ä»¥åœ¨é“¾ä¸Šæ‰§è¡Œçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç§°ä¹‹ä¸º CKB ä¸Šçš„åˆçº¦ã€‚å®ƒæ˜¯å›¾çµå®Œå¤‡çš„ï¼Œæˆ‘ä»¬é€šå¸¸å¯ä»¥é€šè¿‡ Cã€Rust æ¥å®ç°è¿™äº› scriptï¼Œæ¯”å¦‚ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb-system-scripts">nervosnetwork/ckb-system-scripts</a> å°±æ˜¯ CKB ä¸Šçš„ä¸€äº›å¸¸ç”¨çš„ç³»ç»Ÿåˆçº¦ã€‚ç”¨æˆ·åœ¨å‘èµ·äº¤æ˜“çš„æ—¶å€™å°±è®¾ç½®å¥½ç›¸å…³çš„ scriptï¼Œæ¯”å¦‚ lock script æ˜¯ç”¨æ¥ä½œä¸ºèµ„äº§æ‰æ‰€æœ‰æƒçš„é‰´å®šï¼Œè€Œ type script é€šå¸¸ç”¨æ¥å®šä¹‰ cell è½¬æ¢çš„æ¡ä»¶ï¼Œæ¯”å¦‚å‘è¡Œä¸€ä¸ª User Define Token å°±éœ€è¦æŒ‡å®šå¥½ UDT æ‰€å¯¹åº”çš„ type scriptã€‚script æ˜¯é€šè¿‡ RISC-V æŒ‡ä»¤é›†çš„è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„ï¼Œæ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://docs.nervos.org/docs/script/intro-to-script">Intro to Script | Nervos CKB</a>ã€‚</p>
<h2 id="å¤§-cycle-äº¤æ˜“çš„æŒ‘æˆ˜"><a href="#å¤§-cycle-äº¤æ˜“çš„æŒ‘æˆ˜" class="headerlink" title="å¤§ cycle äº¤æ˜“çš„æŒ‘æˆ˜"></a>å¤§ cycle äº¤æ˜“çš„æŒ‘æˆ˜</h2><p>é€šå¸¸ä¸€ä¸ªç®€å•çš„ script åœ¨ CKB-VM é‡Œé¢æ‰§è¡Œæ˜¯éå¸¸å¿«çš„ï¼ŒVM ä¸Šè·‘å®Œä¹‹åä¼šè¿”å›ä¸€ä¸ª cycle æ•°ç›®ï¼Œè¿™ä¸ª cycle æ•°é‡å¾ˆé‡è¦ï¼Œæˆ‘ä»¬ç”¨æ¥è¡¡é‡ script æ ¡éªŒæ‰€è€—è´¹çš„è®¡ç®—é‡ã€‚ä¸€ä¸ªåˆçº¦çš„ cycle æ•°å¤šå°‘ï¼Œç†è®ºä¸Šæ¥è¯´ä¾èµ–äº VM è·‘çš„ä½¿ç”¨ç”¨äº†å¤šå°‘ä¸ªæŒ‡ä»¤ï¼Œè¿™ç”± VM åœ¨è·‘çš„æ—¶å€™å»è®¡ç®— <a target="_blank" rel="noopener" href="https://docs.nervos.org/docs/script/vm-cycle-limits">VM Cycle Limits</a>ã€‚</p>
<p>éšç€ä¸šåŠ¡çš„å¤æ‚ï¼Œé€æ¸å‡ºç°äº†ä¸€äº›å¤§ cycles çš„äº¤æ˜“ï¼Œè·‘è¿™äº›äº¤æ˜“å¯èƒ½ä¼šè€—è´¹æ›´å¤šçš„æ—¶é—´ï¼Œä½†æˆ‘ä»¬æ€»ä¸å¯èƒ½è®© VM ä¸€ç›´å ç€ CPUï¼Œæ¯”å¦‚åœ¨å¤„ç†æ–° block çš„æ—¶å€™ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/chenyukang/ckb/blob/8cb49e4d727f337a2c80e210507a9e277bab3391/chain/src/verify.rs#L79-L87">CPU åº”è¯¥åœ¨è®©æ¸¡å‡ºæ¥</a>ã€‚ä½†ä¹‹å‰ CKB-VM å¯¹è¿™å—çš„æ”¯æŒä¸å¤Ÿï¼Œä¸ºäº†è¾¾åˆ°å˜ç›¸çš„æš‚åœï¼Œå¤„ç†å¤§ cycles çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ª step cyclesï¼Œå‡è®¾æˆ‘ä»¬è®¾ç½®ä¸º 100 cyclesï¼Œæ¯æ¬¡å¯åŠ¨çš„æ—¶å€™å°±æŠŠ max_cycles è®¾ç½®ä¸º 100ï¼Œè¿™æ · VM åœ¨è·‘å®Œ 100 cycle çš„æ—¶å€™ä¼šé€€å‡ºï¼Œè¿”å›çš„ç»“æœæ˜¯ cycle limitation exceedï¼Œç„¶åæˆ‘ä»¬å°±çŸ¥é“è¿™ä¸ª script å…¶å®æ˜¯æ²¡è·‘å®Œçš„ï¼Œå…ˆæŠŠçŠ¶æ€ä¿å­˜ä¸º suspendï¼Œç„¶ååˆ‡æ¢åˆ°å…¶ä»–ä¸šåŠ¡ä¸Šåšå®Œå¤„ç†ä¹‹åå†ç»§ç»­æ¥è·‘ã€‚å›æ¥åå¦‚ä½•æ‰èƒ½æ¢å¤åˆ°ä¹‹å‰çš„æ‰§è¡ŒçŠ¶æ€å‘¢ï¼Œè¿™å°±éœ€è¦ä¿å­˜ VM çš„ <a target="_blank" rel="noopener" href="https://github.com/chenyukang/ckb/blob/aaa51583656f022ad64ec98d1fb0205fc2878dba/script/src/types.rs#L319-L333">snapshot</a>ï¼Œç›¸å½“äºç»™ VM å½“å‰çŠ¶æ€æ‰“äº†ä¸€ä¸ªå¿«ç…§ï¼š</p>
<p><img src="/images/ob_ckb-vm-snapshot.png" alt=""><br>æ ¹æ®è¿™ä¸ªæœºåˆ¶ï¼Œæˆ‘ä»¬è€çš„ script æ ¡éªŒå¤§äº¤æ˜“çš„æ•´ä¸ªæµç¨‹æ˜¯é€šè¿‡ä¸€ä¸ª FIFO çš„é˜Ÿåˆ—ä¿å­˜å¤§äº¤æ˜“ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªåå°ä»»åŠ¡ä¸æ–­åœ°ä»è¿™ä¸ªé˜Ÿåˆ—ä¸­å–äº¤æ˜“è·‘ VMï¼Œæ¯æ¬¡éƒ½è·‘ 1000w cycle å·¦å³ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å°±å¯èƒ½åˆ‡æ¢å‡ºå»ï¼Œæ²¡è·‘å®Œçš„äº¤æ˜“ç»§ç»­æ”¾å…¥é˜Ÿåˆ—ç­‰å¾…ä¸‹ä¸€æ¬¡æ‰§è¡Œï¼š</p>
<p><img src="/images/ob_pasted-image-20241106114040.png" alt=""></p>
<p>å¯¹åº”åˆ°ä»£ç å°±æ˜¯ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/develop/tx-pool/src/chunk_process.rs">ChunkProcess</a> è¿™ä¸ªå•ç‹¬æœåŠ¡æ¥å¤„ç†çš„ã€‚ç”±äº ChunkProcess æ˜¯ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡ï¼Œå®ƒçš„å¤„ç†æµç¨‹å’Œå…¶ä»–äº¤æ˜“çš„å¤„ç†æµç¨‹æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™æ ·ä¼šå¯¼è‡´ä»£ç çš„å¤æ‚åº¦å¢åŠ ï¼Œæ¯”å¦‚ï¼š</p>
<ol>
<li>è¦é’ˆå¯¹ ChunkProcess é‡Œé¢çš„äº¤æ˜“é¢å¤–åˆ¤æ–­ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/3d674d558e5574f0c77a52798775c903561a933a/tx-pool/src/process.rs#L321">ä¾‹å­ 1</a>, <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/3d674d558e5574f0c77a52798775c903561a933a/tx-pool/src/process.rs#L350">ä¾‹å­ 2</a></li>
<li>æš‚åœ / æ¢å¤ ChunkProcess å¤„ç†çš„æ—¶å€™ï¼Œéœ€è¦å¯¹ ckb-vm åšç›¸å…³çš„çŠ¶æ€ä¿å­˜å’Œæ¢å¤å¤„ç†ï¼Œå‚è€ƒç»“æ„ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/3d674d558e5574f0c77a52798775c903561a933a/script/src/types.rs#L308">TransactionSnapshot</a>, ä»£ç æ¯”è¾ƒå¤æ‚ä¸”å®¹æ˜“é—æ¼ï¼Œå†å²ä¸Šä¹Ÿæœ‰è¿‡ç›¸å…³çš„ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/pull/3188">bug 1</a>, <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/pull/3177">bug 2</a>, ä»¥åŠå®‰å…¨é—®é¢˜ã€‚</li>
<li>ä»£ç ä¸­åŒ…å«é‡å¤é€»è¾‘ï¼Œæ¯”å¦‚ <code>chunk_process</code> é‡Œçš„ <code>process_inner</code> å’Œ <code>_resumeble_process_tx</code>ã€‚</li>
<li>ç”±äºå®ƒåªèƒ½åŒæ—¶å¤„ç†ä¸€ä¸ªå¤§ cycle äº¤æ˜“ï¼Œåœ¨ tx pool æœ¬èº«æ¯”è¾ƒç©ºé—²çš„æƒ…å†µä¸‹å¦‚æœæ”¶åˆ°äº†å¤šä¸ªå¤§ cycle äº¤æ˜“ä¹Ÿä¸èƒ½å¹¶è¡Œå¤„ç†ï¼Œæ¯”å¦‚ .bit å›¢é˜Ÿä¹‹å‰æœ‰è¿‡åé¦ˆä»–ä»¬é€šè¿‡æœ¬åœ° rpc åŒæ—¶æäº¤å¤šä¸ªå¤§ cycle äº¤æ˜“ä¼šæ¯”è¾ƒæ…¢çš„é—®é¢˜ã€‚</li>
</ol>
<h2 id="CKV-VM-pause"><a href="#CKV-VM-pause" class="headerlink" title="CKV-VM pause"></a>CKV-VM pause</h2><p>è¿™äº›é—®é¢˜çš„æ ¹æœ¬æ˜¯ VM åªèƒ½é€šè¿‡ cycle step çš„æ–¹å¼æ¥æš‚åœï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼æ˜¯æˆ‘ä»¬ä»»ä½•æ—¶å€™æƒ³æš‚åœå°±æš‚åœï¼Œå°±æ˜¯ event based çš„æ–¹å¼ã€‚æ‰€ä»¥åæ¥ CKB-VM å›¢é˜Ÿåšäº†ä¸€äº›æ”¹è¿›ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb-vm/pull/348">ckb-vm æ–°çš„æš‚åœæ–¹å¼</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb-vm/pull/345">feat: Add alternative snapshot design. #345</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb-vm/pull/299">Make ckb-vm thread-safety #299</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/pull/3752">CKB feature: thread-safe vm</a></li>
</ul>
<p>è¿™ä¸ªæ–¹æ³•çš„æœ¬è´¨æ˜¯é€šè¿‡ VM çš„ <code>set_pause</code> æ¥å£ï¼ŒæŠŠä¸€ä¸ª <code>Arc&lt;AtomicU8&gt;</code> çš„ pause å…±äº«å˜é‡è®¾ç½®ç»™ VMã€‚ç„¶ååœ¨ VM å¤–é€šè¿‡æ›´æ–°è¿™ä¸ª pause çš„å˜é‡è®© VM è¿›å…¥æš‚åœçŠ¶æ€æˆ–è€…ç»§ç»­æ‰§è¡Œï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦ dump snapshot ç­‰æ“ä½œï¼Œå› ä¸º VM æ•´ä¸ªå°±è¿˜æ˜¯åœ¨å†…å­˜ä¸­ç­‰ç€ï¼š</p>
<p><img src="/images/ob_ckb-vm-pause.png" alt=""></p>
<h2 id="æ–°çš„å®ç°æ–¹æ¡ˆ"><a href="#æ–°çš„å®ç°æ–¹æ¡ˆ" class="headerlink" title="æ–°çš„å®ç°æ–¹æ¡ˆ"></a>æ–°çš„å®ç°æ–¹æ¡ˆ</h2><p>åŸºäºè¿™äº›æ”¹è¿›æˆ‘ä»¬å¯ä»¥é‡æ–°è®¾è®¡å’Œå®ç° CKB verify è¿™éƒ¨åˆ†çš„ä»£ç ï¼Œä¸»è¦æ˜¯ä¸ºäº†ç®€åŒ–è¿™éƒ¨åˆ†ä»£ç ï¼Œå¹¶ä¸”æé«˜å¤§äº¤æ˜“å¤„ç†çš„æ•ˆç‡ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ queue based multiple worker æ–¹æ¡ˆï¼š</p>
<p><img src="/images/ob_new-ckb-verify.png" alt=""></p>
<p>ä¸»è¦çš„æ ¸å¿ƒæ˜¯å°±æ˜¯è¿™æ®µå¼‚æ­¥æ‰§è¡Œ VM çš„é€»è¾‘ï¼š<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/develop/script/src/verify.rs#L1166-L1269">chunk_run_with_signal</a>ã€‚åšçš„è¿‡ç¨‹ä¸­å‘ç°ä¸€äº›å…¶ä»–é—®é¢˜ï¼š</p>
<ul>
<li>äº¤æ˜“æäº¤çš„æ—¶å€™ï¼Œ<code>SubmitLocalTx</code> å’Œ <code>SubmitRemoteTx</code> å¦‚æœ verify å¤±è´¥ç›®å‰ä¼šç«‹å³è¿”å› <code>Reject</code>ï¼Œå¦‚æœæ”¹æˆåŠ å…¥é˜Ÿåˆ—çš„æ–¹å¼ï¼Œè¿™ä¸ªç»“æœæ— æ³•å®æ—¶ç»™åˆ°ï¼Œæ‰€ä»¥åšäº†å¦‚ä¸‹æ”¹åŠ¨ï¼š<ul>
<li>ä¼˜å…ˆå¤„ç†æœ¬åœ°çš„äº¤æ˜“ï¼Œæœ¬åœ°æäº¤çš„äº¤æ˜“ä¸ä¼šæ”¾å…¥ queueï¼Œè€Œæ˜¯ç›´æ¥ä¼šåœ¨ RPC çš„å¤„ç†é˜¶æ®µæ‰§è¡Œ</li>
<li>æ‰€æœ‰çš„æ¥è‡ªç½‘ç»œ peer çš„äº¤æ˜“éƒ½å…¨åˆ°æ”¾å…¥åˆ° queue</li>
</ul>
</li>
<li>åæ¥ CKB vm åˆæ–°å¢äº† spawn çš„å®ç°ï¼Œæ‰€ä»¥ä¼šæœ‰ parentã€child çš„æ¦‚å¿µï¼Œé‚£ä¹ˆ<code>Child VM</code> æ˜¯æ‰§è¡Œ syscall çš„æ—¶å€™æ‰§è¡Œ <code>machine.run</code> ï¼Œå¦‚æœä¸æ”¹è¿™å—æ‰§è¡Œ child vm çš„æ—¶å€™ä¸å¯æš‚åœ<ul>
<li>åæ¥æˆ‘ä»¬è®¨è®ºäº†ä¹‹åå†³å®š spawn æ—¶æŠŠçˆ¶çš„ <code>Pause</code> ä¼ é€’ç»™å­ï¼Œç„¶åæš‚åœçš„æ—¶å€™ç»™çˆ¶çš„ <code>Pause</code> è®¾ç½®æš‚åœï¼Œè¿™æ ·æ‰€æœ‰çš„å­ machine åŒæ ·è¿”å› <code>VMError::Pause</code> ï¼ŒåŒæ—¶æŠŠå½“å‰çš„ machine æ ˆé‡æ–°å…¥æ ˆï¼Œæ¢å¤çš„æ—¶å€™ç»§ç»­æ‰§è¡Œï¼Œè¿™é‡Œé€»è¾‘æ¯”è¾ƒé‡ï¼Œç›¸å…³ä»£ç å®ç°ï¼š<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/6f643220c704138298e693b0ef737c56a98ed762/script/src/verify.rs#L1452">run_vms_child</a>ã€‚</li>
</ul>
</li>
<li>åæ¥ç”¨é‡æ–°è®¾è®¡äº† spawnï¼Œä½¿ç”¨äº†ä¸€ç§æ–°çš„ determined scheduler çš„æ–¹å¼å»ç®¡ç†æ‰€æœ‰çš„ vms å’Œ IOï¼Œä¹‹å‰å’Œ VM çš„ä½¿ç”¨è€…è§’åº¦æ¥è¯´ä¹‹å‰éœ€è¦å’Œ VM äº¤äº’ï¼Œç°åœ¨å˜æˆäº†éƒ½é€šè¿‡<a target="_blank" rel="noopener" href="https://github.com/chenyukang/ckb/blob/8cb49e4d727f337a2c80e210507a9e277bab3391/script/src/scheduler.rs#L207-L236"> scheduler æ¥ç®¡ç†</a>ã€‚å…³äº spawn çš„è®¾è®¡å‚è€ƒè¿™ä¸ªæ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/rfcs/pull/436/files">Update spawn syscalls</a>ã€‚</li>
</ul>
<hr>
<p>æ•´ä¸ª PR åœ¨è¿™é‡Œï¼š<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/pull/4291">New script verify with ckb-vm pause</a></p>
</section>

    <p></p>
    <!-- äºŒç»´ç  START -->
    
        <div class="qrcode">
            <img src="/images/wechat-qr-code.jpg" height="160" width="160">
            <figcaption>å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»</figcaption>
      </div>
    

    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#CKB" >
    <span class="tag-code">CKB</span>
  </a>

  <a href="/tags#Rust" >
    <span class="tag-code">Rust</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2025/01/01/2024-summary.html">
        <span class="nav-arrow">â† </span>
        
          2024ï¼šç®€å•çš„ç†æƒ³ç”Ÿæ´»
        
      </a>
    
    
      <a class="nav-right" href="/2024/11/06/ckb-rbf.html">
        
          CKB RBF è®¾è®¡å’Œå®ç°
        
        <span class="nav-arrow"> â†’</span>
      </a>
    
  </div>

    <!-- NAV END -->

    <!-- äºŒç»´ç  END -->
    
      <!-- No Comment -->
    



    <script src="https://utteranc.es/client.js"
      repo="chenyukang/chenyukang.github.io"
      issue-term="pathname"
      theme="github-light"
      crossorigin="anonymous"
      async>
    </script>


  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title"></strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-nav-text">èƒŒæ™¯</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%A4%A7-cycle-%E4%BA%A4%E6%98%93%E7%9A%84%E6%8C%91%E6%88%98"><span class="toc-nav-text">å¤§ cycle äº¤æ˜“çš„æŒ‘æˆ˜</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#CKV-VM-pause"><span class="toc-nav-text">CKV-VM pause</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E6%96%B0%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88"><span class="toc-nav-text">æ–°çš„å®ç°æ–¹æ¡ˆ</span></a></li></ol>
    
  </div>
</aside>

  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://catcoding.me/2024/11/07/ckb-new-verify.html';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

     // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW * 3 / 4}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })

    // qrcode
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });

  })();
</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer" id="footer">
    <p class="copyright">
        &copy;
        2025 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a> with <a target="_blank" rel="noopener" href="https://github.com/yanm1ng/hexo-theme-vexo">Vexo</a>
    </p>
</footer>

<script>
    function async(u, c) {
        var d = document,
            t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) {
            o.addEventListener('load', function(e) {
                c(null, e);
            }, false);
        }
        s.parentNode.insertBefore(o, s);
    }
</script>
<script>
    async("//catcoding.me/js/fastclick.min.js", function() {
        FastClick.attach(document.body);
    })
</script>


<script src="/js/script.js"></script>

  </body>
</html>
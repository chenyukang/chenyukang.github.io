<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="All about coding and writing">
  <meta name="keyword" content="Programming, Programming Languages, Algorithms, Tools">
  <meta property="og:site_name" content="ç¨‹åºå‘˜çš„å–µ">
  <meta property="og:title" content="lcc é˜…è¯»è®°å½• | ç¨‹åºå‘˜çš„å–µ" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="" />
  <meta property="og:description" content="" />
  <meta property="og:image" content=" http://catcoding.me/css/images/logo.png " />
  <link rel="alternate" type="application/rss+xml" title="ç¨‹åºå‘˜çš„å–µ; Feed" href="https://catcoding.me/atom.xml" />

  
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/gitment.css">

  
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/fonts.css">

  
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/code.css">

  
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/prism.css">

  
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/font-awesome.min.css">

  
<script src="/js/qrious.js"></script>
<script src="/js/gitment.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/geopattern.min.js"></script>
<script src="/js/nprogress.min.js"></script>

  
  
  <link rel="shortcut icon" href="/css/images/favicon.ico">
  
  <title>
    
    lcc é˜…è¯»è®°å½• |
    ç¨‹åºå‘˜çš„å–µ
    
  </title>

  <div style='margin:0 auto;width:0px;height:0px;overflow:hidden;'>
    <img src="/css/images/logo.png" width='400px' height='400px' />
  </div>

  
  


  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-77282254-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-77282254-1');
  </script>

<meta name="generator" content="Hexo 5.4.2"></head>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>ç¨‹åºå‘˜çš„å–µ</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/home" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      

        <li class="list-item" style="margin: 0">
       <a class="icon-small" href="/search">
        <span class="fa-stack fa-lg">
          <i class="fa fa-search fa-stack-1x fa-inverse" style="color:#8ccb8c"></i>
        </span>
       </a>
      </li>

       <li class="list-item" style="margin-left: 3px">
        <a class="icon-small" href="/atom.xml">
         <span class="fa-stack fa-lg">
           <i class="fa fa-rss fa-inverse" style="color:orange"></i>
         </span>
        </a>
       </li>
    </ul>
    
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/home" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>lcc é˜…è¯»è®°å½•</h2>
  <p class="post-date">2014-09-14</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>


<main class="app-body flex-box">

  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><p>ä¹‹å‰çœ‹ EOPL æ„Ÿè§‰æ”¶è·æŒºå¤§ï¼Œæœ€è¿‘åˆèŠ±ä¸šä½™æ—¶é—´çœ‹äº†çœ‹ç¼–è¯‘ç›¸å…³çš„ä¸œè¥¿ï¼Œè¿™æ˜¯æˆ‘çœ‹ lcc çš„æ—¶å€™é¡ºæ‰‹è®°ä¸‹çš„ä¸€äº›è‡ªå·±çš„ç†è§£ã€‚è¿™æœ¬ä¹¦<a target="_blank" rel="noopener" href="http://book.douban.com/subject/1610344/">ã€ŠA Retargetable C Compilerã€‹</a>è¿˜æŒºå¤§å¤´çš„ã€‚lcc ä»£ç é‡ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œæ›´å¤æ‚çš„æ˜¯ tinyCCï¼ŒtinyCC ç”šè‡³å¯ä»¥ç›´æ¥è¿è¡Œ C ä»£ç ã€‚</p>
<h2 id="alloc-c"><a href="#alloc-c" class="headerlink" title="alloc.c"></a>alloc.c</h2><p>ä¸ºäº†å°½é‡çš„å°‘è°ƒç”¨ç³»ç»Ÿè°ƒç”¨ï¼Œåœ¨ alloc åŸºç¡€ä¸Šå°è£…äº†ä¸€ä¸‹ã€‚</p>
<h2 id="sym-c"><a href="#sym-c" class="headerlink" title="sym.c"></a>sym.c</h2><p>ç”¨æ¥å­˜å‚¨ symbolï¼Œæ³¨æ„ scope çš„è¡¨ç¤ºæ–¹æ³•ã€‚</p>
<h2 id="input-c"><a href="#input-c" class="headerlink" title="input.c"></a>input.c</h2><p>ä¸ºäº†å‡å°‘è¯»å–æ–‡ä»¶çš„å¼€é”€ï¼Œç”¨ä¸€ä¸ª buffer æ¥ç¼“å­˜æºæ–‡ä»¶å†…å®¹ã€‚cp è¡¨ç¤ºå½“å‰è¯»å–å‡ºæ¥çš„å­—ç¬¦ä½ç½®ï¼Œlimit è¡¨ç¤ºç¼“å­˜çš„ç»“å°¾å­—ç¬¦ä½ç½®ï¼Œå¦‚æœ fillbuf ä¸€æ¬¡ä»¥åä»ç„¶<code>cp == limit</code>åˆ™è¡¨ç¤ºè¯»å–æ–‡ä»¶åˆ° EOF äº†ã€‚</p>
<p>æ³¨æ„è¿™é‡Œçš„ fread è¯»å–çš„æ—¶å€™æ˜¯é€šè¿‡ stdin çš„ï¼Œä½†æ˜¯åœ¨ main.c/main_init å‡½æ•°çš„æ—¶å€™é€šè¿‡ freopen å°†æºæ–‡ä»¶é‡å®šå‘åˆ°äº† stdinã€‚</p>
<p>fillbuf å…¶å®è¯»å–çš„æ—¶å€™æ˜¯æ°¸è¿œå…ˆæŠŠå†…å®¹è¯»å–åˆ° buffer[MAXLINE+1] çš„ä½ç½®ï¼Œå¦‚æœå‘ç°<code>cp &lt; limit</code>å°±æŠŠå‰é¢å‰©ä¸‹çš„å†…å®¹å¾€å‰ç§»åŠ¨ï¼Œè¿™æ ·æ°¸è¿œä¿è¯ buffer è¶³å¤Ÿä¸‹ä¸€æ¬¡é¢„è¯»å–ï¼Œè¿™é‡Œæœ‰ç‚¹å·§å¦™ã€‚</p>
<p>æ¯”è¾ƒå¤æ‚çš„éƒ¨åˆ†æ˜¯å¤„ç† resynchï¼Œinput å¤„ç†çš„å†…å®¹æ˜¯ç»è¿‡ C è¯­è¨€é¢„å¤„ç†å™¨çš„ï¼Œè¿™éƒ¨åˆ†æ²¡æœ‰åŒ…å«åœ¨è¿™ä¸ªç¼–è¯‘å™¨å†…ã€‚</p>
<h2 id="lex-c"><a href="#lex-c" class="headerlink" title="lex.c"></a>lex.c</h2><p>ä¸€ä¸ªå®Œå…¨æ˜¯æ‰‹å†™çš„ C è¯­è¨€ Parserï¼Œè™½ç„¶åªæ˜¯å…¼å®¹ C99ï¼Œä½†æ‰‹å†™è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ã€‚<code>ç å†œçº¦æ¶æ¯”å†™ Parser æ˜¯ä¸ªä½“ç°å®åŠ›çš„æ¯”èµ›ã€‚</code></p>
<p>getchr é€ä¸ªå­—ç¬¦è¯»å–ï¼Œcp å°±æ˜¯ input.c é‡Œé¢çš„å½“å‰å­—ç¬¦ã€‚è·³è¿‡ BLANKï¼Œå¦‚æœç¢°åˆ° NEWLINE åˆ™è°ƒç”¨ input.c è¯»å–ä¸‹ä¸€è¡Œã€‚</p>
<p>token.h çœ‹èµ·æ¥æœ‰å¾ˆå¤šåˆ—ï¼Œè¿™ä¸ªæ–‡ä»¶è¢«å¤šä¸ªåœ°æ–¹ç”¨åˆ°ã€‚æ˜¯ç”¨å®æ¥ç”Ÿæˆä¸€äº› Enum é‡Œé¢çš„ä»£ç ã€‚æ¯”å¦‚ token type å’Œ expr typeã€‚</p>
<p>gettok é¡¾åæ€ä¹‰åœ¨ lex è¿è¡Œçš„æ—¶å€™ä¸æ–­æä¾›ä¸€ä¸ªä¸€ä¸ªçš„ tokenï¼Œè¿™ä¸»è¦æ˜¯é€šè¿‡ cp åŒ¹é… map æ¥åˆ¤æ–­ï¼Œæ¡ä»¶åˆ†æ”¯å¾ˆå¤š (ä¾æ®å½“å‰çš„ç¬¬ä¸€ä¸ªå­—ç¬¦)ã€‚<code>register unsigned char* rpc</code>å­˜å‚¨å½“å‰å­—ç¬¦ã€‚<code>register ä½œä¸ºä¸€ä¸ªå¯¹ç¼–è¯‘å™¨çš„æç¤ºï¼Œå°½é‡ç”¨ register æ¥å­˜å‚¨å˜é‡ã€‚äº‹å®ä¸Šç°åœ¨çš„ç¼–è¯‘å™¨å¾ˆå¤šéƒ½èƒ½åš auto register allocationï¼Œæœ‰çš„æ—¶å€™ç¼–è¯‘å™¨çš„é€‰æ‹©å¯èƒ½æ¯”äººçš„é€‰æ‹©æ›´å¥½ã€‚register åœ¨è€çš„ C ä»£ç é‡Œé¢å¯èƒ½æ›´ä¸ºå¸¸è§ã€‚</code></p>
<p>è¿™ä¸ªå‡½æ•°é‡Œé¢å¾ˆå¤šåœ°æ–¹éƒ½ç”¨åˆ°äº† gotoï¼Œä¸»è¦æ˜¯åœ¨åŒ¹é…å…³é”®å­—çš„æ—¶å€™åŒºåˆ† identifierã€‚ä¸»è¦å‡ å¤§ç±»æ˜¯: number, keyword, identifier, stringã€‚ icon å¤„ç†æ•°å­—çš„å‰ç¼€ï¼Œfcon å¤„ç†æµ®ç‚¹æ•°ã€‚</p>
<p>Lexical analyzer åŸºæœ¬ç†è®ºæ˜¯è‡ªåŠ¨çŠ¶æ€æœºï¼Œæ²¡ä¸€ä¸ª token å¯ä»¥æ ¹æ®ç›¸åº”çš„æ­£åˆ™è¡¨è¾¾å¼æ¥è¡¨ç¤ºã€‚æœ‰ä¸€äº›å·¥å…·å¯ä»¥ç”¨æ¥è‡ªåŠ¨ç”Ÿæˆè¿™äº›ç¹ççš„ä»£ç ï¼Œæ¯”å¦‚ LEXï¼Œæ›´æ–°ä¸€äº›çš„æœ‰ Flex å’Œ re2cã€‚</p>
<h2 id="error-c"><a href="#error-c" class="headerlink" title="error.c"></a>error.c</h2><p>ç»ˆäºæ¥åˆ° Parser éƒ¨åˆ†äº†ï¼Œlcc ä½¿ç”¨çš„æ˜¯ recursive-descentï¼Œå¾ˆå¤šå•†ä¸šçš„ç¼–è¯‘å™¨éƒ½æ˜¯ç”¨çš„è¿™ç§ç›´è§‚çš„ç®—æ³•ï¼Œäº‹å®ä¸Šå¯¹äºå¤§éƒ¨åˆ†è¯­è¨€éƒ½è¶³å¤Ÿäº†ã€‚recursive-descent æ˜¯è‡ªä¸Šè€Œä¸‹çš„é€’å½’çš„ï¼Œä¾æ®å½“å‰çš„ token åŒ¹é…è¯­æ³•ç»“æ„ã€‚ä¸€ä¸ªé‡è¦çš„é—®é¢˜æ˜¯å¦‚ä½•åœ¨å¤„ç†çš„è¿‡ç¨‹ä¸­ç»™å‡ºé€‚å½“çš„é”™è¯¯ä¿¡æ¯ã€‚error.c é‡Œé¢çš„å‡½æ•° test å’Œ expect ç”¨æ¥æµ‹è¯•ä¸‹ä¸€ä¸ª token æ˜¯å¦æ˜¯é¢„æœŸçš„ï¼Œexpect å¯ä»¥æ‰“å°å‡ºé”™è¯¯ä¿¡æ¯ã€‚</p>
<h2 id="tree-c"><a href="#tree-c" class="headerlink" title="tree.c"></a>tree.c</h2><p>æœ€é‡è¦çš„æ•°æ®ç»“æ„ struct treeï¼ŒAST ä¸­çš„åŸºæœ¬èŠ‚ç‚¹ï¼ŒåŒ…å«å­èŠ‚ç‚¹ï¼Œå’Œ operator ç±»å‹ (æ¯”å¦‚ ANDï¼ŒORï¼ŒNOT ç­‰ï¼‰ã€‚åœ¨æ„å»º AST çš„æ—¶å€™ root å‡½æ•°ç»å¸¸è¢«ç”¨åˆ°ã€‚</p>
<h2 id="expr-c-enode-c"><a href="#expr-c-enode-c" class="headerlink" title="expr.c enode.c"></a>expr.c enode.c</h2><p>parser çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ¥è¯†åˆ«è¡¨è¾¾å¼ã€‚ä»£ç å¥½å¤æ‚ï¼Œå’Œ paresr æœ‰äº›ç±»ä¼¼ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯æ„å»º ASTã€‚ç¼–è¯‘å™¨çš„å‰ç«¯æœ€é‡è¦çš„äº‹æƒ…å°±æ˜¯è¿™äº†ï¼Œåé¢çš„æ“ä½œéƒ½æ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä¸Šåšçš„ã€‚ä¸ºä»€ä¹ˆ Scheme/Lisp çš„ front éƒ¨åˆ†æ¯”è¾ƒç®€å•ï¼Œå› ä¸ºè¿™è´§ä»£ç å°±å’Œ AST æœ‰äº›ç±»ä¼¼äº†ï¼Œæ‹¬å·æŠŠä¸€ä¸ªä¸€ä¸ªçš„èŠ‚ç‚¹ç»„åˆäº†èµ·æ¥ã€‚åˆçœ‹èµ·æ¥å¾ˆéš¾çœ‹ï¼Œå…¶å®ä¹ æƒ¯äº†è¿˜å¥½ã€‚</p>
<p>ä¸Šé¢è¯´çš„æ˜¯è¯­æ³•çš„è¯†åˆ«ï¼Œåœ¨æ„å»º AST çš„è¿‡ç¨‹ä¸­å¦å¤–ä¸€ä¸ªäº‹æƒ…å°±æ˜¯è¯­æ„çš„åˆ†æã€‚åŒ…æ‹¬ç±»å‹æ£€æŸ¥ï¼Œç±»å‹çš„è½¬æ¢ï¼Œæ“ä½œç¬¦ä¼˜å…ˆçº§ç­‰ï¼Œè¿™äº›ä¹Ÿåœ¨æ„å»º AST çš„æ—¶å€™é¡ºä¾¿åšäº†ã€‚æ¯”å¦‚åœ¨é‡åˆ° expr1 ? expr2 : expr3 çš„æ—¶å€™ï¼Œexpr1 çš„å€¼æœ€åè¢« cast æˆä¸€ä¸ª boolã€‚æŒ‡é’ˆä¹‹é—´çš„éšå¼è½¬æ¢ä¹Ÿæ¯”è¾ƒå¤æ‚ã€‚function call æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œè¿˜åšäº†å‡½æ•°å‚æ•°çš„å†™æ³•æ˜¯å¦æ˜¯è€çš„é£æ ¼ï¼Œç±»å‹è¯´æ˜æ”¾åœ¨å‡½æ•°å¤´çš„æœ€åã€‚assignments å’Œ binary operator çš„åˆ†æç›¸å¯¹æ¥è¯´ç®€å•ä¸€äº›ï¼Œéœ€è¦åšå„ç§ castã€‚</p>
<p>å‰äº›å¤©ç¨å¾®çœ‹äº†ä¸€äº› Erlangï¼Œå‘ç°é‡Œé¢çš„ç±»å‹æ¨å¯¼æ¯”è¾ƒå¥½ç©ï¼Œç”šè‡³å¯ä»¥å‘ç°ä¸€äº›ä»£ç é‡Œé¢çš„é€»è¾‘é”™è¯¯ï¼š</p>
<p>æ¯”å¦‚ï¼š</p>
<pre class="line-numbers language-erlang" data-language="erlang"><code class="language-erlang"><span class="token function">fact</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">fact</span><span class="token punctuation">(</span><span class="token variable">N</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token variable">N</span> <span class="token operator">*</span> <span class="token function">fact</span><span class="token punctuation">(</span><span class="token variable">N</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token function">fact</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>ä¸ç”¨è¿è¡Œ Erlang çš„ dialyzer å°±å¯ä»¥å‘ç°è¿™é‡Œé¢çš„æ­»å¾ªç¯ï¼Œå› ä¸ºå¯ä»¥é€šè¿‡ä¸Šé¢çš„å®šä¹‰æ¨æ–­å‡º fact çš„å‚æ•°æ˜¯ non_neg_integerï¼Œè€Œ-5 æ˜¯ä¸ç¬¦åˆçš„ï¼Œæ‰€ä»¥æŠ¥å‡ºæ¥ä¸€ä¸ªé”™è¯¯ï¼š</p>
<p><code>fact(-5) will never return</code>ã€‚</p>
<h2 id="stmt-c"><a href="#stmt-c" class="headerlink" title="stmt.c"></a>stmt.c</h2><p>codelist ä¸ºåŒå‘åˆ—è¡¨ï¼Œé‡åˆ°æ–°çš„æ‰§è¡Œå—å°±åŠ åˆ°è¿™ä¸ªåˆ—è¡¨ä¸Šã€‚åœ¨å¤„ç† control-flow çš„è¿‡ç¨‹ä¸­æœ‰çš„æ­»ä»£ç å—æ˜¯å¯ä»¥è¢«ç¼–è¯‘å™¨å‘ç°çš„ï¼Œåªæ˜¯æˆ‘ä»¬å¹³æ—¶éƒ½è¢«å¿½ç•¥äº†ã€‚</p>
<p>æ¯”å¦‚ C ä»£ç ï¼š<br><pre class="line-numbers language-erlang" data-language="erlang"><code class="language-erlang"><span class="token atom">int</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
 <span class="token variable">Loop</span><span class="token punctuation">:</span>
    <span class="token atom">goto</span> <span class="token variable">Loop</span><span class="token punctuation">;</span>
    <span class="token atom">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token atom">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"loop: %d\n"</span><span class="token punctuation">,</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token atom">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>loop æ°¸è¿œä¸ä¼šè¿”å›ï¼ŒGcc é€‰é¡¹<code>-Wsuggest-attribute=noreturn</code>å¯ä»¥æŠ¥å‡ºä¸€ä¸ª warningã€‚</p>
<h2 id="decl-c"><a href="#decl-c" class="headerlink" title="decl.c"></a>decl.c</h2><p>å£°æ˜æ˜¯ C è¯­è¨€ä¸­æœ€éš¾è§£æçš„éƒ¨åˆ†ï¼ŒåŸå› æ˜¯å£°æ˜æ¶‰åŠåˆ°å˜é‡å’Œç±»å‹ï¼Œè€Œä» C å£°æ˜ä¸­å¼„å‡ºç±»å‹ä¿¡æ¯è¿˜æ˜¯æŒºå¤æ‚çš„ã€‚å¦å¤–å£°æ˜è¿˜åˆ†å±€éƒ¨ï¼Œå…¨å±€ï¼Œå…¶ä¸­è¿˜æ¶‰åŠåˆ°å‡½æ•°å‚æ•°ï¼Œç»“æ„ä½“ç­‰ã€‚decl.c å¯èƒ½æ˜¯æœ€å¤æ‚çš„æ–‡ä»¶äº†ï¼Œ1100 å¤šè¡Œä»£ç ï¼Œé‡Œé¢çš„å‡½æ•°ä¹‹é—´åˆç›¸äº’è°ƒç”¨ã€‚finalize() å‡½æ•°æœ€åæ£€æŸ¥æ˜¯å¦æœ‰é‡å¤å®šä¹‰çš„å˜é‡ã€‚</p>
<h2 id="dag-c"><a href="#dag-c" class="headerlink" title="dag.c"></a>dag.c</h2><p>lcc çš„ intermediate code æ˜¯ç”¨ listnodes æŠŠå‰é¢ parser çš„ tree è½¬æ¢ä¸º DAGï¼Œæœ€ç»ˆæ•´ä¸ªç¨‹åºä¼šç»è¿‡è½¬æ¢å˜æˆç”±å¤šä¸ª DAG ç»„åˆæˆçš„æ£®æ—ã€‚listnodes è¿˜è´Ÿè´£æŠŠä¸€äº›å…¬å…±çš„ sub-expression ç®€åŒ–ã€‚</p>
<p>æ¥å£ä¸º gencode,emitcodeã€‚åé¢æ¯ä¸€ä¸ªä»£ç ç”Ÿæˆçš„åç«¯éƒ½æ˜¯ä¸€ä¸ª Interface ç»“æ„ï¼Œåœ¨ function å‡½æ•°é‡Œé¢è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°ç”Ÿæˆæ±‡ç¼–ä»£ç ï¼Œå…¶ä¸­è¿˜åŒ…å«ä¸€ä¸ª Xinterface æˆå‘˜ï¼Œè¿™æ˜¯å¹³å°ç›¸å…³çš„æ¥å£ã€‚</p>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>åˆ°ç°åœ¨æˆ‘åªæ˜¯å¤§æ¦‚çœ‹äº†äº†å‰ç«¯å’Œä¸­é—´å±‚ï¼Œåé¢ lcc è·¨å¹³å°çš„æŒ‡ä»¤ç”Ÿæˆè¿˜æ²¡æ¥å¾—åŠç ”ç©¶ï¼Œè¿™æœ¬ä¹¦çš„ç”µå­ç‰ˆä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œè¿˜æ˜¯ä¹°ä¸ªä¸­æ–‡ç‰ˆæ¥å†ç¨å¾®çœ‹çœ‹ã€‚æ€»çš„æ¥è¯´ï¼Œlcc æ˜¯çš„ Parsing å’Œè¯­ä¹‰åˆ†ææ˜¯åŒæ—¶è¿›è¡Œçš„ï¼Œå°±æ˜¯æ‰€è°“çš„ one-pass æ–¹æ³•ã€‚ç°åœ¨å¾ˆå¤šç¼–è¯‘å™¨æ‰€ç”¨çš„æ–¹æ³•æ˜¯å…ˆå»ºç«‹ ASTï¼Œåé¢å¯èƒ½è¦å¤šæ¬¡éå†æ•´ä¸ª AST è¿›è¡Œåˆ†æï¼ŒLLVM å¥½åƒå°±æ˜¯é‡‡ç”¨çš„è¿™ç§æ–¹æ¡ˆã€‚å¦å¤–ä»£ç çš„ä¼˜åŒ–æ˜¯ä¸€ä¸ª trade-offï¼Œä½œä¸ºæ•™å­¦ç”¨é€”çš„ lcc æ²¡æœ‰è¿‡å¤šåšä»£ç ä¼˜åŒ–ï¼Œè¿™æ · lcc ä»£ç è¿˜æ˜¯å¯ä»¥èŠ±ä¸å¤šçš„æ—¶é—´æ¥ä¸€ä¸ªå¤§æ¦‚çš„å­¦ä¹ ã€‚</p>
</section>

    <p></p>
    <!-- äºŒç»´ç  START -->
    
        <div class="qrcode">
            <img src="/images/wechat-qr-code.jpg" height="160" width="160">
            <figcaption>å…¬å·åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ‘»</figcaption>
      </div>
    

    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#Programming" >
    <span class="tag-code">Programming</span>
  </a>

  <a href="/tags#Compiler" >
    <span class="tag-code">Compiler</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2015/01/10/rust-10-alpha.html">
        <span class="nav-arrow">â† </span>
        
          Rust coming to 1.0
        
      </a>
    
    
      <a class="nav-right" href="/2014/08/01/install-server.html">
        
          æŠ˜è…¾æœåŠ¡å™¨
        
        <span class="nav-arrow"> â†’</span>
      </a>
    
  </div>

    <!-- NAV END -->

    <!-- äºŒç»´ç  END -->
    
      <!-- No Comment -->
    

    <script src="https://utteranc.es/client.js"
      repo="chenyukang/chenyukang.github.io"
      issue-term="pathname"
      theme="github-light"
      crossorigin="anonymous"
      async>
    </script>

  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title"></strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#alloc-c"><span class="toc-nav-text">alloc.c</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#sym-c"><span class="toc-nav-text">sym.c</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#input-c"><span class="toc-nav-text">input.c</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#lex-c"><span class="toc-nav-text">lex.c</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#error-c"><span class="toc-nav-text">error.c</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#tree-c"><span class="toc-nav-text">tree.c</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#expr-c-enode-c"><span class="toc-nav-text">expr.c enode.c</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#stmt-c"><span class="toc-nav-text">stmt.c</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#decl-c"><span class="toc-nav-text">decl.c</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#dag-c"><span class="toc-nav-text">dag.c</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-nav-text">å°ç»“</span></a></li></ol>
    
  </div>
</aside>

  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://catcoding.me/2014/09/14/a-retargetable-c-compiler-design-and-implementation.html';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

     // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })

    // qrcode
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });

  })();
</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer" id="footer">
    <p class="copyright">
        &copy;
        2022 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a> with <a target="_blank" rel="noopener" href="https://github.com/yanm1ng/hexo-theme-vexo">Vexo</a>
    </p>
</footer>

<script>
    function async(u, c) {
        var d = document,
            t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) {
            o.addEventListener('load', function(e) {
                c(null, e);
            }, false);
        }
        s.parentNode.insertBefore(o, s);
    }
</script>
<script>
    async("//catcoding.me/js/fastclick.min.js", function() {
        FastClick.attach(document.body);
    })
</script>


<script src="/js/script.js"></script>

  </body>
</html>
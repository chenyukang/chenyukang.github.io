<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CatCoding</title>
  <link href="http://catcoding.me/atom.xml" rel="self"/>
  <link href="http://catcoding.me/"/>
  <updated>2026-02-13T06:43:21.025469699+00:00</updated>
  <id>http://catcoding.me/</id>
  <author><name>yukang</name></author>
  <entry>
    <title>macOS å¥‡æ€ªçš„å®‰å…¨æ‰«ç æœºåˆ¶</title>
    <link href="http://catcoding.me/p/apple-gatekeeper-scan/"/>
    <id>http://catcoding.me/p/apple-gatekeeper-scan/</id>
    <published>2026-02-12T16:55:52+00:00</published>
    <updated>2026-02-13T06:43:00.091220767+00:00</updated>
    <content type="html"><![CDATA[<p>ä»Šå¤©è·‘ Rust ç¼–è¯‘å™¨æµ‹è¯•çš„æ—¶å€™åˆå‘ç°éå¸¸åœ°æ…¢ï¼ŒCPU èµ„æºæ ¹æœ¬æ— æ³•åˆ©ç”¨èµ·æ¥ï¼Œæˆ‘è®°å¾—å‡ å¹´å‰ç¢°åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œå½“æ—¶æˆ‘å†™äº†ç¯‡<a target="_blank" rel="noopener" href="https://catcoding.me/p/apple-perf/">æ–‡ç« </a>åˆ†äº«å‡ºæ¥ï¼Œå¹¶å‘ç°å¾ˆå¤šäººéƒ½æœ‰åŒæ ·çš„å›°æ‰°ã€‚</p>
<p>è€Œæˆ‘ä»Šå¤©ç¢°åˆ°çš„è¿™ä¸ªé—®é¢˜è™½ç„¶ç°è±¡ä¸€æ ·ï¼Œä½†è§£å†³æ–¹æ³•åˆä¸åŒäº†ã€‚æˆ‘ä¸ç¡®å®šæ˜¯ macOS ç³»ç»Ÿæ›´æ–°ï¼Œäº¦æˆ–æ˜¯æˆ‘æ›´æ–°äº† VS Code é€ æˆçš„ã€‚</p>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2>
<p>å¤ç°è„šæœ¬å¾ˆç®€å•ï¼Œå¾ªç¯åˆ›å»ºéšæœºå‘½åçš„ shell è„šæœ¬ï¼Œç„¶åå¯¹æ¯”é¦–æ¬¡å’Œå†æ¬¡æ‰§è¡Œçš„è€—æ—¶ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shell bash"><span class="token comment number-sign shell"><span class="token punctuation definition comment begin shell">#</span></span><span class="token comment number-sign shell">!/bin/bash</span><span class="token comment number-sign shell">
</span><span class="token function-call shell"><span class="token variable function shell">rm</span></span><span class="token function-call arguments shell"><span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> -</span>rf</span> /tmp/speed_test</span>
<span class="token function-call shell"><span class="token variable function shell">mkdir</span></span><span class="token function-call arguments shell"><span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> -</span>p</span> /tmp/speed_test</span>

<span class="token keyword for shell">for</span><span class="token group for shell"> i <span class="token keyword in shell">in</span> <span class="token group expansion brace shell"><span class="token punctuation section expansion brace begin shell">{</span>1..10<span class="token punctuation section expansion brace end shell">}</span></span></span><span class="token operator logical continue shell">;</span> <span class="token keyword do shell">do</span>
    <span class="token variable other readwrite assignment shell">FILENAME</span><span class="token operator assignment shell">=</span><span class="token string unquoted shell"><span class="token group expansion command parens shell"><span class="token punctuation definition variable shell">$</span><span class="token punctuation section parens begin shell">(</span><span class="token function-call shell"><span class="token variable function shell">openssl</span></span><span class="token function-call arguments shell"> rand<span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> -</span>hex</span> 10</span><span class="token punctuation section parens end shell">)</span></span></span>
    <span class="token function-call shell"><span class="token function echo shell">echo</span></span><span class="token function-call arguments shell"> <span class="token string single ansi-c shell"><span class="token punctuation definition string begin shell">$&#39;</span>#!/bin/sh<span class="constant character escape shell">\n</span>echo Hello<span class="token punctuation definition string end shell">&#39;</span></span> <span class="token operator assignment redirection shell">&gt;</span> <span class="token string double shell"><span class="token punctuation definition string begin shell">&quot;</span>/tmp/speed_test/<span class="token group expansion parameter shell"><span class="token punctuation definition variable shell">$</span><span class="token variable other readwrite shell">FILENAME</span></span>.sh<span class="token punctuation definition string end shell">&quot;</span></span></span>
    <span class="token function-call shell"><span class="token variable function shell">chmod</span></span><span class="token function-call arguments shell"> a+x <span class="token string double shell"><span class="token punctuation definition string begin shell">&quot;</span>/tmp/speed_test/<span class="token group expansion parameter shell"><span class="token punctuation definition variable shell">$</span><span class="token variable other readwrite shell">FILENAME</span></span>.sh<span class="token punctuation definition string end shell">&quot;</span></span></span>
    <span class="token variable other readwrite assignment shell">FILE</span><span class="token operator assignment shell">=</span><span class="token string unquoted shell"><span class="token string double shell"><span class="token punctuation definition string begin shell">&quot;</span>/tmp/speed_test/<span class="token group expansion parameter shell"><span class="token punctuation definition variable shell">$</span><span class="token variable other readwrite shell">FILENAME</span></span>.sh<span class="token punctuation definition string end shell">&quot;</span></span></span>

    <span class="token variable other readwrite assignment shell">first</span><span class="token operator assignment shell">=</span><span class="token string unquoted shell"><span class="token group expansion command parens shell"><span class="token punctuation definition variable shell">$</span><span class="token punctuation section parens begin shell">(</span><span class="token function-call shell"><span class="token variable function shell">TIMEFORMAT</span></span><span class="token function-call arguments shell">=<span class="token string double shell"><span class="token punctuation definition string begin shell">&quot;</span>%R<span class="token punctuation definition string end shell">&quot;</span></span></span><span class="token operator logical continue shell">;</span> <span class="token punctuation definition compound begin shell">(</span><span class="token function-call shell"><span class="token variable function shell">time</span></span><span class="token function-call arguments shell"> <span class="token group expansion parameter shell"><span class="token punctuation definition variable shell">$</span><span class="token variable other readwrite shell">FILE</span></span> <span class="token operator assignment redirection shell">&gt;</span> /dev/null</span><span class="token punctuation definition compound end shell">)</span><span class="token function-call arguments shell"> <span class="token number integer decimal file-descriptor shell">2</span><span class="token operator assignment redirection shell">&gt;&amp;</span><span class="token number integer decimal file-descriptor shell">1</span></span><span class="token punctuation section parens end shell">)</span></span></span>
    <span class="token variable other readwrite assignment shell">second</span><span class="token operator assignment shell">=</span><span class="token string unquoted shell"><span class="token group expansion command parens shell"><span class="token punctuation definition variable shell">$</span><span class="token punctuation section parens begin shell">(</span><span class="token function-call shell"><span class="token variable function shell">TIMEFORMAT</span></span><span class="token function-call arguments shell">=<span class="token string double shell"><span class="token punctuation definition string begin shell">&quot;</span>%R<span class="token punctuation definition string end shell">&quot;</span></span></span><span class="token operator logical continue shell">;</span> <span class="token punctuation definition compound begin shell">(</span><span class="token function-call shell"><span class="token variable function shell">time</span></span><span class="token function-call arguments shell"> <span class="token group expansion parameter shell"><span class="token punctuation definition variable shell">$</span><span class="token variable other readwrite shell">FILE</span></span> <span class="token operator assignment redirection shell">&gt;</span> /dev/null</span><span class="token punctuation definition compound end shell">)</span><span class="token function-call arguments shell"> <span class="token number integer decimal file-descriptor shell">2</span><span class="token operator assignment redirection shell">&gt;&amp;</span><span class="token number integer decimal file-descriptor shell">1</span></span><span class="token punctuation section parens end shell">)</span></span></span>
    <span class="token function-call shell"><span class="token function echo shell">echo</span></span><span class="token function-call arguments shell"> <span class="token string double shell"><span class="token punctuation definition string begin shell">&quot;</span>ç¬¬ä¸€æ¬¡: <span class="token group expansion parameter shell"><span class="token punctuation definition variable shell">$</span><span class="token variable other readwrite shell">first</span></span>  ç¬¬äºŒæ¬¡: <span class="token group expansion parameter shell"><span class="token punctuation definition variable shell">$</span><span class="token variable other readwrite shell">second</span></span><span class="token punctuation definition string end shell">&quot;</span></span></span>
<span class="token keyword done shell">done</span>
</span></code></pre>
<p>åœ¨ VS Code ç»ˆç«¯çš„è¾“å‡ºï¼š</p>
<pre class="line-numbers language-console" data-language="console"><code class="language-console">ç¬¬ä¸€æ¬¡: 0.525  ç¬¬äºŒæ¬¡: 0.007
ç¬¬ä¸€æ¬¡: 0.290  ç¬¬äºŒæ¬¡: 0.009
ç¬¬ä¸€æ¬¡: 0.280  ç¬¬äºŒæ¬¡: 0.007
ç¬¬ä¸€æ¬¡: 0.272  ç¬¬äºŒæ¬¡: 0.008
ç¬¬ä¸€æ¬¡: 0.307  ç¬¬äºŒæ¬¡: 0.008
...
</code></pre>
<p>å·®è·å¤§æ¦‚ 30-50 å€ã€‚æ¢åˆ° Warp ç»ˆç«¯è·‘åŒä¸€ä¸ªè„šæœ¬ï¼Œä¸¤æ¬¡éƒ½åœ¨ 0.006s å·¦å³ã€‚</p>
<h2 id="å®šä½ï¼šsyspolicyd"><a href="#å®šä½ï¼šsyspolicyd" class="headerlink" title="å®šä½ï¼šsyspolicyd"></a>å®šä½ï¼šsyspolicyd</h2>
<p>åº”è¯¥ä¸æ˜¯æˆ‘ä¸Šç¯‡æ–‡ç« æåˆ°çš„ SIP é—®é¢˜ï¼Œæˆ‘ç¡®å®š <strong>System Settings â†’ Privacy &amp; Security â†’ Developer Tools</strong> ä¸­å·²ç»åŠ å…¥äº† VS Codeã€‚</p>
<p>çœ‹èµ·æ¥ä¹Ÿä¸åƒæ˜¯æ–‡ä»¶ç³»ç»Ÿç¼“å­˜çš„åŸå› ï¼Œå› ä¸º 0.2-0.5 ç§’è¿œè¶…ç£ç›˜ç¼“å­˜çš„é‡çº§ã€‚ç”¨ <code>log show</code> çœ‹äº†ä¸‹ç³»ç»Ÿæ—¥å¿—ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shell bash"><span class="token function-call shell"><span class="token variable function shell">log</span></span><span class="token function-call arguments shell"> show<span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> --</span>predicate</span> <span class="token string single shell"><span class="token punctuation definition string begin shell">&#39;</span>subsystem == &quot;com.apple.syspolicy.exec&quot;<span class="token punctuation definition string end shell">&#39;</span></span><span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> --</span>last</span> 2m<span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> --</span>style</span> compact</span>
</span></code></pre>
<p>è¾“å‡ºå¤§é‡è¿™æ ·çš„è®°å½•ï¼š</p>
<pre class="line-numbers language-console" data-language="console"><code class="language-console">GK performScan: PST: (path: 8d0e4c2de41c3e77), (team: (null)), (id: (null)), (bundle_id: (null))
Error Domain=NSOSStatusErrorDomain Code=-67062
GK evaluateScanResult: 2, PST: (path: 8d0e4c2de41c3e77), ... (bundle_id: NOT_A_BUNDLE), 0, 0, 1, 0, 7, 7, 0
</code></pre>
<p>ä»æ—¥å¿—ä¸Šçœ‹æ¯æ¬¡æ‰§è¡Œæ–°æ–‡ä»¶ <code>syspolicyd</code> éƒ½ä¼šåšä¸€æ¬¡ <code>GK performScan</code>ã€‚è¿™å°±æ˜¯ macOS çš„ Gatekeeper å®‰å…¨æ‰«æâ€”â€”å¯¹é¦–æ¬¡æ‰§è¡Œçš„æ–°å¯æ‰§è¡Œæ–‡ä»¶åšä»£ç ç­¾åéªŒè¯å’Œæ¶æ„è½¯ä»¶æ£€æŸ¥ã€‚æ‰«æç»“æœä¼šè¢«ç¼“å­˜ï¼Œæ‰€ä»¥åŒä¸€ä¸ªæ–‡ä»¶ç¬¬äºŒæ¬¡æ‰§è¡Œå°±å¿«äº†ã€‚</p>
<p>è¿›ä¸€æ­¥éªŒè¯ï¼šæˆ‘ä»¬æŠŠæµ‹è¯•è„šæœ¬é‡Œæ”¹æˆ <code>(time /bin/sh $FILE &gt; /dev/null) 2&gt;&amp;1</code>ï¼Œè¿™æ ·å°±æ˜¯ç›´æ¥é€šè¿‡ sh æ¥æ‰§è¡Œï¼š</p>
<pre class="line-numbers language-console" data-language="console"><code class="language-console">ç›´æ¥æ‰§è¡Œ ./script.sh  â†’ 0.248s (è§¦å‘ execve â†’ Gatekeeper æ‰«æ)
/bin/sh ./script.sh   â†’ 0.006s (åªæ˜¯è®© /bin/sh è¯»å–æ–‡ä»¶ï¼Œä¸è§¦å‘å®‰å…¨æ‰«æ)
</code></pre>
<p>åŸå› ç¡®è®¤äº†ã€‚å½“ç”¨ <code>./script.sh</code> æ‰§è¡Œæ—¶ï¼Œå†…æ ¸çš„ <code>execve</code> ç³»ç»Ÿè°ƒç”¨ä¼šè§¦å‘ <code>AppleSystemPolicy.kext</code> ä¸­çš„ MACF hook (<code>mpo_proc_notify_exec_complete</code>)ï¼Œé€šçŸ¥ <code>syspolicyd</code> è¿›è¡Œè¯„ä¼°ã€‚è€Œ <code>/bin/sh script.sh</code> åªæ˜¯è®©å·²å—ä¿¡çš„ <code>/bin/sh</code> è¿›ç¨‹è¯»å–æ–‡ä»¶å†…å®¹æ¥è§£é‡Šæ‰§è¡Œï¼Œä¸è§¦å‘ <code>execve</code> çš„å®‰å…¨æ£€æŸ¥è·¯å¾„ã€‚</p>
<h2 id="Full-Disk-Access-æœ‰æ•ˆ"><a href="#Full-Disk-Access-æœ‰æ•ˆ" class="headerlink" title="Full Disk Access æœ‰æ•ˆ"></a>Full Disk Access æœ‰æ•ˆ</h2>
<p>æ¥ç€è¯•äº† <strong>System Settings â†’ Privacy &amp; Security â†’ Full Disk Access</strong>ï¼Œç»™ VS Code å®Œå…¨ç£ç›˜è®¿é—®æƒé™ã€‚é‡å¯ VS Codeï¼Œå†è·‘è„šæœ¬ï¼š</p>
<pre class="line-numbers language-console" data-language="console"><code class="language-console">ç¬¬ä¸€æ¬¡: 0.005  ç¬¬äºŒæ¬¡: 0.005
ç¬¬ä¸€æ¬¡: 0.005  ç¬¬äºŒæ¬¡: 0.005
ç¬¬ä¸€æ¬¡: 0.006  ç¬¬äºŒæ¬¡: 0.006
...
</code></pre>
<p>é—®é¢˜æ¶ˆå¤±äº†ã€‚<code>syspolicyd</code> æ—¥å¿—ä¸­çš„ <code>performScan</code> ä¹Ÿä¸å†å‡ºç°ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆ-Full-Disk-Access-æœ‰æ•ˆ"><a href="#ä¸ºä»€ä¹ˆ-Full-Disk-Access-æœ‰æ•ˆ" class="headerlink" title="ä¸ºä»€ä¹ˆ Full Disk Access æœ‰æ•ˆ"></a>ä¸ºä»€ä¹ˆ Full Disk Access æœ‰æ•ˆ</h2>
<p>Full Disk Access (FDA) åœ¨ macOS çš„ TCC (Transparency, Consent, and Control) æ¡†æ¶ä¸­å¯¹åº”çš„æ˜¯ <code>kTCCServiceSystemPolicyAllFiles</code> æƒé™ã€‚è¿™ä¸ªæƒé™çš„å«ä¹‰è¿œè¶…â€œç£ç›˜è®¿é—®â€œâ€”â€”å®ƒå®é™…ä¸Šæ˜¯ TCC æ¡†æ¶ä¸­æœ€é«˜çº§åˆ«çš„ä¿¡ä»»æˆæƒã€‚</p>
<p>macOS ä¼šè¿½è¸ªæ¯ä¸ªè¿›ç¨‹çš„ <strong>responsible process</strong>ï¼ˆè´Ÿè´£è¿›ç¨‹ï¼‰ã€‚åœ¨ VS Code ç»ˆç«¯ä¸­æ•²çš„å‘½ä»¤ï¼Œå®ƒçš„ responsible process æ˜¯ VS Code æœ¬èº«ã€‚å½“ <code>AppleSystemPolicy.kext</code> çš„ MACF hook æ‹¦æˆªåˆ° <code>execve</code> åï¼Œä¼šæ£€æŸ¥ responsible process çš„ä¿¡ä»»çº§åˆ«ã€‚æ‹¥æœ‰ FDA æˆæƒçš„è¿›ç¨‹è¢«è¯†åˆ«ä¸ºé«˜ä¿¡ä»»æ¥æºï¼Œ<code>syspolicyd</code> ä¼šèµ°å¿«é€Ÿè·¯å¾„ï¼Œè·³è¿‡å®Œæ•´çš„ Gatekeeper æ‰«æã€‚</p>
<p>è€Œ Warp è¿™äº›åŸç”Ÿç»ˆç«¯ï¼Œå› ä¸ºæˆ‘å·²ç»åŠ å…¥ç³»ç»Ÿé»˜è®¤ä¿¡ä»»çš„å¼€å‘å·¥å…·åˆ—è¡¨ï¼Œæ‰€ä»¥å®ƒä»¬æ´¾ç”Ÿçš„å­è¿›ç¨‹ä¸€å¼€å§‹å°±ä¸ä¼šè§¦å‘å®Œæ•´æ‰«æã€‚</p>
<p>éœ€è¦è¯´æ˜ï¼šApple æ²¡æœ‰å…¬å¼€æ–‡æ¡£åŒ–è¿™ä¸ªå…·ä½“æµç¨‹ã€‚ä¸Šé¢çš„æè¿°æ¥è‡ªå®éªŒæ¨æ–­å’Œç¤¾åŒºé€†å‘åˆ†æï¼Œä¸æ˜¯å®˜æ–¹è¯´æ³•ã€‚</p>
<h2 id="ä¸€ä¸ªæœ‰è¶£çš„ç»†èŠ‚ï¼šä¿¡ä»»ä¼šè¢«â€œè®°ä½â€œ"><a href="#ä¸€ä¸ªæœ‰è¶£çš„ç»†èŠ‚ï¼šä¿¡ä»»ä¼šè¢«â€œè®°ä½â€œ" class="headerlink" title="ä¸€ä¸ªæœ‰è¶£çš„ç»†èŠ‚ï¼šä¿¡ä»»ä¼šè¢«â€œè®°ä½â€œ"></a>ä¸€ä¸ªæœ‰è¶£çš„ç»†èŠ‚ï¼šä¿¡ä»»ä¼šè¢«â€œè®°ä½â€œ</h2>
<p>å‘ç° FDA æœ‰æ•ˆä¹‹åï¼Œæˆ‘å°è¯•åå‘éªŒè¯ï¼šæŠŠ VS Code ä» FDA åˆ—è¡¨ä¸­ç§»é™¤ï¼Œé‡å¯ VS Codeï¼Œå†è·‘è„šæœ¬ã€‚</p>
<p>ç»“æœï¼šä»ç„¶å¾ˆå¿«ã€‚é—®é¢˜æ²¡æœ‰å¤ç°ã€‚</p>
<p><code>syspolicyd</code> çš„æ‰«æè¯„ä¼°ç»“æœå­˜å‚¨åœ¨ <code>/var/db/SystemPolicyConfiguration/ExecPolicy</code> è¿™ä¸ª SQLite æ•°æ®åº“ä¸­ï¼ˆ35MBï¼‰ï¼ŒåŒæ—¶ <code>AppleSystemPolicy.kext</code> åœ¨å†…æ ¸ä¸­ç»´æŠ¤äº†ä¸€ä¸ªè¿è¡Œæ—¶ç¼“å­˜ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shell bash"><span class="token function-call shell"><span class="token variable function shell">$</span></span><span class="token function-call arguments shell"> sysctl security.mac.asp.stats.cache_entry_count</span>
<span class="token function-call shell"><span class="token variable function shell">security.mac.asp.stats.cache_entry_count:</span></span><span class="token function-call arguments shell"> 4700</span>
</span></code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ VS Code æ‹¥æœ‰ FDA æ—¶ï¼Œå®ƒè¢«è¯„ä¼°ä¸ºå¯ä¿¡ responsible processï¼Œè¿™ä¸ªä¿¡ä»»ç»“æœè¢«æŒä¹…åŒ–äº†ã€‚ç§»é™¤ FDA åï¼Œå†å²è®°å½•å¹¶ä¸ä¼šè¢«æ¸…é™¤ã€‚macOS çš„å®‰å…¨è¯„ä¼°ç³»ç»Ÿæ˜¯â€œå­¦ä¹ å‹â€œçš„â€”â€”å®ƒè®°ä½è¿‡å»çš„ä¿¡ä»»å†³ç­–ã€‚</p>
<p>è¦å½»åº•é‡ç°åŸæ¥çš„é—®é¢˜ï¼Œå¯èƒ½éœ€è¦é‡å¯ Mac æ¸…é™¤å†…æ ¸ç¼“å­˜ï¼Œæˆ–è€…æ›´æç«¯åœ°æ¸…ç† ExecPolicy æ•°æ®åº“ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2>
<p>å¦‚æœä½ ä¹Ÿé‡åˆ°ç±»ä¼¼çš„é—®é¢˜â€”â€”æ–°ç¼–è¯‘çš„ç¨‹åºã€æ–°åˆ›å»ºçš„è„šæœ¬é¦–æ¬¡æ‰§è¡Œè«åå…¶å¦™åœ°æ…¢ï¼Œå¯ä»¥æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯ Gatekeeper çš„é”…ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shell bash"><span class="token comment number-sign shell"><span class="token punctuation definition comment begin shell">#</span></span><span class="token comment number-sign shell"> æŸ¥çœ‹æœ€è¿‘çš„ syspolicyd æ‰«æè®°å½•</span><span class="token comment number-sign shell">
</span><span class="token function-call shell"><span class="token variable function shell">log</span></span><span class="token function-call arguments shell"> show<span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> --</span>predicate</span> <span class="token string single shell"><span class="token punctuation definition string begin shell">&#39;</span>subsystem == &quot;com.apple.syspolicy.exec&quot;<span class="token punctuation definition string end shell">&#39;</span></span><span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> --</span>last</span> 5m<span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> --</span>style</span> compact</span> <span class="token operator logical pipe shell">|</span> <span class="token function-call shell"><span class="token variable function shell">grep</span></span><span class="token function-call arguments shell"> performScan</span>
</span></code></pre>
<p>è§£å†³æ–¹æ¡ˆæŒ‰æ’åºï¼š</p>
<ol>
<li>ç»™ä½ çš„ç¨‹åºåŠ å¦‚åˆ° Developer Tools åˆ—è¡¨</li>
<li>ç»™ä½ çš„ç¨‹åºåŠ  Full Disk Access</li>
</ol>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://support.apple.com/guide/security/gatekeeper-and-runtime-protection-sec5599b66df/web">Apple Platform Security - Gatekeeper and runtime protection</a></li>
<li><a target="_blank" rel="noopener" href="https://knight.sc/reverse%20engineering/2019/02/20/syspolicyd-internals.html">Scott Knight - syspolicyd internals</a>ï¼ˆå¯¹ syspolicyd å†…éƒ¨æœºåˆ¶çš„è¯¦ç»†é€†å‘åˆ†æï¼ŒåŒ…æ‹¬ ExecManagerã€AppleSystemPolicy.kext çš„ MACF hook ç­‰ï¼‰</li>
<li><a target="_blank" rel="noopener" href="https://eclecticlight.co">Howard Oakley - eclecticlight.co</a>ï¼ˆå¤§é‡å…³äº macOS å®‰å…¨æ‰«ææœºåˆ¶å˜åŒ–çš„ç‹¬ç«‹ç ”ç©¶ï¼‰</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>hexo-rsï¼šç© Vibe Coding</title>
    <link href="http://catcoding.me/p/hexo-rs/"/>
    <id>http://catcoding.me/p/hexo-rs/</id>
    <published>2026-01-30T23:00:00+00:00</published>
    <updated>2026-02-13T06:43:00.097220865+00:00</updated>
    <content type="html"><![CDATA[<p>æœˆåº•å‡çº§äº† Copilot Pro+ï¼Œæœˆåˆé¢åº¦é‡ç½®ï¼Œè¿™å‡ å¤©å¯ä»¥æ”¾å¼€ç”¨ï¼Œæƒ³åˆ°ä»€ä¹ˆå°± vibe ä¸€æŠŠã€‚</p>
<p>æˆ‘çš„åšå®¢è·‘åœ¨ Hexo ä¸Šå¾ˆå¤šå¹´äº†ã€‚å…¶å®æ²¡ä»€ä¹ˆå¤§é—®é¢˜ï¼Œå°±æ˜¯æ¯æ¬¡çœ‹åˆ°é‚£å‡ ç™¾ MB çš„ node_modulesï¼Œå¿ƒé‡Œæ€»æœ‰ç‚¹è†ˆåº”â€”â€”ç”Ÿæˆå‡ ç™¾ä¸ªé™æ€ HTMLï¼ŒçœŸçš„éœ€è¦è¿™ä¹ˆå¤šä¾èµ–å—ï¼Ÿä½†è¿ç§»åˆ°åˆ«çš„åšå®¢ç³»ç»Ÿåˆæ‡’å¾—æŠ˜è…¾ï¼Œæ‰€ä»¥ä¸€ç›´æ‹–ç€ã€‚</p>
<p>è¿™æ¬¡å¹²è„†è¯•è¯•ï¼šèƒ½ä¸èƒ½ç”¨ AI ä¸€ä¸ªä¸‹åˆæ’¸ä¸€ä¸ª Rust ç‰ˆçš„ Hexoï¼Ÿæˆ‘çš„ç›®æ ‡æ¯”è¾ƒç®€å•ï¼šç”Ÿæˆè·ŸåŸæ¥ä¸€æ ·çš„é™æ€æ–‡ä»¶ï¼Œå…¼å®¹æˆ‘ç°åœ¨ç”¨çš„ä¸»é¢˜å°±è¡Œã€‚</p>
<p>æˆ‘ç”¨çš„æ˜¯ OpenCode + Opus 4.5ã€‚é™†é™†ç»­ç»­èŠäº†ä¸€ä¸‹åˆï¼Œäº§å‡ºäº† <a target="_blank" rel="noopener" href="https://github.com/chenyukang/hexo-rs">hexo-rs</a>ã€‚èƒ½ç”¨ï¼Œä½†è¿˜æœ‰äº›è¾¹è¾¹è§’è§’çš„é—®é¢˜ã€‚</p>
<p>Vibe Coding çš„å·¥å…·å’Œä½“ä¼šä»¥åå†å†™ï¼Œè¿™ç¯‡ä¸»è¦èŠ hexo-rs çš„å®ç°å’Œè¸©è¿‡çš„å‘ã€‚</p>
<h2 id="æŠ€æœ¯é€‰å‹"><a href="#æŠ€æœ¯é€‰å‹" class="headerlink" title="æŠ€æœ¯é€‰å‹"></a>æŠ€æœ¯é€‰å‹</h2><h3 id="EJS-æ¨¡æ¿å¼•æ“"><a href="#EJS-æ¨¡æ¿å¼•æ“" class="headerlink" title="EJS æ¨¡æ¿å¼•æ“"></a>EJS æ¨¡æ¿å¼•æ“</h3>
<p>Hexo ä¸»é¢˜åŸºæœ¬éƒ½ç”¨ EJS æ¨¡æ¿â€”â€”å°±æ˜¯æŠŠ JavaScript åµŒåˆ° HTML é‡Œï¼Œè·Ÿ PHP å·®ä¸å¤šã€‚</p>
<p>ç”¨ <a target="_blank" rel="noopener" href="https://bellard.org/quickjs/">QuickJS</a> è·‘ JSï¼Œé€šè¿‡ <code>quick-js</code> crate è°ƒç”¨ã€‚å¥½å¤„æ˜¯ä¸ç”¨ä¾èµ– Node.jsï¼Œåå¤„æ˜¯ Windows ä¸Šç¼–ä¸è¿‡ï¼ˆ<code>libquickjs-sys</code> æŒ‚äº†ï¼‰ï¼Œæ‰€ä»¥æš‚æ—¶åªæ”¯æŒ Linux å’Œ macOSã€‚</p>
<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3>
<p>Markdown ç”¨ <code>pulldown-cmark</code>ï¼Œä»£ç é«˜äº®ç”¨ <code>syntect</code>ï¼Œæœ¬åœ°æœåŠ¡å™¨ç”¨ <code>axum</code>ã€‚éƒ½æ˜¯å¸¸è§„é€‰æ‹©ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ã€‚</p>
<h2 id="è¸©è¿‡çš„å‘"><a href="#è¸©è¿‡çš„å‘" class="headerlink" title="è¸©è¿‡çš„å‘"></a>è¸©è¿‡çš„å‘</h2><h3 id="HashMap-çš„å‘"><a href="#HashMap-çš„å‘" class="headerlink" title="HashMap çš„å‘"></a>HashMap çš„å‘</h3>
<p>è¿™ä¸ª bug è—å¾—å¾ˆæ·±ã€‚ç”Ÿæˆ tag å’Œ category é¡µé¢æ—¶ï¼Œä¸€å¼€å§‹ç”¨ <code>HashMap</code> å­˜æ–‡ç« åˆ†ç»„ï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token keyword rust">let</span> <span class="token keyword rust">mut</span> tags<span class="token punctuation separator rust">:</span> <span class="token generic rust">HashMap<span class="token punctuation definition generic begin rust">&lt;</span>String, <span class="token generic rust">Vec<span class="token punctuation definition generic begin rust">&lt;</span><span class="token operator rust">&amp;</span>Post<span class="token punctuation definition generic end rust">&gt;</span></span><span class="token punctuation definition generic end rust">&gt;</span></span> <span class="token operator rust">=</span> <span class="token path rust">HashMap<span class="token punctuation accessor rust">::</span></span>new<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
</span></code></pre>
<p><code>HashMap</code> è¿­ä»£é¡ºåºä¸ç¡®å®šï¼Œæ¯æ¬¡ç”Ÿæˆçš„ HTML å¯èƒ½ä¸ä¸€æ ·ã€‚é¡µé¢çœ‹ç€æ²¡é—®é¢˜ï¼Œä½† diff ä¸€ä¸‹å°±å‘ç°ä¹±äº†ã€‚æ”¹æˆ <code>BTreeMap</code> å°±å¥½äº†ï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token keyword rust">let</span> <span class="token keyword rust">mut</span> tags<span class="token punctuation separator rust">:</span> <span class="token generic rust">BTreeMap<span class="token punctuation definition generic begin rust">&lt;</span>String, <span class="token generic rust">Vec<span class="token punctuation definition generic begin rust">&lt;</span><span class="token operator rust">&amp;</span>Post<span class="token punctuation definition generic end rust">&gt;</span></span><span class="token punctuation definition generic end rust">&gt;</span></span> <span class="token operator rust">=</span> <span class="token path rust">BTreeMap<span class="token punctuation accessor rust">::</span></span>new<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
</span></code></pre><h3 id="Helper-å‡½æ•°"><a href="#Helper-å‡½æ•°" class="headerlink" title="Helper å‡½æ•°"></a>Helper å‡½æ•°</h3>
<p>Hexo æœ‰ä¸€å † helper å‡½æ•°ï¼š<code>url_for</code>ã€<code>css</code>ã€<code>js</code>ã€<code>date</code> ä¹‹ç±»çš„ã€‚éƒ½å¾—åœ¨ Rust é‡Œå®ç°ä¸€éï¼Œç„¶åå¡è¿› QuickJSã€‚</p>
<p>æœ€çƒ¦çš„æ˜¯ <code>date</code>ã€‚Hexo ç”¨ Moment.js çš„æ ¼å¼ï¼ˆ<code>YYYY-MM-DD</code>ï¼‰ï¼ŒRust çš„ chrono ç”¨ strftimeï¼ˆ<code>%Y-%m-%d</code>ï¼‰ã€‚å¾—å†™ä¸ªè½¬æ¢å‡½æ•°ï¼ŒæŒºæ— èŠçš„æ´»ã€‚</p>
<h3 id="Partial-åµŒå¥—"><a href="#Partial-åµŒå¥—" class="headerlink" title="Partial åµŒå¥—"></a>Partial åµŒå¥—</h3>
<p>EJS çš„ <code>partial</code> å¯ä»¥å¥—å¨ƒï¼ŒA å¼•ç”¨ Bï¼ŒB åˆå¼•ç”¨ Cï¼Œå˜é‡è¿˜å¾—ä¸€å±‚å±‚ä¼ ä¸‹å»ã€‚æäº†ä¸ªä½œç”¨åŸŸæ ˆï¼Œè¿› partial å‹æ ˆï¼Œå‡ºæ¥å¼¹æ ˆã€‚ä¸éš¾ï¼Œä½†å®¹æ˜“å†™é”™ã€‚</p>
<h2 id="Vibe-Coding-ä½“æ„Ÿ"><a href="#Vibe-Coding-ä½“æ„Ÿ" class="headerlink" title="Vibe Coding ä½“æ„Ÿ"></a>Vibe Coding ä½“æ„Ÿ</h2>
<p>ä»£ç  100% æ˜¯ AI å†™çš„ã€‚æˆ‘å¹²çš„äº‹ï¼šæè¿°éœ€æ±‚ã€review ä»£ç ã€æŠŠæŠ¥é”™è´´ç»™å®ƒè®©å®ƒæ”¹ã€å¶å°”æ‹æ¿é€‰æ–¹æ¡ˆã€‚</p>
<p>åƒ EJS æ¨¡æ¿å¼•æ“è¿™ç§ä¸œè¥¿ï¼Œè‡ªå·±ä»å¤´å†™ä¼°è®¡å¾—åŠå¤©ï¼ŒAI å‡ åˆ†é’Ÿå°±åå‡ºæ¥äº†ã€‚</p>
<p>ä½† AI ä¹ŸæŒºè ¢çš„ï¼š</p>
<ul>
<li>HashMap é‚£ä¸ª bug å®ƒå°±æ²¡æ³¨æ„åˆ°ï¼Œæˆ‘æå‡ºç•Œé¢ä¸Šçš„å˜åŒ–å®ƒä¹Ÿæ²¡ååº”è¿‡æ¥</li>
<li>ä¸€å¼€å§‹å®ƒå†™çš„ EJS parser å…¨æ˜¯å­—ç¬¦ä¸² hardcodeï¼Œä¸‘å¾—ä¸è¡Œï¼Œæˆ‘è®©å®ƒæŒ‰ lexer -&gt; AST çš„å¥—è·¯é‡å†™äº†ä¸€é</li>
<li>ä»£ç å¤šäº†ä»¥åå®ƒä¼šå¿˜äº‹ï¼Œå‰é¢å†™è¿‡çš„é€»è¾‘åé¢åˆå†™ä¸€é</li>
</ul>
<p>ä½† AI åˆç¡®å®éå¸¸å¼ºï¼Œæˆ‘æƒ³åˆ°åº”è¯¥ä½¿ç”¨ç°åœ¨çº¿ä¸Šçš„ catcoding.me æ¥å’Œæ–°ç”Ÿæˆçš„å†…å®¹ä¸€ä¸€å¯¹æ¯”ï¼Œç„¶åå®ƒå°±å‘¼å•¦å•¦åœ°ä¸€é€šæ“ä½œæŠŠé—®é¢˜éƒ½æ‰¾å‡ºæ¥äº†ï¼Œè‡ªå·±ä¿®æ”¹å®Œã€‚</p>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shell bash"><span class="token function-call shell"><span class="token variable function shell">cargo</span></span><span class="token function-call arguments shell"> binstall hexo-rs  <span class="token comment number-sign shell"><span class="token punctuation definition comment begin shell">#</span></span><span class="token comment number-sign shell"> æˆ– cargo install hexo-rs</span><span class="token comment number-sign shell">
</span></span>
<span class="token function-call shell"><span class="token variable function shell">hexo-rs</span></span><span class="token function-call arguments shell"> generate  <span class="token comment number-sign shell"><span class="token punctuation definition comment begin shell">#</span></span><span class="token comment number-sign shell"> ç”Ÿæˆé™æ€æ–‡ä»¶</span><span class="token comment number-sign shell">
</span></span><span class="token function-call shell"><span class="token variable function shell">hexo-rs</span></span><span class="token function-call arguments shell"> server    <span class="token comment number-sign shell"><span class="token punctuation definition comment begin shell">#</span></span><span class="token comment number-sign shell"> æœ¬åœ°é¢„è§ˆ</span><span class="token comment number-sign shell">
</span></span><span class="token function-call shell"><span class="token variable function shell">hexo-rs</span></span><span class="token function-call arguments shell"> clean     <span class="token comment number-sign shell"><span class="token punctuation definition comment begin shell">#</span></span><span class="token comment number-sign shell"> æ¸…ç†</span><span class="token comment number-sign shell">
</span></span><span class="token function-call shell"><span class="token variable function shell">hexo-rs</span></span><span class="token function-call arguments shell"> new <span class="token string double shell"><span class="token punctuation definition string begin shell">&quot;</span>æ ‡é¢˜<span class="token punctuation definition string end shell">&quot;</span></span></span>
</span></code></pre><h2 id="å±€é™"><a href="#å±€é™" class="headerlink" title="å±€é™"></a>å±€é™</h2>
<p>ä¸æ”¯æŒ Hexo æ’ä»¶ï¼Œä¸æ”¯æŒ Stylus ç¼–è¯‘ï¼ˆ.styl æ–‡ä»¶å¾—å…ˆç”¨ Node ç¼–è¯‘å¥½ï¼‰ï¼ŒWindows ä¹Ÿä¸è¡Œã€‚</p>
<p>ç®€å•çš„åšå®¢åº”è¯¥å¤Ÿç”¨ã€‚å¤æ‚ä¸»é¢˜å¯èƒ½ä¼šæœ‰å…¼å®¹é—®é¢˜ã€‚</p>
<hr />
<p>ä»£ç åœ¨è¿™ï¼š<a target="_blank" rel="noopener" href="https://github.com/chenyukang/hexo-rs">github.com/chenyukang/hexo-rs</a></p>
<p>ç”¨ Hexo çš„å¯ä»¥è¯•è¯•ã€‚æœ‰é—®é¢˜æ issueï¼Œæˆ‘è®© AI æ¥ä¿® :)</p>
<p>è¿™ç¯‡æ–‡ç« åˆ°åº•æ˜¯äººå†™çš„ï¼Œè¿˜æ˜¯ AI å†™çš„ï¼Ÿ</p>
]]></content>
  </entry>
  <entry>
    <title>How Fiber Network Works</title>
    <link href="http://catcoding.me/p/how-fiber-works/"/>
    <id>http://catcoding.me/p/how-fiber-works/</id>
    <published>2025-12-09T17:05:59+00:00</published>
    <updated>2026-02-13T06:43:00.097220865+00:00</updated>
    <content type="html"><![CDATA[<p>I just got back from CKCon in beautiful Chiang Mai ğŸŒ´, where I gave a talk on the Fiber Network. To help everyone wrap their heads around how Fiber (CKBâ€™s Lightning Network) actually moves assets, I hacked a visual simulation with AI.</p>
<p>To my surprise, people didnâ€™t just understand itâ€”they loved it! ğŸ‰</p>
<p>Here is the â€œtoo long; didnâ€™t readâ€ version. But first, go ahead and play with the dots yourself, ğŸ‘‰ <strong>Play the Simulation:</strong> <a target="_blank" rel="noopener" href="https://fiber-world.vercel.app/simulate.html">fiber-simulation</a></p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20251204113415.png" alt="" /></p>
<p>We all love Layer 1 blockchains like Bitcoin or CKB for their security, but letâ€™s be honest: they arenâ€™t exactly built for speed.</p>
<p>Every transaction has to be shouted out to the entire world and written down by thousands of nodes. On CKB, youâ€™re waiting about 8 seconds for a block; on Bitcoin, itâ€™s 10 minutes! Plus, the fees can get nasty if youâ€™re just trying to buy a coffee. â˜•ï¸</p>
<p><strong>So, how do we fix this?</strong></p>
<p>The Lightning Network is a <strong>scalable, low-fee, and instant micro-payment solution for P2P payments</strong>.</p>
<p>The secret sauce isnâ€™t actually new. Even Satoshi Nakamoto hinted at this â€œhigh-frequencyâ€ magic in an <a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Payment_channels">early email</a>:</p>
<blockquote>
<p>Intermediate transactions do not need to be broadcast. Only the final outcome gets recorded by the network.</p>
</blockquote>
<p>A Lightning Network consists of <strong>Peers</strong> and <strong>Channels</strong>. A peer can send, receive, or forward a payment. A Channel is used for communication between two Peers.</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20251204113629.png" alt="" /></p>
<p>Imagine you and a friend want to trade money back and forth quickly:</p>
<ol>
<li><strong>Opening the Channel:</strong> You both put some money into a pot and sign a <strong>Funding Tx</strong>. This goes on the blockchain (L1).</li>
<li><strong>The Fun Part (Off-Chain):</strong> Now that the channel is open, you can send money back and forth a million times instantly! You just update the balance sheet between you two (using HTLCs and signatures). No one else needs to know, and no blockchain fees are paid yet.</li>
<li><strong>Closing the Channel:</strong> When youâ€™re done, you agree on the final balance, sign a <strong>Shutdown Tx</strong>, and tell the blockchain.</li>
</ol>
<p>Everything in the middle? Thatâ€™s <strong>off-chain</strong> magic. âœ¨</p>
<p>Now, if Fiber was just about paying your direct neighbor, it would be boring. The real power comes from the <strong>Network</strong>.</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20251204113608.png" alt="" /></p>
<p>This means Alice can pay Bob even if they donâ€™t have a direct channel between them. The payment can travel through one or more intermediate nodes. As long as there is a path with enough liquidity, the payment will reach its destination instantly.</p>
<p>All data is wrapped in <strong>Onion Packets</strong> (yes, like layers of an onion). The nodes in the middle serve as couriers, but they are blindfolded:</p>
<ul>
<li>They donâ€™t know who sent the money.</li>
<li>They donâ€™t know who is receiving it.</li>
<li>They only know â€œpass this to the next guy.â€</li>
</ul>
<p>They simply follow a basic rule: they forward the Hash Time Lock, and if the payment succeeds, they earn a tiny fee for their trouble. Easy peasy.</p>
<p><strong>The â€œNot So Easyâ€ Part ğŸ˜…</strong></p>
<p>While the idea is simple, building it isâ€¦ well, an engineering adventure. Weâ€™re dealing with cryptography, heavy concurrency, routing algorithms, and a whole jungle of edge cases. But hey, thatâ€™s what makes it fun!</p>
<p>Weâ€™ve poured the last two years into building Fiber, and Iâ€™m proud to say itâ€™s finally GA ready.</p>
<p>If you want to geek out on the details, check these out:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lnbook/lnbook">Mastering the Lightning Network (LN)</a> and <a target="_blank" rel="noopener" href="https://github.com/lightning/bolts">Basis of Lightning Technology</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber">nervosnetwork/fiber</a></li>
</ul>
<p>Here is the full presentation from my talk:
<a target="_blank" rel="noopener" href="https://docs.google.com/presentation/d/1aKhG0ebR-UV4SqOWOd_Xjlz15hGVmmRUMLzIkwcUWeY/edit?usp=sharing">CKB Fiber Network Engineering Updates</a></p>
]]></content>
  </entry>
  <entry>
    <title>åœ¨å¼€æºä¸­ä½¿ç”¨ LLM</title>
    <link href="http://catcoding.me/p/llm-in-open-source/"/>
    <id>http://catcoding.me/p/llm-in-open-source/</id>
    <published>2025-11-26T10:15:38+00:00</published>
    <updated>2026-02-13T06:43:00.099220898+00:00</updated>
    <content type="html"><![CDATA[<p>è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…å¼€å§‹ä½¿ç”¨ LLM ç­‰ AI å·¥å…·ï¼Œè¿‡å»åŠå¹´æˆ‘çœ‹åˆ°ä¸å°‘ç›¸å…³è®¨è®ºï¼šæœ‰äººéå¸¸åæ„Ÿä½¿ç”¨ LLM å·¥å…·ï¼Œæœ‰äººä¿æŒä¸­ç«‹ï¼Œä½†ç¡®å®æœ‰ç›¸å½“æ•°é‡çš„ AI ç”Ÿæˆ PR ç»™å¼€æºé¡¹ç›®ç»´æŠ¤è€…å¸¦æ¥äº†è´Ÿæ‹…å’Œå›°æ‰°ã€‚</p>
<p>ç°åœ¨å‡ºç°äº†ä¸€äº›æ–°è‹—å¤´ï¼Œæ¯”å¦‚ GitHub è´¦å·ä¹Ÿå¼€å§‹â€œå…»å·â€ã€‚æˆ‘æ¨æµ‹å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š</p>
<h3 id="ä¸ºäº†åŠ å¯†è´§å¸ç©ºæŠ•"><a href="#ä¸ºäº†åŠ å¯†è´§å¸ç©ºæŠ•" class="headerlink" title="ä¸ºäº†åŠ å¯†è´§å¸ç©ºæŠ•"></a>ä¸ºäº†åŠ å¯†è´§å¸ç©ºæŠ•</h3>
<p>2023â€“2024 å¹´ç±»ä¼¼çš„æƒ…å†µæ¯”è¾ƒå¤šï¼Œæœ‰äº›åŠ å¯†è´§å¸é¡¹ç›®ä¼šæ ¹æ®å¼€å‘è€…çš„ GitHub å…¬å¼€æäº¤è®°å½•è¿›è¡Œç©ºæŠ•ã€‚å¦‚æœä¸€ä¸ªè´¦å·ç»™é¡¹ç›®æ–¹å…³æ³¨çš„é¡¹ç›®æè¿‡ PRï¼Œå°±æ›´å®¹æ˜“è·å¾—ã€‚ä¾‹å¦‚ Rust åœ¨åŒºå—é“¾é¢†åŸŸç”¨å¾—æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥ Rust compiler é¡¹ç›®æ˜¯æ¯”è¾ƒå®¹æ˜“è·å¾—ç©ºæŠ•çš„ã€‚æˆ‘è‡ªå·±ä¹Ÿå› ä¸ºä¸€äº›å¼€æºè®°å½•æ‹¿åˆ°è¿‡ç©ºæŠ•ï¼Œå½“æ—¶å…‘æ¢äº† 1 ä¸‡å¤šäººæ°‘å¸ã€‚æˆ‘çœ‹åˆ°ä¸å°‘ Rust ç¤¾åŒºç»´æŠ¤è€…ä¹Ÿå¾—åˆ°äº†ç©ºæŠ•ï¼Œä¸è¿‡ä»–ä»¬å¯¹åŠ å¯†è´§å¸æ™®éä¸æ„Ÿå…´è¶£ï¼›ä¹Ÿæœ‰ä¸ªåˆ«äººå› æ­¤æ¢åˆ°äº†ä¸å°‘é’±ï¼Œè§‰å¾—å¾ˆæƒŠè®¶ã€‚æœ‰åŒäº‹ç»™ä»¥å¤ªåŠæè¿‡å‡ ä¸ª PRï¼Œä»–çš„ç©ºæŠ•ä»·å€¼å¤§çº¦ 15 ä¸‡äººæ°‘å¸ï¼Œå› æ­¤è¿˜å‡ºç°äº†æœ‰äººæ”¶è´­ GitHub ç©ºæŠ•èµ„æ ¼çš„æƒ…å†µã€‚</p>
<p>ä½†æˆ‘è®¤ä¸ºè¿™åªæ˜¯çŸ­æœŸç°è±¡ã€‚ç°åœ¨å†ä¸ºäº†ç©ºæŠ•å»å…»å·æ˜¯å¦è¿˜æœ‰æœºä¼šï¼Ÿæˆ‘ä¸æ•¢ç¡®å®šã€‚å› ä¸ºâ€œå…»å·â€çš„ç‰¹å¾å¾ˆæ˜æ˜¾ï¼Œå…¶å®å¾ˆå¥½è‡ªåŠ¨è¯†åˆ«ã€‚è€Œä¸”åˆ°äº† 2025 å¹´ç±»ä¼¼ç©ºæŠ•å·²ç»å¾ˆå°‘äº†ï¼Œå³ä½¿æœ‰ï¼Œä¹Ÿä¼šè¦æ±‚å¤æ‚çš„é’±åŒ…äº¤äº’ï¼Œä¸æ˜¯å¸åœˆçš„äººé€šå¸¸ä¸ä¼šæŠ˜è…¾è¿™äº›ã€‚</p>
<h3 id="ä¸ºäº†ä¸°å¯Œç®€å†"><a href="#ä¸ºäº†ä¸°å¯Œç®€å†" class="headerlink" title="ä¸ºäº†ä¸°å¯Œç®€å†"></a>ä¸ºäº†ä¸°å¯Œç®€å†</h3>
<p>å¾ˆå¤šå¼€å‘äººå‘˜éƒ½çŸ¥é“ï¼Œä¸€ä¸ªæ‹¿å¾—å‡ºæ‰‹çš„ GitHub è´¦å·åº”è¯¥ä¼šå¯¹æ‰¾å·¥ä½œæœ‰å¸®åŠ©ã€‚ä½†æˆ‘å¯¹æ­¤ä¿æŒæ€€ç–‘ï¼Œå› ä¸ºå…»å‡ºæ¥çš„ GitHub è´¦å·ä¸€çœ¼å°±èƒ½çœ‹å‡ºï¼Œä»é¢è¯•å®˜çš„è§’åº¦ï¼Œæˆ‘è®¤ä¸ºåŠ ä¸Šä¸€ä¸ªè¿™æ ·çš„ GitHub è´¦å·åˆ°ç®€å†é‡Œæ˜¯å‡åˆ†é¡¹ã€‚</p>
<p>æ€»ä¹‹ï¼Œå¦‚æœåªæ˜¯ä¸ºäº†ä»¥ä¸Šä¸¤ç§ç›®çš„å»â€œå…»å·â€ï¼Œæˆ‘éƒ½å»ºè®®åœæ‰‹ï¼Œå› ä¸ºè¿™é€šå¸¸æ˜¯è´¹æ—¶è´¹åŠ›ä½†å¾—ä¸å¿å¤±çš„äº‹æƒ…ã€‚</p>
<h3 id="ä¸ºäº†å‚ä¸åˆ°å¼€æºé¡¹ç›®"><a href="#ä¸ºäº†å‚ä¸åˆ°å¼€æºé¡¹ç›®" class="headerlink" title="ä¸ºäº†å‚ä¸åˆ°å¼€æºé¡¹ç›®"></a>ä¸ºäº†å‚ä¸åˆ°å¼€æºé¡¹ç›®</h3>
<p>å¦å¤–ä¸€éƒ¨åˆ†äººæ˜¯çœŸçš„æƒ³å‚ä¸å¼€æºé¡¹ç›®ï¼Œä»–ä»¬å¯èƒ½è®¤ä¸ºä½¿ç”¨ LLM èƒ½é™ä½éš¾åº¦ã€‚</p>
<p>ç°åœ¨çš„ AI å·¥å…·ç¡®å®æ¯”ä»¥å‰æ›´å¼ºå¤§äº†ã€‚ä½ å¯ä»¥æŠŠä¸€ä¸ª GitHub issue ç»™å®ƒï¼Œç¨å¾®å†™ç‚¹ promptï¼ŒAI å°±èƒ½è‡ªåŠ¨ç”Ÿæˆ PRï¼Œç”šè‡³è‡ªåŠ¨å‘ PRã€‚ä½†è¿™ç§æ–¹å¼é€šå¸¸ä¼šå¿½ç•¥ä¸€äº›å¼€æºé¡¹ç›®æœ¬èº«çš„è´¡çŒ®çº¦å®šï¼Œä»è€Œå¯¼è‡´ PR ä¸€å‘å‡ºæ¥ç»´æŠ¤è€…å°±çŸ¥é“è¿™äººè‚¯å®šè¿ contribution guide éƒ½æ²¡çœ‹è¿‡ï¼Œè¿™æ ·å°±ä¼šç›´æ¥å…³é—­æ‰è¿™ä¸ª PRï¼Œè¿™æœ‰ä¸ªå…¸å‹çš„<a target="_blank" rel="noopener" href="https://github.com/rust-lang/rust/pull/149296">ä¾‹å­</a>ã€‚</p>
<p>AI çš„ç¡®æ¯”æˆ‘åŸæœ¬æƒ³è±¡çš„å¥½ç”¨å¾ˆå¤šï¼Œæˆ‘åœ¨æ—¥å¸¸å¼€å‘ä¸­ä¹Ÿä¼šä½¿ç”¨ï¼Œä½†ä¸»è¦æŠŠå®ƒå½“æˆå¢å¼ºç‰ˆæœç´¢å¼•æ“æˆ–è‡ªåŠ¨åŒ–å·¥å…·ã€‚ä¾‹å¦‚æˆ‘ä¼šè®© AI å¸®æˆ‘åšä¸€äº›è‡ªåŠ¨åŒ–æµç¨‹ï¼šæˆ‘æœ‰ä¸€ä¸ª prompt æ¨¡æ¿ï¼Œåªéœ€è¦ç»™ä¸€ä¸ª issue å·ï¼ŒLLM å°±èƒ½å¸®æˆ‘è§£æé—®é¢˜ï¼ŒæŠŠç›¸å…³çš„ bug é‡ç°ä»£ç æ”¾åˆ°æµ‹è¯•ç›®å½•ï¼Œåˆ›å»ºå¯¹åº”çš„ Git branchï¼Œå°è¯•åœ¨æœ¬åœ°é‡ç°é—®é¢˜ï¼Œç„¶åä» backtrace å®šä½å¯ç–‘ä»£ç ã€‚è¿™ç¡®å®çœäº†æˆ‘ä¸å°‘æ—¶é—´ã€‚ä½†è¿™å»ºç«‹åœ¨æˆ‘è‡ªå·±æŒ‰è¿™ä¸ªæµç¨‹åšè¿‡å¾ˆå¤šéï¼Œèƒ½æ‰¾å‡ºä¸€å¥—æ¯”è¾ƒç¨³å®šçš„æ–¹æ³•ã€‚</p>
<p>æ­£å¦‚æˆ‘ä¹‹å‰è¯´çš„ï¼Œå¦‚æœä½ æƒ³ç”¨å¥½ AIï¼Œä½ å¿…é¡»å…·å¤‡é¡¹ç›®çš„ domain knowledgeï¼Œæ‰èƒ½åˆ¤æ–­ AI æœ‰æ²¡æœ‰â€œéª—ä½ â€ã€‚</p>
<p>åœ¨ Rust compiler é¡¹ç›®é‡Œï¼Œç›®å‰ LLM ç”Ÿæˆçš„ PR åŸºæœ¬åªæœ‰ typo fix ä¹‹ç±»çš„ä¼šå¶å°”è¢«æ¥å—ã€‚åªè¦æ¶‰åŠç¨å¾®å¤æ‚ä¸€äº›çš„ä»£ç ä¿®æ”¹ï¼Œä¸€çœ¼å°±èƒ½çœ‹å‡ºä¸æ˜¯äººå†™çš„ã€‚</p>
<p>å¦‚æœçœŸçš„æƒ³å‚ä¸å¼€æºé¡¹ç›®ï¼Œæœ€å¥½çš„æ–¹å¼è¿˜æ˜¯ä»é¡¹ç›®ä¸­ç®€å•çš„ issues å¼€å§‹ã€‚å¦‚æœä¸æ‡‚å°±å¤šé—®ï¼Œå¤šçœ‹æ–‡æ¡£å’Œä»£ç ã€‚æ¯ä¸ªäººéƒ½æ˜¯ä»æ–°æ‰‹é˜¶æ®µæ…¢æ…¢èµ°è¿‡æ¥çš„ï¼Œç»´æŠ¤è€…ä¸€èˆ¬å¯¹çœŸå¿ƒæƒ³å‚ä¸çš„è´¡çŒ®è€…ä¼šæ›´æœ‰è€å¿ƒã€‚</p>
<p>å³ä½¿ç”¨ LLM ç”Ÿæˆä»£ç ï¼Œæˆ‘ä»¬ä¾ç„¶è¦é€è¡Œ reviewï¼Œç¡®ä¿æ­£ç¡®ã€å¯ç»´æŠ¤ã€ç®€æ´ã€‚å¦‚æœä½ ä¸¢ä¸€å †æœºå™¨ç”Ÿæˆçš„ä»£ç ï¼Œè®© maintainer å¸®ä½ å®¡æ ¸ï¼Œè¿™ä¼šå¼•èµ·æå¤§çš„åæ„Ÿã€‚</p>
<p>æ¯”å¦‚è¿™ä½å¼€å‘è€…ï¼Œåœ¨ maintainer å®¡æ ¸åå¯¹ä»£ç å‘å‡ºè´¨ç–‘çš„æ—¶å€™ä¹Ÿæ‰¿è®¤æ˜¯ <a target="_blank" rel="noopener" href="https://GitHub.com/ocaml/ocaml/pull/14369#issuecomment-3556497947">AI å†™çš„ä»£ç </a>:
<img src="http://catcoding.me/images/ob_pasted-image-20251126091545.png" alt="" /></p>
<p>å»ºè®®å¤§å®¶å¯ä»¥å»çœ‹çœ‹ä¸Šé¢é‚£ä¸ª PR é‡Œçš„è®¨è®ºï¼Œæˆ‘è§‰å¾—æœ‰äº›è¯„è®ºæŒºæœ‰ä»·å€¼ã€‚OCaml çš„ç»´æŠ¤è€… <a target="_blank" rel="noopener" href="https://GitHub.com/gasche">gasche</a> è¡¨è¾¾çš„è§‚ç‚¹å¾ˆæ˜ç¡®ï¼š</p>
<blockquote>
<p>The fact that you were able to generate large amount of code that passes test is interesting, but thatâ€™s only 20% of the work, the other 80% are to get the feature discussed, reviewed and integrated, and this work will be paid by youÂ <em>and others</em>. But you only focus on the initial writing phase and you personal success, over-communicate on this, and do not appear to realize that this has very real costs on others.</p>
</blockquote>
<p>åœ¨å¤šäººåä½œçš„å¼€æºé¡¹ç›®ä¸­ï¼Œç¨å¾®å¤æ‚ä¸€ç‚¹çš„åŠŸèƒ½ï¼Œå†™ä»£ç å…¶å®åªå å¾ˆå°ä¸€éƒ¨åˆ†ï¼Œæ›´å¤šçš„æ˜¯åä½œä¸è®¨è®ºã€‚ä¸€ä¸ª PR æ˜¯å¦èƒ½ mergeï¼Œè¿˜è¦è€ƒè™‘é•¿æœŸç»´æŠ¤æˆæœ¬ã€‚</p>
<p>å¦å¤–ï¼ŒLLM ç”Ÿæˆçš„ä»£ç å…¶å®æ˜¯éå¸¸å®¹æ˜“æ£€æµ‹çš„ï¼Œæ¯”å¦‚ç°åœ¨å°±æœ‰ç±»ä¼¼çš„å·¥å…·å¯ä»¥ä»¥æ¯”è¾ƒé«˜çš„å‡†ç¡®åº¦åˆ¤æ–­ä»£ç æ˜¯å¦æ˜¯ AI å†™çš„ï¼š <a target="_blank" rel="noopener" href="https://code-detector.ai/">AI Code Detector by Span</a></p>
<p>è¿˜æœ‰ä¸€äº›å¼€å‘è€… (å°¤å…¶æ˜¯éè‹±è¯­æ¯è¯­è€…)ï¼Œä»–ä»¬å¯èƒ½å¯¹è‡ªå·±çš„è‹±è¯­ä¸å¤Ÿè‡ªä¿¡ï¼Œæ‰€ä»¥ä½¿ç”¨ LLM æ¥å¸®å¿™å†™ PR description å’Œ commentsã€‚æœ‰çš„å¼€å‘è€…å°±æ˜¯å·æ‡’ï¼Œè®¤ä¸º LLM æ€»ç»“çš„å³å…¨é¢åˆå¥½ã€‚ä½†ä»ç»´æŠ¤è€…çš„è§’åº¦æ¥è¯´ï¼Œè¿™æ˜¯ä¸å‹å¥½çš„ï¼Œå› ä¸º LLM ç”Ÿæˆçš„å†…å®¹<a target="_blank" rel="noopener" href="https://GitHub.com/rust-lang/rust/pull/149297#issuecomment-3573984021">è¿‡äºå†—é•¿</a>:</p>
<blockquote>
<p>The comments left by you are significantly too verbose. While being detailed is good, please be respectful of reviewer time and avoid verbose text that mostly doesnâ€™t convey any useful content.</p>
</blockquote>
<p>åœ¨ Rust maintainer channel é‡Œä¹Ÿè®¨è®ºè¿‡è¿™ç‚¹ï¼Œçœ‹èµ·æ¥å¾ˆå¤šäººæ˜¯åæ„Ÿè¯» LLM ç”Ÿæˆçš„ä¸œè¥¿çš„ï¼Œå¤§å®¶æœŸå¾…çš„é²œæ´»çš„äººç±»è®¨è®ºï¼Œè€Œä¸æ˜¯æœºå™¨ç”Ÿæˆçš„æ–‡å­—ã€‚</p>
<p>å…¶å®è‹±è¯­ç¨å¾®å·®ç‚¹çš„å¼€å‘è€…ï¼Œåªè¦å†™çš„å†…å®¹ä¸æ˜¯è¿‡äºç¦»è°±ï¼Œå…¶ä»–å¼€å‘è€…ä¹Ÿèƒ½ç†è§£ï¼Œä¸ç”¨å¤ªåœ¨æ„ typo ä¹‹ç±»çš„é”™è¯¯ï¼Œå› ä¸ºäººçš„å¤§è„‘çº æ­£çš„åŠŸèƒ½è¿‡äºå¼ºå¤§ã€‚åæ¥æˆ‘åœ¨ <a target="_blank" rel="noopener" href="https://GitHub.com/rust-lang/rustc-dev-guide/pull/2543/files">rustc-dev-guide</a> ä¸ŠåŠ äº†è¿™ä¹ˆä¸€æ®µï¼š</p>
<blockquote>
<p>If youâ€™re not a native English speaker and feel unsure about writing, try using a translator to help. But avoid using LLM tools that generate long, complex words. In daily teamwork, <strong>simple and clear words</strong> are best for easy understanding. Even small typos or grammar mistakes can make you seem more human, and people connect better with humans.</p>
</blockquote>
<p>AI å·¥å…·åœ¨å¼€æºé¡¹ç›®ä¸­çš„è¿‡åº¦å°è¯•ï¼Œåªä¼šè®©æ›´å¤šäººåæ„Ÿï¼Œæ¯”å¦‚ <a target="_blank" rel="noopener" href="https://GitHub.com/ziglang/zig?tab=readme-ov-file#strict-no-llm--no-ai-policy">zig é¡¹ç›®æ˜ç¡®è¡¨æ˜</a>:</p>
<blockquote>
<p>No LLMs for issues.
No LLMs for patches / pull requests.
No LLMs for comments on the bug tracker, including translation.</p>
</blockquote>
<hr />
<p>æˆ‘ä¸çŸ¥é“æœªæ¥ä¼šæ€æ ·ã€‚ä¹Ÿè®¸ AI å·¥å…·æœ€ç»ˆä¼šæ›´æ™ºèƒ½ã€‚ä½†è‡³å°‘ç°åœ¨ï¼Œå®ƒè¿˜å¤„äºä¸€ä¸ªå°´å°¬çš„ä¸­é—´åœ°å¸¦ï¼šç”¨å¾—å¥½èƒ½å¸®ä½ èŠ‚çœæ—¶é—´ï¼Œç”¨ä¸å¥½åè€Œä¸å¦‚ä¸ç”¨ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>Rust èƒŒé”…äº†ï¼šCloudflare æ•…éšœåˆ†æ</title>
    <link href="http://catcoding.me/p/rust-in-cloudflare-incident/"/>
    <id>http://catcoding.me/p/rust-in-cloudflare-incident/</id>
    <published>2025-11-20T07:07:23+00:00</published>
    <updated>2026-02-13T06:43:00.104220980+00:00</updated>
    <content type="html"><![CDATA[<p>è¿™ä¸¤å¤©éƒ½åœ¨è®¨è®º  Cloudflare çš„å®‰å…¨äº‹æ•…  <a target="_blank" rel="noopener" href="https://blog.cloudflare.com/18-november-2025-outage/">Cloudflare outage on November 18, 2025</a>ï¼Œæˆ‘ä¹Ÿå†™ç‚¹è‡ªå·±çš„æƒ³æ³•ã€‚</p>
<p>è¿™ä¸ªäº‹æ•…å½“ç„¶å¼•èµ·çš„èŒƒå›´ç‰¹åˆ«å¹¿ï¼Œæˆ‘å½“æ—¶æ­£åœ¨ç”¨ ChatGPTï¼Œçªç„¶å†æ‰“å¼€æ€»æ˜¯æç¤ºæ­£åœ¨åŠ è½½ï¼Œæˆ‘è¿˜ä»¥ä¸ºæ˜¯è‡ªå·±çš„ VPN å‡ºäº†é—®é¢˜ï¼Œç¬¬äºŒå¤©èµ·æ¥æ‰çŸ¥é“ Cloudflare è·ªäº†å¥½ä¹…ã€‚</p>
<p>æ²¡å¤šä¹… Cloudflare å°±å‘å‡ºæ¥äº†ä¸€ä¸ªéå¸¸è¯¦ç»†çš„äº‹æ•…è¯´æ˜ã€‚æˆ‘å¯¹é‡Œé¢çš„åœºæ™¯éå¸¸ç†Ÿæ‚‰ï¼Œå› ä¸ºæˆ‘ä¹‹å‰å› ä¸ºç±»ä¼¼çš„åŸå› æŠŠå¤§ç–†çš„å¤§éƒ¨åˆ†æµé‡éƒ½ç»™ææŒ‚äº†ï¼Œå…·ä½“è¯·çœ‹<a target="_blank" rel="noopener" href="https://catcoding.me/p/avoid-mistake/">è°ˆè°ˆå·¥ä½œä¸­çš„çŠ¯é”™</a>ä¸­çš„é…ç½®é”™è¯¯ã€‚</p>
<p>è¿™æ¬¡äº‹æ•…é‡Œ Cloudflare ç»™å‡ºäº†ä¸€æ®µ Rust ä»£ç ï¼Œæ‰€ä»¥è®¨è®ºè‡ªç„¶ä¼šé›†ä¸­åœ¨ Rust ä¸Šã€‚ä½†æŠŠäº‹æ•…å½’å’äº Rust æœ¬èº«å°±ä¸å¤ªåˆç†ã€‚ä»ä»–ä»¬çš„åœºæ™¯æ¥çœ‹å’Œæˆ‘ä¹‹å‰åœ¨ Kong ä¸Šåšæµé‡åˆ†å‘æ˜¯éå¸¸ç±»ä¼¼çš„ï¼Œæ— éæ˜¯è¿™é‡Œä»–ä»¬ä½¿ç”¨äº†æœºå™¨å­¦ä¹ çš„æŠ€æœ¯æ¥åˆ¤æ–­ä¸€ä¸ªæµé‡æ˜¯å¦ä¸ºæ¶æ„è¯·æ±‚ï¼Œè€Œæ–‡ä¸­æ‰€è¯´çš„ features æ–‡ä»¶æ˜¯è®­ç»ƒå¥½çš„æ¨¡å‹æ•°æ®ã€‚</p>
<p>æ ¹æœ¬åŸå› æ˜¯æ•°æ®åº“çš„æƒé™æ›´æ”¹ï¼Œå¯¼è‡´æŸ¥è¯¢å‡ºæ¥çš„ features æ˜¯æœ‰é‡å¤çš„ï¼Œsize å˜æˆæœŸæœ›çš„ä¸¤å€ã€‚è€Œè¿™ä¸ªé”™è¯¯çš„é…ç½®é€šè¿‡è‡ªåŠ¨åŒæ­¥æœºåˆ¶ä¼šåŒæ­¥åˆ°å…¨çƒå„ä¸ªèŠ‚ç‚¹ã€‚æ¯ä¸ªèŠ‚ç‚¹ä¼šæœ‰ä¸€ä¸ª bot æ¨¡å—ï¼Œæ ¹æ® features å»è®¡ç®—æ˜¯å¦æ‹¦æˆªè¯·æ±‚ï¼Œå¯ä»¥æƒ³è±¡è¿™æ˜¯ä¸ªå…¸å‹çš„æœºå™¨å­¦ä¹ åˆ†ç±»é—®é¢˜ï¼Œæ¯”å¦‚å¸¦æœ‰ä»€ä¹ˆç‰¹å¾çš„ HTTP agentã€æˆ–è€…æ˜¯è¯·æ±‚çš„ payload ä¹‹ç±»çš„è¿™äº›ç‰¹å¾ç»¼åˆè€ƒè™‘æ¥è®¡ç®—ã€‚è¿™ä¸ª <a target="_blank" rel="noopener" href="https://www.cloudflare.com/application-services/products/bot-management/">Bot Management</a>å…·ä½“å†…å®¹å¯ä»¥å‚è€ƒå…¶äº§å“è¯´æ˜ã€‚</p>
<p>é‚£ä¹ˆå¦‚æœ features åäº†ï¼Œè¿™ä¸ªæœºå™¨å­¦ä¹ æ¨¡å— bot èƒ½å¦æ­£å¸¸å·¥ä½œï¼Ÿç­”æ¡ˆæ˜¯ä¸è¡Œçš„ï¼Œè¿™ç‚¹æ–‡ç« å·²ç»è¯´æ˜ï¼š</p>
<blockquote>
<p>Both versions were affected by the issue, although the impact observed was different.</p>
</blockquote>
<blockquote>
<p>Customers deployed on the new FL2 proxy engine, observed HTTP 5xx errors. Customers on our old proxy engine, known as FL, did not see errors, but bot scores were not generated correctly, resulting in all traffic receiving a bot score of zero. Customers that had rules deployed to block bots would have seen large numbers of false positives.</p>
</blockquote>
<p>äº‹æ•…å‘ç”Ÿçš„æ—¶å€™æ–°è€ç»„ä»¶éƒ½æœ‰åŒæ—¶åœ¨è¿è¡Œï¼Œä¸¤ä¸ªç»„ä»¶åœ¨è¿™ç§åœºæ™¯ä¸‹éƒ½æ— æ³•æ­£å¸¸å·¥ä½œï¼Œåªæ˜¯é”™è¯¯å‘ˆç°æ–¹å¼ä¸åŒã€‚è¿™ä¹Ÿè§£é‡Šäº†æˆ‘å½“æ—¶ç”¨ ChatGPT ç»™å‡ºçš„æµè§ˆå™¨é”™è¯¯æ˜¯ä¸€ä¸ªæ‹¦æˆªé”™è¯¯ã€‚</p>
<p>æ‰€ä»¥è¿™é‡Œï¼Œunwrap å…¶å®å·²ç»ç®—æ˜¯æ•´ä¸ªé”™è¯¯çš„æœ€åä¸€ç¯äº†ã€‚è¯•æƒ³ä¸€ä¸‹å¦‚æœä¸ unwrap æ— éæ˜¯è¿™å‡ ç§åœºæ™¯ï¼š</p>
<ul>
<li>å› ä¸º FL2 æ˜¯å†…å­˜å—é™çš„ï¼Œéœ€è¦é¢„å…ˆåˆ†é…å¥½å†…å­˜ï¼Œæœ€å¤§ limit æœ¬æ¥å°±åªèƒ½ load 200 ä¸ª feature çš„é…ç½®ï¼Œç°åœ¨å°ºå¯¸è¶…è¿‡äº†ï¼Œç»§ç»­ load åº”è¯¥å°±æ˜¯ OOM é”™è¯¯ï¼Œä¸å¯æ¢å¤ã€‚</li>
<li>load åˆ°æœ€å¤§ limit çš„æ—¶å€™åœæ­¢ï¼Œè¿™æ—¶å€™ä¸ç¡®å®šæ•´ä¸ª feature æ–‡ä»¶æ˜¯å¦å®Œæ•´ï¼ŒæŒ‰ç…§ä¸Šæ–‡æ‰€è¯´ï¼Œbot ç”¨è¿™ä¸ªé…ç½®è®¡ç®—çš„ request score æ˜¯ 0ï¼ŒåŒæ ·è¯·æ±‚æ‹¦æˆªï¼Œç”šè‡³æ—¥å¿—ä¸­å¯èƒ½éƒ½çœ‹ä¸å‡ºæ¥ä»€ä¹ˆé”™è¯¯ã€‚</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸¤ç§æƒ…å½¢éƒ½å·®ä¸å¤šï¼Œç”šè‡³å¦‚æœæŒ‰ç…§ <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Fail-fast_system">fail fast</a> çš„ç­–ç•¥ï¼Œæ—¥å¿—ä¸­ä¼šæœ‰æ˜æ˜¾çš„ 500 é”™è¯¯ï¼Œæˆ‘ä¸çŸ¥é“ Cloudflare æ˜¯å¦åšäº†é”™è¯¯ç›‘æ§ï¼Œå› ä¸ºæŒ‰ç†æ¥è¯´è¿™ç§çº§åˆ«çš„é”™è¯¯æ˜¯éå¸¸æ˜æ˜¾çš„ï¼Œéœ€è¦ç«‹å³æŠ¥è­¦ã€‚</p>
<p>å¾ˆå¤šäººéƒ½é›†ä¸­è®¨è®ºåœ¨è¿™é‡Œçš„ <code>unwrap</code>:
<img src="http://catcoding.me/images/ob_pasted-image-20251120062013.png" alt="" /></p>
<p>å½“ç„¶è¿™ä¸æ˜¯æœ€ä½³å®è·µï¼Œä½†è¿™æ—¶å€™å³ä½¿ä½¿ç”¨ <code>.expect("invalid bots input")</code> è¿™æ ·çš„å†™æ³•ä¹Ÿå¥½ä¸åˆ°å“ªé‡Œå»ï¼ŒåŒæ ·ä¼š 500 é”™è¯¯ï¼Œåªæ˜¯æ—¥å¿—é‡Œé¢å¤šç•™ä¸€æ¡é”™è¯¯ä¿¡æ¯ã€‚å› ä¸ºå¦‚æœä¸ç›‘æ§é”™è¯¯ç ï¼Œæ˜¯æ²¡äººç«‹å³å‘ç°é—®é¢˜æ‰€åœ¨çš„ã€‚</p>
<p>æ›´å¥½çš„åšæ³•æ˜¯å¯¹è¾“å…¥è¿›è¡Œä¸¥æ ¼æ ¡éªŒï¼Œä¾‹å¦‚æ£€æŸ¥ç‰¹å¾æ•°é‡å’Œå¤§å°ã€‚å¦‚æœä¸ç¬¦åˆé¢„æœŸï¼Œåº”ä¿ç•™æ—§é…ç½®å¹¶æ‹’ç»åŠ è½½æ–°æ•°æ®ï¼Œè€Œä¸æ˜¯åŠ è½½åˆ°ä¸€åŠæ‰å‘ç°å°ºå¯¸å¼‚å¸¸ï¼Œæ›´ä¸åº”è¯¥æ²¡æœ‰ fallback æœºåˆ¶ã€‚</p>
<p>å½“ç„¶è¿™é‡Œä»£ç æ²¡æœ‰å®Œå…¨å¼€æºï¼Œæˆ‘ä»¬ä»çŸ­çŸ­çš„ä»£ç ç‰‡æ®µæ— æ³•äº†è§£æ•´ä¸ªé¡¹ç›®çš„åœºæ™¯ã€‚</p>
<p>ä»è¿™ä¸ªç»å…¸çš„é”™è¯¯æˆ‘ä»¬åº”è¯¥å‘ç°çš„æ˜¯æ›´é«˜ç»´åº¦çš„è­¦æˆ’ï¼Œå¼€å‘ç®¡ç†å’Œè¿ç»´ä¸Šæœ‰è¿™äº›é—®é¢˜ï¼š</p>
<ol>
<li>æ•´ä¸ªé…ç½®çš„æ›´æ–°å±…ç„¶æ²¡æœ‰ç°åº¦å‘å¸ƒï¼Œæ¯”å¦‚ä½ æ¨¡å‹æ›´æ–°äº†åº”è¯¥æ˜¯å…ˆåŒæ­¥åˆ° 5% çš„èŠ‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜å†ç»§ç»­åŒæ­¥åˆ° 20% çš„èŠ‚ç‚¹ï¼Œå¦‚æœæ²¡é—®é¢˜å†ç»§ç»­ã€‚å¦‚æœæœ‰ç°åº¦æ›´æ–°ï¼Œè¿™æ¬¡çš„äº‹æ•…ä¸ä¼šé€ æˆè¿™ä¹ˆå¤§èŒƒå›´çš„å½±å“ï¼Œå› ä¸ºåœ¨æ—©æœŸåº”è¯¥å°±è§‚å¯Ÿåˆ°äº†ã€‚å³ä½¿æ˜¯å¾®è½¯æ–°ç‰ˆæœ¬æ“ä½œç³»ç»Ÿçš„å‘å¸ƒï¼Œéƒ½æ˜¯ä¼šåˆ†æˆå¥½å‡ ä¸ªé˜¶æ®µï¼Œæ¯”å¦‚ ring0, ring1 é€šå¸¸å†…éƒ¨å›¢é˜Ÿæ›´æ–°ï¼Œè¿™æ ·é—®é¢˜å°±ç°åœ¨æš´éœ²åœ¨è‡ªå®¶å›¢é˜Ÿä¸Šã€‚</li>
<li>æ•´ä¸ªé…ç½®æ²¡æœ‰ fallback æœºåˆ¶æˆ–è€…å…¨å±€å¼€å…³ï¼Œç°åœ¨å‘ç°äº†é—®é¢˜ï¼Œåº”è¯¥æœ‰ä¸€ä¸ªå®‰å…¨çš„æ§åˆ¶å¼€å…³æŠŠé…ç½®åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªèƒ½å·¥ä½œçš„é…ç½®ã€‚</li>
<li>ç›‘æ§ä¸åˆ°ä½ï¼Œå…³é”®ç»„ä»¶çš„ 500 é”™è¯¯å¯ä»¥è¯´æ˜¯æ•‘å‘½çš„è­¦å‘Šï¼Œä½†ä»ä»–ä»¬çš„æ’æŸ¥è¿‡ç¨‹ä¸Šçœ‹èŠ±è´¹äº†æ›´é•¿çš„æ—¶é—´åœ¨æ˜¯å¦æ˜¯æ”»å‡»ã€‚</li>
<li>åº”è¯¥æ˜¯æ²¡æœ‰ fuzzing æµ‹è¯•ï¼Œè¿™ç§ input éæ³•çš„æƒ…å†µç”šè‡³éœ€è¦åœ¨å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ä¸­ä½“ç°ã€‚</li>
</ol>
<p>ç½‘ç»œä¸Šå¾ˆå¤šäººç© Rust çš„æ¢—ï¼Œå…¸å‹çš„è¯´æ³•æ˜¯<a target="_blank" rel="noopener" href="https://x.com/skywind3000/status/1991178281954238851">è¿™ç§</a>å’Œ<a target="_blank" rel="noopener" href="https://x.com/LundukeJournal/status/1991226162442355102">è¿™ç§</a>:</p>
<blockquote>
<p>Rust è¿‡å»å¤©å¤©å®£ä¼ â€œä¸€æ—¦å­¦ä¼š rustï¼Œå³ä¾¿æ˜¯æ–°æ‰‹ä¹Ÿèƒ½å†™å‡ºå¥å£®å®‰å…¨çš„ä»£ç â€ï¼Œè€ŒçœŸçš„å‡ºç°é—®é¢˜äº†ï¼Œåˆå¼€å§‹æŒ‡è´£å†™ä»£ç çš„äººæ˜¯èœé¸Ÿã€‚</p>
</blockquote>
<blockquote>
<p>Cloudflare Rewrote Their Core in Rust, Then Half of the Internet Went Down</p>
</blockquote>
<p>è¿™é‡Œæœ‰ç‚¹æ··æ·†è§†å¬ï¼Œå› ä¸º Rust æ‰€è¯´çš„è¦è§£å†³çš„å®‰å…¨é—®é¢˜æ˜¯å†…å­˜é—®é¢˜ï¼Œä¸æ˜¯é€»è¾‘é—®é¢˜ã€‚å¦å¤–ï¼Œä¹Ÿä¸æ˜¯å› ä¸ºé‡å†™å¯¼è‡´çš„é—®é¢˜å‘ç”Ÿã€‚</p>
<p>ä¸ºä»€ä¹ˆ Cloudflare è¦ç”¨ Rust é‡å†™ä¸€äº›å…³é”®ç»„ä»¶ï¼Œå¯ä»¥çœ‹çœ‹ä»–ä»¬ä¹‹å‰çš„æ–‡ç« 
<a target="_blank" rel="noopener" href="https://blog.cloudflare.com/incident-report-on-memory-leak-caused-by-cloudflare-parser-bug/">Incident report on memory leak caused by Cloudflare parser bug</a></p>
<p>å½“ç„¶æˆ‘æ‰¿è®¤åœ¨æœ‰çš„å…¬å¸ï¼Œå¯èƒ½æœ‰çš„å›¢é˜Ÿå®Œå…¨æ˜¯ä¸ºäº†ç»©æ•ˆæˆ–è€…çº¯ä¸ªäººåå¥½è€Œå‘èµ·é‡å†™è€ç»„ä»¶çš„é¡¹ç›®ã€‚è€Œæ›´å¤šå…¬å¸ç¡®å®æ˜¯è¢«å†…å­˜å®‰å…¨é—®é¢˜æŠ˜ç£¨å¾—æ€€ç–‘äººç”Ÿæ‰ä¼šå»é‡å†™ï¼Œåƒä¸Šé¢æ–‡ä¸­æ‰€è¯´çš„å®‰å…¨äº‹æ•…æ˜¯åº•è£¤è¢«äººæ‰’äº†ï¼Œè‡ªå·±è¿˜ä¸çŸ¥é“ï¼Œå¾—è®©æ—è§‚è€…å‘Šè¯‰ä½ æ‰å‘ç°ã€‚å’Œè¿™æ¬¡äº‹æ•…çš„å› ä¸ºå·¥ç¨‹ç®¡ç†ä¸Šæ‰€åšæˆçš„å®‰å…¨äº‹æ•…æœ‰æ˜æ˜¾çš„åˆ†åˆ«ã€‚æ‰€ä»¥ Rust æ‰€è¯´çš„å®‰å…¨ï¼Œæ˜¯å¦‚ä½•é¿å…å†…å­˜å®‰å…¨ã€‚</p>
<p>ç”šè‡³å³ä½¿æ˜¯ç”¨äº† Rustï¼Œä¸€äº›å†…å­˜ä¸Šçš„é—®é¢˜è¿˜æ˜¯å¯èƒ½å› ä¸ºé€»è¾‘ä¸Šçš„é”™è¯¯è€Œå‡ºç°ï¼Œæ¯”å¦‚æˆ‘è¿™ä¸ªå·¥ä½œä¸­çš„ PR <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/pull/932">Avoid duplicated retryable tasks</a>å°±æ˜¯é¿å…å¾€é˜Ÿåˆ—é‡ŒåŠ äº†é‡å¤çš„ task è€Œé€ æˆå†…å­˜ç”¨å¾—è¶Šæ¥è¶Šå¤šã€‚</p>
<p>è¿™æ¬¡ Cloudflare çš„äº‹æ•…å°±æ¯”å¦‚ä¸€ä¸ªå¸æœºé©¾é©¶æ²ƒå°”æ²ƒï¼Œç»“æœç¢°ä¸Šäº†å±±ä½“æ»‘å¡è¢«å‹æ­»äº†ï¼Œè¿™ç§åœºæ™¯ä¸‹å°±æ˜¯æ¢æˆä»»æ„å…¶ä»–å“ç‰Œçš„è½¦éƒ½ä¼šæ˜¯ä¸€ä¸ªç»“æœã€‚ä½†å¦‚æœä½ è·‘æ¥è¯´ï¼Œçœ‹å§ï¼Œæ²ƒå°”æ²ƒå·ç§°å®‰å…¨ï¼Œç»“æœè¿˜ä¸æ˜¯ä¸€æ ·æ­»ï¼Œè¿™å«åšè™šå‡å®£ä¼ ã€‚</p>
<p>è¿™ä¸å«è™šå‡å®£ä¼ ï¼Œè€Œæ˜¯ä½ å¯¹è½¦æœ‰äº†ä¸åˆ‡å®é™…çš„å¹»æƒ³ã€‚æ²ƒå°”æ²ƒç¡®å®ä¸å®Œç¾ï¼Œä½†æ¯ä¸ªäººéƒ½ä¼šæœ‰ä¸åŒçš„é€‰æ‹©åå¥½ã€‚æ­£å¸¸äººç†è§£æ²ƒå°”æ²ƒè¯´çš„å®‰å…¨æ˜¯å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ã€å¯¹æ¯”å…¶ä»–è½¦ä¼šå®‰å…¨ä¸€ç‚¹ï¼Œè€Œä¸æ˜¯è¯´ä¹°äº†æ²ƒå°”æ²ƒå°±ä¼šé•¿ç”Ÿä¸è€äº†ã€‚</p>
<p>æ°¸è¿œè®°ä½ï¼šNo Silver Bulletã€‚</p>
<hr />
<p>æ€»ä¹‹ï¼Œè¿™æ¬¡ Cloudflare çš„äº‹æ•…è™½ç„¶é€ æˆçš„å½±å“æŒºå¤§ï¼Œä½†è¿™ä¸ªå…¬å¸ä¹Ÿç¡®å®è¶³å¤Ÿå…¬å¼€é€æ˜ï¼Œäº‹æ•…åˆ†æå†™å¾—éå¸¸æ¸…æ™°ï¼Œå€¼å¾—å¤§å®¶å­¦ä¹ å¹¶åæ€è‡ªå·±ç»„ç»‡ä¸Šæœ‰æ²¡æœ‰ç±»ä¼¼çš„å·¥ç¨‹é—®é¢˜ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>é›¶çŸ¥è¯†è¯æ˜å…¥é—¨</title>
    <link href="http://catcoding.me/p/zero-knowledge-proof/"/>
    <id>http://catcoding.me/p/zero-knowledge-proof/</id>
    <published>2025-09-26T16:49:47+00:00</published>
    <updated>2026-02-13T06:43:00.111221094+00:00</updated>
    <content type="html"><![CDATA[<p>æ— è®ºæ˜¯åœ¨èŠ L2ã€éšç§è¿˜æ˜¯ä¸‹ä¸€ä»£ Web æŠ€æœ¯ï¼Œé›¶çŸ¥è¯†è¯æ˜éƒ½æ˜¯ç»å¸¸ä¼šç¢°åˆ°çš„æŠ€æœ¯æœ¯è¯­ï¼Œå¬èµ·æ¥å°±åƒæ˜¯ç§‘å¹»å°è¯´é‡Œçš„ä¸œè¥¿ï¼š<strong>å‘ä½ è¯æ˜æˆ‘çŸ¥é“ä¸€ä¸ªç§˜å¯†ï¼Œä½†ç»ä¸é€éœ²è¿™ä¸ªç§˜å¯†æœ¬èº«</strong>ï¼Œè¿™ç®€ç›´æ˜¯ç¨‹åºå‘˜çš„ç»ˆææµªæ¼«ã€‚</p>
<p>å¤§å¤šæ•°äººç²—çœ‹éƒ½ä¼šè§‰å¾—è¿™ä¸œè¥¿æ˜¯å¯†ç å­¦åšå£«ä»¬çš„ä¸“å±ç©å…·ï¼Œæˆ‘èŠ±äº†ä¸€æ®µæ—¶é—´å­¦ä¹ åï¼Œå‘ç°è¿™æ¡é€šå¾€é­”æ³•ä¸–ç•Œçš„è·¯ä¼¼ä¹æœ‰è¿¹å¯å¾ªï¼Œå¸Œæœ›è¿™ç¯‡å…¥é—¨ä»‹ç»èƒ½å¸®åŠ©åˆ°æ›´å¤šè¿™æ–¹å‘çš„å­¦ä¹ è€…ã€‚</p>
<h2 id="é­”æ³•æ´ç©´"><a href="#é­”æ³•æ´ç©´" class="headerlink" title="é­”æ³•æ´ç©´"></a>é­”æ³•æ´ç©´</h2>
<p>å¿˜æ‰æ‰€æœ‰æ•°å­¦ï¼Œæˆ‘ä»¬å…ˆä»ä¸€ä¸ªæ•…äº‹å¼€å§‹â€”â€”â€œé˜¿é‡Œå·´å·´æ´ç©´â€ï¼Œè¿™æ˜¯ç†è§£ ZKP æœ€ç»å…¸çš„ä¾‹å­ï¼Œæœ€æ—©ç”±Â <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Jean-Jacques_Quisquater" title="Jean-Jacques Quisquater">Jean-Jacques Quisquater</a>Â ç­‰äººäº 1990 å¹´åœ¨ä»–ä»¬çš„è®ºæ–‡ã€Šå¦‚ä½•å‘ä½ çš„å­©å­è§£é‡Šé›¶çŸ¥è¯†åè®®ã€‹ä¸­å‘è¡¨ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªç¯å½¢æ´ç©´ï¼ŒAã€B ä¸¤ä¸ªå…¥å£åœ¨å‰æ–¹ï¼Œæ·±å¤„æœ‰ä¸€æ‰‡åªæœ‰çŸ¥é“å’’è¯­æ‰èƒ½æ‰“å¼€çš„é­”æ³•é—¨ã€‚Alice çŸ¥é“å’’è¯­ï¼Œç°åœ¨ï¼ŒAlice æƒ³å‘ Bob è¯æ˜å¥¹çŸ¥é“å’’è¯­ï¼Œä½†åˆä¸æƒ³è®© Bob å¬åˆ°å’’è¯­æ˜¯ä»€ä¹ˆã€‚</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250915175921.png" alt="" /></p>
<p>ä»–ä»¬å¯ä»¥è¿™æ ·ç©ä¸€ä¸ªæ¸¸æˆï¼š</p>
<ol>
<li>
<p><strong>æ‰¿è¯º (Commitment)</strong>ï¼šAliceï¼Œä½œä¸ºè¯æ˜è€… (Prover)ï¼Œç‹¬è‡ªè¿›å…¥æ´ç©´ã€‚ç„¶åå¯ä»¥éšæœºä» A å£è¿›ï¼Œä¹Ÿå¯ä»¥ä» B å£è¿›ã€‚Bob åœ¨æ´å¤–ç­‰ç€ï¼Œä½†ä¸çŸ¥é“ Alice èµ°äº†å“ªæ¡è·¯ã€‚</p>
</li>
<li>
<p><strong>æŒ‘æˆ˜ (Challenge)</strong>ï¼šBob ä½œä¸ºéªŒè¯è€… (Verifier)ï¼Œèµ°åˆ°æ´å£ç„¶åéšæœºå–Šå‡ºä¸€ä¸ªè¦æ±‚ï¼Œæ¯”å¦‚ï¼šâ€œä» B é€šé“å‡ºæ¥ï¼â€</p>
</li>
<li>
<p><strong>å“åº” (Response)</strong>ï¼šAlice å¬åˆ°è¦æ±‚åï¼š</p>
<ul>
<li>å¦‚æœå¥¹å½“åˆå°±æ˜¯ä» B è¿›å»çš„ï¼Œé‚£ç®€å•ï¼Œå°±ç›´æ¥ä» B èµ°å‡ºæ¥ã€‚</li>
<li>å¦‚æœå¥¹å½“åˆæ˜¯ä» A è¿›å»çš„ï¼Œå°±å¿…é¡»å¿µåŠ¨å’’è¯­æ‰“å¼€é‚£æ‰‡é­”æ³•é—¨ç©¿è¿‡å»ï¼Œç„¶åä» B é€šé“å‡ºæ¥ã€‚</li>
</ul>
</li>
<li>
<p><strong>éªŒè¯ (Verification)</strong>ï¼šBob çœ‹åˆ° Alice ç¡®å®ä» B é€šé“å‡ºæ¥äº†ï¼Œä»–å¯¹ Alice çš„ä¿¡ä»»åº¦å¢åŠ äº†ä¸€ç‚¹ã€‚</p>
</li>
</ol>
<p>ä¸ºä»€ä¹ˆè¯´â€œä¸€ç‚¹â€å‘¢ï¼Ÿå› ä¸ºå¦‚æœ Alice ä¸çŸ¥é“å’’è¯­ï¼Œå¥¹ä»ç„¶æœ‰ 50% çš„æ¦‚ç‡è’™å¯¹ï¼ˆæ¯”å¦‚ Alice ä» B è¿›å»ï¼ŒBob æ°å¥½ä¹Ÿå–Šäº† Bï¼‰ã€‚</p>
<p>ä½†å¦‚æœè¿™ä¸ªæ¸¸æˆ<strong>é‡å¤ 20 æ¬¡</strong>ï¼ŒAlice æ¯æ¬¡éƒ½èƒ½ä» Bob æŒ‡å®šçš„å‡ºå£å‡ºæ¥ï¼Œé‚£ Alice æ¯æ¬¡éƒ½è’™å¯¹çš„æ¦‚ç‡å°±åªæœ‰$$\left(\frac{1}{2}\right)^{20}$$ï¼Œä¹Ÿå°±æ˜¯å¤§çº¦æ˜¯ç™¾ä¸‡åˆ†ä¹‹ä¸€ã€‚è¿™æ—¶å€™ Bob å°±æœ‰åè¶³çš„æŠŠæ¡ç›¸ä¿¡ï¼ŒAlice ç¡®å®çŸ¥é“é‚£ä¸ªå’’è¯­ã€‚</p>
<p>è¿™ä¸ªå°æ¸¸æˆå®Œç¾åœ°å±•ç¤ºäº† ZKP çš„ä¸‰å¤§ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>å®Œæ•´æ€§ (Completeness)</strong>ï¼šå¦‚æœ Alice çœŸçš„çŸ¥é“å’’è¯­ï¼Œå¥¹æ€»èƒ½å®ŒæˆæŒ‘æˆ˜ã€‚</li>
<li><strong>å¯é æ€§ (Soundness)</strong>ï¼šå¦‚æœ Alice ä¸çŸ¥é“å’’è¯­ï¼Œå¥¹å‡ ä¹ä¸å¯èƒ½éª—è¿‡ Bobã€‚</li>
<li><strong>é›¶çŸ¥è¯†æ€§ (Zero-Knowledge)</strong>ï¼šåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼ŒBob é™¤äº†â€œAlice çŸ¥é“å’’è¯­â€è¿™ä¸ªäº‹å®å¤–ï¼Œæ²¡æœ‰å­¦åˆ°ä»»ä½•å…³äºå’’è¯­æœ¬èº«çš„ä¿¡æ¯ã€‚</li>
</ul>
<p>å¦å¤–æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªé‡è¦çš„å±æ€§æ˜¯ï¼Œé›¶çŸ¥è¯†è¯æ˜å¹¶éæ•°å­¦æ„ä¹‰ä¸Šçš„è¯æ˜ï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨ä¸€ä¸ªå¾ˆå°å¾ˆå°çš„æ¦‚ç‡ï¼Œå³<em>å¯é æ€§è¯¯å·®</em> â€“ ä½œå¼Šçš„è¯æ˜è€…èƒ½å¤Ÿéª—è¿‡éªŒè¯è€…ï¼Œä½†å®é™…å®è·µä¸­æˆ‘ä»¬å‡ ä¹å¯ä»¥å¿½ç•¥è¿™ä¸ªæå°çš„æ¦‚ç‡ã€‚</p>
<h2 id="Whereâ€™s-Wally"><a href="#Whereâ€™s-Wally" class="headerlink" title="Whereâ€™s Wally"></a>Whereâ€™s Wally</h2>
<p>è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ä¾‹å­æ¥è¯´æ˜é›¶çŸ¥è¯†è¯æ˜ï¼š
<img src="http://catcoding.me/images/ob_pasted-image-20250916104843.png" alt="" /></p>
<p>Alice å’Œ Bob ç©æ¸¸æˆçœ‹è°å…ˆæ‰¾åˆ° Wallyï¼ŒAlice è¯´å¥¹æ‰¾åˆ°äº†ï¼Œå¥¹æƒ³è¦è¯æ˜è‡ªå·±å·²ç»å¾—åˆ°äº†ç»“æœï¼Œä½†åˆä¸æƒ³é€éœ²æ›´å¤šä¿¡æ¯ç»™ Bobï¼Œæ‰€ä»¥å¥¹å¯ä»¥ç”¨ä¸€ä¸ª<strong>å‡ å€é¢ç§¯</strong>é»‘è‰²çš„çº¸ç‰‡é®ä½æ•´ä¸ªå›¾ç”»ï¼Œç„¶åæŠŠ Wally ä½ç½®é‚£é‡Œåœ¨é»‘è‰²çº¸ç‰‡ä¸Šæ‰“ä¸ªå°å­”ï¼Œè¿™æ · Bob å°±å¯ä»¥çœ‹åˆ° Wallyï¼Œè€Œä¸çŸ¥é“ Wally åœ¨å“ªå„¿ã€‚æ³¨æ„è¿™é‡Œä¸ºä»€ä¹ˆå¼ºè°ƒå‡ å€é¢ç§¯çš„é»‘è‰²çº¸ç‰‡ï¼Œå¦‚æœæ˜¯å’ŒåŸå›¾ç›¸åŒå¤§å°çš„çº¸ç‰‡ï¼Œå°±å¯èƒ½æš´éœ²äº† Wally çš„å¤§è‡´æ–¹å‘å’ŒèŒƒå›´ã€‚</p>
<p>è¿™ä¸ªä¾‹å­å±•ç¤ºçš„ ZKP å¦å¤–ä¸€ä¸ªç‰¹æ€§æ˜¯ Prover é€šå¸¸æ˜¯æ›´è€—è´¹èµ„æºçš„ (ä»å›¾ç‰‡ä¸­æ‰¾åˆ° Wally éœ€è¦èŠ±è´¹ä¸€å®šçš„æ—¶é—´)ï¼Œè€Œ Verifier é€šå¸¸èƒ½å¾ˆå¿«éªŒè¯ã€‚è¿™ä¸ªç‰¹æ€§æ‰èƒ½è®©ä¸€äº›åŒºå—é“¾é¡¹ç›®åˆ©ç”¨ ZKP æŠŠé“¾ä¸Šè®¡ç®—æŒªåˆ°é“¾ä¸‹è®¡ç®—ï¼Œè€Œé“¾ä¸Šåªæ˜¯åšéªŒè¯ã€‚</p>
<h2 id="æœ€ç®€å•çš„-ZKP-ä»£ç "><a href="#æœ€ç®€å•çš„-ZKP-ä»£ç " class="headerlink" title="æœ€ç®€å•çš„ ZKP ä»£ç "></a>æœ€ç®€å•çš„ ZKP ä»£ç </h2>
<p>ä¸¤ä¸ªä¾‹å­å¾ˆæ£’ï¼Œä½†ä»£ç æ€ä¹ˆå†™ï¼Ÿ</p>
<p>æˆ‘æ¥è§¦åˆ°çš„ç¬¬ä¸€ä¸ªåè®®å« Schnorr èº«ä»½éªŒè¯ï¼Œå®ƒè¦è¯æ˜çš„æ˜¯ï¼šâ€œæˆ‘çŸ¥é“ä¸å…¬é’¥ <code>h</code> å¯¹åº”çš„ç§é’¥ <code>x</code>ï¼Œå…¶ä¸­ <code>h = g^x mod p</code>â€ã€‚è¿™é‡Œçš„â€œå’’è¯­â€å°±æ˜¯ <code>x</code>ï¼Œè€Œé‚£æ‰‡â€œé­”æ³•é—¨â€å°±æ˜¯ç¦»æ•£å¯¹æ•°é—®é¢˜â€”â€”ä» <code>g, h, p</code> åæ¨å‡º <code>x</code> æå…¶å›°éš¾ã€‚</p>
<p>è¿™ä¸ªåè®®çš„â€œäº¤äº’å¼â€ç‰ˆæœ¬ï¼Œå®Œç¾åœ°å¤åˆ»äº†æ´ç©´é‡Œçš„â€œä¸€æ¥ä¸€å›â€ï¼š</p>
<ol>
<li><strong>Prover (æˆ‘)</strong>: éšæœºé€‰ä¸ªæ•° <code>k</code>ï¼Œè®¡ç®— <code>t = g^k mod p</code> å‘ç»™ Verifierã€‚è¿™å«â€œæ‰¿è¯ºâ€ã€‚</li>
<li><strong>Verifier (ä½ )</strong>: éšæœºç»™ Prover ä¸€ä¸ªæ•° <code>c</code>ï¼Œè¿™å«â€œæŒ‘æˆ˜â€ã€‚</li>
<li><strong>Prover</strong>: æ ¹æ®æ”¶åˆ°çš„ <code>c</code>ï¼Œè®¡ç®— <code>r = k - c*x mod (p-1)</code> å¹¶å‘å›ã€‚è¿™å«â€œå“åº”â€ã€‚</li>
<li><strong>Verifier</strong>: éªŒè¯ <code>g^r * h^c mod p</code> æ˜¯ä¸æ˜¯ç­‰äº Prover ä¸€å¼€å§‹ç»™çš„ <code>t</code>ã€‚</li>
</ol>
<p>å®Œæ•´ä»£ç åœ¨<a target="_blank" rel="noopener" href="https://github.com/chenyukang/ss/blob/06a90f7ec0cf7a3527eae2478c7dfea44b8a6240/schnorr-demo/src/main.rs#L8-L41">iteractive_schnorr</a></p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">iteractive_schnorr</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> å…¬å¼€å‚æ•°ï¼šç´ æ•° p=204859, g=5, x=6 (ç§˜å¯†), h = 5^6 mod 204859 = 15625
</span>    <span class="token keyword rust">let</span> p<span class="token punctuation separator rust">:</span> BigInt <span class="token operator rust">=</span> <span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>from<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token number integer decimal rust">204859</span><span class="token keyword numeric rust">u64</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> g<span class="token punctuation separator rust">:</span> BigInt <span class="token operator rust">=</span> <span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>from<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token number integer decimal rust">5</span><span class="token keyword numeric rust">u32</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> x<span class="token punctuation separator rust">:</span> BigInt <span class="token operator rust">=</span> <span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>from<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token number integer decimal rust">6</span><span class="token keyword numeric rust">u32</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span> <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> è¯æ˜è€…çš„ç§˜å¯†
</span>    <span class="token keyword rust">let</span> h <span class="token operator rust">=</span> g.<span class="token function rust">modpow</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>x<span class="token punctuation separator rust">,</span> <span class="token operator rust">&amp;</span>p</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span> <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> h = g^x mod p
</span>
    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> è¿›è¡Œå¤šè½®è¯æ˜ p
</span>    <span class="token keyword rust">for</span> <span class="token operator rust">_</span> <span class="token operator rust">in</span> <span class="token number integer decimal rust">0</span><span class="token operator rust">..</span><span class="token number integer decimal rust">20</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> è¯æ˜è€…ï¼šç”Ÿæˆæ‰¿è¯º t = g^k mod p
</span>        <span class="token keyword rust">let</span> <span class="token keyword rust">mut</span> rng <span class="token operator rust">=</span> <span class="token function rust">thread_rng</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
        <span class="token keyword rust">let</span> k <span class="token operator rust">=</span> rng.<span class="token function rust">gen_bigint_range</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span><span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>one<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation separator rust">,</span> <span class="token operator rust">&amp;</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>p <span class="token operator rust">-</span> <span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>one<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
        <span class="token keyword rust">let</span> t <span class="token operator rust">=</span> g.<span class="token function rust">modpow</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>k<span class="token punctuation separator rust">,</span> <span class="token operator rust">&amp;</span>p</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
        <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>è¯æ˜è€…å‘é€ t: <span class="token constant placeholder rust">{}</span><span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span> t<span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

        <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> éªŒè¯è€…ï¼šç”ŸæˆæŒ‘æˆ˜ c (ç®€åŒ–åˆ° 0..10)
</span>        <span class="token keyword rust">let</span> c<span class="token punctuation separator rust">:</span> BigInt <span class="token operator rust">=</span> <span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>from<span class="token group rust"><span class="token punctuation section group begin rust">(</span>rng.<span class="token function rust">gen_range</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token number integer decimal rust">0</span><span class="token operator rust">..</span><span class="token number integer decimal rust">10</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
        <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>éªŒè¯è€…æŒ‘æˆ˜ c: <span class="token constant placeholder rust">{}</span><span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span> c<span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

        <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> è¯æ˜è€…ï¼šå“åº” r = k - c * x mod (p-1)
</span>        <span class="token keyword rust">let</span> order <span class="token operator rust">=</span> <span class="token operator rust">&amp;</span>p <span class="token operator rust">-</span> <span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>one<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span> <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> é˜¶
</span>        <span class="token keyword rust">let</span> r <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>k <span class="token operator rust">-</span> <span class="token operator rust">&amp;</span>c <span class="token operator rust">*</span> <span class="token operator rust">&amp;</span>x</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token function rust">modpow</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span><span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>one<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation separator rust">,</span> <span class="token operator rust">&amp;</span>order</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span> <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> ç¡®ä¿æ­£æ•°
</span>        <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>è¯æ˜è€…å“åº” r: <span class="token constant placeholder rust">{}</span><span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span> r<span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

        <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> éªŒè¯è€…ï¼šæ£€æŸ¥ g^r * h^c == t mod p
</span>        <span class="token keyword rust">let</span> left <span class="token operator rust">=</span> g.<span class="token function rust">modpow</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>r<span class="token punctuation separator rust">,</span> <span class="token operator rust">&amp;</span>p</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">*</span> h.<span class="token function rust">modpow</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>c<span class="token punctuation separator rust">,</span> <span class="token operator rust">&amp;</span>p</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">%</span> <span class="token operator rust">&amp;</span>p<span class="token punctuation terminator rust">;</span>
        <span class="token keyword rust">if</span> left <span class="token operator rust">=</span><span class="token operator rust">=</span> t <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>éªŒè¯é€šè¿‡ï¼<span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span> <span class="token keyword rust">else</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>éªŒè¯å¤±è´¥ï¼<span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span></code></pre>
<p>ä½†ä¸€æ¥ä¸€å›ä¹Ÿå¤ªéº»çƒ¦äº†ï¼Œäº’è”ç½‘åº”ç”¨éœ€è¦çš„æ˜¯ä¸€æ¬¡æ€§çš„â€œè¯æ˜â€ã€‚ç»è¿‡ä¸€ç•ªç ”ç©¶ï¼Œå¯†ç å­¦å®¶ä»¬æƒ³å‡ºçš„ä¸€ä¸ªç»å¦™æŠ€å·§ï¼Œå«åš <strong>Fiat-Shamir å¯å‘å¼è¯æ˜</strong>ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>ç”¨å“ˆå¸Œå‡½æ•°æ¥æ¨¡æ‹Ÿä¸€ä¸ªä¸å¯é¢„æµ‹çš„â€œæŒ‘æˆ˜è€…â€</strong>ã€‚</p>
<p>Prover ä¸å†ç­‰å¾… Verifier ç»™å‡ºæŒ‘æˆ˜ <code>c</code>ï¼Œè€Œæ˜¯è‡ªå·±è®¡ç®— <code>c = hash(å…¬å¼€ä¿¡æ¯, è‡ªå·±çš„æ‰¿è¯º t)</code>ã€‚å› ä¸ºå“ˆå¸Œå‡½æ•°çš„é›ªå´©æ•ˆåº”ï¼ŒProver æ— æ³•é¢„æµ‹ <code>c</code> çš„å€¼æ¥ä½œå¼Šï¼Œè¿™å°±å·§å¦™åœ°æŠŠäº¤äº’è¿‡ç¨‹å‹ç¼©äº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ Rust å†™å‡ºè¿™æ ·ä¸€ä¸ªå®Œæ•´çš„<a target="_blank" rel="noopener" href="https://github.com/chenyukang/ss/blob/06a90f7ec0cf7a3527eae2478c7dfea44b8a6240/schnorr-demo/src/main.rs#L43-L109">éäº¤äº’å¼è¯æ˜ç¨‹åº fiat_shamir</a>ï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">fiat_shamir</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> --- å…¬å¼€å‚æ•° ---
</span>    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> åœ¨çœŸå®ä¸–ç•Œï¼Œp åº”è¯¥æ˜¯è‡³å°‘ 2048 ä½çš„å®‰å…¨ç´ æ•°
</span>    <span class="token keyword rust">let</span> p<span class="token punctuation separator rust">:</span> BigInt <span class="token operator rust">=</span> <span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>from<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token number integer decimal rust">204859</span><span class="token keyword numeric rust">u64</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> g<span class="token punctuation separator rust">:</span> BigInt <span class="token operator rust">=</span> <span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>from<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token number integer decimal rust">2</span><span class="token keyword numeric rust">u64</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Prover çš„ç§˜å¯† (åªæœ‰ Prover çŸ¥é“)
</span>    <span class="token keyword rust">let</span> secret_x<span class="token punctuation separator rust">:</span> BigInt <span class="token operator rust">=</span> <span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>from<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token number integer decimal rust">123456</span><span class="token keyword numeric rust">u64</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Prover çš„å…¬é’¥ (æ‰€æœ‰äººéƒ½çŸ¥é“)
</span>    <span class="token keyword rust">let</span> public_h <span class="token operator rust">=</span> g.<span class="token function rust">modpow</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>secret_x<span class="token punctuation separator rust">,</span> <span class="token operator rust">&amp;</span>p</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

    <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>--- å…¬å¼€å‚æ•° ---<span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>p = <span class="token constant placeholder rust">{}</span><span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span> p<span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>g = <span class="token constant placeholder rust">{}</span><span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span> g<span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>h = g^x mod p = <span class="token constant placeholder rust">{}</span><span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span> public_h<span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>-------------------<span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> --- PROVER: ç”Ÿæˆè¯æ˜ ---
</span>    <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>Prover æ­£åœ¨ç”Ÿæˆè¯æ˜...<span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> <span class="token keyword rust">mut</span> rng <span class="token operator rust">=</span> <span class="token function rust">thread_rng</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> order <span class="token operator rust">=</span> <span class="token operator rust">&amp;</span>p <span class="token operator rust">-</span> <span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>one<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 1. æ‰¿è¯ºï¼šéšæœºé€‰ä¸€ä¸ª k, è®¡ç®— t = g^k mod p
</span>    <span class="token keyword rust">let</span> k <span class="token operator rust">=</span> rng.<span class="token function rust">gen_bigint_range</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span><span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>one<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation separator rust">,</span> <span class="token operator rust">&amp;</span>order</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> t <span class="token operator rust">=</span> g.<span class="token function rust">modpow</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>k<span class="token punctuation separator rust">,</span> <span class="token operator rust">&amp;</span>p</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 2. æŒ‘æˆ˜ (Fiat-Shamir çš„é­”æ³•åœ¨è¿™é‡Œ!):
</span>    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> æŠŠå…¬å¼€ä¿¡æ¯å’Œæ‰¿è¯º t ä¸€èµ·å“ˆå¸Œï¼Œæ¨¡æ‹Ÿä¸€ä¸ªæ— æ³•é¢„æµ‹çš„æŒ‘æˆ˜ c
</span>    <span class="token keyword rust">let</span> <span class="token keyword rust">mut</span> hasher <span class="token operator rust">=</span> <span class="token path rust">Sha256<span class="token punctuation accessor rust">::</span></span>new<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    hasher.<span class="token function rust">write_all</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>g.<span class="token function rust">to_bytes_be</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token number integer decimal rust">1</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token function rust">unwrap</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    hasher.<span class="token function rust">write_all</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>public_h.<span class="token function rust">to_bytes_be</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token number integer decimal rust">1</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token function rust">unwrap</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    hasher.<span class="token function rust">write_all</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>t.<span class="token function rust">to_bytes_be</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token number integer decimal rust">1</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token function rust">unwrap</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> hash_bytes <span class="token operator rust">=</span> hasher.<span class="token function rust">finalize</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> c <span class="token operator rust">=</span> <span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>from_bytes_be<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token path rust">num_bigint<span class="token punctuation accessor rust">::</span></span><span class="token path rust">Sign<span class="token punctuation accessor rust">::</span></span>Plus<span class="token punctuation separator rust">,</span> <span class="token operator rust">&amp;</span>hash_bytes</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">%</span> <span class="token operator rust">&amp;</span>order<span class="token punctuation terminator rust">;</span>

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 3. å“åº”ï¼šè®¡ç®— r = k - c*x (mod order)
</span>    <span class="token keyword rust">let</span> cx <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>c <span class="token operator rust">*</span> <span class="token operator rust">&amp;</span>secret_x</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">%</span> <span class="token operator rust">&amp;</span>order<span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> <span class="token keyword rust">mut</span> r <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>k <span class="token operator rust">-</span> cx</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">%</span> <span class="token operator rust">&amp;</span>order<span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">if</span> r <span class="token operator rust">&lt;</span> <span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>zero<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        r <span class="token operator rust">+</span><span class="token operator rust">=</span> <span class="token operator rust">&amp;</span>order<span class="token punctuation terminator rust">;</span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>

    <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>è¯æ˜å·²ç”Ÿæˆï¼š(r = <span class="token constant placeholder rust">{}</span>, c = <span class="token constant placeholder rust">{}</span>)<span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span> r<span class="token punctuation separator rust">,</span> c<span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>-------------------<span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> --- VERIFIER: éªŒè¯è¯æ˜ ---
</span>    <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>Verifier æ­£åœ¨éªŒè¯è¯æ˜...<span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Verifier ä¸ºäº†éªŒè¯ï¼Œéœ€è¦è‡ªå·±é‡æ–°è®¡ç®— t&#39; = g^r * h^c mod p
</span>    <span class="token keyword rust">let</span> gr <span class="token operator rust">=</span> g.<span class="token function rust">modpow</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>r<span class="token punctuation separator rust">,</span> <span class="token operator rust">&amp;</span>p</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> hc <span class="token operator rust">=</span> public_h.<span class="token function rust">modpow</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>c<span class="token punctuation separator rust">,</span> <span class="token operator rust">&amp;</span>p</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> t_prime <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>gr <span class="token operator rust">*</span> <span class="token operator rust">&amp;</span>hc</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">%</span> <span class="token operator rust">&amp;</span>p<span class="token punctuation terminator rust">;</span>

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Verifier å†ç”¨ç®—å‡ºæ¥çš„ t&#39; è®¡ç®— c&#39; = H(g || h || t&#39;)
</span>    <span class="token keyword rust">let</span> <span class="token keyword rust">mut</span> hasher <span class="token operator rust">=</span> <span class="token path rust">Sha256<span class="token punctuation accessor rust">::</span></span>new<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    hasher.<span class="token function rust">write_all</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>g.<span class="token function rust">to_bytes_be</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token number integer decimal rust">1</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token function rust">unwrap</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    hasher.<span class="token function rust">write_all</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>public_h.<span class="token function rust">to_bytes_be</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token number integer decimal rust">1</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token function rust">unwrap</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    hasher.<span class="token function rust">write_all</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span>t_prime.<span class="token function rust">to_bytes_be</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token number integer decimal rust">1</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token function rust">unwrap</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> hash_bytes <span class="token operator rust">=</span> hasher.<span class="token function rust">finalize</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> <span class="token keyword rust">c_prime</span> <span class="token operator rust">=</span> <span class="token path rust">BigInt<span class="token punctuation accessor rust">::</span></span>from_bytes_be<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token path rust">num_bigint<span class="token punctuation accessor rust">::</span></span><span class="token path rust">Sign<span class="token punctuation accessor rust">::</span></span>Plus<span class="token punctuation separator rust">,</span> <span class="token operator rust">&amp;</span>hash_bytes</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">%</span> <span class="token operator rust">&amp;</span>order<span class="token punctuation terminator rust">;</span>

    <span class="token keyword rust">if</span> c <span class="token operator rust">=</span><span class="token operator rust">=</span> <span class="token keyword rust">c_prime</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>âœ… éªŒè¯é€šè¿‡ï¼<span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span> <span class="token keyword rust">else</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>âŒ éªŒè¯å¤±è´¥ï¼<span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span></code></pre>
<p>ä»¥ä¸Šæˆ‘ä»¬é€šè¿‡æœ€ç®€å•çš„ä»£ç æ¥æ¼”ç¤ºäº† ZKP çš„åŸºæœ¬æ€æƒ³ï¼Œä»æ•°å­¦åŸç†ä¸Šéƒ½æ˜¯åŸºäºç¦»æ•£å¯¹æ•°å›°éš¾æ€§ã€‚</p>
<h2 id="å‘æ•£åˆ°-Passkeys"><a href="#å‘æ•£åˆ°-Passkeys" class="headerlink" title="å‘æ•£åˆ° Passkeys"></a>å‘æ•£åˆ° Passkeys</h2>
<p>å½“æˆ‘çœ‹åˆ° Hash çš„æ—¶å€™ï¼Œæˆ‘è”æƒ³åˆ°äº†åå°æœåŠ¡çš„å¯†ç å­˜å‚¨ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨åšä¸€ä¸ªç”¨æˆ·æ³¨å†Œå’Œç™»å½•åŠŸèƒ½çš„æ—¶å€™ï¼Œä¸ºäº†å®‰å…¨æˆ‘ä»¬æ˜¯ä¸ä¼šå»å­˜å‚¨ç”¨æˆ·çš„åŸå§‹å¯†ç ï¼ˆç§˜å¯†ï¼‰ï¼Œè€Œæ˜¯ä¼šä½¿ç”¨å¯†ç å“ˆå¸Œæ–¹æ¡ˆï¼Œå»å­˜å‚¨ <code>hash(password + salt)</code>ã€‚</p>
<p>ä½†è¿™ä¸ªå¯†ç å“ˆå¸Œæ–¹æ¡ˆå…¶å®ä¹Ÿæ³„éœ²äº†â€œçŸ¥è¯†â€ï¼Œå½“ä½ ç™»å½•æ—¶ä¼šæŠŠ <code>123456</code> å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è®¡ç®— <code>hash("123456" + salt)</code> å¹¶ä¸æ•°æ®åº“ä¸­çš„å€¼å¯¹æ¯”ã€‚</p>
<ul>
<li><strong>åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­</strong>ï¼šå¯†ç æ˜¯æ˜æ–‡çš„ï¼ˆå½“ç„¶å¯ä»¥ç”¨ TLS/SSL åŠ å¯†ï¼Œä½†æœåŠ¡å™¨åœ¨è§£å¯†åä¼šçœ‹åˆ°æ˜æ–‡ï¼‰ã€‚</li>
<li><strong>å¯¹æœåŠ¡å™¨è€Œè¨€</strong>ï¼šæœåŠ¡å™¨åœ¨éªŒè¯é‚£ä¸€ç¬é—´æ˜¯<strong>çŸ¥é“</strong>ä½ çš„å¯†ç çš„ã€‚</li>
<li><strong>å¦‚æœæ•°æ®åº“è¢«ç›—</strong>ï¼šæ”»å‡»è€…æ‹¿åˆ°äº† <code>hash(password + salt)</code> çš„åˆ—è¡¨ã€‚è¿™ä¸ªå“ˆå¸Œå€¼æœ¬èº«å°±æ˜¯ä¸€æ¡<strong>é‡è¦çš„çŸ¥è¯†</strong>ï¼å®ƒè™½ç„¶ä¸æ˜¯å¯†ç åŸæ–‡ï¼Œä½†å®ƒæ˜¯å¯†ç çš„ä¸€ä¸ª<strong>ç¡®å®šæ€§æŒ‡çº¹</strong>ã€‚æ”»å‡»è€…å¯ä»¥è¿›è¡Œï¼š
<ul>
<li><strong>å­—å…¸æ”»å‡»</strong>ï¼šå°è¯•å¸¸ç”¨å¯†ç ï¼Œè®¡ç®—å“ˆå¸Œå€¼æ¥ä¸€ä¸€æ¯”å¯¹ã€‚</li>
<li><strong>å½©è™¹è¡¨æ”»å‡»</strong>ï¼šç”¨ä¸€ä¸ªé¢„å…ˆè®¡ç®—å¥½çš„å“ˆå¸Œå€¼æ•°æ®åº“æ¥åæŸ¥ã€‚</li>
<li><strong>æš´åŠ›ç ´è§£</strong>ï¼šå¯¹æ‰€æœ‰å¯èƒ½çš„ç»„åˆè¿›è¡Œå“ˆå¸Œè®¡ç®—ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦â€œåŠ ç›ï¼ˆsaltï¼‰â€å’Œä½¿ç”¨æ…¢å“ˆå¸Œå‡½æ•°ï¼ˆå¦‚ Argon2, bcryptï¼‰ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†å¢åŠ æ”»å‡»è€…è¿›è¡Œä¸Šè¿°ç¦»çº¿æ”»å‡»çš„æˆæœ¬ï¼Œä½†æ— è®ºå¦‚ä½•ï¼Œ<strong>å“ˆå¸Œå€¼æœ¬èº«å°±æ˜¯æ³„éœ²çš„â€œçŸ¥è¯†â€</strong>ã€‚</p>
<p>æ‰€ä»¥å¦‚æœæˆ‘ä»¬è¦æ›´å®‰å…¨ï¼Œä¸€ç‚¹â€œçŸ¥è¯†â€éƒ½ä¸æ³„éœ²ï¼Œä¼¼ä¹ ZKP é€‚åˆåšè®¤è¯æœåŠ¡ï¼Ÿæ³¨å†Œæ—¶ä¸å­˜å¯†ç å“ˆå¸Œï¼Œåªå­˜å…¬é’¥ <code>h</code>ã€‚ç™»å½•æ—¶ï¼Œæˆ‘å‘é€ä¸€ä¸ª ZKP è¯æ˜ï¼ŒæœåŠ¡å™¨éªŒè¯ä¸€ä¸‹å°±è¡Œäº†ï¼Œæ•°æ®åº“è¢«æ‹–åº“äº†éƒ½æ²¡äº‹ã€‚</p>
<p>ç”šè‡³æ›´ç®€å•ç‚¹å…¶å®å°±ç”¨å…¬ç§é’¥å¯¹ä¸æ˜¯æ›´æ–¹ä¾¿å’Œå®‰å…¨ä¹ˆï¼ŒNostr å°±æ˜¯è¿™ä¹ˆåšçš„ (é’±åŒ…ä¹Ÿæ˜¯è¿™ä¸ªåŸç†)ï¼Œprivate key æ˜¯å¯†ç ï¼Œæ¯æ¬¡å‘å†…å®¹å°±ç”¨ç§é’¥ç­¾åå†…å®¹ï¼Œç„¶åæŠŠ pubkey å¸¦ä¸Šï¼Œè¿™æ ·ä»»ä½•æ”¶åˆ°è¿™æ¡æ¶ˆæ¯çš„èŠ‚ç‚¹éƒ½å¯ä»¥éªŒè¯ç­¾åæ˜¯å¦ä¸€è‡´ï¼Œè¿™æ ·å°±æœ¬è´¨ä¸Šé€šè¿‡å„ä¸ª relay èŠ‚ç‚¹å½¢æˆä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„ç¤¾äº¤ç½‘ç»œã€‚</p>
<p>æˆ‘æŒ‰ç…§è¿™ä¸ªæ€è·¯å»æ‰¾ Web ç›¸å…³çš„è§£å†³æ–¹æ¡ˆï¼Œä¸šç•Œç»™å‡ºçš„ç­”æ¡ˆæ˜¯ <strong>Passkeys (åŸºäº WebAuthn æ ‡å‡†)</strong>ï¼Œä½¿ç”¨éå¯¹ç§°åŠ å¯†æ¥æ›¿ä»£å¯†ç ï¼ˆç§é’¥ä¸å‡ºè®¾å¤‡ï¼‰ï¼ŒPasskeys æ˜¯è¿™æ ·å·¥ä½œçš„ï¼š</p>
<ol>
<li><strong>æ³¨å†Œï¼š</strong> ä½ çš„è®¾å¤‡ï¼ˆå¦‚ iPhone æˆ– Android æ‰‹æœºï¼‰åœ¨æœ¬åœ°ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼ˆç§é’¥å’Œå…¬é’¥ï¼‰ã€‚ç§é’¥å®‰å…¨åœ°å­˜å‚¨åœ¨è®¾å¤‡çš„ç¡¬ä»¶å®‰å…¨èŠ¯ç‰‡ä¸­ï¼Œ<strong>æ°¸è¿œä¸ä¼šç¦»å¼€è®¾å¤‡</strong>ã€‚ä½ æŠŠ<strong>å…¬é’¥</strong>å‘é€ç»™ç½‘ç«™æœåŠ¡å™¨ã€‚</li>
<li><strong>ç™»å½•ï¼š</strong>
<ul>
<li>ç½‘ç«™å‘ä½ çš„è®¾å¤‡å‘é€ä¸€ä¸ªâ€œæŒ‘æˆ˜â€ï¼ˆä¸€ä¸ªéšæœºæ•°ï¼‰ã€‚</li>
<li>ä½ çš„è®¾å¤‡ç”¨<strong>ç§é’¥</strong>å¯¹è¿™ä¸ªâ€œæŒ‘æˆ˜â€è¿›è¡Œç­¾åï¼Œç„¶åæŠŠç­¾åå‘å›ç»™ç½‘ç«™ã€‚</li>
<li>ç½‘ç«™ç”¨å®ƒå­˜å‚¨çš„ä½ çš„<strong>å…¬é’¥</strong>æ¥éªŒè¯è¿™ä¸ªç­¾åæ˜¯å¦æœ‰æ•ˆã€‚</li>
</ul>
</li>
<li><strong>ç”¨æˆ·ä½“éªŒï¼š</strong> æ•´ä¸ªè¿‡ç¨‹å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œå¯èƒ½åªæ˜¯åšä¸€æ¬¡æŒ‡çº¹è¯†åˆ«æˆ–é¢éƒ¨è¯†åˆ«æ¥æˆæƒè®¾å¤‡ä½¿ç”¨ç§é’¥ã€‚</li>
</ol>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250916102634.png" alt="" /></p>
<p>2019 å¹´ 3 æœˆ 4 æ—¥ WebAuthn Level 1 å·²ç»è¢« W3C æ­£å¼å‘å¸ƒä¸ºâ€œæ¨èæ ‡å‡† (Recommendation)â€ï¼Œæ ‡å¿—ç€å®ƒæˆä¸ºäº†ä¸€ä¸ªæˆç†Ÿã€ç¨³å®šã€å®˜æ–¹æ¨èçš„ Web æ ‡å‡†ã€‚</p>
<h2 id="é€šè¿‡â€œç”µè·¯â€è¯æ˜ç¨‹åºçš„è¿è¡Œ"><a href="#é€šè¿‡â€œç”µè·¯â€è¯æ˜ç¨‹åºçš„è¿è¡Œ" class="headerlink" title="é€šè¿‡â€œç”µè·¯â€è¯æ˜ç¨‹åºçš„è¿è¡Œ"></a>é€šè¿‡â€œç”µè·¯â€è¯æ˜ç¨‹åºçš„è¿è¡Œ</h2>
<p>ä»ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬çœ‹åˆ°ï¼ŒZKP å¾ˆé€‚åˆç”¨æ¥è¯æ˜ Prover çŸ¥é“æŸä¸ªç§˜å¯†ï¼Œæ¯”å¦‚ä¸€ä¸ªæ•° <code>x</code> ï¼Œä½† ZKP çš„ç”¨é€”è¿œä¸æ­¢äºæ­¤ï¼Œè¿˜å¯ä»¥è¯æ˜<strong>ä»»ä½•è®¡ç®—è¿‡ç¨‹</strong>çš„æ­£ç¡®æ€§ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¯æ˜ä¸€ä¸ªç¨‹åºæ­£ç¡®è¿è¡Œå¾ˆé‡è¦ï¼Œå› ä¸ºåƒä»¥å¤ªåŠè¿™æ ·çš„å…¬é“¾ï¼Œå¦‚æœæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½è¿è¡ŒåŒæ ·çš„åˆçº¦ (æœ¬è´¨ä¸Šå°±æ˜¯ä¸€æ®µç¨‹åºä»£ç ) å¤šæ¬¡ï¼Œè¿™æ— ç–‘æ˜¯å¾ˆå¤§çš„æµªè´¹ï¼Œæˆ‘ä»¬æƒ³é€šè¿‡ ZKP æŠŠè®¡ç®—æŒªåˆ°é“¾ä¸‹ï¼Œè¿™æ ·å…¬é“¾ä¸Šçš„èŠ‚ç‚¹åªéœ€è¦éªŒè¯ç¨‹åºè¢«æ­£ç¡®æ‰§è¡Œå°±å¯ã€‚</p>
<p>â€œæˆ‘æ­£ç¡®è¿è¡Œäº†ä¸€ä¸ªå¤æ‚çš„ç¨‹åºï¼Œå¾—åˆ°äº†è¿™ä¸ªè¾“å‡ºã€‚â€â€”â€” è¿™è¦æ€ä¹ˆè¯æ˜ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯å››ä¸ªå­—ï¼š<strong>ä¸‡ç‰©çš†å¯ç”µè·¯ (Arithmetization)</strong>ã€‚</p>
<p>ZKP ç³»ç»Ÿï¼ˆæ¯”å¦‚æˆ‘ä»¬åé¢ä¼šèŠçš„ zk-SNARKsï¼‰çš„â€œä¸–ç•Œè§‚â€éå¸¸å•çº¯ï¼Œç”šè‡³æœ‰ç‚¹ç¬¨æ‹™ï¼Œå®ƒçœ‹ä¸æ‡‚æˆ‘ä»¬äººç±»å†™çš„é«˜çº§ä»£ç ï¼Œæ¯”å¦‚ <code>if/else</code> è¯­å¥ã€<code>for</code> å¾ªç¯ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æƒ³è®© ZKP ä¸ºæˆ‘ä»¬å·¥ä½œï¼Œå°±å¿…é¡»å…ˆæŠŠæˆ‘ä»¬è¦è¯æ˜çš„ä¸œè¥¿ï¼Œ<strong>ç¿»è¯‘</strong>æˆå®ƒå”¯ä¸€èƒ½å¬æ‡‚çš„è¯­è¨€ã€‚è¿™ä¸ªç¿»è¯‘è¿‡ç¨‹ï¼Œå°±æ˜¯â€œ<strong>ç®—æœ¯åŒ– (Arithmetization)</strong>â€ã€‚è€Œâ€œç”µè·¯â€æˆ–â€œçº¦æŸç³»ç»Ÿâ€ï¼Œå°±æ˜¯æˆ‘ä»¬ç¿»è¯‘å‡ºæ¥çš„æœ€ç»ˆç¨¿ã€‚è¿™ä¸ªé‡å†™çš„è¿‡ç¨‹ï¼Œå°±æ˜¯â€œ<strong>æ‹æ‰ (Flattening)</strong>â€ã€‚ä½ æŠŠä¸€ä¸ªæœ‰å±‚æ¬¡ã€æœ‰å¤æ‚é€»è¾‘çš„ç¨‹åºï¼Œå˜æˆäº†ä¸€ä¸ªé•¿é•¿çš„ã€çº¿æ€§çš„ã€åªåŒ…å«æœ€åŸºæœ¬ç®—æœ¯è¿ç®—çš„æŒ‡ä»¤åˆ—è¡¨ã€‚</p>
<p>ä»»ä½•ç¨‹åºï¼Œæ— è®ºå¤šå¤æ‚ï¼Œéƒ½å¯ä»¥è¢«â€œæ‹æ‰â€æˆä¸€ç³»åˆ—æœ€åŸºç¡€çš„åŠ æ³•å’Œä¹˜æ³•çº¦æŸã€‚æ¯”å¦‚ <code>out = x*x*x + x + 5</code> è¿™æ®µä»£ç ï¼Œå¯ä»¥è¢«åˆ†è§£ä¸ºï¼š</p>
<ul>
<li><code>v1 = x * x</code></li>
<li><code>v2 = v1 * x</code></li>
<li><code>v3 = v2 + x</code></li>
<li><code>out = v3 + 5</code></li>
</ul>
<p>äºæ˜¯ï¼Œè¯æ˜â€œæˆ‘æ­£ç¡®è¿è¡Œäº†ç¨‹åºâ€ï¼Œå°±è½¬åŒ–ä¸ºäº†è¯æ˜â€œ<strong>æˆ‘çŸ¥é“ä¸€ç»„æ•° (x, v1, v2, v3, out) èƒ½åŒæ—¶æ»¡è¶³ä¸Šé¢è¿™ä¸€å †ç­‰å¼</strong>â€ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±æ˜¯æŠŠä»£ç é€»è¾‘â€œç®—æœ¯åŒ–â€ï¼Œå˜æˆäº† ZKP ç³»ç»Ÿå¯ä»¥å¤„ç†çš„è¯­è¨€ã€‚</p>
<p>é‚£æˆ‘ä»¬æ¥çœ‹ Verifier å¦‚ä½•éªŒè¯ä¸Šé¢çš„è®¡ç®—è¿‡ç¨‹ï¼Œæœ€åŸå§‹çš„å½“ç„¶æ˜¯æ ¹æ®è¾“å…¥ï¼Œæ¥ä¸€æ¡ä¸€æ¡çš„æ‰§è¡Œä¸Šé¢è¢«æ‹å¹³åçš„æŒ‡ä»¤é›†ï¼Œä½†è¿™æ ·çš„å·¥ä½œé‡å’Œè‡ªå·±å»æ‰§è¡Œæ•´ä¸ªç¨‹åºå°±å·®ä¸å¤šäº†ã€‚</p>
<p>ä¸ºäº†é¿å…è¿™ç§è›®åŠ›éªŒè¯ï¼Œå¯†ç å­¦å®¶ä»¬å¼•å…¥äº†ä¸€ä¸ªæå…¶å¼ºå¤§çš„æ•°å­¦å·¥å…·ï¼š<strong>å¤šé¡¹å¼ (Polynomials)</strong>ã€‚
æ•´ä¸ªé­”æ³•æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p><strong>Prover çš„è‰°å·¨ä»»åŠ¡ï¼šå°†æ‰€æœ‰çº¦æŸâ€œç¼–ç»‡â€è¿›ä¸€ä¸ªå¤šé¡¹å¼</strong> Prover ä¼šæ‰§è¡Œä¸€ä¸ªæƒŠäººçš„è½¬æ¢ï¼šä»–ä¼šæ‰¾åˆ°ä¸€ç§æ–¹æ³• (Groth16ã€PLONKã€STARKs ç­‰)ï¼Œå°†æˆ‘ä»¬å‰é¢æåˆ°çš„é‚£ä¸€æ•´ä¸ªçº¦æŸç³»ç»Ÿ (<code>x * x - v1 = 0</code>, <code>v1 * x - v2 = 0</code>, â€¦) å…¨éƒ¨ç¼–ç æˆ<strong>ä¸€ä¸ªå•ä¸€çš„ã€å·¨å¤§çš„å¤šé¡¹å¼æ–¹ç¨‹</strong>ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå·¨å¤§çš„â€œä¸»å¤šé¡¹å¼â€è®°ä¸º <code>P(z)</code>ã€‚è¿™ä¸ª <code>P(z)</code> æœ‰ä¸€ä¸ªç¥å¥‡çš„ç‰¹æ€§ï¼š</p>
<blockquote>
<p><strong>å½“ä¸”ä»…å½“ Prover æä¾›çš„æ‰€æœ‰è§è¯å€¼ (x, v1, v2â€¦) éƒ½å®Œå…¨æ­£ç¡®ã€æ»¡è¶³æ‰€æœ‰åŸå§‹çº¦æŸæ—¶ï¼Œè¿™ä¸ªä¸»å¤šé¡¹å¼ <code>P(z)</code> åœ¨æŸäº›ç‰¹å®šçš„ç‚¹ä¸Šæ‰ä¼šç­‰äº 0ã€‚</strong></p>
</blockquote>
<p>å¦‚æœ Prover åœ¨ä»»ä½•åœ°æ–¹ä½œå¼Šï¼Œå“ªæ€•åªä¿®æ”¹äº†ä¸€ä¸ªå¾®ä¸è¶³é“çš„å€¼ï¼Œæœ€ç»ˆç”Ÿæˆçš„é‚£ä¸ª <code>P(z)</code> å°±ä¼šæ˜¯ä¸€ä¸ª<strong>å®Œå…¨ä¸åŒ</strong>çš„å¤šé¡¹å¼ã€‚</p>
</li>
<li>
<p><strong>éªŒè¯è€…çš„æ·å¾„ â€“ éšæœºç‚¹æ£€æŸ¥ (Random Spot-Check)</strong> ï¼šç°åœ¨éªŒè¯è€…çš„é—®é¢˜ä»â€œæ£€æŸ¥æˆåƒä¸Šä¸‡ä¸ªå°ç­‰å¼â€å˜æˆäº†â€œå¦‚ä½•éªŒè¯ Prover çš„é‚£ä¸ªå·¨å¤§å¤šé¡¹å¼ <code>P(z)</code> æ˜¯æ­£ç¡®çš„ï¼Ÿâ€</p>
<p>éš¾é“è¦æŠŠæ•´ä¸ªå·¨å¤§çš„å¤šé¡¹å¼ä¼ è¾“è¿‡æ¥å†è®¡ç®—ä¸€éå—ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼è¿™é‡Œç”¨åˆ°äº†å¯†ç å­¦ä¸­ä¸€ä¸ªéå¸¸æ·±åˆ»çš„åŸç†ï¼Œé€šå¸¸ä¸ <strong>Schwartz-Zippel å¼•ç†</strong> æœ‰å…³ã€‚</p>
<p><strong>å®ƒçš„ç›´è§‚æ€æƒ³æ˜¯</strong>ï¼š</p>
<blockquote>
<p>å¦‚æœæˆ‘æœ‰ä¸¤ä¸ªä¸åŒçš„ã€é˜¶æ•°å¾ˆé«˜çš„å¤šé¡¹å¼ <code>P(z)</code> å’Œ <code>F(z)</code>ï¼ˆF ä»£è¡¨ä¼ªé€ çš„ï¼‰ï¼Œç„¶åæˆ‘ä»ä¸€ä¸ªæå¤§çš„æ•°åŸŸé‡ŒéšæœºæŒ‘é€‰ä¸€ä¸ªç‚¹ <code>s</code>ï¼Œé‚£ä¹ˆ <code>P(s)</code> å’Œ <code>F(s)</code> çš„è®¡ç®—ç»“æœç›¸ç­‰çš„æ¦‚ç‡<strong>å‡ ä¹ä¸ºé›¶</strong>ã€‚</p>
</blockquote>
<p>è¿™å°±ç»™äº†éªŒè¯è€…ä¸€ä¸ªå·¨å¤§çš„æ·å¾„ï¼š</p>
<ul>
<li>Verifier ä¸éœ€è¦å…³å¿ƒé‚£ä¸ªå·¨å¤§çš„å¤šé¡¹å¼é•¿ä»€ä¹ˆæ ·ã€‚</li>
<li>å®ƒåªéœ€è¦åœ¨ä¸€ä¸ª<strong>ç§˜å¯†çš„ã€éšæœºé€‰æ‹©çš„ç‚¹ <code>s</code></strong> ä¸Šï¼Œå¯¹ Prover çš„å¤šé¡¹å¼è¿›è¡Œä¸€æ¬¡â€œæŠ½æŸ¥â€ã€‚</li>
<li>å®ƒé€šè¿‡å¯†ç å­¦åè®®å‘ Prover å‘èµ·ä¸€ä¸ªæŒ‘æˆ˜ï¼šâ€œå˜¿ï¼Œä½ å£°ç§°ä½ æœ‰ä¸€ä¸ªæ­£ç¡®çš„å¤šé¡¹å¼ï¼Œé‚£ä½ å‘Šè¯‰æˆ‘ï¼Œåœ¨ <code>s</code> è¿™ä¸ªç‚¹ä¸Šï¼Œä½ çš„å¤šé¡¹å¼è®¡ç®—å‡ºæ¥çš„å€¼æ˜¯å¤šå°‘ï¼Ÿâ€</li>
</ul>
</li>
</ol>
<p>æ‰€ä»¥è¿™é‡Œçš„ ZKP è¯æ˜é‡Œåˆ°åº•åŒ…å«ä»€ä¹ˆï¼Ÿ</p>
<p>åœ¨ä¸€ä¸ªå…¸å‹çš„ zk-SNARKï¼ˆæ¯”å¦‚ Groth16ï¼‰ä¸­ï¼Œé‚£ä¸ªå°å°çš„è¯æ˜é€šå¸¸æ˜¯ç”±<strong>å‡ ä¸ªæ¤­åœ†æ›²çº¿ä¸Šçš„ç‚¹ (points on an elliptic curve)</strong> ç»„æˆçš„ã€‚å¯ä»¥æŠŠè¿™äº›â€œç‚¹â€æƒ³è±¡æˆä¸€ç§<strong>å…·å¤‡ç¥å¥‡æ•°å­¦ç‰¹æ€§çš„é«˜çº§æŒ‡çº¹</strong>ã€‚è¿™äº›ç‚¹å°±æ˜¯ Prover å¯¹ä»–æ„é€ çš„é‚£äº›å·¨å¤§å¤šé¡¹å¼ï¼ˆæ¯”å¦‚ <code>A(x)</code>, <code>B(x)</code>, <code>C(x)</code>ï¼Œå®ƒä»¬å…±åŒæ„æˆäº†æˆ‘ä»¬ä¹‹å‰è¯´çš„é‚£ä¸ªä¸»å¤šé¡¹å¼ <code>P(x)</code>) çš„â€œæ‰¿è¯ºâ€ã€‚</p>
<p>è¿™é‡Œçš„é­”æ³•åœ¨äº Verifier ä¸éœ€è¦é€šè¿‡è¿™äº›â€œç‚¹â€æ¥åæ¨å‡ºåŸå§‹çš„å¤šé¡¹å¼ã€‚ç›¸åï¼Œä»–å¯ä»¥ç›´æ¥åœ¨è¿™äº›â€œç‚¹â€ä¸Šè¿›è¡Œä¸€ç§ç‰¹æ®Šè¿ç®—ï¼Œè¿™ç§è¿ç®—çš„ç»“æœ<strong>ç­‰ä»·äº</strong>åœ¨åŸå§‹å¤šé¡¹å¼ä¸Šè¿›è¡Œâ€œéšæœºç‚¹æ£€æŸ¥â€ã€‚è¿™ä¸ªç‰¹æ®Šçš„è¿ç®—ï¼Œå°±æ˜¯ zk-SNARKs çš„æ ¸å¿ƒå¼•æ“ä¹‹ä¸€ï¼š<strong>é…å¯¹ (Pairings)</strong>ã€‚<em>å¹¶éæ‰€æœ‰ ZK æ¶æ„éƒ½ç”¨é…å¯¹ï¼›Groth16/éƒ¨åˆ† KZG-based ç³»ç»Ÿç”¨é…å¯¹ï¼ŒSTARKs åˆ™ç”¨å“ˆå¸Œ/FRI ç­‰æ›¿ä»£æ–¹æ¡ˆã€‚</em></p>
<p>è®©æˆ‘ä»¬æŠŠæ•´ä¸ªæµç¨‹ä¸²èµ·æ¥ (zk-SNARK)ï¼Œçœ‹çœ‹ Prover çš„å¤šé¡¹å¼æ˜¯å¦‚ä½•è¢«â€œéš”ç©ºâ€éªŒè¯çš„ï¼š</p>
<ol>
<li>
<p><strong>å‡†å¤‡é˜¶æ®µ (Setup)</strong>ï¼š</p>
<ul>
<li>åè®®çº¦å®šå¥½äº†ä¸€å¥—å…¬å…±å‚æ•°ï¼ˆåŒ…å«ä¸€ä¸ªâ€œéªŒè¯å¯†é’¥â€ï¼‰ã€‚è¿™ä¸ªéªŒè¯å¯†é’¥é‡Œç¼–ç äº†â€œæ¸¸æˆè§„åˆ™â€ï¼ŒåŒ…æ‹¬å¯¹ç¨‹åºæ­£ç¡®æ€§çš„æœŸæœ›ã€‚</li>
</ul>
</li>
<li>
<p><strong>Prover çš„å·¥ä½œ</strong>ï¼š</p>
<ul>
<li>ä»–æœ‰ä»–çš„ç§˜å¯†â€œè§è¯ (Witness)â€ã€‚</li>
<li>ä»–æŒ‰ç…§çº¦å®šï¼Œå°†ç¨‹åºçš„çº¦æŸç³»ç»Ÿè½¬åŒ–æˆå‡ ä¸ªå·¨å¤§çš„å¤šé¡¹å¼ <code>A(x), B(x), C(x)</code>ã€‚ï¼ˆè¿™äº›å¤šé¡¹å¼æ»¡è¶³ <code>A(x) * B(x) - C(x) = H(x) * Z(x)</code> çš„å…³ç³»ï¼Œè¿™æ˜¯ R1CS ç®—æœ¯åŒ–çš„ç»“æœï¼‰ã€‚</li>
<li><strong>å…³é”®ä¸€æ­¥</strong>ï¼šä»–å¹¶æ²¡æœ‰æŠŠè¿™äº›å¤šé¡¹å¼å‘å‡ºå»ã€‚è€Œæ˜¯ç”¨ä»–çš„â€œè¯æ˜å¯†é’¥â€ï¼Œè®¡ç®—å‡ºè¿™å‡ ä¸ªå¤šé¡¹å¼åœ¨æŸä¸ªç§˜å¯†ç‚¹ <code>s</code> ä¸Šçš„<strong>æ¤­åœ†æ›²çº¿ç‚¹è¡¨ç¤º</strong>ã€‚è¿™äº›ç‚¹å°±æ˜¯å¯¹å¤šé¡¹å¼çš„â€œæ‰¿è¯ºâ€ã€‚</li>
<li>æœ€ç»ˆç”Ÿæˆçš„<strong>è¯æ˜ (Proof)</strong>ï¼Œå°±æ˜¯ç”±è¿™å‡ ä¸ªè®¡ç®—å‡ºæ¥çš„æ¤­åœ†æ›²çº¿ç‚¹ç»„æˆçš„ï¼Œå®ƒéå¸¸å°ã€‚</li>
</ul>
</li>
<li>
<p><strong>Verifier çš„å·¥ä½œ</strong>ï¼š</p>
<ul>
<li>Verifier æ”¶åˆ°è¿™ä¸ªç”±å‡ ä¸ªç‚¹ç»„æˆçš„ã€å°å°çš„è¯æ˜ã€‚</li>
<li>Verifier <strong>å®Œå…¨çœ‹ä¸åˆ°</strong> Prover çš„ä»»ä½•å¤šé¡¹å¼ (<code>A(x)</code>, <code>B(x)</code>, <code>C(x)</code>)ã€‚</li>
<li>Verifier æ‹¿å‡ºâ€œéªŒè¯å¯†é’¥â€ï¼Œå¹¶å°† Prover æäº¤çš„è¿™å‡ ä¸ªâ€œæ‰¿è¯ºç‚¹â€ä»£å…¥ä¸€ä¸ªé¢„è®¾çš„<strong>é…å¯¹éªŒè¯æ–¹ç¨‹ (Pairing Verification Equation)</strong>ã€‚</li>
</ul>
<p>è¿™ä¸ªæ–¹ç¨‹è¢«è®¾è®¡å¾—æå…¶å·§å¦™ï¼Œå®ƒçš„ç­‰å·å·¦è¾¹å’Œå³è¾¹åˆ†åˆ«å¯¹åº”ç€ Prover åŸå§‹å¤šé¡¹å¼å…³ç³» <code>A*B-C=H*Z</code> çš„åŠ å¯†å½¢å¼ã€‚</p>
<blockquote>
<p><strong>å½“ä¸”ä»…å½“ Prover åŸå§‹çš„ã€æœªçŸ¥çš„é‚£äº›å¤šé¡¹å¼ç¡®å®æ»¡è¶³æ­£ç¡®çš„æ•°å­¦å…³ç³»æ—¶ï¼Œè¿™ä¸ªé…å¯¹éªŒè¯æ–¹ç¨‹çš„ç­‰å·æ‰èƒ½æˆç«‹ã€‚</strong></p>
</blockquote>
</li>
</ol>
<p><strong>æ‰€ä»¥ï¼š</strong></p>
<ul>
<li><strong>è¯æ˜é‡Œæ˜¯ä»€ä¹ˆï¼Ÿ</strong> æ˜¯å¯¹ Prover ç§˜å¯†å¤šé¡¹å¼çš„<strong>å¯†ç å­¦æ‰¿è¯º</strong>ï¼ˆé€šå¸¸æ˜¯å‡ ä¸ªæ¤­åœ†æ›²çº¿ç‚¹ï¼‰ã€‚</li>
<li><strong>Verifier å¦‚ä½•çŸ¥é“å¤šé¡¹å¼ï¼Ÿ</strong> ä»–<strong>ä¸éœ€è¦çŸ¥é“</strong>ã€‚ä»–åªéœ€è¦çŸ¥é“<strong>éªŒè¯è§„åˆ™</strong>ï¼ˆå³é‚£ä¸ªé…å¯¹éªŒè¯æ–¹ç¨‹ï¼‰ã€‚</li>
<li><strong>å¦‚ä½•éªŒè¯ï¼Ÿ</strong> ä»–æŠŠ Prover çš„â€œæ‰¿è¯ºâ€ï¼ˆè¯æ˜ï¼‰ä»£å…¥â€œè§„åˆ™â€ï¼ˆéªŒè¯æ–¹ç¨‹ï¼‰ã€‚å¦‚æœæ–¹ç¨‹æˆç«‹ï¼Œä»–å°±çŸ¥é“é‚£äº›ä»–çœ‹ä¸è§çš„ã€è¢«æ‰¿è¯ºäº†çš„å¤šé¡¹å¼ä¸€å®šæ˜¯æ­£ç¡®çš„ï¼Œè¿›è€Œæ¨æ–­å‡º Prover çš„åŸå§‹è®¡ç®—æ˜¯æ­£ç¡®çš„ã€‚</li>
</ul>
<p>Prover æŠŠâ€œæˆ‘çŸ¥é“æ‰€æœ‰é¢˜çš„ç­”æ¡ˆâ€è¿™ä¸ªäº‹å®ï¼Œé€šè¿‡å¤æ‚çš„è®¡ç®—ï¼Œæµ“ç¼©æˆäº†ä¸€ä¸ªåŒ…å«å‡ ä¸ªå…³é”®â€œå¯†ç å­¦æŒ‡çº¹â€çš„ä¿¡å°ï¼ˆè¯æ˜ï¼‰ã€‚Verifier ä¸ç”¨æ‹†å¼€ä¿¡å°çœ‹æ‰€æœ‰ç­”æ¡ˆï¼Œä»–åªéœ€è¦ç”¨ä¸€ç§ç‰¹æ®Šçš„â€œX å…‰æœºâ€ï¼ˆé…å¯¹éªŒè¯ï¼‰ç…§ä¸€ä¸‹è¿™ä¸ªä¿¡å°ï¼Œå°±èƒ½ç¬é—´çŸ¥é“é‡Œé¢çš„ç­”æ¡ˆæ˜¯ä¸æ˜¯éƒ½å¯¹ã€‚</p>
<h2 id="ZKP-ç›¸å…³çš„åº”ç”¨"><a href="#ZKP-ç›¸å…³çš„åº”ç”¨" class="headerlink" title="ZKP ç›¸å…³çš„åº”ç”¨"></a>ZKP ç›¸å…³çš„åº”ç”¨</h2>
<p>åŒºå—é“¾å› ä¸ºå…¶å»ä¸­å¿ƒåŒ–å’Œå¯¹éšç§æ€§çš„ä¸¥è‹›è¦æ±‚ï¼ŒZKP éå¸¸é€‚åˆç”¨åœ¨è¿™ä¸ªé¢†åŸŸã€‚</p>
<h4 id="æ‰©å®¹-ZK-Rollups-è®©ä»¥å¤ªåŠå¿«å¦‚é—ªç”µ"><a href="#æ‰©å®¹-ZK-Rollups-è®©ä»¥å¤ªåŠå¿«å¦‚é—ªç”µ" class="headerlink" title="æ‰©å®¹ (ZK-Rollups): è®©ä»¥å¤ªåŠå¿«å¦‚é—ªç”µ"></a>æ‰©å®¹ (ZK-Rollups): è®©ä»¥å¤ªåŠå¿«å¦‚é—ªç”µ</h4>
<p>ä»¥å¤ªåŠæ…¢åˆè´µï¼Œå› ä¸ºæ¯ä¸ªèŠ‚ç‚¹éƒ½è¦é‡å¤æ‰§è¡Œæ¯ç¬”äº¤æ˜“ã€‚ZK-Rollup çš„æ€è·¯å°±åƒæ˜¯æ‰¾äº†ä¸ªè¶…çº§è¯¾ä»£è¡¨ï¼š</p>
<ol>
<li>åœ¨é“¾ä¸‹ (L2) æ‰§è¡Œæˆåƒä¸Šä¸‡ç¬”äº¤æ˜“ã€‚</li>
<li>ä¸ºâ€œæˆ‘å·²æ­£ç¡®å¤„ç†äº†è¿™ä¸€åˆ‡â€è¿™ä¸ªå£°æ˜ï¼Œç”Ÿæˆä¸€ä¸ªå¾®å°çš„ ZK è¯æ˜ã€‚</li>
<li>æŠŠè¿™ä¸ªè¯æ˜æäº¤åˆ°é“¾ä¸Š (L1)ã€‚</li>
</ol>
<p>L1 çš„æ‰€æœ‰èŠ‚ç‚¹ä¸å†éœ€è¦é‡å¤è®¡ç®—é‚£å‡ åƒç¬”äº¤æ˜“ï¼Œå®ƒä»¬åªéœ€è¦åšä¸€ä»¶æå…¶å»‰ä»·çš„äº‹ï¼š<strong>éªŒè¯é‚£ä¸ª ZK è¯æ˜</strong>ã€‚å°±åƒè€å¸ˆæ£€æŸ¥ä½œä¸šï¼Œä¸å†éœ€è¦è‡ªå·±ä»å¤´ç®—ä¸€éï¼Œåªéœ€è¦çœ‹ä¸€çœ¼è¯¾ä»£è¡¨ç›–çš„â€œå…¨å¯¹â€å°ç« ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒRollup çš„æ ¸å¿ƒåˆ›æ–°åœ¨äºå°†<strong>è®¡ç®—æ‰§è¡Œ</strong>ä¸<strong>æ•°æ®ç»“ç®—</strong>åˆ†ç¦»ã€‚å®ƒåˆ©ç”¨ ZKP ç­‰å¯†ç å­¦æŠ€æœ¯ï¼Œå°†ç¹é‡çš„â€œæ‰§è¡Œâ€ç¯èŠ‚æ”¾åœ¨é“¾ä¸‹ï¼Œç„¶ååªæŠŠä¸€ä¸ªè½»é‡çš„â€œè¯æ˜â€å’Œå¿…è¦æ•°æ®æ”¾åœ¨é“¾ä¸Šè¿›è¡Œâ€œç»“ç®—â€ï¼Œä»è€Œå®ç°äº†å¯¹ä»¥å¤ªåŠä¸»ç½‘çš„å¤§è§„æ¨¡æ‰©å®¹ã€‚</p>
<h4 id="éšç§-Tornado-Cash-ä½ çš„é’±ï¼Œåªæœ‰ä½ çŸ¥é“"><a href="#éšç§-Tornado-Cash-ä½ çš„é’±ï¼Œåªæœ‰ä½ çŸ¥é“" class="headerlink" title="éšç§ (Tornado Cash): ä½ çš„é’±ï¼Œåªæœ‰ä½ çŸ¥é“"></a>éšç§ (Tornado Cash): ä½ çš„é’±ï¼Œåªæœ‰ä½ çŸ¥é“</h4>
<p>Tornado Cash æ˜¯ä¸ªæ··å¸å™¨ï¼Œä½ å­˜å…¥ 100 ETHï¼Œç„¶åä»ä¸€ä¸ªå…¨æ–°çš„åœ°å€å–å‡ºæ¥ï¼Œæ²¡äººèƒ½æŠŠè¿™ä¸¤è€…è”ç³»èµ·æ¥ã€‚å®ƒçš„æœºåˆ¶æ˜¯ï¼š</p>
<ul>
<li>
<p><strong>å­˜æ¬¾</strong>ï¼šä½ åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ªç§˜å¯†å‡­è¯ï¼ˆåŒ…å«<code>Secret</code>å’Œ<code>Nullifier</code>ï¼‰ï¼Œç„¶åè®¡ç®—å‡ºå®ƒçš„å“ˆå¸Œå€¼â€”â€”â€œæ‰¿è¯º (Commitment)â€ï¼ŒæŠŠæ‰¿è¯ºå’Œé’±ä¸€èµ·å­˜å…¥åˆçº¦ã€‚</p>
</li>
<li>
<p><strong>å–æ¬¾</strong>ï¼šä½ ç”¨ä¸€ä¸ªå…¨æ–°çš„åœ°å€ï¼Œæäº¤ä¸€ä¸ª ZK è¯æ˜ï¼Œè¿™ä¸ªè¯æ˜ï¼šâ€œæˆ‘çŸ¥é“æŸä¸ªæ ‘å¶çš„ Secret ä¸”æœªè¢«èŠ±è´¹â€ï¼ŒåŒæ—¶æäº¤ <strong>nullifier</strong>ï¼ˆé€šå¸¸æ˜¯å¯¹ç§˜å¯†åšæ•£åˆ—å¾—åˆ°çš„å”¯ä¸€æ ‡è¯†ï¼‰ä»¥æ ‡è®°å·²èŠ±è´¹ã€‚è¿™æ ·åˆçº¦æ— éœ€å…³è”å­˜æ¬¾è€…èº«ä»½å³å¯é˜»æ­¢åŒèŠ±ã€‚</p>
</li>
</ul>
<p>æ•´ä¸ªè¿‡ç¨‹ï¼Œåˆçº¦å°±åƒä¸ªç›²äººä¼šè®¡ï¼Œå®ƒä¸çŸ¥é“æ˜¯â€œè°â€å­˜çš„ï¼Œä¹Ÿä¸çŸ¥é“å–æ¬¾å¯¹åº”çš„æ˜¯â€œå“ªä¸€ä¸€ç¬”â€å­˜æ¬¾ï¼Œå®ƒåªè´Ÿè´£éªŒè¯ ZKP è§„åˆ™æ˜¯å¦è¢«éµå®ˆã€‚</p>
<h3 id="ZKP-åœ¨-AI-çš„åº”ç”¨"><a href="#ZKP-åœ¨-AI-çš„åº”ç”¨" class="headerlink" title="ZKP åœ¨ AI çš„åº”ç”¨"></a>ZKP åœ¨ AI çš„åº”ç”¨</h3>
<p>ZKP åº”ç”¨åœ¨å¤§æ¨¡å‹ä¹Ÿæ˜¯æœ€å‰æ²¿ã€æ¿€åŠ¨äººå¿ƒçš„é¢†åŸŸã€‚ä¾‹å¦‚ AI æ¨¡å‹ï¼ˆå°¤å…¶æ˜¯å¤§å‹è¯­è¨€æ¨¡å‹ï¼‰çš„æƒé‡æ˜¯æå…¶å®è´µçš„å•†ä¸šæœºå¯†ã€‚ç”¨æˆ·çš„æ•°æ®åˆæå…¶éšç§ã€‚å¦‚ä½•è®©ä¸€ä¸ª AI æ¨¡å‹åœ¨ä¸æš´éœ²å…¶å†…éƒ¨æƒé‡çš„æƒ…å†µä¸‹ï¼Œå¤„ç†ç”¨æˆ·çš„éšç§æ•°æ®ï¼Œå¹¶å‘ç”¨æˆ·è¯æ˜å®ƒç¡®å®æ˜¯ç”¨äº†é‚£ä¸ªå®£ç§°çš„é«˜çº§æ¨¡å‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå»‰ä»·çš„â€œå†’ç‰Œè´§â€ï¼Ÿ</p>
<p>ZKP è§£å†³æ–¹æ¡ˆ (ZKML - Zero-Knowledge Machine Learning)ï¼š
æ¨¡å‹æ¨ç†è¯æ˜ï¼šæ¨¡å‹æä¾›æ–¹å¯ä»¥å¯¹ä¸€æ¬¡æ¨ç†è¿‡ç¨‹ç”Ÿæˆ ZK è¯æ˜ï¼Œè¯å®â€œæˆ‘ä½¿ç”¨æˆ‘å®£ç§°çš„é‚£ä¸ªæ¨¡å‹ï¼ˆå…¶å“ˆå¸Œå€¼æ˜¯å…¬å¼€çš„ï¼‰ï¼Œå¤„ç†äº†ä½ çš„è¾“å…¥æ•°æ®ï¼Œå¾—å‡ºäº†è¿™ä¸ªè¾“å‡ºç»“æœâ€ã€‚è¿™å‘ç”¨æˆ·ä¿è¯äº†æ¨¡å‹çš„çœŸå®æ€§ï¼ŒåŒæ—¶ä¿æŠ¤äº†æ¨¡å‹çš„çŸ¥è¯†äº§æƒã€‚</p>
<p>æ•°æ®éšç§è¯æ˜ï¼šç”¨æˆ·å¯ä»¥å¯¹è‡ªå·±çš„æ•°æ®ç”Ÿæˆ ZK è¯æ˜ï¼Œè¯å®â€œæˆ‘çš„æ•°æ®ï¼ˆä¾‹å¦‚åŒ»ç–—è®°å½•ï¼‰ç¬¦åˆæŸä¸ªç‰¹å®šæ ‡å‡†ï¼ˆä¾‹å¦‚ï¼Œæœ‰æŸç§ç–¾ç—…ç‰¹å¾ï¼‰â€ï¼Œç„¶åå°†è¿™ä¸ªè¯æ˜æäº¤ç»™ AI æ¨¡å‹è¿›è¡Œç»Ÿè®¡æˆ–ç ”ç©¶ï¼Œè€Œæ— éœ€ä¸Šä¼ åŸå§‹çš„éšç§æ•°æ®ã€‚</p>
<p>è¿™é‡Œæœ‰æ›´å¤šç›¸å…³çš„èµ„æ–™ï¼š<a target="_blank" rel="noopener" href="https://world.org/blog/engineering/intro-to-zkml">An introduction to zero-knowledge machine learning (ZKML)</a></p>
<h2 id="é›¶çŸ¥è¯†è¯æ˜å’Œç¡¬ä»¶"><a href="#é›¶çŸ¥è¯†è¯æ˜å’Œç¡¬ä»¶" class="headerlink" title="é›¶çŸ¥è¯†è¯æ˜å’Œç¡¬ä»¶"></a>é›¶çŸ¥è¯†è¯æ˜å’Œç¡¬ä»¶</h2>
<p>å‰é¢æˆ‘ä»¬è°ˆåˆ°ï¼Œåœ¨ ZKP ä¸­<strong>Prover</strong>ï¼ˆè¯æ˜è€…ï¼‰ç«¯è®¡ç®—é‡æœ€å¤§ï¼Œä¸»è¦é›†ä¸­åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li><strong>å¤šé¡¹å¼æ‰¿è¯ºæ–¹æ¡ˆ</strong>ï¼šè¿™æ˜¯ç°ä»£é›¶çŸ¥è¯†è¯æ˜ï¼ˆå¦‚ zk-SNARKsã€zk-STARKsï¼‰çš„æ ¸å¿ƒã€‚è¯æ˜è€…éœ€è¦å°†è®¡ç®—ä»»åŠ¡è½¬åŒ–ä¸ºå¤šé¡¹å¼ï¼Œå¹¶å¯¹è¿™äº›å¤šé¡¹å¼è¿›è¡Œä¸€ç³»åˆ—å¤æ‚çš„åŠ å¯†è¿ç®—ï¼Œä¾‹å¦‚<strong>å¤šé¡¹å¼æ’å€¼ã€æ±‚å¯¼ã€å·ç§¯ã€å¿«é€Ÿå‚…é‡Œå¶å˜æ¢ï¼ˆFFTï¼‰</strong> ç­‰ã€‚è¿™äº›è¿ç®—çš„å¤æ‚åº¦å¾ˆé«˜ï¼Œå°¤å…¶æ˜¯å½“è¦è¯æ˜çš„è®¡ç®—è§„æ¨¡å¾ˆå¤§æ—¶ã€‚</li>
<li><strong>åŒæ€åŠ å¯†è¿ç®—æˆ–æ¤­åœ†æ›²çº¿ç‚¹è¿ç®—</strong>ï¼šåœ¨ä¸€äº›é›¶çŸ¥è¯†è¯æ˜åè®®ä¸­ï¼Œä¸ºäº†ç”Ÿæˆå’ŒéªŒè¯è¯æ˜ï¼Œéœ€è¦è¿›è¡Œå¤§é‡çš„<strong>æ¤­åœ†æ›²çº¿ç‚¹ä¹˜</strong>è¿ç®—ã€‚è¿™ç§è¿ç®—åœ¨æ•°å­¦ä¸Šéå¸¸è€—æ—¶ï¼Œå°¤å…¶æ˜¯å½“éœ€è¦å¤„ç†å¤§é‡çš„ç‚¹æ—¶ã€‚</li>
<li><strong>å“ˆå¸Œå‡½æ•°è®¡ç®—</strong>ï¼šä¸ºäº†å°†å¤æ‚çš„æ•°æ®ç»“æ„æˆ–è®¡ç®—ç»“æœè¿›è¡Œå‹ç¼©å’Œæ‰¿è¯ºï¼Œè¯æ˜è€…ä¼šä½¿ç”¨åˆ°å¤§é‡çš„<strong>åŠ å¯†å“ˆå¸Œå‡½æ•°</strong>ï¼Œä¾‹å¦‚ SHA-256ã€Poseidon ç­‰ã€‚</li>
</ul>
<p>è€Œåœ¨<strong>Verifier</strong>ï¼ˆéªŒè¯è€…ï¼‰ç«¯è®¡ç®—é‡ç›¸å¯¹è¾ƒå°ï¼Œè¿™ä¹Ÿæ˜¯é›¶çŸ¥è¯†è¯æ˜çš„é‡è¦ä¼˜åŠ¿ä¹‹ä¸€ï¼Œä½†å®ƒä»ç„¶éœ€è¦è¿›è¡Œä¸€äº›å…³é”®çš„è®¡ç®—ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><strong>æ¤­åœ†æ›²çº¿é…å¯¹è¿ç®—ï¼ˆPairingï¼‰</strong>ï¼šåœ¨ zk-SNARKs ç­‰åè®®ä¸­ï¼ŒéªŒè¯è€…éœ€è¦è¿›è¡Œ<strong>æ¤­åœ†æ›²çº¿é…å¯¹</strong>è¿ç®—æ¥éªŒè¯è¯æ˜ã€‚è¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„åŠ å¯†æ“ä½œï¼Œè™½ç„¶æ¯”è¯æ˜è€…çš„è®¡ç®—é‡å°å¾—å¤šï¼Œä½†ä»ç„¶éœ€è¦ä¸€å®šçš„è®¡ç®—èµ„æºã€‚</li>
<li><strong>å“ˆå¸Œå‡½æ•°å’Œå¤šé¡¹å¼æ±‚å€¼</strong>ï¼šéªŒè¯è€…ä¹Ÿéœ€è¦è¿›è¡Œä¸€äº›å“ˆå¸Œè®¡ç®—å’Œå¤šé¡¹å¼æ±‚å€¼æ¥æ£€æŸ¥è¯æ˜çš„æœ‰æ•ˆæ€§ã€‚</li>
</ul>
<p>æ€»çš„æ¥è¯´ï¼Œé›¶çŸ¥è¯†è¯æ˜çš„è®¡ç®—é‡ä¸»è¦è€—è´¹åœ¨<strong>Prover</strong>ç«¯ï¼Œå› ä¸ºå®ƒéœ€è¦å¯¹æ•´ä¸ªè®¡ç®—è¿‡ç¨‹è¿›è¡Œå®Œæ•´çš„åŠ å¯†è½¬æ¢å’Œè¯æ˜ç”Ÿæˆï¼Œè€Œè¿™äº›æ­¥éª¤ä¾èµ–äºé«˜å¤æ‚åº¦çš„å¤šé¡¹å¼å’Œæ¤­åœ†æ›²çº¿è¿ç®—ã€‚æ‰€ä»¥æˆ‘ä»¬çœ‹åˆ°ä¸€äº›ä¸“é—¨ä¸ºæ­¤æœåŠ¡çš„ç¡¬ä»¶ FPGAã€ASICã€GPUã€‚</p>
<p>è€Œ RISC-V å› ä¸ºå…¶<strong>å¯æ‰©å±•æ€§</strong>å’Œ<strong>æ¨¡å—åŒ–è®¾è®¡</strong>ã€å¼€æºçš„æ ‡å‡†ç­‰ä¼˜åŠ¿ï¼Œæ˜¯å®ç°é›¶çŸ¥è¯†è¯æ˜ç¡¬ä»¶åŠ é€Ÿçš„é‡è¦â€œåŸºçŸ³â€ä¹‹ä¸€ï¼Œ<a target="_blank" rel="noopener" href="https://dev.risczero.com/api/getting-started">risc0 æ˜¯ä¸ªå€¼å¾—å…³æ³¨çš„é¡¹ç›®</a></p>
<h2 id="æ›´å¤šå‚è€ƒ"><a href="#æ›´å¤šå‚è€ƒ" class="headerlink" title="æ›´å¤šå‚è€ƒ"></a>æ›´å¤šå‚è€ƒ</h2>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=fOGdb1CTu5c">Computer Scientist Explains One Concept in 5 Levels of Difficulty</a> å‘ä¸åŒçŸ¥è¯†èƒŒæ™¯çš„äººä»‹ç»é›¶çŸ¥è¯†è¯æ˜ã€‚</p>
</li>
<li>
<p>è¦æ·±å…¥ç†è§£ ZKP éœ€è¦æ›´å¤šæ•°å­¦çŸ¥è¯†ï¼Œ<a target="_blank" rel="noopener" href="https://vitalik.eth.limo/general/2017/11/09/starks_part_1.html">STARKs, Part I: Proofs with Polynomials</a> ä»¥å¤ªåŠåˆ›å§‹äººçš„åšå®¢ï¼Œä»–ç”¨ç›¸å¯¹ç®€å•çš„è¯­è¨€è§£é‡Šæå…¶å¤æ‚çš„å¯†ç å­¦æ¦‚å¿µï¼Œæ˜¯ ZKP å…¥é—¨æœ€ç»å…¸çš„è¯»ç‰©ã€‚</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://rareskills.io/zk-book">The zk-book</a>  ä¸€ä¸ªéå¸¸æ£’çš„åœ¨çº¿å¼€æºä¹¦ç±ï¼Œé€æ­¥è®²è§£æ„å»ºä¸€ä¸ªé›¶çŸ¥è¯†è¯æ˜ç³»ç»Ÿæ‰€éœ€çš„æ•°å­¦çŸ¥è¯†ï¼Œä»æœ‰é™åŸŸã€æ¤­åœ†æ›²çº¿åˆ°å¤šé¡¹å¼æ‰¿è¯ºï¼Œå†…å®¹éå¸¸æ‰å®ã€‚</p>
</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>RISC-V from Scratch: Building a Virtual Machine</title>
    <link href="http://catcoding.me/p/riscv-vm/"/>
    <id>http://catcoding.me/p/riscv-vm/</id>
    <published>2025-09-23T00:54:14+00:00</published>
    <updated>2026-02-13T06:43:00.104220980+00:00</updated>
    <content type="html"><![CDATA[<p>Iâ€™ve always wanted to learn RISC-V. A few days ago, I finally got my hands dirty with it now.</p>
<p>This post will guide you through the process of building a simple RISC-V VM from the ground up, using Rust as our implementation language.</p>
<h2 id="Understanding-the-Core-Concepts"><a href="#Understanding-the-Core-Concepts" class="headerlink" title="Understanding the Core Concepts"></a>Understanding the Core Concepts</h2>
<p>Before writing any code, I need to grasp the fundamentals of RISC-V.</p>
<ul>
<li><strong>RISC vs. CISC</strong>: RISC (Reduced Instruction Set Computing) architectures use a small, highly optimized set of instructions. This is in contrast to CISC (Complex Instruction Set Computing), which has a large number of complex instructions. RISC-Vâ€™s simplicity makes it ideal for building a VM.</li>
<li><strong>Modular Architecture</strong>: RISC-V has a base instruction set (RV32I for 32-bit systems) and optional extensions like M (for multiplication) or F (for floating-point). Weâ€™ll focus on the RV32I base to keep things simple.</li>
<li><strong>The Three Pillars</strong>: At its core, a CPU (and thus our VM) consists of three main components:
<ul>
<li><strong>Registers</strong>: A small set of high-speed memory locations used for calculations. RISC-V has 32 general-purpose registers (<code>x0</code>-<code>x31</code>).</li>
<li><strong>Memory</strong>: A much larger space for storing program code and data.</li>
<li><strong>Program Counter (PC)</strong>: A special register that holds the memory address of the next instruction to be executed.</li>
</ul>
</li>
</ul>
<p>We can get all the details of RISC-V instructions from <a target="_blank" rel="noopener" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/16154769/RISC-V+Technical+Specifications">RISC-V Technical Specifications</a>.</p>
<h2 id="The-VMâ€™s-Core-Logic"><a href="#The-VMâ€™s-Core-Logic" class="headerlink" title="The VMâ€™s Core Logic"></a>The VMâ€™s Core Logic</h2>
<p>Our VM is essentially a program that emulates a real CPUâ€™s behavior. The core of our VM is the <strong>instruction loop</strong>, which follows a simple <strong>fetch-decode-execute</strong> cycle.</p>
<ol>
<li><strong>Fetch</strong>: Read the 32-bit instruction from the memory address pointed to by the PC.</li>
<li><strong>Decode</strong>: Parse the instructionâ€™s binary code to determine its type and what operation to perform.</li>
<li><strong>Execute</strong>: Perform the operation (e.g., an addition) and update the relevant registers or memory.</li>
</ol>
<p>Hereâ€™s a simplified Rust code snippet to illustrate the <code>VM</code> structure and the <code>run</code> loop:</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token struct rust"><span class="token keyword rust">pub</span> <span class="token keyword struct rust">struct</span> </span><span class="token struct rust"><span class="entity name struct rust">VM</span> </span><span class="token struct rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token variable other member rust">x_registers</span><span class="token punctuation separator rust">:</span> [<span class="token keyword rust">u32</span>; 32],
    <span class="token variable other member rust">pc</span><span class="token punctuation separator rust">:</span> <span class="token keyword rust">u32</span>,
    <span class="token variable other member rust">memory</span><span class="token punctuation separator rust">:</span> <span class="token generic rust">Vec<span class="token punctuation definition generic begin rust">&lt;</span><span class="token keyword rust">u8</span><span class="token punctuation definition generic end rust">&gt;</span></span>,
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>

<span class="token impl rust"><span class="token keyword impl rust">impl</span> </span><span class="token impl rust"><span class="entity name impl rust">VM</span> </span><span class="token impl rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token function rust"><span class="token function rust"><span class="token keyword rust">pub</span> <span class="token keyword function rust">fn</span> </span><span class="token function rust">run</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span><span class="token operator rust">&amp;</span><span class="token keyword rust">mut</span> <span class="token variable parameter rust">self</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="token keyword rust">loop</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 1. Fetch the instruction
</span>            <span class="token keyword rust">let</span> instruction <span class="token operator rust">=</span> <span class="token variable language rust">self</span>.<span class="token function rust">fetch_instruction</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
            <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 2. Decode
</span>            <span class="token keyword rust">let</span> decoded_instruction <span class="token operator rust">=</span> <span class="token variable language rust">self</span>.<span class="token function rust">decode</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>instruction</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
            <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 3. Execute
</span>            <span class="token variable language rust">self</span>.<span class="token function rust">execute_instruction</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>decoded_instruction</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
            <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 4. Increment the PC
</span>            <span class="token variable language rust">self</span>.pc <span class="token operator rust">+</span><span class="token operator rust">=</span> <span class="token number integer decimal rust">4</span><span class="token punctuation terminator rust">;</span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span></code></pre>
<p>The fetch instruction turns out to be very simple, we just load 4 bytes in little-endian format into a u32 integer:</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust">    <span class="token comment documentation rust"><span class="token punctuation definition comment rust">///</span> Fetch 32-bit instruction from memory at current PC
</span>    <span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">fetch_instruction</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span><span class="token operator rust">&amp;</span><span class="token variable parameter rust">self</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> <span class="token function return-type rust"><span class="token punctuation separator rust">-&gt;</span> <span class="token generic rust">Option<span class="token punctuation definition generic begin rust">&lt;</span><span class="token keyword rust">u32</span><span class="token punctuation definition generic end rust">&gt;</span></span></span> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="token keyword rust">let</span> pc <span class="token operator rust">=</span> <span class="token variable language rust">self</span>.pc <span class="token operator rust">as</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>
        <span class="token keyword rust">if</span> pc <span class="token operator rust">+</span> <span class="token number integer decimal rust">4</span> <span class="token operator rust">&gt;</span> <span class="token variable language rust">self</span>.memory.<span class="token function rust">len</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            <span class="token keyword rust">return</span> <span class="token class-name rust">None</span><span class="token punctuation terminator rust">;</span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>

        <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> RISC-V uses little-endian byte order
</span>        <span class="token keyword rust">let</span> instruction <span class="token operator rust">=</span> <span class="token keyword rust">u32</span><span class="token path rust"><span class="token punctuation accessor rust">::</span></span>from_le_bytes<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token group rust"><span class="token punctuation section group begin rust">[</span>
            <span class="token variable language rust">self</span>.memory<span class="token group rust"><span class="token punctuation section group begin rust">[</span>pc<span class="token punctuation section group end rust">]</span></span><span class="token punctuation separator rust">,</span>
            <span class="token variable language rust">self</span>.memory<span class="token group rust"><span class="token punctuation section group begin rust">[</span>pc <span class="token operator rust">+</span> <span class="token number integer decimal rust">1</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation separator rust">,</span>
            <span class="token variable language rust">self</span>.memory<span class="token group rust"><span class="token punctuation section group begin rust">[</span>pc <span class="token operator rust">+</span> <span class="token number integer decimal rust">2</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation separator rust">,</span>
            <span class="token variable language rust">self</span>.memory<span class="token group rust"><span class="token punctuation section group begin rust">[</span>pc <span class="token operator rust">+</span> <span class="token number integer decimal rust">3</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation separator rust">,</span>
        <span class="token punctuation section group end rust">]</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

        <span class="token class-name rust">Some</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>instruction</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span></code></pre>
<p>Then we need to decode the integer into a RISC-V instruction. Hereâ€™s how we decode <code>IType</code> and <code>RType</code> instructions. The specifications for these two types are:
<img src="http://catcoding.me/images/ob_pasted-image-20251117091305.png" alt="" /></p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token comment documentation rust"><span class="token punctuation definition comment rust">///</span> Decode 32-bit instruction into structured format
</span><span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">decode</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span><span class="token operator rust">&amp;</span><span class="token variable parameter rust">self</span>, <span class="token variable parameter rust">code</span><span class="token punctuation separator rust">:</span> <span class="token keyword rust">u32</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> <span class="token function return-type rust"><span class="token punctuation separator rust">-&gt;</span> <span class="token generic rust">Option<span class="token punctuation definition generic begin rust">&lt;</span>Instruction<span class="token punctuation definition generic end rust">&gt;</span></span></span> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword rust">let</span> opcode <span class="token operator rust">=</span> code <span class="token operator rust">&amp;</span> <span class="token number integer hexadecimal rust">0x7f</span><span class="token punctuation terminator rust">;</span>

    <span class="token keyword rust">match</span> opcode <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="token number integer hexadecimal rust">0x13</span> <span class="token operator rust">=&gt;</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> I-type instruction (ADDI, etc.)
</span>            <span class="token keyword rust">let</span> rd <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>code <span class="token operator rust">&gt;</span><span class="token operator rust">&gt;</span> <span class="token number integer decimal rust">7</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">&amp;</span> <span class="token number integer hexadecimal rust">0x1f</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">as</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>
            <span class="token keyword rust">let</span> rs1 <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>code <span class="token operator rust">&gt;</span><span class="token operator rust">&gt;</span> <span class="token number integer decimal rust">15</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">&amp;</span> <span class="token number integer hexadecimal rust">0x1f</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">as</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>
            <span class="token keyword rust">let</span> funct3 <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span>code <span class="token operator rust">&gt;</span><span class="token operator rust">&gt;</span> <span class="token number integer decimal rust">12</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">&amp;</span> <span class="token number integer hexadecimal rust">0x7</span><span class="token punctuation terminator rust">;</span>
            <span class="token keyword rust">let</span> imm <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span>code <span class="token operator rust">as</span> <span class="token keyword rust">i32</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">&gt;</span><span class="token operator rust">&gt;</span> <span class="token number integer decimal rust">20</span><span class="token punctuation terminator rust">;</span> <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Sign-extended
</span>
            <span class="token class-name rust">Some</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token path rust">Instruction<span class="token punctuation accessor rust">::</span></span>IType <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                rd<span class="token punctuation separator rust">,</span>
                rs1<span class="token punctuation separator rust">,</span>
                imm<span class="token punctuation separator rust">,</span>
                funct3<span class="token punctuation separator rust">,</span>
            </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
        <span class="token number integer hexadecimal rust">0x33</span> <span class="token operator rust">=&gt;</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> R-type instruction (ADD, SUB, etc.)
</span>            <span class="token keyword rust">let</span> rd <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>code <span class="token operator rust">&gt;</span><span class="token operator rust">&gt;</span> <span class="token number integer decimal rust">7</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">&amp;</span> <span class="token number integer hexadecimal rust">0x1f</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">as</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>
            <span class="token keyword rust">let</span> rs1 <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>code <span class="token operator rust">&gt;</span><span class="token operator rust">&gt;</span> <span class="token number integer decimal rust">15</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">&amp;</span> <span class="token number integer hexadecimal rust">0x1f</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">as</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>
            <span class="token keyword rust">let</span> rs2 <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>code <span class="token operator rust">&gt;</span><span class="token operator rust">&gt;</span> <span class="token number integer decimal rust">20</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">&amp;</span> <span class="token number integer hexadecimal rust">0x1f</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">as</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>
            <span class="token keyword rust">let</span> funct3 <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span>code <span class="token operator rust">&gt;</span><span class="token operator rust">&gt;</span> <span class="token number integer decimal rust">12</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">&amp;</span> <span class="token number integer hexadecimal rust">0x7</span><span class="token punctuation terminator rust">;</span>
            <span class="token keyword rust">let</span> funct7 <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span>code <span class="token operator rust">&gt;</span><span class="token operator rust">&gt;</span> <span class="token number integer decimal rust">25</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">&amp;</span> <span class="token number integer hexadecimal rust">0x7f</span><span class="token punctuation terminator rust">;</span>

            <span class="token class-name rust">Some</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token path rust">Instruction<span class="token punctuation accessor rust">::</span></span>RType <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                rd<span class="token punctuation separator rust">,</span>
                rs1<span class="token punctuation separator rust">,</span>
                rs2<span class="token punctuation separator rust">,</span>
                funct3<span class="token punctuation separator rust">,</span>
                funct7<span class="token punctuation separator rust">,</span>
            </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
        <span class="token operator rust">_</span> <span class="token operator rust">=&gt;</span> <span class="token class-name rust">None</span><span class="token punctuation separator rust">,</span> <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Unsupported opcode
</span>    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>

</span></code></pre>
<p>Then we want to execute the instruction, just following the specification. For demonstration purposes, we return the execution debug string as a result:</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token comment documentation rust"><span class="token punctuation definition comment rust">///</span> Execute decoded instruction
</span><span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">execute</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span><span class="token operator rust">&amp;</span><span class="token keyword rust">mut</span> <span class="token variable parameter rust">self</span>, <span class="token variable parameter rust">instruction_type</span><span class="token punctuation separator rust">:</span> Instruction</span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> <span class="token function return-type rust"><span class="token punctuation separator rust">-&gt;</span> <span class="token generic rust">Result<span class="token punctuation definition generic begin rust">&lt;</span>String, String<span class="token punctuation definition generic end rust">&gt;</span></span></span> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword rust">match</span> instruction_type <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="token path rust">Instruction<span class="token punctuation accessor rust">::</span></span>IType <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            rd<span class="token punctuation separator rust">,</span>
            rs1<span class="token punctuation separator rust">,</span>
            imm<span class="token punctuation separator rust">,</span>
            funct3<span class="token punctuation separator rust">,</span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span> <span class="token operator rust">=&gt;</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            <span class="token keyword rust">match</span> funct3 <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                <span class="token number integer hexadecimal rust">0x0</span> <span class="token operator rust">=&gt;</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> ADDI - Add immediate
</span>                    <span class="token variable language rust">self</span>.<span class="token function rust">write_register</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>rd<span class="token punctuation separator rust">,</span> <span class="token variable language rust">self</span>.x_registers<span class="token group rust"><span class="token punctuation section group begin rust">[</span>rs1<span class="token punctuation section group end rust">]</span></span> <span class="token operator rust">+</span> imm <span class="token operator rust">as</span> <span class="token keyword rust">u32</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
                    <span class="token class-name rust">Ok</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="support macro rust">format!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust">
                        <span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>ADDI x<span class="token constant placeholder rust">{}</span>, x<span class="token constant placeholder rust">{}</span>, <span class="token constant placeholder rust">{}</span> -&gt; x<span class="token constant placeholder rust">{}</span> = <span class="token constant placeholder rust">{}</span><span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span>
                        rd<span class="token punctuation separator rust">,</span> rs1<span class="token punctuation separator rust">,</span> imm<span class="token punctuation separator rust">,</span> rd<span class="token punctuation separator rust">,</span> <span class="token variable language rust">self</span>.x_registers<span class="token group rust"><span class="token punctuation section group begin rust">[</span>rd<span class="token punctuation section group end rust">]</span></span>
                    <span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
                </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
                <span class="token operator rust">_</span> <span class="token operator rust">=&gt;</span> <span class="token class-name rust">Err</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="support macro rust">format!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>Unsupported I-type funct3: <span class="token constant placeholder rust">{:#x}</span><span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span> funct3<span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation separator rust">,</span>
            </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
        <span class="token path rust">Instruction<span class="token punctuation accessor rust">::</span></span>RType <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            rd<span class="token punctuation separator rust">,</span>
            rs1<span class="token punctuation separator rust">,</span>
            rs2<span class="token punctuation separator rust">,</span>
            funct3<span class="token punctuation separator rust">,</span>
            funct7<span class="token punctuation separator rust">,</span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span> <span class="token operator rust">=&gt;</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            <span class="token keyword rust">match</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span>funct3<span class="token punctuation separator rust">,</span> funct7</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                <span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token number integer hexadecimal rust">0x0</span><span class="token punctuation separator rust">,</span> <span class="token number integer hexadecimal rust">0x00</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">=&gt;</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> ADD - Add registers
</span>                    <span class="token keyword rust">let</span> result <span class="token operator rust">=</span> <span class="token variable language rust">self</span>.x_registers<span class="token group rust"><span class="token punctuation section group begin rust">[</span>rs1<span class="token punctuation section group end rust">]</span></span> <span class="token operator rust">+</span> <span class="token variable language rust">self</span>.x_registers<span class="token group rust"><span class="token punctuation section group begin rust">[</span>rs2<span class="token punctuation section group end rust">]</span></span><span class="token punctuation terminator rust">;</span>
                    <span class="token variable language rust">self</span>.<span class="token function rust">write_register</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>rd<span class="token punctuation separator rust">,</span> result</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
                    <span class="token class-name rust">Ok</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="support macro rust">format!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust">
                        <span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>ADD x<span class="token constant placeholder rust">{}</span>, x<span class="token constant placeholder rust">{}</span>, x<span class="token constant placeholder rust">{}</span> -&gt; x<span class="token constant placeholder rust">{}</span> = <span class="token constant placeholder rust">{}</span><span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span>
                        rd<span class="token punctuation separator rust">,</span> rs1<span class="token punctuation separator rust">,</span> rs2<span class="token punctuation separator rust">,</span> rd<span class="token punctuation separator rust">,</span> <span class="token variable language rust">self</span>.x_registers<span class="token group rust"><span class="token punctuation section group begin rust">[</span>rd<span class="token punctuation section group end rust">]</span></span>
                    <span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
                </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
                <span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token number integer hexadecimal rust">0x0</span><span class="token punctuation separator rust">,</span> <span class="token number integer hexadecimal rust">0x20</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">=&gt;</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> SUB - Subtract registers
</span>                    <span class="token keyword rust">let</span> result <span class="token operator rust">=</span> <span class="token variable language rust">self</span>.x_registers<span class="token group rust"><span class="token punctuation section group begin rust">[</span>rs1<span class="token punctuation section group end rust">]</span></span> <span class="token operator rust">-</span> <span class="token variable language rust">self</span>.x_registers<span class="token group rust"><span class="token punctuation section group begin rust">[</span>rs2<span class="token punctuation section group end rust">]</span></span><span class="token punctuation terminator rust">;</span>
                    <span class="token variable language rust">self</span>.<span class="token function rust">write_register</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>rd<span class="token punctuation separator rust">,</span> result</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
                    <span class="token class-name rust">Ok</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="support macro rust">format!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust">
                        <span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>SUB x<span class="token constant placeholder rust">{}</span>, x<span class="token constant placeholder rust">{}</span>, x<span class="token constant placeholder rust">{}</span> -&gt; x<span class="token constant placeholder rust">{}</span> = <span class="token constant placeholder rust">{}</span><span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span>
                        rd<span class="token punctuation separator rust">,</span> rs1<span class="token punctuation separator rust">,</span> rs2<span class="token punctuation separator rust">,</span> rd<span class="token punctuation separator rust">,</span> <span class="token variable language rust">self</span>.x_registers<span class="token group rust"><span class="token punctuation section group begin rust">[</span>rd<span class="token punctuation section group end rust">]</span></span>
                    <span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
                </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
                <span class="token operator rust">_</span> <span class="token operator rust">=&gt;</span> <span class="token class-name rust">Err</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="support macro rust">format!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust">
                    <span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>Unsupported R-type instruction: funct3=<span class="token constant placeholder rust">{:#x}</span>, funct7=<span class="token constant placeholder rust">{:#x}</span><span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span>
                    funct3<span class="token punctuation separator rust">,</span> funct7
                <span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation separator rust">,</span>
            </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span></code></pre>
<p>The simplest VM code is available at: <a target="_blank" rel="noopener" href="https://github.com/chenyukang/ss/tree/main/risc_vm_v0">riscv-vm-v0</a></p>
<h2 id="From-Rust-to-RISC-V-binary"><a href="#From-Rust-to-RISC-V-binary" class="headerlink" title="From Rust to RISC-V binary"></a>From Rust to RISC-V binary</h2>
<p>Now we need to write more complex assembly code for testing our VM, but we donâ€™t want to write assembly code by hand.</p>
<p>To test our VM,  we will write Rust code then use <strong>cross-compile</strong> toolchains to compile it into RISC-V executable files.</p>
<ol>
<li><strong>Prepare the Environment</strong>: Install the <code>riscv32imac-unknown-none-elf</code> target toolchain. This is a bare-metal target, meaning it doesnâ€™t rely on any operating system.</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shell bash"><span class="token function-call shell"><span class="token variable function shell">rustup</span></span><span class="token function-call arguments shell"> target add riscv32imac-unknown-none-elf</span>
</span></code></pre>
<p>Next, youâ€™ll need a RISC-V linker. You can get this from the official RISC-V GNU toolchain.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shell bash"><span class="token comment number-sign shell"><span class="token punctuation definition comment begin shell">#</span></span><span class="token comment number-sign shell"> On Linux or macOS</span><span class="token comment number-sign shell">
</span><span class="token function-call shell"><span class="token variable function shell">sudo</span></span><span class="token function-call arguments shell"> apt-get install gcc-riscv64-unknown-elf</span>
<span class="token comment number-sign shell"><span class="token punctuation definition comment begin shell">#</span></span><span class="token comment number-sign shell"> Alternatively, on macOS</span><span class="token comment number-sign shell">
</span><span class="token function-call shell"><span class="token variable function shell">brew</span></span><span class="token function-call arguments shell"> install riscv-gnu-toolchain</span>
</span></code></pre>
<p><strong>Note:</strong> The <code>gcc-riscv64-unknown-elf</code> package includes both 32-bit and 64-bit tools.</p>
<ol start="2">
<li><strong>Write â€œBare-Metalâ€ Rust</strong>: Our Rust program must be written for a â€œbare-metalâ€ environment, meaning you cannot use the standard library and must provide your own entry point and panic handler.</li>
</ol>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token annotation rust"><span class="token punctuation definition annotation rust">#</span><span class="token punctuation section group begin rust">[</span><span class="token variable annotation rust">unsafe</span><span class="token annotation parameters rust"><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span></span><span class="token annotation parameters rust"><span class="token group rust">no_mangle</span></span><span class="token annotation parameters rust"><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token punctuation section group end rust">]</span></span>
<span class="token keyword rust">pub</span> <span class="token keyword rust">extern</span> <span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>C<span class="token punctuation definition string end rust">&quot;</span></span> <span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">_start</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword rust">let</span> <span class="token keyword rust">mut</span> sum <span class="token operator rust">=</span> <span class="token number integer decimal rust">0</span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">for</span> i <span class="token operator rust">in</span> <span class="token number integer decimal rust">1</span><span class="token operator rust">..</span><span class="token operator rust">=</span><span class="token number integer decimal rust">10</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        sum <span class="token operator rust">+</span><span class="token operator rust">=</span> i<span class="token punctuation terminator rust">;</span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Store the result (which should be 55) in a known memory location.
</span>    <span class="token keyword rust">let</span> result_ptr <span class="token operator rust">=</span> <span class="token number integer hexadecimal rust">0x1000</span> <span class="token operator rust">as</span> <span class="token operator rust">*</span><span class="token keyword rust">mut</span> <span class="token keyword rust">u32</span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">unsafe</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="token operator rust">*</span>result_ptr <span class="token operator rust">=</span> sum<span class="token punctuation terminator rust">;</span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>

<span class="token annotation rust"><span class="token punctuation definition annotation rust">#</span><span class="token punctuation section group begin rust">[</span><span class="token variable annotation rust">panic_handler</span><span class="token punctuation section group end rust">]</span></span>
<span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">panic</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span><span class="token variable parameter rust">_info</span><span class="token punctuation separator rust">:</span> <span class="token operator rust">&amp;</span>PanicInfo</span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> <span class="token function return-type rust"><span class="token punctuation separator rust">-&gt;</span> </span></span><span class="token operator rust">!</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword rust">loop</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span></span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
</span></code></pre>
<ol start="3">
<li><strong>Cross-Compile</strong>: Use <code>cargo</code> with the specific target and a linker script to build the executable. We need to add options for Cargo in <code>.cargo/config.toml</code></li>
</ol>
<pre class="line-numbers language-toml" data-language="toml"><code class="language-toml">[target.riscv32imac-unknown-none-elf]
rustflags = [&quot;-C&quot;, &quot;link-arg=-Tlink.ld&quot;]
</code></pre>
<p>The content for <code>link.ld</code> is as follows. It tells the linker the layout of the binary file generated. Notice that we specify the entry point at address <code>0x80</code>:</p>
<pre class="line-numbers language-plain" data-language="plain"><code class="language-plain">OUTPUT_ARCH(riscv)
ENTRY(_start)

SECTIONS {
    . = 0x80;
    .text : {
        *(.text.boot)
        *(.text)
    }
    .rodata : {
        *(.rodata)
    }
    .data : {
        *(.data)
    }
    .bss : {
        *(.bss)
    }
}
</code></pre>
<p>Then we can build the program to a binary:</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cargo build --release --target riscv32imac-unknown-none-elf
</code></pre>
<ol start="4">
<li><strong>Disassemble and check the binary code</strong>: We can use the tool <code>riscv64-unknown-elf-objdump</code> to double-check the generated binary file:</li>
</ol>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">riscv64-unknown-elf-objdump -d ./demo/target/riscv32imac-unknown-none-elf/release/demo

./demo/target/riscv32imac-unknown-none-elf/release/demo:     file format elf32-littleriscv

Disassembly of section .text._start:

00000080 &lt;_start&gt;:
  80:   4501                    li      a0,0
  82:   4605                    li      a2,1
  84:   45ad                    li      a1,11
  86:   4729                    li      a4,10
  88:   00e61763                bne     a2,a4,96 &lt;_start+0x16&gt;
  8c:   46a9                    li      a3,10
  8e:   9532                    add     a0,a0,a2
  90:   00e61863                bne     a2,a4,a0 &lt;_start+0x20&gt;
  94:   a809                    j       a6 &lt;_start+0x26&gt;
  96:   00160693                addi    a3,a2,1
  9a:   9532                    add     a0,a0,a2
  9c:   00e60563                beq     a2,a4,a6 &lt;_start+0x26&gt;
  a0:   8636                    mv      a2,a3
  a2:   feb6e3e3                bltu    a3,a1,88 &lt;_start+0x8&gt;
  a6:   6585                    lui     a1,0x1
  a8:   c188                    sw      a0,0(a1)
  aa:   8082                    ret
</code></pre>
<p>The complete cross-compile Rust code is available at: <a target="_blank" rel="noopener" href="https://github.com/chenyukang/ss/tree/main/riscv_vm/demo">riscv-demo</a></p>
<h2 id="Using-the-VM-to-Execute-Binary"><a href="#Using-the-VM-to-Execute-Binary" class="headerlink" title="Using the VM to Execute Binary"></a>Using the VM to Execute Binary</h2>
<p>The first problem is how do we parse the executable file? It turns out there is a crate called <code>elf</code> that can help us parse the header of an ELF file. We extract the interested parts from the header and record the <code>base_mem</code> so that we can convert <code>virtual address</code> to <code>physical address</code>. Of course, we also load the code into memory:</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token function rust"><span class="token function rust"><span class="token keyword rust">pub</span> <span class="token keyword function rust">fn</span> </span><span class="token function rust">new_from_elf</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span><span class="token variable parameter rust">elf_data</span><span class="token punctuation separator rust">:</span> <span class="token operator rust">&amp;</span>[<span class="token keyword rust">u8</span>]</span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> <span class="token function return-type rust"><span class="token punctuation separator rust">-&gt;</span> <span class="token keyword rust">Self</span></span> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword rust">let</span> <span class="token keyword rust">mut</span> memory <span class="token operator rust">=</span> <span class="support macro rust">vec!</span><span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">0</span><span class="token keyword numeric rust">u8</span><span class="token punctuation separator rust">;</span> <span class="token constant rust">MEM_SIZE</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation terminator rust">;</span>

    <span class="token keyword rust">let</span> elf <span class="token operator rust">=</span> <span class="token path rust">ElfBytes<span class="token punctuation accessor rust">::</span></span><span class="token generic rust"><span class="token punctuation definition generic begin rust">&lt;</span><span class="token path rust">elf<span class="token punctuation accessor rust">::</span></span><span class="token path rust">endian<span class="token punctuation accessor rust">::</span></span>AnyEndian<span class="token punctuation definition generic end rust">&gt;</span></span><span class="token path rust"><span class="token punctuation accessor rust">::</span></span>minimal_parse<span class="token group rust"><span class="token punctuation section group begin rust">(</span>elf_data</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
        .<span class="token function rust">expect</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>Failed to parse ELF file<span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Get the program entry point
</span>    <span class="token keyword rust">let</span> entry_point <span class="token operator rust">=</span> elf.ehdr.e_entry <span class="token operator rust">as</span> <span class="token keyword rust">u32</span><span class="token punctuation terminator rust">;</span>

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Iterate through program headers, load PT_LOAD type segments
</span>    <span class="token keyword rust">for</span> segment <span class="token operator rust">in</span> elf.<span class="token function rust">segments</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token function rust">expect</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>Failed to get segments<span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="token keyword rust">if</span> segment.p_type <span class="token operator rust">=</span><span class="token operator rust">=</span> <span class="token constant rust">PT_LOAD</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            <span class="token keyword rust">let</span> virt_addr <span class="token operator rust">=</span> segment.p_vaddr <span class="token operator rust">as</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>
            <span class="token keyword rust">let</span> file_size <span class="token operator rust">=</span> segment.p_filesz <span class="token operator rust">as</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>
            <span class="token keyword rust">let</span> mem_size <span class="token operator rust">=</span> segment.p_memsz <span class="token operator rust">as</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>
            <span class="token keyword rust">let</span> file_offset <span class="token operator rust">=</span> segment.p_offset <span class="token operator rust">as</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>

            <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Address translation: virtual address -&gt; physical address
</span>            <span class="token keyword rust">let</span> phys_addr <span class="token operator rust">=</span> virt_addr <span class="token operator rust">-</span> entry_point <span class="token operator rust">as</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>
            <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Check memory boundaries
</span>            <span class="token keyword rust">if</span> phys_addr <span class="token operator rust">+</span> mem_size <span class="token operator rust">&gt;</span> <span class="token constant rust">MEM_SIZE</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                <span class="support macro rust">panic!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>
                    <span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>Segment is too large for the allocated memory. vaddr: {:#x}, mem_size: {:#x}<span class="token punctuation definition string end rust">&quot;</span></span><span class="token punctuation separator rust">,</span>
                    virt_addr<span class="token punctuation separator rust">,</span> mem_size
                </span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
            </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>

            <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Copy data from ELF file to memory
</span>            <span class="token keyword rust">if</span> file_size <span class="token operator rust">&gt;</span> <span class="token number integer decimal rust">0</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                <span class="token keyword rust">let</span> segment_data <span class="token operator rust">=</span> <span class="token operator rust">&amp;</span>elf_data<span class="token group rust"><span class="token punctuation section group begin rust">[</span>file_offset<span class="token operator rust">..</span>file_offset <span class="token operator rust">+</span> file_size<span class="token punctuation section group end rust">]</span></span><span class="token punctuation terminator rust">;</span>
                memory<span class="token group rust"><span class="token punctuation section group begin rust">[</span>phys_addr<span class="token operator rust">..</span>phys_addr <span class="token operator rust">+</span> file_size<span class="token punctuation section group end rust">]</span></span>.<span class="token function rust">copy_from_slice</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>segment_data</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
            </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>

    <span class="token keyword rust">let</span> <span class="token keyword rust">mut</span> vm <span class="token operator rust">=</span> <span class="token constant rust">VM</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        x_registers<span class="token punctuation separator rust">:</span> <span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">0</span><span class="token punctuation separator rust">;</span> <span class="token number integer decimal rust">32</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation separator rust">,</span>
        <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Set directly to entry_point to match the linker script
</span>        pc<span class="token punctuation separator rust">:</span> entry_point<span class="token punctuation separator rust">,</span>
        memory<span class="token punctuation separator rust">,</span>
        mem_base<span class="token punctuation separator rust">:</span> entry_point<span class="token punctuation separator rust">,</span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span><span class="token punctuation terminator rust">;</span>
    vm.x_registers<span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">0</span><span class="token punctuation section group end rust">]</span></span> <span class="token operator rust">=</span> <span class="token number integer decimal rust">0</span><span class="token punctuation terminator rust">;</span>
    vm
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span></code></pre>
<p>Whatâ€™s left is that we need to extend our VM to support all the instruction formats used in this binary file, including <code>li</code>, <code>bne</code>, <code>beq</code>, etc.</p>
<p>There are 16-bit compressed instructions, so we canâ€™t always increment the PC by 4; sometimes we only need to increment it by 2 for shorter ones.</p>
<p>Another interesting thing is that some of them are conditional jump instructions, so we need to get the return <code>new_pc</code> from the execution of the instruction.</p>
<p>So now we need to update the core logic of fetch and execution of instructions:</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Check the lowest 2 bits to determine instruction length
</span><span class="token keyword rust">if</span> first_half <span class="token operator rust">&amp;</span> <span class="token number integer hexadecimal rust">0x3</span> <span class="token operator rust">!</span><span class="token operator rust">=</span> <span class="token number integer hexadecimal rust">0x3</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 16-bit compressed instruction
</span>    pc_increment <span class="token operator rust">=</span> <span class="token number integer decimal rust">2</span><span class="token punctuation terminator rust">;</span>
    new_pc <span class="token operator rust">=</span> <span class="token variable language rust">self</span>.<span class="token function rust">execute_compressed_instruction</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>first_half</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span> <span class="token keyword rust">else</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 32-bit instruction
</span>    pc_increment <span class="token operator rust">=</span> <span class="token number integer decimal rust">4</span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">if</span> physical_pc.<span class="token function rust">saturating_add</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token number integer decimal rust">3</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">&gt;</span><span class="token operator rust">=</span> <span class="token variable language rust">self</span>.memory.<span class="token function rust">len</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="token keyword rust">break</span><span class="token punctuation terminator rust">;</span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
    <span class="token keyword rust">let</span> second_half <span class="token operator rust">=</span> <span class="token keyword rust">u16</span><span class="token path rust"><span class="token punctuation accessor rust">::</span></span>from_le_bytes<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token group rust"><span class="token punctuation section group begin rust">[</span>
        <span class="token variable language rust">self</span>.memory<span class="token group rust"><span class="token punctuation section group begin rust">[</span>physical_pc <span class="token operator rust">+</span> <span class="token number integer decimal rust">2</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation separator rust">,</span>
        <span class="token variable language rust">self</span>.memory<span class="token group rust"><span class="token punctuation section group begin rust">[</span>physical_pc <span class="token operator rust">+</span> <span class="token number integer decimal rust">3</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation separator rust">,</span>
    <span class="token punctuation section group end rust">]</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> instruction <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span>second_half <span class="token operator rust">as</span> <span class="token keyword rust">u32</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">&lt;</span><span class="token operator rust">&lt;</span> <span class="token number integer decimal rust">16</span> <span class="token operator rust">|</span> <span class="token group rust"><span class="token punctuation section group begin rust">(</span>first_half <span class="token operator rust">as</span> <span class="token keyword rust">u32</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

    <span class="token keyword rust">if</span> instruction <span class="token operator rust">=</span><span class="token operator rust">=</span> <span class="token number integer decimal rust">0</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="token keyword rust">break</span><span class="token punctuation terminator rust">;</span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>

    new_pc <span class="token operator rust">=</span> <span class="token variable language rust">self</span>.<span class="token function rust">execute_instruction</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>instruction</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>

</span></code></pre>
<p>The complete new VM which can run compiled RISC-V binary files is available at: <a target="_blank" rel="noopener" href="https://github.com/chenyukang/ss/tree/main/riscv_vm">riscv-vm</a></p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://riscv.org/technical/specifications/">RISC-V Technical Specifications</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>Rust Week 2025 æ‚è®°</title>
    <link href="http://catcoding.me/p/rust-week-notes/"/>
    <id>http://catcoding.me/p/rust-week-notes/</id>
    <published>2025-06-11T10:23:14+00:00</published>
    <updated>2026-02-13T06:43:00.105220996+00:00</updated>
    <content type="html"><![CDATA[<p>5 æœˆä¸­æ—¬æˆ‘å‚åŠ äº†åœ¨è·å…° Utrecht ä¸¾è¡Œçš„ Rust Weekï¼Œæƒ³æ¥å¯ä»¥å†™ç¯‡æ–‡ç« è®°å½•ä¸‹æ‰€è§æ‰€é—»ã€‚</p>
<p>æˆ‘å¹´åˆå’Œ Rust åŸºé‡‘ä¼šé‚®ä»¶ç¡®è®¤å‚åŠ ï¼Œä½†ç›´åˆ° 4 æœˆ 9 æ—¥æ‰å¼€å§‹åŠ¨æ‰‹ç”³è¯·ç­¾è¯ã€‚åœ¨æ·±åœ³åŠç†è·å…°ç­¾è¯æµç¨‹ç®€å•ï¼Œåªéœ€æäº¤ææ–™å¹¶å½•æŒ‡çº¹ï¼Œä½†æˆ‘å«Œéº»çƒ¦æ‰¾äº†ä¸­ä»‹å¸®å¿™ã€‚æ®è¯´å¤§æ¦‚ä¹Ÿå°±ä¸¤å‘¨å¤šå°±ä¼šæœ‰ç»“æœï¼Œä½†ç›´åˆ°äº”ä¸€æŸ¥è¯¢è¿˜æ˜¯æ²¡ç»“æœï¼Œä¸­ä»‹è¯´å¯ä»¥åŠ  600 å…ƒåŠ æ€¥ã€‚çœ‹åˆ°å®˜ç½‘è§£é‡Šè¿‘æœŸå®¡æ‰¹å»¶è¿Ÿï¼Œæˆ‘ä¾¿èŠ±é’±åŠ æ€¥ï¼Œç¬¬äºŒå‘¨æ‹¿åˆ°äº†ç­¾è¯ã€‚ä¸çŸ¥é“è¿™å…¶ä¸­æ˜¯å¦æœ‰çŒ«è…»ï¼Œä½†ç¡®å®æœ‰åä¸ºçš„æœ‹å‹åŒæ ·å¡åœ¨é‚£ä¸ªèŠ‚ç‚¹å®¡æ‰¹ï¼Œç»“æœæ²¡æœ‰å¦‚æœŸä¸‹æ¥ã€‚</p>
<p>ä»å¹¿å·ç™½äº‘æœºåœºæœ‰ç›´é£é˜¿å§†æ–¯ç‰¹ä¸¹çš„èˆªç­ï¼Œåªæ˜¯èµ·é£æ—¶é—´å¤§æ¦‚æ˜¯å‡Œæ™¨ 1 ç‚¹å¤šã€‚é£æœºä¸Šåº§ä½ç©ºé—´ç‹­å°ï¼Œéš¾ä»¥å…¥ç¡ï¼Œè¶´ç€æˆ–èººç€éƒ½ä¸èˆ’æœï¼Œåˆ°äº†é˜¿å§†æ–¯ç‰¹ä¸¹æ˜¯æ—©æ™¨ 6 ç‚¹å¤šã€‚é€šè¿‡æµ·å…³åï¼Œæˆ‘å› ä¸ç†Ÿæ‚‰è·å…°è¯­è€Œæœ‰äº›è¿·èŒ«ã€‚ç”±äºæœªæºå¸¦ Visa å¡ï¼Œåªèƒ½ä½¿ç”¨ç°é‡‘ï¼Œå¹¸å¥½ä¸¤ä½è·¯äººçƒ­å¿ƒç›¸åŠ©ã€‚æˆ‘ç›´æ¥è´­ä¹°ç«è½¦ç¥¨å‰å¾€ Utrechtï¼Œçº¦äºä¸Šåˆ 10 ç‚¹æŠµè¾¾é…’åº—ã€‚å› ä¸ºæ—¶é—´è¿˜æ¯”è¾ƒæ—©æ²¡æœ‰ç©ºæˆ¿ï¼Œæˆ‘æŠŠè¡Œæç®±æ”¾åœ¨é…’åº—è‡ªå·±å»åŸé‡Œé€›é€›ã€‚</p>
<p>Utrecht æ®è¯´æ˜¯è·å…°ç¬¬å››å¤§åŸå¸‚ï¼Œäº¤é€šæ–¹ä¾¿ã€‚æˆ‘æŸ¥äº†ä¸€ä¸‹ï¼Œäººå£çº¦ä¸º 30 ä¸‡ï¼Œè¿™åœ¨ä¸­å›½ä¼°è®¡åªç®—æ˜¯å°é•‡äº†ã€‚æˆ‘ä¿¡æ­¥æ¼«æ¸¸ï¼ŒåŸå¸‚æ•´æ´å¦‚ç”»ï¼Œç»¿æ ‘æˆè«ï¼Œç©ºæ°”æ¸…æ–°æ€¡äººã€‚ç”±äºæ˜¯å‘¨å…­ï¼Œå•†æˆ·å¤§å¤šå·²å…³é—¨ï¼Œè¡—ä¸Šè¡Œäººå¤šåœ¨è·‘æ­¥æˆ–æ•£æ­¥ï¼Œæ•´ä½“äººå£å¯†åº¦è¾ƒä½ã€‚5 æœˆåº”è¯¥æ˜¯è·å…°æœ€å¥½çš„å¤©æ°”ï¼Œä¸å†·ä¸çƒ­ï¼Œåªè¦ä¸åœ¨å¤ªé˜³ä¸‹å°±ä¼šæ„Ÿè§‰å‡‰å‡‰çš„ã€‚è·å…°äººèº«é«˜é©¬å¤§ï¼Œè·¯ä¸Šçš„è‡ªè¡Œè½¦å¾ˆå¤šè€Œæ±½è½¦éå¸¸å°‘ï¼Œå¤§å¤šéƒ½æ˜¯ A çº§è½¦ï¼Œè±ªè½¦åŸºæœ¬æ²¡çœ‹åˆ°ã€‚å¾ˆå¸¸è§çš„åœºæ™¯æ˜¯çˆ¶æ¯éª‘è‡ªè¡Œè½¦ï¼Œæ‹‰ç€ä¸ªå¤§ç¯®ç­é‡Œè½½ç€ä¸€ä¸¤ä¸ªå°å­©ã€‚</p>
<p>è¡—å¤´çš„äººä»¬ç¥æƒ…è½»æ¾è‡ªåœ¨ï¼Œä»¿ä½›æ—¶é—´åœ¨è¿™é‡Œæ…¢äº†ä¸‹æ¥ã€‚è·¯æ—ä¸€ä¸ªå¹´è½»äººå€šç€æ ‘ï¼Œæ‰‹æ§ä¹¦æœ¬è¯»å¾—å…¥äº†ç¥ï¼Œæ—è¾¹çš„é‡‘æ¯›å°ç‹—å´ä¸è€çƒ¦åœ°æ‰¯ç€ç‰µç»³ï¼Œå‘å‡ºå‡ å£°æ’’å¨‡ã€‚è‰åªè¾¹ï¼Œå‡ ä¸ªäººæ‡’æ´‹æ´‹åœ°èººåœ¨é•¿æ¤…ä¸Šæ™’ç€å¤ªé˜³ï¼Œåƒæ˜¯è¢«å¾®é£å“„ç¡äº†ï¼Œæ‰‹ä¸­æœªå–å®Œçš„å’–å•¡æ¯æ­ªåœ¨ä¸€æ—ã€‚è¿æ²³è¾¹ï¼Œä¸€å¯¹ç™½å‘è‹è‹çš„å¤«å¦‡æ²æµ´åœ¨é˜³å…‰ä¸­ï¼Œä¸ˆå¤«ä¼¼ä¹æƒ³èµ·ä»€ä¹ˆè¶£äº‹ï¼Œä¾§èº«åœ¨å¦»å­è€³è¾¹ä½è¯­å‡ å¥ï¼Œæƒ¹å¾—å¥¹è½»ç¬‘å‡ºå£°ï¼Œéšå³ä¸¤äººè½»è½»æ¥å»ã€‚è¿™äº›åœºæ™¯å¯¹æˆ‘è¿™ä¸ªåŒ†åŒ†æ—…å®¢è€Œè¨€ï¼Œå®›å¦‚ã€Šæ¥šé—¨çš„ä¸–ç•Œã€‹çš„å¼€åœºï¼Œç¾å¥½å´ç•¥æ˜¾ä¸çœŸå®ã€‚</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250607184354.png" alt="" /></p>
<p>æ›´å®é™…çš„é—®é¢˜æ˜¯åƒé¥­ï¼Œåˆ°äº†ä¸­åˆé¥­ç‚¹ï¼Œä¸»åŸåŒºæˆ‘éƒ½å¿«ç²—ç•¥èµ°å®Œäº†ï¼Œä½†åªæœ‰ä¸€ä¸¤ä¸ªé¤å…å¼€ç€ã€‚æ— å¥ˆï¼Œæˆ‘å»è¶…å¸‚ä¹°äº†ç‚¹é¢åŒ…å’Œç‰›å¥¶å½“ä½œåˆé¥­ï¼Œé¡ºä¾¿çœ‹äº†ä¸€ä¸‹æ—¥ç”¨å“çš„ç‰©ä»·ï¼Œæ°´æœå’Œè”¬èœæ¯”è¾ƒè´µï¼Œç‰›å¥¶ä¹‹ç±»çš„ä¸œè¥¿ä¾¿å®œç‚¹ã€‚å›åˆ°é…’åº—æœ‰äº†ç©ºæˆ¿ï¼Œå‰å°ç»™æˆ‘åŠç†äº†å…¥ä½ï¼Œç¨å¾®ç¡äº†ä¸€ä¸ªæ¥å°æ—¶ï¼Œèµ·æ¥åå·²ç»æ˜¯ä¸‹åˆä¸‰ç‚¹å¤šäº†ï¼Œè¿™æ—¶å€™æˆ‘æ‰åæ‚”ä»Šå¤©åº”è¯¥å¤šåœ¨é˜¿å§†æ–¯ç‰¹ä¸¹é€›é€›ï¼Œå¯ç©çš„åœ°æ–¹åº”è¯¥æ›´å¤šã€‚æˆ‘åªèƒ½åˆå¾€è¿˜æ²¡é€›çš„åŸå¸‚å¦ä¸€è¾¹æ¼«æ­¥ï¼ŒåŸå¸‚é¢è²Œéƒ½æŒºæ¼‚äº®ï¼Œä¸è¿‡æ€»ä½“è€Œè¨€æˆ¿å­å¤§å¤šæ˜¯è”æ’ï¼Œç©ºé—´ä¸æ˜¯å¾ˆå¤§ï¼Œä¸åƒå¤šå¹´å‰ç¬¬ä¸€æ¬¡é€›åœ£ä½•å¡é‚£æ ·æˆ·æˆ·å¤§åˆ«å¢…å¸¦ç»™æˆ‘éœ‡æ’¼ã€‚</p>
<p>æ™šä¸Šçœ‹åˆ° zulip é‡Œæœ‰æ¶ˆæ¯ï¼Œå’Œæˆ‘ä¸€æ ·æå‰åˆ°è¾¾çš„äººå¼€å§‹ç»„å±€åƒé¥­äº†ã€‚æˆ‘ä»¬ä¸€è¡Œå››äººæŒ‘äº†ä¸ªé¤å…èŠäº†ä¸¤ä¸ªå°æ—¶å·¦å³ï¼Œä¸€ä¸ªç¾å›½æ•™æˆã€ä¸€ä¸ªå¾·å›½å¹´è½»å­¦ç”Ÿã€è¿˜æœ‰ä¸€ä¸ªé©¬æ¥è¥¿äºšäººï¼ŒèŠçš„éƒ½æ˜¯æŠ€æœ¯è¶£é—»å’Œ Rust ç›¸å…³çš„ã€‚ä½†æˆ‘è¿™æ—¶å€™æœ‰ç‚¹å›°äº†ï¼Œæ‰€ä»¥ä¸»è¦åœ¨åƒå’Œå¬ã€‚æ²¡æƒ³åˆ°é¥­å±€ç»“æŸåéƒ½æ™šä¸Šä¹ç‚¹åŠäº†ï¼Œå¤©è¿˜å¾®å¾®æš—ï¼Œè¿™æ—¶å€™ Utrecht åŸå¸‚è¿æ²³æ—è¾¹çš„é¤å…å¼€ç€ï¼Œæ¸¸å®¢ç†™ç†™æ”˜æ”˜ï¼Œè¿™å¤§æ¦‚æ˜¯æœ€çƒ­é—¹çš„æ—¶å€™äº†ã€‚</p>
<p>5.12 æ˜¯å‘¨ä¸€ï¼Œè¿™å¤©æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„æ´»åŠ¨ï¼Œæ˜å¤©æ‰æ˜¯ä¸»ä¼šè®®çš„ç¬¬ä¸€å¤©ï¼Œæ‰€ä»¥å¾ˆå¤šäººè¿˜åœ¨è·¯ä¸Šã€‚æˆ‘ä¸Šåˆå»äº†ä¼šåœºæ³¨å†Œé¢†äº†å‚ä¼šç‰Œï¼Œç„¶ååœ¨ä¼šåœºé€›äº†é€›ã€‚æˆ‘é™†é™†ç»­ç»­è®¤å‡ºæ¥äº†ä¸€äº›ç”¨çœŸå®ç…§ç‰‡åš Github å¤´åƒçš„äººï¼ŒæœŸé—´å’Œä¸€ä¸ªè€å“¥èŠäº†èµ·æ¥ï¼Œä»–å¸¸å¹´ç»´æŠ¤ç€ rustc-dev è¿™ä»½å¼€å‘æ–‡æ¡£ï¼Œä¹‹å‰æˆ‘æ PR çš„æ—¶å€™å¸®æˆ‘ Review è¿‡ã€‚åˆ°äº†é¥­ç‚¹å°±ä¸€èµ·è¾¹èŠè¾¹å¾€å¸‚åŒºèµ°ï¼Œæˆ‘ä»¬æƒ³çˆ¬åˆ°æ•™å ‚çš„æ¥¼é¡¶å‚è§‚ï¼Œæ®è¯´è¿™é‡Œæ˜¯åŸå¸‚çš„æœ€é«˜ç‚¹ï¼Œé£æ™¯åº”è¯¥ä¸é”™ã€‚å»äº†ä¹‹åå‘ç°ä¸€å®šè¦é¢„çº¦å’Œè¯·è®²è§£å‘˜ï¼Œè€Œä¸”ä¸€ä¸ªä¸‹åˆæ‰å‡ åå·äººï¼Œä¾¿æ”¾å¼ƒäº†ã€‚èµ°äº† 20 å¤šåˆ†é’Ÿï¼Œéƒ½æ²¡æ‰¾åˆ°ä»€ä¹ˆçœ‹èµ·æ¥å¥½åƒçš„é¤å…ï¼Œç¢°åˆ°ä¸€ä¸ªè¶…å¸‚åˆä¹°äº†ç‚¹é¢åŒ…å’Œç‰›å¥¶ï¼Œåœ¨é™„è¿‘çš„å…¬å›­æ—å½“ä½œåˆé¤ã€‚è¿™è€å“¥æ¥è‡ªå—éï¼Œæ¯”æˆ‘å¤§å‡ å²ï¼Œä¹‹å‰ç»´æŠ¤è¿‡ Debian ä¸Šçš„ä¸€äº›åŒ…ã€‚ä»–ç»™ Rust åšå¼€æºè´¡çŒ®å¿«åå¹´äº†ï¼Œå¤§å¤šæ˜¯ä¸€äº›æ–‡æ¡£ç±»çš„å·¥ä½œã€‚ä»–ç°åœ¨å…¨èŒè¿œç¨‹åœ¨ä¸€ä¸ª Rust ç›¸å…³çš„å’¨è¯¢å…¬å¸å·¥ä½œï¼Œä¸»è¦æ—¥å¸¸è¿˜æ˜¯åšäº›å¼€æºç»´æŠ¤å·¥ä½œã€‚</p>
<p>ä¸‹åˆæ²¡ä»€ä¹ˆç‰¹åˆ«çš„å®‰æ’ï¼Œæˆ‘å‚åŠ äº†ä¸€ä¸ª workshopã€‚æˆ‘ä»¬è¦åšçš„æ˜¯ä¸€ä¸ªè…èš€çš„ Rust å®ä½“ Logoï¼Œå¯ä»¥åœ¨èƒŒåç”¨é©¬å…‹ç¬”å†™ä¸Šè‡ªå·±çš„åå­—ï¼Œç”¨ç£¨ç ‚çº¸æ‘©æ“¦ä¸€éï¼Œç„¶åç”¨é…’ç²¾è¿˜æœ‰å„ç§åŒ–å­¦æŸ“æ–™æ¶‚åœ¨ Logo çš„è¡¨é¢ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´å°±ä¼šå½¢æˆè…èš€çš„æ•ˆæœå’Œå›¾æ¡ˆï¼Œæˆ‘ä¹Ÿè·Ÿç€åšäº†ä¸€ä¸ªï¼Œæ˜¯ä¸æ˜¯çœ‹èµ·æ¥å¾ˆæ¼‚äº®ï¼Ÿä½†æˆ‘ç¬¬äºŒå¤©å¿˜è®°å»å–äº† :)</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250607173912.png" alt="" /></p>
<p>å› ä¸ºæ—¶å·®åŸå› ï¼Œæˆ‘ä¸‹åˆå°±å¼€å§‹çŠ¯å›°ï¼Œåœ¨é…’åº—ç¡äº†ä¸€ä¸‹åˆåï¼Œçœ‹åˆ°ç¾¤é‡Œåˆæœ‰äººå¼€å§‹ç»„é¥­å±€ï¼Œè¿™æ¬¡æ˜¯éƒ½æ˜¯åŒä½ä¸ªé…’åº—çš„äººï¼Œæˆ‘ä»¬åœ¨é…’åº—å¤§å ‚é›†åˆï¼Œæ€»å…±å¤§æ¦‚æœ‰ 10 ä¸ªäººå·¦å³ã€‚æˆ‘çœ‹åˆ°äº†æ›´å¤šçš„ç†Ÿæ‚‰é¢å­”å’Œ idï¼Œæœ‰å‡ ä¸ªç»´æŠ¤ Rust å¤šå¹´çš„æˆå‘˜ï¼Œç¢°åˆ°äº†æˆ‘ç¬¬ä¸€æ¬¡æ PR å¸®æˆ‘ review çš„ estebankã€‚</p>
<p>æˆ‘ä»¬æ‰¾äº†ä¸ªåº—å–äº†ç‚¹å•¤é…’ï¼Œç„¶åæœåŠ¡å‘˜è¿‡æ¥è¯´åå¨åˆ°ç‚¹ä¸‹ç­äº†ï¼Œæ‰€ä»¥ä¸æä¾›æ™šé¤ã€‚è¿™å¯¹äºä¸­å›½äººæ¥è¯´çœŸæ˜¯éš¾ä»¥ç½®ä¿¡ï¼Œå“ªæœ‰è¿™ä¹ˆåšç”Ÿæ„çš„å‘¢ï¼Œè¿™é‡Œæœç„¶æ˜¯åˆ°ç‚¹ä¸‹ç­æ¯”æŒ£é’±æ›´é‡è¦ã€‚åæ¥æˆ‘ä»¬åç«è½¦å»äº†ä¸»åŸåŒºï¼Œæ¥è¿è¯¢é—®äº†ä¸¤å®¶é¤å…ï¼Œå‡è¡¨ç¤ºå·²å¿«åˆ°æ‰“çƒŠæ—¶é—´ (å…¶å®ä¹Ÿå°±å¿«æ™šä¸Š 9 ç‚¹)ï¼Œæœ€åç»ˆäºæ‰¾äº†ä¸€ä¸ªè¿æ²³è¾¹ä¸Šçš„é¤å…åä¸‹ã€‚æˆ‘ç‚¹äº†ä¸ªæµ·é²œæ„é¢ï¼Œå‘³é“éå¸¸ä¸é”™ï¼Œ20 æ¬§å…ƒä¹Ÿå€¼äº†ï¼Œä½†æ²¡æƒ³åˆ°è¿™å°±æ˜¯æˆ‘è¿™ä¸€å‘¨åƒå¾—æœ€æ»¡æ„çš„ä¸€é¡¿é¥­äº†ã€‚</p>
<p><img src="http://catcoding.me/images/ob_ad6b5b55398d6fe5b5c743a2f2bcd95c.jpg" alt="" /></p>
<p>ä¸€ç¾¤ç¨‹åºå‘˜åƒé¥­èŠçš„è¿˜æ˜¯æŠ€æœ¯è¯é¢˜ï¼Œä½œä¸º Rust ç¨‹åºå‘˜å’Œç»´æŠ¤è€…ï¼Œåæ§½ C++ æ˜¯ä¸å¯é¿å…çš„ï¼Œæœ‰çš„èŠå¾—æ¯”è¾ƒç»†èŠ‚ï¼Œæ¯”å¦‚å¦‚ä½•æé«˜é“¾æ¥é€Ÿåº¦ä¹‹ç±»çš„ã€‚æ€»ä½“æ¥è¯´æ°”æ°›éå¸¸å¥½ï¼Œå¤§æ¦‚æ˜¯å¾ˆå¤šäººéƒ½è¿œç¨‹å·¥ä½œï¼Œå¹³æ—¶æ— æ³•æ‰¾åˆ°è¿™ä¹ˆä¸€ç¾¤å¿—åŒé“åˆçš„äººèŠå¤©ï¼Œè€Œä¸”è¿™äº›äººå¹³æ—¶åœ¨å¼€æºç¤¾åŒºé‡Œåˆä½œäº¤æµï¼Œèƒ½è§é¢èŠèŠè‡ªç„¶æ˜¯éå¸¸å¼€å¿ƒçš„ã€‚</p>
<p>æœ‰è¶£çš„äº‹å‘ç”Ÿåœ¨æˆ‘ä»¬ç”¨å®Œé¤ä¹‹åï¼Œè€æ¿ä¼°è®¡æ˜¯çŠ¯æ‡’ï¼Œç»“è´¦è¯´ä¸èƒ½åˆ†å¼€æ”¯ä»˜ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰¾ä¸ªäººå…ˆæ›¿å¤§å®¶æŠŠå•ä¹°äº†ï¼Œç„¶åå¤§å®¶å†è½¬ç»™ä»–ã€‚ä¸€ç¾¤ç¨‹åºå‘˜å¤§çœ¼å¯¹å°çœ¼ï¼Œé‚£æ°”æ°›æœ‰ç‚¹å°´å°¬ã€‚åæ¥æ˜¯ eholk ç«™å‡ºæ¥å…ˆä¹°äº†å•ï¼Œç„¶åä¸€ç¾¤äººå›´ç€ä»–çœ‹è´¦å•è½¬é’±ç»™ä»–ï¼Œåæ­£æ˜¯å¼‚å¸¸è€—æ—¶å’Œéº»çƒ¦ï¼Œçœ‹æ¥è¿˜æ˜¯ä¸­å›½æ‰‹æœºæ”¯ä»˜ AA æ¥å¾—æ›´æ–¹ä¾¿ã€‚</p>
<p>5.13 æ˜¯ Conference çš„ç¬¬ä¸€å¤©ï¼Œä¸»é¢˜å¾ˆå¤šï¼Œè€Œä¸”åˆ†äº†ä¸‰ä¸ªåˆ†ä¼šåœºï¼šä¸»ä¼šåœºã€ç”Ÿæ€ã€è¡Œä¸šåº”ç”¨ã€‚è¿™ä¸¤å¤©å‚ä¼šçš„äººéå¸¸å¤šï¼Œæˆ‘ä¼°è®¡å¾—æœ‰ 500 æ¥äººã€‚å…¬å¸å±•å°æ¯”è¾ƒå°‘ï¼Œå³è¾¹æœ‰ Jetbrainsã€Zedã€å·¦è¾¹æœ‰ä¸€äº›ç¡¬ä»¶ç›¸å…³çš„å’Œ Rust åŸ¹è®­å’¨è¯¢ç›¸å…³çš„å…¬å¸ï¼Œåä¸ºæœ‰ä¸ªæ‹›è˜å±•å°ã€‚ç°åœºçœ‹åˆ°äº†å…¶ä»–å‡ ä¸ªä¸­å›½äººï¼ŒèŠäº†ä¸€ä¸‹ä»–ä»¬æ˜¯åœ¨ Cargo é¡¹ç›®å›¢é˜Ÿåšå¼€æºè´¡çŒ®çš„ã€‚åœ¨ä¼šåœºæˆ‘è§åˆ°äº†æ›´å¤šç†Ÿæ‚‰çš„é¢å­”ï¼Œå› ä¸ºæŒ‚ç‰Œä¸Šæœ‰ Github è´¦å·ï¼Œæ‰€ä»¥åŸºæœ¬ç›¯ç€å¯¹æ–¹çš„åç‰‡çœ‹çœ‹å°±çŸ¥é“æ˜¯å¦æ‰“è¿‡äº¤é“ï¼Œå¯ä»¥è¯´è¿™æ˜¯ä¸€ä¸ªå¤§å‹çš„ç½‘å‹è§é¢ä¼šã€‚æˆ‘åœ¨ç¤¾åŒºé‡Œé¢æ–­æ–­ç»­ç»­ä¹Ÿåšäº†å››å¹´ï¼Œæœ‰çš„äººåªæ˜¯é€šè¿‡ review comments äº¤æµï¼Œæœ‰çš„äººé€šè¿‡ zulip ç§èŠè¿‡ï¼Œèƒ½è§é¢èŠèŠçœŸæ˜¯ä¸€ç§éš¾å¾—çš„ä½“éªŒã€‚å¦å¤–æˆ‘å’Œåä¸ºçˆ±å°”å…°å¯ä¿¡è®¡ç®—å®éªŒå®¤çš„ä½™æ•™æˆèŠäº†æ¯”è¾ƒä¹…ã€‚</p>
<p>è¿™æ¬¡ä¼šåœºå±…ç„¶é€‰åœ¨äº†ä¸€ä¸ªç”µå½±é™¢ï¼Œä¸€æ¥¼æ˜¯ä¸€ä¸ªå¤§çš„ä¼šå±•æ´»åŠ¨ç©ºé—´ï¼Œæ•´ä½“éå¸¸å®½æ•ã€‚è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡ååœ¨ç”µå½±é™¢å¬æŠ€æœ¯æ¼”è®²ï¼Œåº§ä½å®½æ•ã€éŸ³æ•ˆå’Œè§†è§‰éƒ½æ£’æäº†ï¼Œä»–ä»¬ç”šè‡³åšäº†ä¸€ä¸ªç±»ä¼¼ç”µå½±çš„<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=E56STygm8i4">ç‰‡å¤´åŠ¨ç”»</a>ï¼Œçœ‹èµ·æ¥è¯™è°å¯çˆ±ã€‚ç¬¬ä¸€å¤©æœ€çƒ­çš„ä¸»é¢˜åº”è¯¥æ˜¯ Alex Crichton çš„ 10 Years of Rustï¼Œæˆ‘ç¬¬ä¸€åœºä¹Ÿå»å¬äº†è¿™ä¸ªæ¼”è®²ã€‚æ¨èä»»ä½•å¯¹ Rust æ„Ÿå…´è¶£çš„å»çœ‹çœ‹è¿™ä¸ª<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=zIm6xIOLVkA&amp;ab_channel=RustNL">è§†é¢‘</a>ã€‚</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250608105940.png" alt="" /></p>
<p>Rust åœ¨åµŒå…¥å¼é¢†åŸŸå–å¾—äº†é•¿è¶³çš„è¿›å±•ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯è¿™æ¬¡ä¼šè®®çš„çƒ­ç‚¹ï¼Œ<a target="_blank" rel="noopener" href="https://youtu.be/84bX1nPDBr4?t=13035">Itâ€™s Embedded Rust Time</a>è¿™ä¸ªæ¼”è®²è°ˆåˆ°é•¿è¿œæ¥çœ‹è¿™ä¸ªé¢†åŸŸé‡Œçš„äººå¸Œæœ› Rust èƒ½å¾—åˆ°æ›´å¤šåº”ç”¨ï¼Œvolvo çš„äººåˆ†äº«äº†ä»–ä»¬ä½¿ç”¨ Rust å¼€å‘å’Œå‘å¸ƒç¬¬ä¸€ä¸ª ECU çš„è¿‡ç¨‹ã€‚æ¥è‡ªå—äº¬å¤§å­¦çš„ Xiaolong åˆ†äº«äº†ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ç¼–ç¨‹æ¡†æ¶ Dagrsã€‚<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=UOP9q3BRiIA&amp;t=24425s">Refactoring in Rust</a> åˆ†äº«äº†äº›é‡æ„æŠ€å·§ï¼ŒæŠŠä¸€ä¸ªå…¸å‹åœºæ™¯çš„ä»£ç å˜å¾—æ¼‚äº®æ˜“ç»´æŠ¤ã€‚ <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=UOP9q3BRiIA&amp;t=26954s">We deserve helpful tools</a> ä»‹ç»äº†ç¼–è¯‘å™¨é‡Œçš„é”™è¯¯ä¿¡æ¯å¦‚ä½•æ›´å‹å¥½ï¼Œå¾ˆå¤šåˆå­¦è€…å–œæ¬¢ Rust çš„ä¸€ä¸ªåŸå› æ˜¯ rustc çš„é”™è¯¯ä¿¡æ¯çœ‹èµ·æ¥äººæ€§åŒ–åˆæœ‰å¸®åŠ©ï¼Œè¿™æ˜¯ç¤¾åŒºé‡Œå¾ˆå¤šäººåŠªåŠ›çš„ç»“æœã€‚</p>
<p>åˆé¥­æœŸé—´ï¼Œæœ‰ä¸ªæ¯”åˆ©æ—¶çš„å·¥ç¨‹å¸ˆæ¥æ‹¼æ¡Œï¼Œæ‰€ä»¥å°±èŠäº†èµ·æ¥ï¼Œä»–å‡ å¹´å‰å»å¹¿å·å¾…è¿‡ä¸€ä¸ªå¤šæœˆï¼Œæ‰€ä»¥æœ‰äº›å…±åŒè¯é¢˜ã€‚ä»–ä¸šä½™æ—¶é—´å–œæ¬¢æŠ˜è…¾ç¡¬ä»¶å’Œæ•°å­¦ï¼Œç»„ç»‡äº†ä¸€ä¸ªå­¦ä¹ ç³»ç»Ÿç¼–ç¨‹çš„<a target="_blank" rel="noopener" href="https://sysghent.be/">å°ç»„</a>ã€‚è¿™ä¸ªäººéå¸¸å¥è°ˆæœ‰è¶£ï¼Œæˆ‘ä»¬ä¸€èµ·èŠäº†èŠå„è‡ªçš„å·¥ä½œç»å†ç­‰ï¼Œåœ¨ Linkedin ä¸ŠåŠ äº†ä¸ªå¥½å‹ã€‚</p>
<p>ç¬¬ä¸€å¤©ä¼šè®®ç»“æŸåï¼Œæˆ‘è·Ÿç€ estebank ä¸€è¡Œå…«ä¸ªäººå‡ºå»å°±é¤ã€‚è¿™æ¬¡æˆ‘ä»¬é€‰çš„æ˜¯ä¸€å®¶å°åº¦é¤å…ï¼Œå› ä¸ºå·²ç»æœ‰ä¸¤ä¸‰å¤©æ²¡åƒç±³é¥­äº†ï¼Œæˆ‘ç‚¹äº†ä¸€ä¸ªçœ‹èµ·æ¥æœ‰ç‚¹è¾£çš„é±¼åŠ ç±³é¥­ï¼Œç»“æœèœä¸Šæ¥ä¹‹åè®©æˆ‘éœ‡æƒŠï¼Œä¸ç®¡å‘³é“è¿˜æ˜¯å“ç›¸éƒ½è¾¾ä¸åˆ°æ²™å¿å°åƒçº§åˆ«ï¼Œä½†è¿™é¥­é¥­èœå±…ç„¶ä¹Ÿè¦ 20 æ¬§ï¼Œè¿™æ˜¯æˆ‘è¿™å‘¨åƒè¿‡çš„æœ€å·®çš„ä¸€é¡¿é¥­äº†å§ã€‚è¿™å‘¨åé¢å‡ å¤©çš„æ™šä¸Šæˆ‘éƒ½ä¸æƒ³åƒæ™šé¥­ï¼Œä¸€æ–¹é¢æ˜¯ç™½å¤©åœ¨ä¼šåœºåƒäº†å¾ˆå¤šé›¶é£Ÿï¼Œå¦ä¸€æ–¹é¢åˆ°äº†æ™šä¸Šä¸ƒç‚¹å·¦å³æˆ‘å°±éå¸¸å›°ï¼Œè¿™è¾¹æ™šä¸Šå¤©é»‘çš„æ—¶é—´çŸ­ï¼Œæ‰€ä»¥æˆ‘é€šå¸¸å›åˆ°é…’åº—å°±ç¡è§‰ã€‚</p>
<p>5.14 ç¬¬äºŒå¤©æˆ‘é¦–å…ˆå»å¬äº† <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=kDVRkcKHCLc&amp;ab_channel=RustNL">Rust for Linux</a> è¿™ä¸ªæ¼”è®²ï¼Œè¿™åœºéå¸¸ç«çˆ†ï¼Œçœ‹æ¥å¤§å®¶éƒ½éå¸¸å…³æ³¨è¿™ä¸ªé¢†åŸŸï¼Œæ— è®ºæ˜¯åœ¨è´¡çŒ®è€…æ•°é‡è¿˜æ˜¯æäº¤åˆ°ä¸»çº¿å†…æ ¸ä¸­çš„ä»£ç è¡Œæ•°æ–¹é¢ï¼Œå¢é•¿éƒ½éå¸¸å¿«ã€‚ç„¶åæˆ‘å»å¬äº†å¤§éƒ¨åˆ† Rust Project track ç›¸å…³çš„æ¼”è®²ï¼Œcompiler-errors æ²¡å†™ PPTï¼Œå±…ç„¶ç›´æ¥åœ¨ VsCode é‡Œé¢<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=aFG5KtpEynk&amp;ab_channel=RustNL">è®²è§£ä»£ç </a> ã€‚<a target="_blank" rel="noopener" href="https://youtu.be/8vz_pg-eI4I?t=29">The Rust Vision Doc and You</a>è®²è§£äº†å¦‚ä½•è·å–ç”¨æˆ·çš„æ„è§å’Œåé¦ˆï¼ŒRust åœ¨å…¨ä¸–ç•Œçš„æ•´ä½“é‡‡ç”¨æƒ…å†µï¼Œå¾ˆé«˜å…´çœ‹åˆ°ç¤¾åŒºåƒæ˜¯å¯¹å¾…ä¸€ä¸ªäº§å“ä¸€æ ·æ¥å‘å±•ä¸€é—¨ç¼–ç¨‹è¯­è¨€ã€‚</p>
<p>æ‰€æœ‰ä¸¤ä¸ªå¤©çš„ Conference ä¼šè®®åœ¨æ²¹ç®¡ä¸Šç›´æ’­ï¼Œä¹Ÿæœ‰å½•åƒï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±<a target="_blank" rel="noopener" href="https://www.youtube.com/@rustnederlandrustnl/videos">æ‰¾æ¥çœ‹çœ‹</a>ã€‚</p>
<p>5.15 ç¬¬ä¸‰å¤©çš„ä¸Šåˆæœ‰å„ç§ workshopï¼Œä¼šåœºåœ°å€ä¹Ÿå˜äº†å¦ä¸€ä¸ªéƒŠåŒºçš„åŠå…¬åœºæ‰€ï¼Œè¿™ä¸ªä¼šåœºåœ¨è¿æ²³çš„æ—è¾¹ï¼Œæ²³ä¸Šç»å¸¸æœ‰å„ç§è¿è´§å¤§èˆ¹æ¼‚è¿‡ï¼Œæ„Ÿè§‰åƒè‹å·çš„è¿æ²³çš„åœºæ™¯ã€‚åä¸ºä½™æ•™æˆå¸®æˆ‘å¼„äº†ä¸ªå‚åŠ  workshop çš„æœºä¼šï¼Œæˆ‘å»ä½“éªŒäº†ä¸€ä¸‹ç©äº†ä¼šå„¿è·¨å¹³å°çš„ Rust GUI æ¡†æ¶ Makepadã€‚ç„¶åæˆ‘å»äº†å¯¹é¢çš„ Rust all hands çš„åŠå…¬åœºæ‰€ï¼Œè¿™é‡Œéƒ½æ˜¯ Rust é¡¹ç›®ç»´æŠ¤è€…å’Œè´¡çŒ®è€…ï¼Œå¤§å®¶ä»¥åˆ†ç»„çš„æ–¹å¼è¿›è¡Œè®¨è®ºï¼Œæœ‰çš„äººå¹²è„†æ‰¾ä¸ªè§’è½å†™ä»£ç ã€‚è¿™æ¬¡ç»„ç»‡è€…éå¸¸ç”¨å¿ƒï¼Œè¯´ä¸æä¾›å•ä¸€çš„ t-shirtï¼Œä½†æ‰¾äº†ä¸€ä¸ªæ‰“å° Logo çš„æœºå™¨ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±é€‰æ‹©åœ¨è¡£æœã€èƒŒåŒ…ã€å¸½å­ä¸Šæ‰“å° Rust ç›¸å…³çš„å›¾æ¡ˆï¼Œæˆ‘æŠŠè‡ªå·±çš„ä¸Šè¡£ä¸Šå°äº†ä¸€ä¸ªé»„è‰²çš„èƒèŸ¹ã€‚æœ‰çš„äººæŠŠè‡ªå·±å¹³æ—¶æ”¶é›†çš„ä¸€äº›ç¬”è®°æœ¬è´´çº¸åˆ†äº«å‡ºæ¥ï¼Œæˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ä¹ˆå¤š Geek è´´çº¸ï¼Œé€‰äº†å¥½å¤šã€‚</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250608105055.png" alt="" /></p>
<p>ä¼šåœºæä¾›äº†å¾ˆå¤šé…’æ°´å’Œå°åƒï¼Œæˆ‘ä¸åœåœ°å–æ©™æ±ã€‚æœŸé—´ç¢°åˆ°äº†åœ¨åä¸ºä¿„ç½—æ–¯å·¥ä½œçš„ petrochenkovï¼Œä»–ç©¿ç€ä¸€ä»¶ Rust 1.0 å‘å¸ƒçš„çºªå¿µ t-shirtï¼Œå¹´é¾„å’Œæˆ‘ç›¸ä»¿å´å·²åœ¨å¼€æºç¤¾åŒºå·¥ä½œåå¤šå¹´ã€‚ä»–ä¹‹å‰å¸®æˆ‘ Review è¿‡ä¸å°‘ PRï¼Œä»¥å‰åœ¨ä¸­å›½åä¸ºåŠå…¬å®¤å·¥ä½œè¿‡ï¼Œè¿™æ¬¡ç»ˆäºè§é¢èŠäº†èŠã€‚æˆ‘ä»¬ä¿©ä¸€èµ·æ‰“ä¹’ä¹“çƒï¼Œè™½ç„¶ä¸¤ä¸ªäººæ°´å¹³éƒ½ä¸å¤ªè¡Œï¼Œä½†ç©å¾—å¾ˆæ¥åŠ²ã€‚</p>
<p>è¿™å¤©ä¸‹åˆç”¨æ¥åº†ç¥ Rust 1.0 å‘å¸ƒ 10 å‘¨å¹´ï¼Œæœ‰ä¸€ä¸ªå°å‹ Partyï¼Œå¹¶ä¸”ç”¨å®æ—¶å‘å¸ƒ 1.87 ç‰ˆæœ¬çš„æ–¹å¼è¿›è¡Œåº†ç¥ã€‚Niko ä¸Šå°æ¼”è®²äº† <a target="_blank" rel="noopener" href="https://smallcultfollowing.com/babysteps/blog/2025/05/15/10-years-of-rust/">Rust turns 10</a>ï¼Œä½™æ•™æˆä»£è¡¨åä¸ºä½œä¸ºèµåŠ©å•†æ¼”è®²äº†ï¼Œåä¸ºåº”è¯¥æ˜¯ä¸­å›½ä¼ä¸šä¸­å¯¹ Rust æŠ•å…¥æœ€å¤šçš„ï¼Œä¸ç®¡æ˜¯å›½å†…çš„åä¸ºè¿˜æ˜¯æµ·å¤–åˆ†éƒ¨éƒ½æœ‰æŠ•å…¥ï¼Œè€Œä¸”ä¹Ÿåœ¨é€šè¿‡å…¶ä»–ç»„ç»‡èµåŠ©ç¤¾åŒºçš„ä¸€äº›èµ„æ·±ç»´æŠ¤è€…ã€‚è¿™ä¼šå„¿æˆ‘æ‰çŸ¥é“å‘è¡Œä¸€ä¸ª Rust æ–°ç‰ˆæœ¬çš„è„šæœ¬è¦è¿è¡Œä¸€ä¸ªå¤šå°æ—¶å¤šï¼Œæœ€åå‘å¸ƒå€’è®¡æ—¶é‚£ä¼šå„¿æ°”æ°›è¾¾åˆ°é«˜æ½®ï¼Œæ‹ä¸‹äº†è¿™å¼ ç…§ç‰‡ï¼Œæˆ‘å¤§æ¦‚åœ¨å³è¾¹ç¬¬ä¸‰æ’çš„ä½ç½®ï¼Œä½†æ˜¯èº«é«˜ä¸å¤Ÿè¢«æ·¹æ²¡äº†ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250607222131.png" alt="" /></p>
<p>5.16 å’Œ 5.17 æ˜¯ä¸¤å¤©çš„ Rust all hands meetingï¼Œå¯ä»¥è‡ªç”±é€‰æ‹©å‚åŠ åˆ†ç»„è®¨è®ºä¹Ÿå¯ä»¥è‡ªå·±æ‰¾ä¸ªåœ°æ–¹å·¥ä½œä¸€ä¼šå„¿ã€‚æˆ‘é€‰æ‹©æ€§å‚ä¸å¬äº†ä¸€äº›ï¼Œæ¯”å¦‚ Rust societyã€Letâ€™s talk about Burnoutã€Infraã€Rust Foundation çš„ office hours ç­‰ï¼Œæ„Ÿè§‰è¿™ä¸¤å¤©è®¨è®ºæ¯”è¾ƒå¤šçš„å‡ ä¸ªä¸»é¢˜æ˜¯å’Œ C++ çš„äº’æ“ä½œæ€§ã€‚æœŸé—´ä¹Ÿæœ‰å¾ˆå¤šæ—¶é—´ç•™ç»™å¤§å®¶è‡ªç”±è®¨è®ºï¼Œæœ‰äººå®‰åˆ© <a target="_blank" rel="noopener" href="https://github.com/jj-vcs/jj">jj</a>è¿™ä¸ªå·¥å…·ï¼Œæˆ‘è¯•ç”¨äº†ä¸€ä¸‹è¿˜æ²¡ç†è§£å¥½åœ¨å“ªé‡Œã€‚æˆ‘æ¯”è¾ƒå¤šæ—¶é—´å’Œ Cargo ç»„çš„å‡ ä¸ªä¸­å›½äººå¾…åœ¨ä¸€èµ·ï¼Œçªç„¶é•¿æ—¶é—´å¤„äºå…¨è‹±æ–‡ç¯å¢ƒä¸­ï¼Œå¶å°”ä¼šæ„Ÿåˆ°è¡¨è¾¾ä¸Šçš„ç–²æƒ«ã€‚ã€‚</p>
<p>ç¬¬äºŒå¤©ä¸‹åˆå’Œä¸€ä¸ªå¾·å›½å¤§å­¦ç”ŸèŠäº†æ¯”è¾ƒä¹…ï¼Œå¾ˆå¤šç¤¾åŒºçš„è´¡çŒ®è€…éƒ½æ˜¯ä¸šä½™æ—¶é—´åœ¨åšå¼€æºï¼Œæ¯”å¦‚è¿™ä¸ªå¤§äºŒå­¦ç”Ÿï¼Œä»–åœ¨å­¦æ ¡å­¦çš„æ˜¯éŸ³ä¹ï¼Œè®¡ç®—æœºåªæ˜¯è‡ªå·±çš„ä¸šä½™çˆ±å¥½ã€‚ä¸ºä»€ä¹ˆ RustNL æ¯”è¾ƒæ´»è·ƒå‘¢ï¼Œå¤§å¤šæ˜¯å› ä¸ºè·å…°è¿™ä¸ªå›½å®¶å…¶å® Rust çˆ±å¥½è€…è¿˜æŒºå¤šçš„ï¼ŒåŠ ä¸Šå¾·å›½è¿™äº›å‘¨å›´å›½å®¶ï¼Œæ•´ä¸ªæ¬§æ´²çš„ Rust æ´»è·ƒåº¦æ¯”æˆ‘æƒ³è±¡ä¸­é«˜å¾ˆå¤šã€‚åœ¨èŠå¤©çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘é—®åˆ°ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆå¾ˆå¤šè´¡çŒ®è€…æ¥è‡ªå¾·å›½ï¼Ÿå¯èƒ½æ˜¯å› ä¸ºå¾·å›½äººæœ€å–œæ¬¢ follow rules å¹¶ä¸”ä¸ªæ€§ä¸¥è°¨ï¼Œè¿™å’Œ Rust çš„ç‰¹æ€§éå¸¸ç¬¦åˆã€‚</p>
<p>å¦å¤–ï¼Œæˆ‘å‘ç°å¾ˆå¤šäººé‡‡ç”¨çš„æ˜¯è‡ªå·±å¼€ä¸ªå’¨è¯¢å…¬å¸çš„æ–¹å¼å·¥ä½œï¼Œè¿™æ ·å¯ä»¥åŒæ—¶å’Œå¤šä¸ªå…¬å¸ç­¾çŸ­æœŸåŠ³åŠ¨åˆåŒï¼ŒæŒ‰é¡¹ç›®æ”¶è´¹ï¼Œå½“ç„¶è¿™æ ·æ”¶å…¥ä¹Ÿè®¸å¹¶ä¸ç¨³å®šï¼Œä½†è¿™ç§æ–¹å¼è´µåœ¨çµæ´»ã€‚æˆ‘ä»¬ä¹ŸèŠäº†ä¸€äº›ç”Ÿæ´»ç±»çš„è¯é¢˜ï¼Œæ€»ä½“è€Œè¨€æˆ‘è§‰å¾—æ¬§æ´²çš„å›½å®¶å¤§å¤šç¨æ”¶æ¯”è¾ƒé‡ï¼Œä½†åŸºç¡€çš„ç”Ÿæ´»ä¿éšœæ–¹é¢çš„ç¦åˆ©ä¹ŸæŒºå¥½ï¼Œæ€»å¾—æ¥è¯´äººå¯¹æŒ£é’±çš„æ¬²æœ›æ²¡æœ‰é‚£ä¹ˆå¼ºçƒˆï¼Œäººçš„é€‰æ‹©å’Œè·¯å¾„ä¹Ÿæ¯”è¾ƒå¤šã€‚</p>
<p>è¿™æœŸé—´å¼ æ±‰ä¸œè¿‡æ¥æ‰¾ jackh726ï¼Œä»–ä»¬çº¦äº†ä¸€ä¸ªå¤§çº¦åŠå°æ—¶çš„ä¼šè°ˆï¼Œä¸»è¦æ˜¯èŠèŠ Rust åœ¨ä¸­å›½çš„å‘å±•å’Œä½¿ç”¨æƒ…å†µï¼Œjack è®©æˆ‘ä¸´æ—¶åšä¸ªç¿»è¯‘ã€‚è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡åšç±»ä¼¼å£è¯‘è¿™äº‹ï¼Œå‡ ä¹æœ‰ä¸€åŠæ—¶é—´æˆ‘åªæ˜¯ç”¨è‹±è¯­æ¦‚æ‹¬äº†ä¸€ä¸‹ä»–çš„è®²è¯ã€‚æœ€åæˆ‘è‡ªå·±ä¹Ÿè¡¨è¾¾äº†äº›è‡ªå·±çš„æƒ³æ³•ï¼Œä»å…¨çƒ IT äº§ä¸šè§„æ¨¡çœ‹ï¼ŒRust åœ¨ä¸­å›½å…·æœ‰å¹¿é˜”å‘å±•å‰æ™¯ï¼Œæœªæ¥æˆ–å°†æœ‰æ›´å¤šä¸­å›½å¼€å‘è€…æ´»è·ƒäº Rust ç¤¾åŒºï¼Œè´¡çŒ®åŠ›é‡ã€‚å½“ç„¶è¿™é‡Œæœ‰å¾ˆå¤šå› ç´ åœ¨å½±å“ï¼Œä¸€æ–¹é¢å¤§éƒ¨åˆ†å›½å†…çš„ IT å·¥ç¨‹å¸ˆéƒ½å¤ªå¿™ï¼Œè¿˜æœ‰è¯­è¨€æ–¹é¢çš„éšœç¢ï¼Œä¹Ÿè®¸æœªæ¥æƒ…å†µä¼šå¥½ä¸€äº›ï¼Œå½“ç„¶è¿™ä¹Ÿéœ€è¦ç¤¾åŒºçš„æ”¯æŒã€‚</p>
<p>è®¿è°ˆå®Œååœ¨èŒ¶æ°´é—´ï¼Œæˆ‘å¶ç„¶çŸäº†ä¸€çœ¼å¯¹é¢äººèƒ¸å‰çš„ç‰Œå­ï¼Œè¿™ä¸ªåå­—çœ‹èµ·æ¥çœ¼ç†Ÿï¼ŒåŸæ¥æ˜¯ä¸–ç•Œä¸Š crate åŒ…è¢«ä¸‹è½½æœ€å¤šçš„ä½œè€…ï¼Œå¦‚æœä½ æ˜¯ Rust ç¨‹åºå‘˜åº”è¯¥éƒ½èƒ½çŒœå‡ºæ¥ä»–çš„åå­—ã€‚æˆ‘ä¸Šå‰æ‰“äº†ä¸ªæ‹›å‘¼èŠäº†èµ·æ¥ï¼Œä»–å‰å‡ å¤©çš„ä¼šè®®éƒ½æ²¡å‚åŠ ï¼Œåªæ˜¯ä»Šå¤©è¿‡æ¥é€›é€›ï¼Œäº†è§£åˆ°ä»–ç°åœ¨ FB å·¥ä½œï¼Œæˆ‘è¯´æ„Ÿè§‰ FB çš„ç¤¾åŒºè´¡çŒ®ä¸å¤šï¼Œä»–åé©³è¯´ FB ä¹Ÿæ˜¯ Rust Foundation çš„é“‚é‡‘èµåŠ©è€…ï¼Œå†…éƒ¨è¿˜ä¸å°‘ Rust ç›¸å…³çš„é¡¹ç›®ã€‚æˆ‘çªç„¶æƒ³èµ· GOSIM è¦æ‰¾äºº 9 æœˆä»½åœ¨æ­å·æ¼”è®²ï¼Œå¼€ç©ç¬‘é‚€è¯·ä»–æ¥ä¸­å›½å‚åŠ æŠ€æœ¯åˆ†äº«ï¼Œä»–è¯´é‚£æ®µæ—¶é—´æœ‰äº‹å§”å©‰æ‹’ç»äº†ã€‚</p>
<p>åœ¨è¿™æ¬¡ RustWeek ä¸€å‘¨çš„æ—¶é—´é‡Œï¼Œæˆ‘è§åˆ°äº†å„å¼å„æ ·çš„å·¥ç¨‹å¸ˆï¼Œå¤šæ•°äººçœ‹èµ·æ¥ç®€å•çº¯ç²¹ï¼Œæ¯”å¦‚ã€Šç¡…è°·ã€‹é‡Œçš„ Gilfoyle å¼çš„äººç‰©ï¼Œæˆ‘è§åˆ°äº†ä¸€ä¸ªä»å¤´åˆ°è„šéƒ½éå¸¸ç±»ä¼¼çš„äººï¼Œé•¿å‘é£˜é£˜è¿˜èµ¤è„šèµ°æ¥èµ°å»ï¼Œéšä¾¿æ‰¾ä¸ªä½ç½®å°±èƒ½å®Œå…¨é™·å…¥äº†è‡ªå·±çš„ç¼–ç¨‹ä¸–ç•Œã€‚æœ‰æ¬¡å›å®¾é¦†çš„å¤§å·´ä¸Šï¼Œnnethercote ååœ¨æˆ‘æ—è¾¹ï¼Œä»–æ˜¯ valgrind çš„ä½œè€…ï¼Œå¯ä»¥è¯´æ˜¯ä¸€ä¸ªä¸–ç•Œçº§çš„åŸºç¡€è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è¯»è¯»è¿™ç¯‡ <a target="_blank" rel="noopener" href="https://nnethercote.github.io/2022/07/27/twenty-years-of-valgrind.html">Twenty years of Valgrind</a>ã€‚æˆ‘çš„ç¬¬ä¸€ä»½å·¥ä½œå†™ C/C++ï¼Œç‰¹åˆ«ä¾èµ– valgrind æ‰¾å†…å­˜é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä¸€è·¯éƒ½åœ¨é—®ä»–é—®é¢˜ï¼ŒèŠä»–çš„æŠ€æœ¯æ—…ç¨‹ã€‚ä»–è¯´ Rust ä»è¯­è¨€çº§çš„è§’åº¦è§£å†³å†…å­˜çš„å®‰å…¨æ€§é—®é¢˜ï¼Œå·²ç»æˆäº†å¦å¤–ä¸€æ¡è·¯ï¼Œvalgrind å®Œå…¨ç”±å…¶ä»–äººç»´æŠ¤äº†ã€‚ç¤¾åŒºé‡Œçš„å¾ˆå¤šäººä»–ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡è§ï¼Œéšå£è¯´ all hands çš„ä¸€å¤§ä½œç”¨æ˜¯ä»¥åå¤§å®¶åœ¨ Review PR çš„æ—¶å€™èƒ½æƒ³èµ·å¯¹æ–¹çš„é¢å®¹ï¼Œè¿™è¡¨è¿°å¾—å¤ªæ­£ç¡®äº†ï¼</p>
<p>åœ¨ä¼šåœºä¹±é€›æˆ‘æœ‰æ—¶å€™ä¼šç›¯ä¸€ä¸‹å¤§å®¶çš„å¼€å‘ç¯å¢ƒï¼Œæœ‰çš„äººçœŸæ˜¯éå¸¸æå®¢ï¼Œç¬”è®°æœ¬çœ‹èµ·æ¥å·¨å¤§åšé‡ï¼Œæ“ä½œç³»ç»Ÿå¤§å¤šæ˜¯ Linuxã€‚æˆ‘å‘ç°ä¸€ä¸ªç¼–è¯‘å™¨è´¡çŒ®æ’å‰ä¸‰çš„å¤§ç‰›æ‰“å­—ä½¿ç”¨äºŒæŒ‡ç¦…ï¼Œæœ‰å¤©æ—©é¤æ—¶ä»–åæˆ‘å¯¹é¢ï¼Œæˆ‘é—®èµ·ä¸ºä»€ä¹ˆåªç”¨ä¸¤ä¸ªæ‰‹æŒ‡æ“ä½œé”®ç›˜ï¼Œä¼šä¸ä¼šæ•ˆç‡ä¸é«˜ã€‚ä»–è¯´ä¸¤ä¸ªæ‰‹æŒ‡çš„é€Ÿåº¦å·²ç»å¤Ÿäº†ï¼Œæ•²é”®ç›˜èƒ½è·Ÿä¸Šæˆ‘çš„æ€è€ƒé€Ÿåº¦å°±è¡Œã€‚æˆ‘é‚£å¤©æ—©ä¸Šåˆšå¥½çœ‹åˆ°ä¸ªè§†é¢‘ï¼Œè¯´æ˜¯ç¾å›½å¤§å­¦ç”Ÿä½¿ç”¨ AI å†™ä½œä¸šï¼ŒæŠŠä¸€ä¸ªæ•™æˆç»™é€¼å¾—å´©æºƒï¼Œæˆ‘çŸ¥é“ä»–åœ¨ä¸–ç•Œé¡¶çº§å¤§å­¦ Eth å½“æ•™æˆï¼Œæˆ‘é—®ä»–å¦‚ä½•çœ‹å¾…å­¦ç”Ÿä½¿ç”¨ AI å®Œæˆä½œä¸šæˆ–è€…å†™ç¨‹åºï¼Œä»–è¯´ä»–çš„ä½œä¸š AI åŸºæœ¬æ— æ³•è§£å†³ï¼Œå¯èƒ½æ˜¯å› ä¸ºç¨‹åºè¯­è¨€ç±»çš„å¾ˆå¤šä½œä¸šéƒ½æ˜¯è¯æ˜ï¼Œè€Œ AI é€šå¸¸åªèƒ½å®Œæˆç®€å•çš„ï¼Œç¨å¾®æ·±å…¥ç‚¹çš„æ— æ³•èƒœä»»ï¼Œä»–è¿˜ä¼šå’Œå­¦ç”Ÿå½“é¢äº¤æµï¼Œå¦‚æœä¾èµ– AI è€Œè„‘å­é‡Œæ²¡è´§æ˜¯å¾ˆå®¹æ˜“è¢«å‘ç°çš„ã€‚</p>
<p>è¿™æ¬¡æ²¡çœ‹åˆ°ä»€ä¹ˆ AI ç›¸å…³çš„ä¸»é¢˜ï¼ŒèŠå¤©æ—¶æœ‰äººä¼šå¶å°”åæ§½ä¸€ä¸‹ LLMã€‚åŒºå—é“¾æ›´æ²¡æœ‰äººèŠäº†ï¼Œæ¯å½“æœ‰äººé—®èµ·æˆ‘ä¸»ä¸šåœ¨å¹²ä»€ä¹ˆï¼Œæˆ‘éƒ½æœ‰ç‚¹ä¸å¥½æ„æ€è¯´æˆ‘åœ¨åšè¿™ä¸ªè¡Œä¸šï¼Œå› ä¸ºæˆ‘çŸ¥é“ç¤¾åŒºé‡Œé¢å¾ˆå¤šäººæœ‰äº›åŒæ¶è¿™ä¸ªæœ¯æ–¹å‘ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›æŠ•æœºè€…æŸåäº†è¿™è¡Œçš„å£ç¢‘ã€‚æˆ‘é€šå¸¸ä¼šè§£é‡Šè¯´ï¼Œä»æŠ€æœ¯è§’åº¦æ¥è¯´åŒºå—é“¾å°±æ˜¯ä¸€ä¸ªæŠ—æ‹œå åº­çš„åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œè¿˜æ˜¯éå¸¸æœ‰è¶£å’Œæœ‰æŒ‘æˆ˜çš„ï¼ŒåŒºå—é“¾è¿™è¡Œä¹Ÿæ˜¯ Rust æˆä¸ºä¸»æµé€‰æ‹©çš„ç¬¬ä¸€ä¸ªé¢†åŸŸï¼Œæ¨åŠ¨äº† Rust çš„å‘å±•ã€‚ä»”ç»†æƒ³æƒ³ï¼Œåšç¼–ç¨‹è¯­è¨€å’Œç¼–è¯‘å™¨çš„ï¼Œè¿½æ±‚çš„å°±æ˜¯ç¡®å®šæ€§å’Œé€Ÿåº¦ï¼ŒAI æœ‰å…¶ä¸ç¡®å®šæ€§ï¼Œè€ŒåŒºå—é“¾æ•ˆç‡ä¸é«˜ï¼Œæ‰€ä»¥è¿™äº›äººå¤§å¤šä¸å–œæ¬¢ç›¸åç‰¹æ€§çš„ä¸œè¥¿ã€‚ä»å»å¹´å¼€å§‹ï¼Œæœ‰äº›äººä¸ºäº†æ‰“é€ å‡ºæ¥ä¸€ä¸ªçœ‹ä¼¼å¤§æœ‰è´¡çŒ®çš„ Github è´¦å·æ¥è·å¾—æŸäº›åŠ å¯†è´§å¸çš„ç©ºæŠ•ï¼Œäºæ˜¯ç”¨ AI æå‡ºå„ç§çç¢æˆ–è€…é”™è¯¯çš„ Pull Requestï¼Œè¿™äº›ç»´æŠ¤è€…çœ‹ç€è¿™äº›æ¯«æ— è¥å…»çš„ PR æµªè´¹è‡ªå·±çš„æ—¶é—´ï¼Œè‡ªç„¶å¯¹è¿™ä¸¤ä¸ªè¡Œä¸šæ›´åŠ åŒæ¶äº†ã€‚</p>
<p>è™½ç„¶ç›®å‰æˆ‘è¿˜å¾ˆå–œæ¬¢è‡ªå·±åœ¨åšçš„å·¥ä½œï¼Œä½†æˆ‘é¡ºå¸¦äº†è§£äº†äº›å…¨èŒåš Rust ç¤¾åŒºçš„å·¥ä½œæœºä¼šï¼Œè¯´ä¸å®šä»¥åä¼šç”¨åˆ°ã€‚é€šè¿‡å’Œä¸åŒçš„äººèŠå¤©ï¼Œæˆ‘å‘ç°ä¸»è¦æœ‰ä»¥ä¸‹ä¸€äº›æœºæ„ï¼š</p>
<ol>
<li>å›½å†…åä¸ºã€<a target="_blank" rel="noopener" href="https://trusted-programming.github.io/">çˆ±å°”å…°åä¸º</a>ï¼Œå…¨èŒåä¸ºå‘˜å·¥æˆ–è€… Rust ç›¸å…³å·¥ä½œçš„ contract</li>
<li>äºšé©¬é€Šï¼Œæ€»ä½“è€Œè¨€å…¬å¸æ–‡åŒ–æ¯”è¾ƒ pushï¼Œæˆ‘å¬åˆ°ä¸å°‘å…³äºäºšé©¬é€Šå·¥ä½œç¯å¢ƒçš„æŠ±æ€¨</li>
<li>å¾®è½¯ï¼Œä¸ä¸€å®šæ˜¯åšç¤¾åŒºçš„å·¥ä½œï¼Œè€Œä¸”å¾®è½¯æœ€è¿‘ä¹Ÿåœ¨è£å‘˜</li>
<li><a target="_blank" rel="noopener" href="https://ferrous-systems.com/" title="https://ferrous-systems.com/">ferrous-systems</a>Â ä¸ç¡®å®šæ˜¯å¦è¿˜æœ‰èŒä½ï¼Œcontract æˆ–è€…å…¨èŒ</li>
<li><a target="_blank" rel="noopener" href="https://www.futurewei.com/careers" title="https://www.futurewei.com/careers">futurewei</a>Â å¯¹å‘˜å·¥å¾ˆçµæ´»ï¼Œæ®è¯´å®Œå…¨è‡ªå·±å®‰æ’å·¥ä½œå†…å®¹</li>
<li>Rust Foundationï¼Œä½†ä¸»è¦å security å’Œ infra ç›¸å…³çš„ï¼Œç¤¾åŒºé‡Œå¯¹ Rust åŸºé‡‘ä¼šç›´æ¥é›‡äººåšè¯­è¨€æ–¹é¢çš„å·¥ä½œæœ‰é¡¾åŠ</li>
</ol>
<p>å¦‚æœæ˜¯å…¨èŒ Rust å¼€å‘çš„å·¥ä½œï¼Œæ¬§æ´²åº”è¯¥æ˜¯ç›¸å¯¹å¥½æ‰¾ä¸€äº› (ä½†éœ€è¦ç­¾è¯)ï¼Œå›½å†…æ®æˆ‘æ‰€çŸ¥é™¤äº†åä¸ºã€è¿˜æœ‰å­—èŠ‚ã€å°ç±³ã€æ±½è½¦å…¬å¸ä¼šç”¨åˆ° Rustã€‚ç°åœ¨ AI å¾ˆç«ï¼ŒAI çš„ infra ä¹Ÿä¼šç”¨åˆ°äº› Rustï¼Œæˆ‘äº†è§£åˆ°ç¤¾åŒºé‡Œä¸€ä¸ªéå¸¸èµ„æ·±çš„ç»´æŠ¤è€…å»äº† OpenAIï¼Œè¿™æ¬¡ä¹Ÿç¢°åˆ°ä¸€ä¸ª OpenAI çš„äººè¯´å…¬å¸å†…éƒ¨æœ‰äº› Rust é¡¹ç›®ã€‚ä½†æ•´ä½“æ¥è¯´ï¼Œæ•´ä¸ªä¸–ç•Œçš„å¤§ç¯å¢ƒä¸å¥½ï¼Œå·¥ä½œæœºä¼šç›¸æ¯”å¾€å¹´å°‘å¾ˆå¤šã€‚</p>
<hr />
<p>åå¹´æ— ç–‘ä¸ªå…·æœ‰çºªå¿µæ„ä¹‰çš„é‡Œç¨‹ç¢‘ï¼Œå°±åƒ Niko åœ¨<a target="_blank" rel="noopener" href="https://smallcultfollowing.com/babysteps/blog/2025/05/15/10-years-of-rust/">Rust turns 10</a>æ‰€è¯´çš„ï¼š</p>
<blockquote>
<p>I just felt that was the most Rust of all problems: having great success but not being able to decide who should take credit. The reality is there is no perfect list â€“ every single person who got named on that award richly deserves it, but so do a bunch of people who arenâ€™t on the list. Thatâ€™s why the list ends withÂ _All Rust Contributors, Past and Present</p>
</blockquote>
<p>Rust ç›®å‰çš„æˆåŠŸæ— æ³•ç®€å•å½’åŠŸäºä¸ªäººå’Œæœºæ„ï¼Œæ— ç–‘æˆ‘ä»¬éœ€è¦æ„Ÿè°¢é¡¹ç›®å‘èµ·äºº Graydon Hoare è®¾ç½®äº†å®å¤§æ­£ç¡®çš„æ„¿æ™¯ï¼Œè€Œå Rust åœ¨å¼€æºç¤¾åŒºè‡ªç”±ç”Ÿé•¿ï¼Œç”šè‡³å®Œå…¨ä¸åƒæ˜¯ä»–æ‰€è®¾æƒ³çš„ç¼–ç¨‹è¯­è¨€äº†ã€‚ç°åœ¨å‡ ä¸ª IT å·¨å¤´éƒ½æœ‰æŠ•å…¥ï¼Œä½†å®é™…ä¸Šä¹Ÿæ²¡æœ‰ä¸€ä¸ªç»„ç»‡å’Œä¸ªäººèƒ½å†³å®šæœªæ¥çš„å‘å±•ï¼Œè¿™æ—¢æ˜¯ç¤¾åŒºçš„åˆ»æ„è®¾è®¡ï¼Œä¹Ÿæ˜¯è‡ªç„¶è¿›åŒ–çš„ç»“æœã€‚ä»æˆ‘è¿™ç§ä¸šä½™è´¡çŒ®è€…çš„è§’åº¦æ¥è¯´ï¼ŒåŸºé‡‘ä¼šè™½ç„¶å› ä¸ºå„ç§äº‹é¥±å—äº‰è®®ï¼Œä½†ä»–ä»¬ç¡®å®åšäº†å¾ˆå¥½çš„å¹•åå·¥ä½œï¼Œæ¯”å¦‚è¿™æ¬¡å‚ä¼šçš„ç¤¾åŒºæˆå‘˜åŸºæœ¬éƒ½èƒ½æŠ¥é”€è´¹ç”¨ï¼Œç”šè‡³æˆ‘çš„è´¹ç”¨è¶…è¿‡äº†è®¡åˆ’ç”³æ˜çš„é¢åº¦ï¼ŒåŸºé‡‘ä¼šä¹Ÿç›´æ¥è¯´åˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬ä¼šå¦‚å®æŠ¥é”€æ‰€æœ‰è´¹ç”¨ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œè¿™æ¬¡å‚ä¼šç»å†æ‹“å®½äº†æˆ‘çš„è§†é‡ã€‚å¤§å®¶éƒ½å› ä¸ºå¯¹ Rust å’Œç¼–ç¨‹çš„æ¿€æƒ…å’Œè¿½æ±‚èšåˆ°äº†ä¸€èµ·ï¼Œäº¤æµèµ·æ¥éå¸¸æœ‰è¶£ã€‚åå¹´å‰ï¼Œæˆ‘åœ¨ 2015 å¹´å¶ç„¶å‘ç°äº† Rustï¼Œå½“æ—¶å¹¶ä¸çŸ¥é“å®ƒä¼šå¡‘é€ æˆ‘çš„èŒä¸šç”Ÿæ¶¯ï¼Œåœ¨æˆ‘è¿·èŒ«çš„æ—¶å€™é‡æ–°æ¡èµ·äº† Rustï¼Œå¦‚ä»Šæˆä¸ºå…¨èŒçš„ Rust å¼€å‘å’Œç¤¾åŒºè´¡çŒ®è€…ã€‚æœ€è¿‘ä¸€å¹´è‚²å„¿å’Œå·¥ä½œå æ®äº†æˆ‘çš„å¤§éƒ¨åˆ†æ—¶é—´å’Œç²¾åŠ›ï¼Œæ‰€ä»¥åœ¨ Rust ç¤¾åŒºæ²¡é‚£ä¹ˆæ´»è·ƒï¼Œæˆ‘æ¸´æœ›é€šè¿‡ç¼–ç¨‹å’Œå†™ä½œç»§ç»­æŠ•å…¥å…¶ä¸­ã€‚</p>
<p>é¡ºä¾¿ä¸€æï¼ŒRust Week è¿™ä¸€å‘¨æˆ‘éƒ½æ²¡åƒä¸­é¤ï¼Œå›å®¶ä¸€ç§°ç˜¦äº†ä¸‰å››æ–¤ï¼Œç®—æ˜¯æ„å¤–è¾¾æˆå¥èº«ç›®æ ‡ï¼æˆ‘åº”è¯¥æ˜¯æ— æ³•åœ¨æ¬§æ´²é•¿å¾…çš„é‚£ç±»äººã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>ä»æ¤­åœ†æ›²çº¿åˆ° secp256k</title>
    <link href="http://catcoding.me/p/elliptic-curve/"/>
    <id>http://catcoding.me/p/elliptic-curve/</id>
    <published>2025-06-08T18:20:12+00:00</published>
    <updated>2026-02-13T06:43:00.094220816+00:00</updated>
    <content type="html"><![CDATA[<p>åŒºå—é“¾è¿™è¡Œç»å¸¸ä¼šå’Œæ¤­åœ†æ›²çº¿å¯†ç ç®—æ³•æ‰“äº¤é“ï¼Œæˆ‘ä¹Ÿåœ¨å°è¯•ç†è§£è¿™å…¶ä¸­çš„æ•°å­¦åŸç†ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯æ¤­åœ†æ›²çº¿-elliptic-curve"><a href="#ä»€ä¹ˆæ˜¯æ¤­åœ†æ›²çº¿-elliptic-curve" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¤­åœ†æ›²çº¿ (elliptic curve)"></a>ä»€ä¹ˆæ˜¯æ¤­åœ†æ›²çº¿ (elliptic curve)</h2>
<p>å…ˆæƒ³è±¡ä¸€ä¸ªæ™®é€šçš„æ›²çº¿ï¼Œæ¯”å¦‚æŠ›ç‰©çº¿ï¼ˆæŠ›ä¸ªçƒçš„è½¨è¿¹ï¼‰ã€‚æ¤­åœ†æ›²çº¿ä¸æ˜¯æ¤­åœ†ï¼ˆåå­—æœ‰ç‚¹è¯¯å¯¼ï¼‰ï¼Œè€Œæ˜¯ä¸€ç§é•¿å¾—åƒâ€œå¯¹ç§°å°å±±ä¸˜â€æˆ–è€…â€œæ­ªæ­ªæ‰­æ‰­çš„ç¯â€çš„æ•°å­¦å›¾å½¢ã€‚</p>
<p>æ¤­åœ†æ›²çº¿é€šå¸¸è¡¨ç¤ºä¸ºï¼š</p>
<p>$$ y^2 = x^3 + ax + b$$</p>
<p>é€šè¿‡è¿™ä¸ªæ–¹ç¨‹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¤­åœ†æ›²çº¿æ˜¯ä¸Šä¸‹å¯¹ç§°çš„ï¼Œå…¶ä¸­ (a) å’Œ (b) æ˜¯æ›²çº¿å‚æ•°ï¼Œæ¯”å¦‚ä¸‹é¢è¿™äº›æ›²çº¿å°±æ˜¯ b = 1 çš„æƒ…å†µä¸‹ï¼Œa ä» 2 å˜åˆ° -3 çš„æƒ…å†µï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250401152936.png" alt="" /></p>
<p>æˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„æ¤­åœ†æ›²çº¿å¿…é¡»æ»¡è¶³<code>éå¥‡å¼‚</code> çš„ç‰¹å¾ï¼Œè¿™äº›å‚æ•°å¿…é¡»æ»¡è¶³åˆ¤åˆ«å¼ï¼š</p>
<p>$$4a^3 + 27b^2 \neq 0$$</p>
<p>â€œéå¥‡å¼‚â€ä»€ä¹ˆæ„æ€ï¼Ÿåœ¨æ•°å­¦ä¸Šï¼Œæ¤­åœ†æ›²çº¿è¦æ˜¯â€œéå¥‡å¼‚â€ï¼ˆnon-singularï¼‰ï¼Œå°±æ˜¯è¯´è¿™æ¡æ›²çº¿é•¿å¾—â€œå…‰æ»‘æ­£å¸¸â€ï¼Œæ²¡æœ‰å¥‡æ€ªçš„å°–è§’ã€äº¤å‰ç‚¹æˆ–è€…è‡ªå·±æ‰“ç»“çš„åœ°æ–¹ã€‚ç®€å•è®²ï¼Œå°±æ˜¯æ›²çº¿ä¸èƒ½å¤ªâ€œæ€ªâ€ï¼Œå¾—æ˜¯ä¸ªå¹³æ»‘çš„ã€åƒä¸ªæ­£å¸¸æ›²çº¿çš„æ ·å­ã€‚</p>
<p>å¦‚æœæ›²çº¿â€œå¥‡å¼‚â€äº†ï¼Œä¼šå‡ºç°ä¸¤ç§æ¯›ç—…ï¼š</p>
<ol>
<li>å°–ç‚¹ï¼ˆCuspï¼‰ï¼šæ›²çº¿åƒè¢«æäº†ä¸ªå°–è§’ï¼ŒæŸä¸ªåœ°æ–¹å˜æˆä¸€ä¸ªå°–å°–çš„ç‚¹ï¼Œä¸å…‰æ»‘äº†ã€‚</li>
<li>è‡ªäº¤ç‚¹ï¼ˆNodeï¼‰ï¼šæ›²çº¿è‡ªå·±äº¤å‰ï¼Œåƒä¸ªâ€œXâ€å½¢ï¼Œä¸¤ä¸ªæ–¹å‘æ’ä¸€å—å„¿äº†ã€‚</li>
</ol>
<p>è¿™äº›æ¯›ç—…ä¼šè®©â€œç‚¹åŠ æ³•â€å‡ºé—®é¢˜ï¼Œå› ä¸ºå…¬å¼ä¼šç®—ä¸ä¸‹å»ï¼Œæˆ–è€…ç»“æœä¸å”¯ä¸€ã€‚å…³äº<code>ç‚¹åŠ æ³•</code>æˆ‘ä»¬åé¢å†è°ˆï¼Œä¸‹é¢è¿™ä¸¤ä¸ªæ¤­åœ†æ›²çº¿éƒ½æ˜¯å¥‡å¼‚çš„ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250401153156.png" alt="" /></p>
<h2 id="é˜¿è´å°”ç¾¤-Abelian-group"><a href="#é˜¿è´å°”ç¾¤-Abelian-group" class="headerlink" title="é˜¿è´å°”ç¾¤ (Abelian group)"></a>é˜¿è´å°”ç¾¤ (Abelian group)</h2>
<p>è¿™åå­—æ¥è‡ªæ•°å­¦å®¶ Niels Henrik Abelï¼Œä»–ç ”ç©¶äº†è¿™ç§â€œé¡ºåºæ— æ‰€è°“â€çš„ç»“æ„ã€‚</p>
<p>â€œç¾¤â€ï¼ˆgroupï¼‰æ˜¯æ•°å­¦é‡Œçš„ä¸€ç§æ¦‚å¿µï¼Œå°±åƒä¸€ä¸ªæœ‰è§„åˆ™çš„â€œä¿±ä¹éƒ¨â€ã€‚é‡Œé¢æœ‰ä¸€å †ä¸œè¥¿ï¼ˆå«å…ƒç´ ï¼‰ï¼ŒåŠ ä¸Šä¸€ä¸ªç©æ³•ï¼ˆå«è¿ç®—ï¼‰ï¼Œå¾—æ»¡è¶³å‡ ä¸ªæ¡ä»¶ã€‚é˜¿è´å°”ç¾¤æ˜¯ç¾¤çš„ä¸€ç§ç‰¹åˆ«ç±»å‹ï¼Œç‰¹ç‚¹æ˜¯è¿™ä¸ªç©æ³•â€œé¡ºåºæ— æ‰€è°“â€ã€‚
ç®€å•è¯´ï¼Œé˜¿è´å°”ç¾¤å°±æ˜¯ä¸€ä¸ªé›†åˆï¼Œé‡Œé¢æœ‰äº›å…ƒç´ ï¼Œèƒ½ç”¨æŸç§è¿ç®—ï¼ˆæ¯”å¦‚åŠ æ³•ï¼‰ç»„åˆèµ·æ¥ï¼Œæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œè€Œä¸”è¿ç®—é¡ºåºéšä¾¿æ¢éƒ½æ²¡é—®é¢˜ã€‚</p>
<p>ç¾¤çš„å››ä¸ªåŸºæœ¬æ¡ä»¶ï¼š</p>
<ul>
<li>èƒ½ç©ï¼ˆå°é—­æ€§ï¼‰ï¼šä½ æ‹¿é›†åˆé‡Œä¸¤ä¸ªä¸œè¥¿ç©ä¸€ä¸‹ï¼ˆåšè¿ç®—ï¼‰ï¼Œç»“æœè¿˜æ˜¯é›†åˆé‡Œçš„ä¸œè¥¿ã€‚æ¯”å¦‚ï¼Œä¸¤ä¸ªæ•´æ•°ç›¸åŠ è¿˜æ˜¯æ•´æ•°ã€‚</li>
<li>æœ‰è€å¤§ï¼ˆå•ä½å…ƒï¼‰ï¼šé›†åˆé‡Œæœ‰ä¸ªç‰¹æ®Šçš„ä¸œè¥¿ï¼Œè·Ÿè°ç©éƒ½ä¸å˜ã€‚æ¯”å¦‚åŠ æ³•é‡Œçš„ 0ï¼Œ$0+5=5$ ï¼Œä»€ä¹ˆä¹Ÿæ²¡å˜ã€‚</li>
<li>èƒ½å›å¤´ï¼ˆé€†å…ƒï¼‰ï¼šæ¯ä¸ªä¸œè¥¿éƒ½æœ‰ä¸ªâ€œåç€ç©â€çš„æœ‹å‹ï¼Œä¿©äººç©ä¸€ä¸‹å˜è€å¤§ã€‚æ¯”å¦‚åŠ æ³•é‡Œï¼Œ5 çš„é€†å…ƒæ˜¯ âˆ’5ï¼Œ$-5 + 5 = 0$ã€‚</li>
<li>æ‹¬å·éšä¾¿ï¼ˆç»“åˆå¾‹ï¼‰ï¼šç©çš„æ—¶å€™ï¼Œå…ˆè·Ÿè°ç©å†è·Ÿè°ç©éƒ½ä¸€æ ·ã€‚æ¯”å¦‚ (2+3)+4=2+(3+4) ã€‚</li>
</ul>
<p>ç¾¤å˜æˆâ€œé˜¿è´å°”ç¾¤â€ï¼Œè¿˜å¾—å¤šä¸€æ¡ï¼š</p>
<ul>
<li>é¡ºåºæ— æ‰€è°“ï¼ˆäº¤æ¢å¾‹ï¼‰ï¼šä½ æ‹¿ä¸¤ä¸ªä¸œè¥¿ç©ï¼Œå…ˆåé¡ºåºæ¢ä¸€ä¸‹ï¼Œç»“æœä¸€æ ·ã€‚æ¯”å¦‚ $2+3 = 3+2$ï¼Œéƒ½æ˜¯ 5ã€‚å¦‚æœé¡ºåºæœ‰æ‰€è°“ï¼ˆæ¯”å¦‚ $2âˆ’3â‰ 3âˆ’2$ï¼‰ï¼Œé‚£å°±ä¸æ˜¯é˜¿è´å°”ç¾¤äº†ã€‚</li>
</ul>
<p>å¯†ç å­¦é‡Œç”¨é˜¿è´å°”ç¾¤ï¼ˆåƒæ¤­åœ†æ›²çº¿ï¼‰ï¼Œå› ä¸ºå®ƒç®€å•åˆæœ‰è§„å¾‹ï¼Œé€‚åˆæå®‰å…¨ã€‚</p>
<h2 id="æ¤­åœ†æ›²çº¿ä¸Šçš„ç¦»æ•£ç‚¹"><a href="#æ¤­åœ†æ›²çº¿ä¸Šçš„ç¦»æ•£ç‚¹" class="headerlink" title="æ¤­åœ†æ›²çº¿ä¸Šçš„ç¦»æ•£ç‚¹"></a>æ¤­åœ†æ›²çº¿ä¸Šçš„ç¦»æ•£ç‚¹</h2>
<p>åˆ°äº† 1900 å¹´ä»£ï¼Œæ¤­åœ†æ›²çº¿è·Ÿæ•°è®ºå½»åº•ç»‘å®šï¼Œè€Œæ•°è®ºç ”ç©¶çš„æ˜¯æ•´æ•°ã€‚</p>
<p>æ¤­åœ†æ›²çº¿æ–¹ç¨‹</p>
<p>$$y^2 = x^3 + ax + b$$</p>
<p>é€šå¸¸æ˜¯åœ¨æ™®é€šå®æ•°ï¼ˆæ— é™å¤šçš„å°æ•°ï¼‰ä¸Šå®šä¹‰çš„ï¼Œç”»å‡ºæ¥æ˜¯ä¸ªè¿ç»­çš„æ›²çº¿ã€‚ä½†å®‰å…¨é¢†åŸŸè¯´çš„æ¤­åœ†æ›²çº¿é€šå¸¸æ˜¯è¯´é€šè¿‡æ¤­åœ†æ›²çº¿å®šä¹‰å‡ºæ¥çš„ç¾¤ï¼Œå…¶èŒƒå›´å®šä¹‰åœ¨æŸä¸ªæœ‰é™åŸŸ : $F_p$ ã€‚</p>
<p>ç®€å•è¯´ï¼Œæ•´æ•°ä¹Ÿæ˜¯ä¸€ä¸ªæ— é™æ•°å­—çš„ä¸–ç•Œï¼Œè€Œæœ‰é™åŸŸå°±æ˜¯ä¸€ä¸ªåªæœ‰æœ‰é™ä¸ªæ•°å­—çš„â€œæ•°å­—ä¸–ç•Œâ€ã€‚è¿™é‡Œçš„è¡¨ç¤ºè¿™ä¸ªä¸–ç•Œé‡Œåªæœ‰ <code>0, 1, 2, ..., p-1</code> è¿™ (p) ä¸ªæ•°ï¼Œ(p) å¿…é¡»æ˜¯ä¸ªç´ æ•°ã€‚ä¸ºä»€ä¹ˆæ˜¯ç´ æ•°ï¼Ÿå› ä¸ºè¿™æ ·èƒ½ä¿è¯è¿™ä¸ªå°ä¸–ç•Œé‡Œçš„æ•°å­¦è¿ç®—ï¼ˆåŠ å‡ä¹˜é™¤ï¼‰ä¸ä¼šå‡ºä¹±å­ï¼Œè§„åˆ™ç‰¹åˆ«â€œå¹²å‡€â€ã€‚</p>
<p>åœ¨è¿™ä¸ªæœ‰é™åŸŸé‡Œï¼Œæ‰€æœ‰çš„è®¡ç®—ç»“æœéƒ½å¾—è½åœ¨è¿™ (p) ä¸ªæ•°é‡Œé¢ã€‚å¦‚æœç®—å‡ºæ¥è¶…äº† (p)ï¼Œå°±â€œç»•å›å»â€ï¼Œç”¨æ¨¡ (p) çš„æ–¹å¼æŠŠç»“æœé™åˆ¶ä½ã€‚æ¯”å¦‚åœ¨ $F_5$ é‡Œï¼š3+4=7ï¼Œä½† 7 ä¸åœ¨èŒƒå›´å†…ï¼Œæ‰€ä»¥ $7modâ€‰â€‰5=2$ï¼Œæ‰€ä»¥ç»“æœæ˜¯ 2ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œæ›²çº¿ä¸å†æ˜¯è¿ç»­çš„ï¼Œè€Œæ˜¯å˜æˆäº†æ•£è½åœ¨ $F_p \times F_p$ ç½‘æ ¼ä¸Šçš„ä¸€å †ç¦»æ•£çš„ç‚¹ã€‚æ¯”å¦‚æˆ‘<a target="_blank" rel="noopener" href="https://github.com/chenyukang/elliptic-curve">è¿™ä¸ªç¨‹åº</a>æ‰“å°å‡ºæ¥è¿™æ¡æ›²çº¿ä¸Šçš„ç‚¹ï¼Œè¿™é‡Œæ‰“å°çš„æ—¶å€™ $y =0$ æ˜¯åœ¨ä¸­é—´ï¼Œä»ä¸­é—´çœ‹ä¸Šä¸‹æ˜¯å¯¹ç§°çš„ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250401160252.png" alt="" /></p>
<h2 id="ç‚¹åŠ æ³•å’Œå¯¹æ•°é—®é¢˜"><a href="#ç‚¹åŠ æ³•å’Œå¯¹æ•°é—®é¢˜" class="headerlink" title="ç‚¹åŠ æ³•å’Œå¯¹æ•°é—®é¢˜"></a>ç‚¹åŠ æ³•å’Œå¯¹æ•°é—®é¢˜</h2>
<p>ä¸Šé¢æˆ‘ä»¬åªæ˜¯é€šè¿‡æ¤­åœ†æ›²çº¿æ‰¾åˆ°äº†ä¸€ç»„æ•°å­—ï¼Œä½†è¿™äº›æ•°å­—ä¹‹é—´è¿˜éœ€è¦ä¸€ç§æ“ä½œï¼Œè¿™ç§æ“ä½œæ‰èƒ½è®©è¿™äº›ç¦»æ•£çš„æ•°å­—ç»„æˆä¸€ä¸ªç¾¤çš„æ¦‚å¿µã€‚è¿™é‡Œå°±éœ€è¦å¼•å…¥ä¸€ä¸ªâ€œç‚¹åŠ æ³•â€çš„æ¦‚å¿µã€‚</p>
<p>ç‚¹åŠ æ³•å°±åƒä¸€ä¸ªé­”æ³•å…¬å¼ï¼Œå‘Šè¯‰ä½ æ€ä¹ˆä»ä¸€ä¸ªç‚¹â€œè·³â€åˆ°å¦ä¸€ä¸ªç‚¹ï¼Œæˆ–è€…åŒä¸€ä¸ªç‚¹â€œè·³â€ä¸¤æ¬¡å˜æˆæ–°ç‚¹ã€‚æƒ³è±¡æ¤­åœ†æ›²çº¿æ˜¯ä¸€æ¡å¼¯å¼¯æ›²æ›²çš„çº¿ï¼Œä¸Šé¢æœ‰å¾ˆå¤šç‚¹ï¼Œåœ¨ä¸æ–­åšç‚¹åŠ æ³•çš„è¿‡ç¨‹ä¸­ä¸æ–­åœ°ç§»åŠ¨ç‚¹ã€‚</p>
<p>åœ¨æ¤­åœ†æ›²çº¿ä¸Šï¼Œç‚¹åŠ æ³•æœ‰å‡ ä½•å’Œä»£æ•°ä¸¤ç§è§£é‡Šï¼š</p>
<ol>
<li>
<p>å‡ ä½•è§£é‡Šï¼šé€šè¿‡ä¸¤ä¸ªç‚¹ç”»ä¸€æ¡ç›´çº¿ï¼Œä¸æ›²çº¿çš„ç¬¬ä¸‰ä¸ªäº¤ç‚¹å–å…³äº x è½´çš„å¯¹ç§°ç‚¹ã€‚
<img src="http://catcoding.me/images/ob_pasted-image-20250401162659.png" alt="" /></p>
</li>
<li>
<p>ä»£æ•°å…¬å¼ï¼š
<img src="http://catcoding.me/images/ob_pasted-image-20250401163340.png" alt="" /></p>
</li>
</ol>
<p>ç¦»æ•£å¯¹æ•°é—®é¢˜æ˜¯åœ¨ä¸€ä¸ªæœ‰é™çš„â€œæ•°å­—åœˆâ€é‡Œç©ï¼Œæ¯”å¦‚æœ‰é™åŸŸ $F_p$ ï¼ˆ( p ) æ˜¯ç´ æ•°ï¼‰æˆ–è€…æ¤­åœ†æ›²çº¿çš„ç‚¹ç¾¤é‡Œã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>ç»™ä½  $y = g^x \mod p$ ï¼Œå·²çŸ¥ ( y, g, p )ï¼Œæ±‚  xã€‚</li>
<li>åœ¨æ¤­åœ†æ›²çº¿ä¸Šï¼Œå˜æˆ $Q = k \cdot P$ ï¼Œå·²çŸ¥  Q å’Œ  Pï¼ˆåŸºç‚¹ï¼‰ï¼Œæ±‚ kï¼ˆè·³äº†å‡ æ¬¡ï¼‰ã€‚</li>
</ul>
<p>è¿™é‡Œçš„ ( x ) æˆ– ( k ) å°±æ˜¯â€œç¦»æ•£å¯¹æ•°â€ã€‚è¿™å°±æ˜¯ç¦»æ•£å¯¹æ•°é—®é¢˜ï¼Œæ•°å­¦å®¶æ²¡æ‰¾åˆ°ä¸€ä¸ªå¿«é€Ÿæ–¹å¼èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ç›´è§‚æ„Ÿå—ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸Šé¢é‚£ä¸ªç¨‹åºï¼Œæˆ‘å®šä¹‰ä¸€ä¸ªèµ·å§‹ç‚¹ Pï¼Œç„¶åä¸æ–­é€šè¿‡ P + P çš„æ–¹å¼è¿›è¡Œ 20 æ¬¡ï¼Œç»ˆç‚¹æ˜¯é»„è‰²çš„ï¼Œç„¶åæŠŠä¸­é—´é€šè¿‡çš„ç‚¹ç”¨è“è‰²çš„çº¿è¿æ¥èµ·æ¥ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç»è¿‡çš„ç‚¹æ˜¯æ²¡æœ‰ä»€ä¹ˆè§„å¾‹çš„ã€‚</p>
<p>åå‘ç ´è§£å°±æ¯”å¦‚ä½ æ‹¿åˆ°è¿™å¹…å›¾ï¼Œå¦‚æœä¸å‘Šè¯‰ä½ è“è‰²çš„è¿çº¿ï¼Œè€Œåªæœ‰é‚£ä¸ªé»„è‰²çš„ç»ˆç‚¹ï¼Œç°åœ¨é—®ä½ èµ·ç‚¹åœ¨å“ªé‡Œï¼Ÿè¿™ä¸ªé—®é¢˜æ˜¯å¾ˆéš¾å›ç­”çš„ã€‚</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250401164453.png" alt="" /></p>
<p>19 ä¸–çºªæ•°å­¦å®¶å°±ç ”ç©¶è¿‡æ¤­åœ†æ›²çº¿çš„æ€§è´¨ï¼Œä½†åˆ° 20 ä¸–çºªæ•°å­¦å®¶å‘ç°æ¤­åœ†æ›²çº¿ä¸Šçš„ç‚¹èƒ½é€šè¿‡ç‚¹åŠ æ³•è¿™ç±»æ“ä½œç»„æˆä¸€ä¸ªé˜¿è´å°”ç¾¤ï¼Œè¿™äº›ç‚¹çš„æ•°é‡å’Œåˆ†å¸ƒç‰¹åˆ«â€œè¯¡å¼‚â€â€”â€”æ—¢æœ‰é™ï¼Œåˆä¹±å¾—æ²¡è§„å¾‹ã€‚è€Œç‚¹åŠ æ³•è¿™ç§æ­£å‘å®¹æ˜“ã€é€†å‘éš¾çš„ç‰¹å¾åˆšå¥½å°±é€‚ç”¨äºå¯†ç å­¦ã€‚</p>
<h2 id="ä»æ¤­åœ†æ›²çº¿åˆ°å¯†ç å­¦"><a href="#ä»æ¤­åœ†æ›²çº¿åˆ°å¯†ç å­¦" class="headerlink" title="ä»æ¤­åœ†æ›²çº¿åˆ°å¯†ç å­¦"></a>ä»æ¤­åœ†æ›²çº¿åˆ°å¯†ç å­¦</h2>
<p>Neal Koblitz æ˜¯ä¸“æ”»æ•°è®ºçš„æ•°å­¦å®¶ï¼Œå¯¹æ¤­åœ†æ›²çº¿å¾ˆç†Ÿã€‚ä»–å½“æ—¶åœ¨ç ”ç©¶æœ‰é™åŸŸä¸Šçš„æ•°å­¦é—®é¢˜ï¼Œæ³¨æ„åˆ°æ¤­åœ†æ›²çº¿çš„ç‚¹ç¾¤å’Œä¼ ç»Ÿç¦»æ•£å¯¹æ•°æœ‰ç‚¹åƒï¼Œä½†æ›´â€œç´§å‡‘â€ã€‚ä»–æƒ³ï¼šå¦‚æœæŠŠ Diffie-Hellman çš„æ€è·¯æ¬åˆ°æ¤­åœ†æ›²çº¿ä¸Šï¼Œä¼šä¸ä¼šæ›´é«˜æ•ˆã€‚</p>
<p>Victor Miller åœ¨ IBM æåº”ç”¨æ•°å­¦ï¼Œä¹Ÿç›¯ç€æ¤­åœ†æ›²çº¿çš„ç¾¤æ€§è´¨ã€‚ä»–å‘ç°ï¼Œæ¤­åœ†æ›²çº¿çš„ç¦»æ•£å¯¹æ•°é—®é¢˜ï¼ˆECDLPï¼‰ä¼¼ä¹æ¯”æ™®é€šç¦»æ•£å¯¹æ•°è¿˜éš¾ç ´è§£ï¼Œè€Œä¸”éœ€è¦çš„æ•°å­—ï¼ˆå¯†é’¥é•¿åº¦ï¼‰å°å¾—å¤šã€‚ä»–ä¿©ä¸è°‹è€Œåˆï¼Œéƒ½è§‰å¾—è¿™ç©æ„å„¿èƒ½å¹²å¤§äº‹ã€‚</p>
<p>ä»–ä»¬çš„æƒ³æ³•ä¸æ˜¯å‡­ç©ºæ¥çš„ï¼Œæœ‰å‡ ä¸ªå…³é”®â€œç«èŠ±â€ï¼š</p>
<ol>
<li>ç¾¤è®ºçš„å¯å‘ï¼šå¯†ç å­¦é‡Œçš„ Diffie-Hellman ç”¨çš„æ˜¯ä¹˜æ³•ç¾¤ï¼ŒKoblitz å’Œ Miller çœ‹åˆ°æ¤­åœ†æ›²çº¿çš„ç‚¹ç¾¤ä¹Ÿæ˜¯é˜¿è´å°”ç¾¤ï¼Œè§‰å¾—å¯ä»¥â€œç…§æ¬â€è¿‡æ¥ã€‚</li>
<li>Hasse å®šç†ï¼š20 ä¸–çºªæ•°å­¦å®¶ Hasse è¯æ˜äº†æ¤­åœ†æ›²çº¿åœ¨ $F_p$ ä¸Šçš„ç‚¹æ•°å¤§æ¦‚æ˜¯ $p + 1 \pm 2\sqrt{p}$ï¼Œæ•°é‡å¤Ÿå¤§ä½†åˆ†å¸ƒéšæœºï¼Œæ­£å¥½é€‚åˆåšç¦»æ•£å¯¹æ•°é—®é¢˜ã€‚</li>
<li>æ•ˆç‡ä¼˜åŠ¿ï¼šä»–ä»¬ç®—äº†ç®—ï¼Œæ¤­åœ†æ›²çº¿çš„è¿ç®—ï¼ˆç‚¹åŠ æ³•å’Œå€ç‚¹ï¼‰è™½ç„¶å¤æ‚ï¼Œä½†ç”¨å°å¾—å¤šçš„æ•°å­—ï¼ˆæ¯”å¦‚ 160 ä½ï¼‰å°±èƒ½è¾¾åˆ°ä¼ ç»Ÿæ–¹æ³• 1000 ä½çš„å®‰å…¨çº§åˆ«ï¼Œè¿™å¯¹ç¡¬ä»¶æ¥è¯´å¤ªè¯±äººäº†ã€‚</li>
</ol>
<p>ä¸ºä»€ä¹ˆä¸éšä¾¿æŒ‘ä¸ªåˆ«çš„æ›²çº¿ï¼Ÿå› ä¸ºæ¤­åœ†æ›²çº¿ï¼ˆä¸‰æ¬¡æ–¹ç¨‹ï¼‰æ­£å¥½æœ‰â€œ<strong>ä¸‰ä¸ªäº¤ç‚¹</strong>â€çš„å‡ ä½•æ€§è´¨ï¼Œç‚¹åŠ æ³•è§„åˆ™ç®€å•åˆä¼˜é›…ï¼Œå…¶ä»–é«˜æ¬¡æ›²çº¿è¦ä¹ˆå¤ªå¤æ‚ï¼Œè¦ä¹ˆå®‰å…¨æ€§ä¸å¤Ÿã€‚åŠ ä¸Šæ•°å­¦å®¶å‡ ç™¾å¹´çš„ç ”ç©¶ï¼Œæ¤­åœ†æ›²çº¿çš„æ€§è´¨å·²ç»æ‘¸å¾—é€é€çš„ï¼Œæ‹¿æ¥ç”¨æœ€ä¿é™©ã€‚</p>
<p>æ¤­åœ†æ›²çº¿åŠ å¯†ä» 1985 å¹´çš„â€œæ€ªèƒâ€åˆ°ä»Šå¤©çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œèµ°è¿‡äº†ä»å†·é—¨åˆ°çˆ†æ¬¾çš„è·¯ã€‚å®ƒçš„å†å²æ˜¯ä¸ªå…¸å‹çš„â€œå­¦æœ¯å˜å®ç”¨â€çš„æ•…äº‹ï¼šæ•°å­¦å®¶ç©äº†å¥½å¤šå¹´çš„æ¤­åœ†æ›²çº¿ï¼Œè¢« Koblitz å’Œ Miller ä¸€æŒ–æ˜æˆäº†å®‰å…¨çš„åˆ©å™¨ã€‚</p>
<h2 id="secp256k1"><a href="#secp256k1" class="headerlink" title="secp256k1"></a>secp256k1</h2>
<p>secp256k1 æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ¤­åœ†æ›²çº¿ï¼Œåå­—å¬èµ·æ¥é«˜å¤§ä¸Šï¼Œå…¶å®å°±æ˜¯å¯†ç å­¦é‡Œç”¨çš„ä¸€æ¡æ•°å­¦æ›²çº¿ï¼Œsecp256k1 çš„åå­—å¯ä»¥åˆ†æˆå‡ ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>secï¼šStandards for Efficient Cryptographyï¼ˆé«˜æ•ˆåŠ å¯†æ ‡å‡†ï¼‰ã€‚</li>
<li>pï¼šPrimeï¼ˆç´ æ•°ï¼‰ï¼Œè¡¨ç¤ºè¿™ä¸ªæ›²çº¿æ˜¯ç”¨ç´ æ•°åŸŸå®šä¹‰çš„ã€‚</li>
<li>256ï¼šè¡¨ç¤ºè¿™ä¸ªæ›²çº¿çš„â€œå¤§å°â€æ˜¯ 256 ä½ï¼ˆä¹Ÿå°±æ˜¯å¯†é’¥é•¿åº¦ï¼‰ã€‚</li>
<li>kï¼šKoblitz çš„ç¼©å†™ï¼ŒæŒ‡çš„æ˜¯æ•°å­¦å®¶ Neal Koblitzï¼Œä»–ç ”ç©¶äº†è¿™ç§ç±»å‹çš„æ›²çº¿ã€‚</li>
<li>1ï¼šè¡¨ç¤ºè¿™æ˜¯ Koblitz æ›²çº¿ä¸­çš„ç¬¬ä¸€ä¸ªï¼ˆæœ€ç®€å•çš„ä¸€ä¸ªï¼‰ã€‚</li>
</ul>
<p>å®ƒæ˜¯æ¯”ç‰¹å¸ã€ä»¥å¤ªåŠè¿™äº›åŒºå—é“¾çš„â€œå®‰å…¨é”â€çš„æ ¸å¿ƒã€‚ç®€å•è¯´ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªâ€œè·³è·ƒæ¸¸æˆâ€çš„è§„åˆ™ï¼Œé è¿™ä¸ªè§„åˆ™ä¿æŠ¤ä½ çš„ç§é’¥å’Œå…¬é’¥ã€‚</p>
<p>secp256k1 æ˜¯è¿™ä¹ˆæ¥çš„ï¼š</p>
<ul>
<li>æ–¹ç¨‹ï¼šå®ƒçš„å…¬å¼æ˜¯ $y^2 = x^3 + 7$ æ³¨æ„ï¼Œè¿™é‡Œçš„ $a = 0 , b = 7$ï¼Œæ˜¯ä¸ªå¾ˆç®€å•çš„æ¤­åœ†æ›²çº¿ã€‚</li>
<li>æœ‰é™åŸŸï¼šå®ƒä¸æ˜¯åœ¨æ™®é€šæ•°å­—ä¸Šç©ï¼Œè€Œæ˜¯åœ¨ä¸€ä¸ªè¶…çº§å¤§çš„â€œæ•°å­—åœˆâ€ $F_p$ ï¼Œè¿™é‡Œçš„ (p) æ˜¯ä¸ªç‰¹å®šçš„ç´ æ•°ï¼Œå¤§çº¦æ˜¯ $2^{256} - 2^{32} - 2^9 - 2^8 - 2^7 - 2^6 - 2^4 - 1$ã€‚</li>
<li>åŸºç‚¹ (P)ï¼šå®ƒæœ‰ä¸ªå›ºå®šçš„èµ·è·‘ç‚¹ (P)ï¼Œåæ ‡æ˜¯ $(x_P, y_P)$ï¼Œå…·ä½“å€¼å¾ˆé•¿ï¼ˆè§ä¸‹é¢ï¼‰ï¼Œä½†å®ƒæ˜¯å…¬å¼€çš„ï¼Œå¤§å®¶éƒ½ä»è¿™ç‚¹å¼€å§‹è·³ã€‚</li>
</ul>
<p>secp256k1 å°±åƒä¸€ä¸ªè¶…çº§å¤æ‚çš„â€œè·³æ ¼å­æ¸¸æˆâ€ï¼š</p>
<ul>
<li>ä½ æŒ‘ä¸€ä¸ªç§˜å¯†æ•°å­— (k)ï¼ˆç§é’¥ï¼‰ï¼Œä»åŸºç‚¹ (P) å¼€å§‹ï¼Œç”¨ç‚¹åŠ æ³•è·³ (k) æ¬¡ï¼Œè·³åˆ°çš„ç‚¹æ˜¯ $Q = k \cdot P$
å…¬é’¥ã€‚</li>
<li>åˆ«äººçœ‹åˆ° (P) å’Œ (Q)ï¼Œæƒ³çŒœä½ è·³äº†å‡ æ¬¡ (k)ï¼Œä½†å› ä¸ºç‚¹åŠ æ³•é€†è¿ç®—ï¼ˆç¦»æ•£å¯¹æ•°é—®é¢˜ï¼‰å¤ªéš¾ï¼Œä»–ä»¬ç®—ä¸å‡ºæ¥ã€‚</li>
</ul>
<p>ç±»æ¯”ä¸€ä¸‹ï¼Œæƒ³è±¡ secp256k1 æ˜¯ä¸ªå·¨å¤§çš„è¿·å®«ï¼Œé‡Œé¢æœ‰ (p) ä¸ªæ ¼å­ï¼ˆå¤§æ¦‚ $2^{256}$ä¸ªï¼Œè¿™ä¸ªæ•°å­—å¤§åˆ°è¶…ä¹æƒ³è±¡ï¼Œæ¯”å®‡å®™é‡Œçš„åŸå­ã€æ²™ç²’ã€ç”šè‡³æ—¶é—´ç§’æ•°éƒ½å¤šå¾—å¤šã€‚å®ƒä¸æ˜¯â€œå¾ˆå¤§â€ï¼Œè€Œæ˜¯â€œå¤§çš„ç¦»è°±â€ï¼‰ã€‚è¿·å®«çš„å½¢çŠ¶ç”±ä¸Šé¢çš„æ¤­åœ†æ›²çº¿å†³å®šï¼Œèµ·ç‚¹æ˜¯ (P)ã€‚ä½ æ‹¿ç€ç§é’¥ (k)ï¼ŒæŒ‰è¿·å®«çš„è·³æ³•ï¼ˆç‚¹åŠ æ³•ï¼‰èµ° (k) æ­¥ï¼Œåœåœ¨ (Q)ã€‚è¿™ä¸ªè¿·å®«è®¾è®¡å¾—å¤ªå·§å¦™ï¼Œåˆ«äººç«™åœ¨ (Q) çœ‹ä½ èµ°è¿‡çš„è·¯ï¼Œæ ¹æœ¬æ‘¸ä¸ç€å¤´è„‘ï¼Œåªèƒ½ä» (P) ä¸€æ­¥æ­¥è¯•ï¼Œè¯•åˆ°å®‡å®™çˆ†ç‚¸ä¹Ÿè¯•ä¸å®Œï¼Œç ´è§£éš¾åº¦åƒâ€œä»é“¶æ²³ç³»æ‰¾ä¸€ç²’æ²™â€ã€‚ç­¾åæ—¶ï¼Œæ‹¿ç§é’¥å’Œæ¶ˆæ¯ç®—å‡ºä¸¤ä¸ªæ•°ï¼ˆr, sï¼‰ï¼Œåˆ«äººç”¨å…¬é’¥éªŒè¯ã€‚</p>
<p>secp256k1 å¦å¤–ä¸€ä¸ªç‰¹ç‚¹æ˜¯è®¡ç®—å¿«ï¼Œä¸»è¦æ¥è‡ªå®ƒçš„ç‰¹æ®Šæ•°å­¦ç»“æ„å’Œå‚æ•°é€‰æ‹©ã€‚<a target="_blank" rel="noopener" href="https://github.com/bitcoin-core/secp256k1?tab=readme-ov-file">bitcoin-core/secp256k1</a> æ˜¯é«˜åº¦ä¼˜åŒ–è¿‡çš„ C è¯­è¨€å®ç°ï¼Œç”¨äº†é¢„å­˜è¡¨ã€å†…æ•›æ±‡ç¼–ç­‰å„ç§ä¼˜åŒ–æ‰‹æ®µæ¥æé«˜æ•ˆç‡ã€‚é€šå¸¸æˆ‘ä»¬åœ¨ Rust ç¨‹åºä¸Šç”¨çš„ä¹Ÿæ˜¯è¿™ä¸ªåº“çš„ bindingã€‚</p>
<h2 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h2>
<p>æœ¬æ¥æƒ³æŸ¥æ‰¾æ›´å¤šèµ„æ–™æ¥å†™å¾—æ›´è¯¦ç»†ï¼Œä½†æˆ‘å‘ç°å¦‚æ­¤å¤ªè€—è´¹æ—¶é—´ï¼Œå€’ä¸å¦‚å…ˆæŠŠå·²ç»ç†è§£çš„éƒ¨åˆ†å†™åœ¨è¿™é‡Œï¼Œä»¥åå¦‚æœæœ‰æ–°çš„ç†è§£å†ä¸°å¯Œã€‚åœ¨å°è¯•ç†è§£çš„è¿‡ç¨‹ä¸­ä»ç„¶ä¼šæœ‰è¿™ç§æ„Ÿå—ï¼š
<img src="http://catcoding.me/images/ob_pasted-image-20250402113142.png" alt="" /></p>
<p>æ›´å¤šçš„å‚è€ƒèµ„æ–™åœ¨è¿™é‡Œï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://andrea.corbellini.name/2015/05/17/elliptic-curve-cryptography-a-gentle-introduction/">Elliptic Curve Cryptography: a gentle introduction - Andrea Corbellini</a> å†™çš„ä¸€ç³»åˆ—æ–‡ç« å¾ˆè¯¦ç»†</li>
<li>ä¸Šé¢çš„ç¨‹åºåˆ†äº«åœ¨è¿™é‡Œï¼š <a target="_blank" rel="noopener" href="https://github.com/chenyukang/elliptic-curve">chenyukang/elliptic-curve</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>Future çš„å¤§å°å¯¹æ€§èƒ½çš„å½±å“</title>
    <link href="http://catcoding.me/p/future-size-perf/"/>
    <id>http://catcoding.me/p/future-size-perf/</id>
    <published>2025-03-24T10:21:03+00:00</published>
    <updated>2026-02-13T06:43:00.096220849+00:00</updated>
    <content type="html"><![CDATA[<p>åœ¨ Rust å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œæœ‰ä¸€ç§è§‚ç‚¹è®¤ä¸ºï¼š<strong>Future çš„å¤§å°æ˜¾è‘—å½±å“æ€§èƒ½</strong>ã€‚ä½ æ˜¯å¦æ€€ç–‘è¿‡è¿™ä¸ªè¯´æ³•çš„çœŸå®æ€§ï¼Ÿå¦‚æœæ˜¯çœŸçš„ï¼Œè¿™ç§æ€§èƒ½å·®å¼‚çš„æ ¹æºåˆæ˜¯ä»€ä¹ˆï¼Ÿä»Šå¤©ï¼Œæˆ‘ç¿»é˜…äº†ä¸€äº›æºç ï¼Œå¹¶ç¼–å†™å®éªŒä»£ç æ¥ä¸€æ¢ç©¶ç«Ÿã€‚</p>
<h2 id="Future-çš„å¤§å°å¦‚ä½•è®¡ç®—ï¼Ÿ"><a href="#Future-çš„å¤§å°å¦‚ä½•è®¡ç®—ï¼Ÿ" class="headerlink" title="Future çš„å¤§å°å¦‚ä½•è®¡ç®—ï¼Ÿ"></a>Future çš„å¤§å°å¦‚ä½•è®¡ç®—ï¼Ÿ</h2>
<p>ä¸ºäº†éªŒè¯â€œFuture å¤§å°å½±å“æ€§èƒ½â€è¿™ä¸€è¯´æ³•æ˜¯å¦æˆç«‹ï¼Œæˆ‘ä»¬å…ˆä»ä¸€äº›ç®€å•ä»£ç å…¥æ‰‹ã€‚é¦–è¦ä»»åŠ¡æ˜¯å¼„æ¸…æ¥šä¸€ä¸ª Future çš„å¤§å°æ˜¯å¦‚ä½•ç¡®å®šçš„ã€‚æ¯•ç«Ÿï¼Œåœ¨ç¼–è¯‘å™¨çœ¼é‡Œï¼ŒFuture åªæ˜¯ä¸€ä¸ª traitï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token trait rust"><span class="token keyword rust">pub</span> <span class="token keyword trait rust">trait</span> <span class="entity name trait rust">Future</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword type rust">type</span> <span class="token class-name rust">Output</span><span class="token punctuation terminator rust">;</span>
    <span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">poll</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span><span class="token variable parameter rust">self</span>: <span class="token generic rust">Pin<span class="token punctuation definition generic begin rust">&lt;</span><span class="token operator rust">&amp;</span><span class="token keyword rust">mut</span> <span class="token keyword rust">Self</span><span class="token punctuation definition generic end rust">&gt;</span></span>, <span class="token variable parameter rust">cx</span><span class="token punctuation separator rust">:</span> <span class="token operator rust">&amp;</span><span class="token keyword rust">mut</span> <span class="token generic rust">Context<span class="token punctuation definition generic begin rust">&lt;</span>&#39;<span class="token operator rust">_</span><span class="token punctuation definition generic end rust">&gt;</span></span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> <span class="token function return-type rust"><span class="token punctuation separator rust">-&gt;</span> <span class="token generic rust">Poll<span class="token punctuation definition generic begin rust">&lt;</span><span class="token path rust"><span class="token keyword rust"><span class="token keyword rust">Self</span><span class="token punctuation accessor rust">::</span></span></span>Output<span class="token punctuation definition generic end rust">&gt;</span></span></span></span><span class="token punctuation terminator rust">;</span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span></code></pre>
<p>é‚£ä¹ˆï¼Œå…¶å¤§å°å–å†³äºå®ç°è¿™ä¸ª trait çš„å…·ä½“ç»“æ„ä½“å—ï¼Ÿæˆ‘ç¿»é˜…äº† smol çš„æºç ï¼Œå‘ç°åœ¨ <a target="_blank" rel="noopener" href="https://github.com/smol-rs/async-executor/blob/2d72f8705b324c386d22227720d806ea8bc4e257/async-task/src/runnable.rs#L505-L535">spawn ä¸€ä¸ª Future</a> æ—¶ï¼Œç›¸å…³ä»£ç æ˜¯è¿™æ ·å¤„ç†çš„ï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust">    <span class="token keyword rust">pub</span> <span class="token keyword rust">unsafe</span> <span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">spawn_unchecked</span></span><span class="token generic rust"><span class="token punctuation definition generic begin rust">&lt;</span><span class="token keyword lifetime rust">&#39;a</span>, F, Fut, S<span class="token punctuation definition generic end rust">&gt;</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span>
        <span class="token variable parameter rust">self</span>,
        <span class="token variable parameter rust">future</span><span class="token punctuation separator rust">:</span> F,
        <span class="token variable parameter rust">schedule</span><span class="token punctuation separator rust">:</span> S,
    </span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> <span class="token function return-type rust"><span class="token punctuation separator rust">-&gt;</span> <span class="token punctuation section group begin rust">(</span><span class="token generic rust">Runnable<span class="token punctuation definition generic begin rust">&lt;</span>M<span class="token punctuation definition generic end rust">&gt;</span></span>, <span class="token generic rust">Task<span class="token punctuation definition generic begin rust">&lt;</span><span class="token path rust"><span class="token keyword rust"><span class="token keyword rust">Fut</span><span class="token punctuation accessor rust">::</span></span></span>Output, M<span class="token punctuation definition generic end rust">&gt;</span></span><span class="token punctuation section group end rust">)</span>
    </span></span><span class="token function rust"><span class="token keyword rust">where</span>
        F<span class="token punctuation separator rust">:</span> FnOnce<span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span><span class="token keyword lifetime rust">&#39;a</span> M<span class="token punctuation section group end rust">)</span> -&gt; Fut,
        Fut<span class="token punctuation separator rust">:</span> Future + <span class="token keyword lifetime rust">&#39;a</span>,
        S<span class="token punctuation separator rust">:</span> <span class="token generic rust">Schedule<span class="token punctuation definition generic begin rust">&lt;</span>M<span class="token punctuation definition generic end rust">&gt;</span></span>,
        M<span class="token punctuation separator rust">:</span> <span class="token keyword lifetime rust">&#39;a</span>,
    </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> Allocate large futures on the heap.
</span>        <span class="token keyword rust">let</span> ptr <span class="token operator rust">=</span> <span class="token keyword rust">if</span> <span class="token path rust">mem<span class="token punctuation accessor rust">::</span></span><span class="token path rust">size_of<span class="token punctuation accessor rust">::</span></span><span class="token generic rust"><span class="token punctuation definition generic begin rust">&lt;</span>Fut<span class="token punctuation definition generic end rust">&gt;</span></span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">&gt;</span><span class="token operator rust">=</span> <span class="token number integer decimal rust">2048</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            <span class="token keyword rust">let</span> <span class="token function rust">future</span> <span class="token operator rust">=</span> <span class="token function closure rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">|</span></span></span><span class="token function closure rust"><span class="token function parameters rust"><span class="token variable parameter rust">meta</span><span class="token punctuation section parameters end rust">|</span></span> </span><span class="token function closure rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                <span class="token keyword rust">let</span> future <span class="token operator rust">=</span> <span class="token function rust">future</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>meta</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
                <span class="token class-name rust">Box</span><span class="token path rust"><span class="token punctuation accessor rust">::</span></span>pin<span class="token group rust"><span class="token punctuation section group begin rust">(</span>future</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
            </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span><span class="token punctuation terminator rust">;</span>
            <span class="token path rust">RawTask<span class="token punctuation accessor rust">::</span></span><span class="token generic rust"><span class="token punctuation definition generic begin rust">&lt;</span><span class="token operator rust">_</span>, <span class="token path rust"><span class="token keyword rust"><span class="token keyword rust">Fut</span><span class="token punctuation accessor rust">::</span></span></span>Output, S, M<span class="token punctuation definition generic end rust">&gt;</span></span><span class="token path rust"><span class="token punctuation accessor rust">::</span></span>allocate<span class="token group rust"><span class="token punctuation section group begin rust">(</span>future<span class="token punctuation separator rust">,</span> schedule<span class="token punctuation separator rust">,</span> <span class="token variable language rust">self</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span> <span class="token keyword rust">else</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            <span class="token path rust">RawTask<span class="token punctuation accessor rust">::</span></span><span class="token generic rust"><span class="token punctuation definition generic begin rust">&lt;</span>Fut, <span class="token path rust"><span class="token keyword rust"><span class="token keyword rust">Fut</span><span class="token punctuation accessor rust">::</span></span></span>Output, S, M<span class="token punctuation definition generic end rust">&gt;</span></span><span class="token path rust"><span class="token punctuation accessor rust">::</span></span>allocate<span class="token group rust"><span class="token punctuation section group begin rust">(</span>future<span class="token punctuation separator rust">,</span> schedule<span class="token punctuation separator rust">,</span> <span class="token variable language rust">self</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span><span class="token punctuation terminator rust">;</span>

        <span class="token keyword rust">let</span> runnable <span class="token operator rust">=</span> <span class="token path rust">Runnable<span class="token punctuation accessor rust">::</span></span>from_raw<span class="token group rust"><span class="token punctuation section group begin rust">(</span>ptr</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
        <span class="token keyword rust">let</span> task <span class="token operator rust">=</span> Task <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            ptr<span class="token punctuation separator rust">,</span>
            _marker<span class="token punctuation separator rust">:</span> PhantomData<span class="token punctuation separator rust">,</span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span><span class="token punctuation terminator rust">;</span>
        <span class="token group rust"><span class="token punctuation section group begin rust">(</span>runnable<span class="token punctuation separator rust">,</span> task</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span></code></pre>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ° <code>mem::size_of::&lt;Fut&gt;()</code> æ˜¯åœ¨è®¡ç®—è¿™ä¸ª Future çš„å¤§å°ï¼Œæˆ‘æ¥å†™ä¸ªç®€å•çš„ Future éªŒè¯ï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token keyword rust">use</span> <span class="token path rust">async_executor<span class="token punctuation accessor rust">::</span></span>Executor<span class="token punctuation terminator rust">;</span>
<span class="token keyword rust">use</span> <span class="token path rust">futures_lite<span class="token punctuation accessor rust">::</span></span>future<span class="token punctuation terminator rust">;</span>
<span class="token keyword rust">use</span> <span class="token path rust">std<span class="token punctuation accessor rust">::</span></span><span class="token path rust">future<span class="token punctuation accessor rust">::</span></span>Future<span class="token punctuation terminator rust">;</span>
<span class="token keyword rust">use</span> <span class="token path rust">std<span class="token punctuation accessor rust">::</span></span><span class="token path rust">pin<span class="token punctuation accessor rust">::</span></span>Pin<span class="token punctuation terminator rust">;</span>
<span class="token keyword rust">use</span> <span class="token path rust">std<span class="token punctuation accessor rust">::</span></span><span class="token path rust">task<span class="token punctuation accessor rust">::</span></span><span class="token block rust"><span class="token punctuation section block begin rust">{</span>Context<span class="token punctuation separator rust">,</span> Poll</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span><span class="token punctuation terminator rust">;</span>

<span class="token struct rust"><span class="token keyword rust">pub</span> <span class="token keyword struct rust">struct</span> </span><span class="token struct rust"><span class="entity name struct rust">LargeFuture</span> </span><span class="token struct rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword rust">pub</span> <span class="token variable other member rust">data</span><span class="token punctuation separator rust">:</span> [<span class="token keyword rust">u8</span>; 10240],
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>

<span class="token impl rust"><span class="token keyword impl rust">impl</span> </span><span class="token impl rust">Future <span class="token keyword rust">for</span></span><span class="token impl rust"> <span class="entity name impl rust">LargeFuture</span> </span><span class="token impl rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword type rust">type</span> <span class="token class-name rust">Output</span> <span class="token operator rust">=</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>

    <span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">poll</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span><span class="token variable parameter rust">self</span>: <span class="token generic rust">Pin<span class="token punctuation definition generic begin rust">&lt;</span><span class="token operator rust">&amp;</span><span class="token keyword rust">mut</span> <span class="token keyword rust">Self</span><span class="token punctuation definition generic end rust">&gt;</span></span>, <span class="token variable parameter rust">_cx</span><span class="token punctuation separator rust">:</span> <span class="token operator rust">&amp;</span><span class="token keyword rust">mut</span> <span class="token generic rust">Context<span class="token punctuation definition generic begin rust">&lt;</span>&#39;<span class="token operator rust">_</span><span class="token punctuation definition generic end rust">&gt;</span></span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> <span class="token function return-type rust"><span class="token punctuation separator rust">-&gt;</span> <span class="token generic rust">Poll<span class="token punctuation definition generic begin rust">&lt;</span><span class="token path rust"><span class="token keyword rust"><span class="token keyword rust">Self</span><span class="token punctuation accessor rust">::</span></span></span>Output<span class="token punctuation definition generic end rust">&gt;</span></span></span> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="token keyword rust">let</span> value <span class="token operator rust">=</span> <span class="token variable language rust">self</span>.data<span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">0</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation terminator rust">;</span>
        <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>First byte: <span class="token constant placeholder rust">{}</span><span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span> value<span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
        <span class="token path rust">Poll<span class="token punctuation accessor rust">::</span></span>Ready<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token variable language rust">self</span>.data.<span class="token function rust">len</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>

<span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">main</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword rust">let</span> ex <span class="token operator rust">=</span> <span class="token path rust">Executor<span class="token punctuation accessor rust">::</span></span>new<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> large_future <span class="token operator rust">=</span> LargeFuture <span class="token block rust"><span class="token punctuation section block begin rust">{</span> data<span class="token punctuation separator rust">:</span> <span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">0</span><span class="token keyword numeric rust">u8</span><span class="token punctuation separator rust">;</span> <span class="token number integer decimal rust">10240</span><span class="token punctuation section group end rust">]</span></span> </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> res <span class="token operator rust">=</span> <span class="token path rust">future<span class="token punctuation accessor rust">::</span></span>block_on<span class="token group rust"><span class="token punctuation section group begin rust">(</span>ex.<span class="token function rust">run</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>async <span class="token block rust"><span class="token punctuation section block begin rust">{</span> ex.<span class="token function rust">spawn</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>large_future</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.await </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="support macro rust">println!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>Result: <span class="token constant placeholder rust">{}</span><span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation separator rust">,</span> res<span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>

</span></code></pre>
<p>åœ¨ä¸Šé¢é‚£ä¸ª async-task çš„ <code>spawn_unchecked</code> å‡½æ•°åŠ ä¸Šæ—¥å¿—ï¼Œæ‰“å°å‡ºæ¥çš„å¤§å°ä¸º <code>10256</code>ï¼Œåˆšå¥½æ¯”è¿™ä¸ª struct çš„å¤§å°å¤§ 16ï¼Œé¡ºç€ä»£ç å¾€ä¸Šå¯ä»¥çœ‹åˆ°<a target="_blank" rel="noopener" href="https://github.com/smol-rs/async-executor/blob/2d72f8705b324c386d22227720d806ea8bc4e257/src/lib.rs#L250">è¿™é‡Œ</a>åœ¨åŸå§‹çš„ Future ä¸Šåšäº†ä¸€ä¸ªå°è£…ï¼Œè¿™é‡Œçš„æ„æ€æ˜¯å¦‚æœè¿™ä¸ª Future ä»¥åæ‰§è¡Œå®Œï¼Œéœ€è¦ä» runtime é‡Œé¢åˆ æ‰ï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token keyword rust">let</span> future <span class="token operator rust">=</span> <span class="token path rust">AsyncCallOnDrop<span class="token punctuation accessor rust">::</span></span>new<span class="token group rust"><span class="token punctuation section group begin rust">(</span>future<span class="token punctuation separator rust">,</span> <span class="token keyword rust">move</span> <span class="token operator rust">|</span><span class="token operator rust">|</span> <span class="token function rust">drop</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>state.<span class="token function rust">active</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token function rust">try_remove</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>index</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
</span></code></pre>
<p>è¿™è§£é‡Šäº†å°ºå¯¸ç•¥æœ‰å¢åŠ çš„åŸå› ã€‚å¯¹äºç»“æ„ä½“çš„å°ºå¯¸ï¼Œæˆ‘ä»¬ä¸éš¾ç†è§£ï¼Œä½†å¯¹äº async å‡½æ•°ï¼Œå…¶å¤§å°åˆæ˜¯å¦‚ä½•è®¡ç®—çš„å‘¢ï¼Ÿè¿™å°±æ¶‰åŠ Rust ç¼–è¯‘å™¨å¯¹ async çš„è½¬æ¢æœºåˆ¶ã€‚</p>
<h2 id="å¼‚æ­¥çŠ¶æ€æœºï¼šå†°å±±ä¹‹ä¸‹çš„åºç„¶å¤§ç‰©"><a href="#å¼‚æ­¥çŠ¶æ€æœºï¼šå†°å±±ä¹‹ä¸‹çš„åºç„¶å¤§ç‰©" class="headerlink" title="å¼‚æ­¥çŠ¶æ€æœºï¼šå†°å±±ä¹‹ä¸‹çš„åºç„¶å¤§ç‰©"></a>å¼‚æ­¥çŠ¶æ€æœºï¼šå†°å±±ä¹‹ä¸‹çš„åºç„¶å¤§ç‰©</h2>
<p>å½“ä½ å†™ä¸‹ä¸€ä¸ªç®€å•çš„ <code>async fn</code> å‡½æ•°æ—¶ï¼ŒRust ç¼–è¯‘å™¨åœ¨å¹•åæ‚„ç„¶å®Œæˆäº†ä¸€åœºå¤æ‚çš„è½¬æ¢ï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust">async <span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">function</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> <span class="token function return-type rust"><span class="token punctuation separator rust">-&gt;</span> <span class="token keyword rust">usize</span></span> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword rust">let</span> data <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">0</span><span class="token keyword numeric rust">u8</span><span class="token punctuation separator rust">;</span> <span class="token number integer decimal rust">102400</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token path rust">future<span class="token punctuation accessor rust">::</span></span>yield_now<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.await<span class="token punctuation terminator rust">;</span>
    data<span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">0</span><span class="token punctuation section group end rust">]</span></span> <span class="token operator rust">as</span> <span class="token keyword rust">usize</span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span></code></pre>
<p>è¿™æ®µä»£ç ä¼šè¢«ç¼–è¯‘å™¨è½¬åŒ–ä¸ºä¸€ä¸ªåºå¤§çš„çŠ¶æ€æœºï¼Œè´Ÿè´£è¿½è¸ªæ‰§è¡Œè¿›åº¦å¹¶ä¿å­˜æ‰€æœ‰è·¨è¶Š <code>.await</code> ç‚¹çš„å˜é‡ã€‚è½¬æ¢åçš„ç»“æ„ä½“å°è£…äº†çŠ¶æ€åˆ‡æ¢çš„é€»è¾‘ï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token enum rust"><span class="token keyword enum rust">enum</span> <span class="entity name enum rust">FunctionState</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> åˆå§‹çŠ¶æ€
</span>    Initial<span class="token punctuation separator rust">,</span>

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> yield_now æŒ‚èµ·åçš„çŠ¶æ€ï¼Œå¿…é¡»åŒ…å«æ‰€æœ‰è·¨ await ç‚¹çš„å˜é‡
</span>    Suspended <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        data<span class="token punctuation separator rust">:</span> <span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token keyword rust">u8</span><span class="token punctuation separator rust">;</span> <span class="token number integer decimal rust">102400</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation separator rust">,</span> <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> æ•´ä¸ªå¤§æ•°ç»„å¿…é¡»ä¿å­˜ï¼
</span>    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span><span class="token punctuation separator rust">,</span>

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> å®ŒæˆçŠ¶æ€
</span>    Completed<span class="token punctuation separator rust">,</span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>

<span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 2. å®šä¹‰çŠ¶æ€æœºç»“æ„ä½“
</span><span class="token struct rust"><span class="token keyword struct rust">struct</span> </span><span class="token struct rust"><span class="entity name struct rust">FunctionFuture</span> </span><span class="token struct rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> å½“å‰çŠ¶æ€
</span>    <span class="token variable other member rust">state</span><span class="token punctuation separator rust">:</span> FunctionState,

    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> yield_now future
</span>    <span class="token variable other member rust">yield_fut</span><span class="token punctuation separator rust">:</span> <span class="token generic rust">Option<span class="token punctuation definition generic begin rust">&lt;</span>YieldNow<span class="token punctuation definition generic end rust">&gt;</span></span>,
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>

<span class="token impl rust"><span class="token keyword impl rust">impl</span> </span><span class="token impl rust">Future <span class="token keyword rust">for</span></span><span class="token impl rust"> <span class="entity name impl rust">FunctionFuture</span> </span><span class="token impl rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 3. ä¸ºçŠ¶æ€æœºå®ç° Future traitimpl Future for FunctionFuture {
</span>    <span class="token keyword type rust">type</span> <span class="token class-name rust">Output</span> <span class="token operator rust">=</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>

    <span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">poll</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span><span class="token variable parameter rust">self</span>: <span class="token generic rust">Pin<span class="token punctuation definition generic begin rust">&lt;</span><span class="token operator rust">&amp;</span><span class="token keyword rust">mut</span> <span class="token keyword rust">Self</span><span class="token punctuation definition generic end rust">&gt;</span></span>, <span class="token variable parameter rust">cx</span><span class="token punctuation separator rust">:</span> <span class="token operator rust">&amp;</span><span class="token keyword rust">mut</span> <span class="token generic rust">Context<span class="token punctuation definition generic begin rust">&lt;</span>&#39;<span class="token operator rust">_</span><span class="token punctuation definition generic end rust">&gt;</span></span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> <span class="token function return-type rust"><span class="token punctuation separator rust">-&gt;</span> <span class="token generic rust">Poll<span class="token punctuation definition generic begin rust">&lt;</span><span class="token keyword rust">usize</span><span class="token punctuation definition generic end rust">&gt;</span></span></span> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> å®‰å…¨åœ°è·å–å¯å˜å¼•ç”¨
</span>        <span class="token keyword rust">let</span> this <span class="token operator rust">=</span> <span class="token keyword rust">unsafe</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span> <span class="token variable language rust">self</span>.<span class="token function rust">get_unchecked_mut</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span><span class="token punctuation terminator rust">;</span>

        <span class="token keyword rust">match</span> <span class="token operator rust">&amp;</span><span class="token keyword rust">mut</span> this.state <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
            <span class="token path rust">FunctionState<span class="token punctuation accessor rust">::</span></span>Initial <span class="token operator rust">=&gt;</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> åˆ›å»ºå¤§æ•°ç»„åŠå…¶é•¿åº¦
</span>                <span class="token keyword rust">let</span> data <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">0</span><span class="token keyword numeric rust">u8</span><span class="token punctuation separator rust">;</span> <span class="token number integer decimal rust">102400</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation terminator rust">;</span>
                <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> åˆ›å»º yield future å¹¶ä¿å­˜
</span>                this.yield_fut <span class="token operator rust">=</span> <span class="token class-name rust">Some</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token path rust">future<span class="token punctuation accessor rust">::</span></span>yield_now<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>

                <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> çŠ¶æ€è½¬æ¢ï¼Œä¿å­˜æ‰€æœ‰éœ€è¦è·¨è¶Š await çš„æ•°æ®
</span>                this.state <span class="token operator rust">=</span> <span class="token path rust">FunctionState<span class="token punctuation accessor rust">::</span></span>Suspended <span class="token block rust"><span class="token punctuation section block begin rust">{</span> data </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span><span class="token punctuation terminator rust">;</span>

                <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> ç«‹å³è½®è¯¢ yield
</span>                <span class="token keyword rust">match</span> <span class="token path rust">Pin<span class="token punctuation accessor rust">::</span></span>new<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span><span class="token keyword rust">mut</span> this.yield_fut.<span class="token function rust">as_mut</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token function rust">unwrap</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token function rust">poll</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>cx</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                    <span class="token path rust">Poll<span class="token punctuation accessor rust">::</span></span>Ready<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">_</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">=&gt;</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                        <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> å¦‚æœç«‹å³å®Œæˆï¼Œè¿”å›ç»“æœ
</span>                        <span class="token keyword rust">if</span> <span class="token keyword rust">let</span> <span class="token path rust">FunctionState<span class="token punctuation accessor rust">::</span></span>Suspended <span class="token block rust"><span class="token punctuation section block begin rust">{</span> data </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span> <span class="token operator rust">=</span> <span class="token operator rust">&amp;</span>this.state <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                            <span class="token keyword rust">let</span> result <span class="token operator rust">=</span> data<span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">0</span><span class="token punctuation section group end rust">]</span></span> <span class="token operator rust">as</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>
                            this.state <span class="token operator rust">=</span> <span class="token path rust">FunctionState<span class="token punctuation accessor rust">::</span></span>Completed<span class="token punctuation terminator rust">;</span>
                            <span class="token path rust">Poll<span class="token punctuation accessor rust">::</span></span>Ready<span class="token group rust"><span class="token punctuation section group begin rust">(</span>result</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
                        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span> <span class="token keyword rust">else</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                            <span class="support macro rust">unreachable!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
                        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
                    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
                    <span class="token path rust">Poll<span class="token punctuation accessor rust">::</span></span>Pending <span class="token operator rust">=&gt;</span> <span class="token path rust">Poll<span class="token punctuation accessor rust">::</span></span>Pending<span class="token punctuation separator rust">,</span>
                </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
            </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>

            <span class="token path rust">FunctionState<span class="token punctuation accessor rust">::</span></span>Suspended <span class="token block rust"><span class="token punctuation section block begin rust">{</span> data </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span> <span class="token operator rust">=&gt;</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> ç»§ç»­è½®è¯¢ yield
</span>                <span class="token keyword rust">match</span> <span class="token path rust">Pin<span class="token punctuation accessor rust">::</span></span>new<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">&amp;</span><span class="token keyword rust">mut</span> this.yield_fut.<span class="token function rust">as_mut</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token function rust">unwrap</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.<span class="token function rust">poll</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>cx</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                    <span class="token path rust">Poll<span class="token punctuation accessor rust">::</span></span>Ready<span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token operator rust">_</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">=&gt;</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                        <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> yield å®Œæˆï¼Œè¯»å–æ•°ç»„é¦–å…ƒç´ å¹¶è¿”å›
</span>                        <span class="token keyword rust">let</span> result <span class="token operator rust">=</span> data<span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">0</span><span class="token punctuation section group end rust">]</span></span> <span class="token operator rust">as</span> <span class="token keyword rust">usize</span><span class="token punctuation terminator rust">;</span>
                        this.state <span class="token operator rust">=</span> <span class="token path rust">FunctionState<span class="token punctuation accessor rust">::</span></span>Completed<span class="token punctuation terminator rust">;</span>
                        <span class="token path rust">Poll<span class="token punctuation accessor rust">::</span></span>Ready<span class="token group rust"><span class="token punctuation section group begin rust">(</span>result</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
                    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
                    <span class="token path rust">Poll<span class="token punctuation accessor rust">::</span></span>Pending <span class="token operator rust">=&gt;</span> <span class="token path rust">Poll<span class="token punctuation accessor rust">::</span></span>Pending<span class="token punctuation separator rust">,</span>
                </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
            </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>

            <span class="token path rust">FunctionState<span class="token punctuation accessor rust">::</span></span>Completed <span class="token operator rust">=&gt;</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
                <span class="support macro rust">panic!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>Future polled after completion<span class="token punctuation definition string end rust">&quot;</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>
            </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
        </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span></code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>Suspended</code> çŠ¶æ€ä¸­åŒ…å«äº†é‚£ä¸ªå¤§æ•°ç»„ã€‚å½“çŠ¶æ€ä» <code>Initial</code> åˆ‡æ¢åˆ° <code>Suspended</code> æ—¶ï¼Œ<code>data</code> ä¼šè¢«å®Œæ•´ä¿ç•™ã€‚</p>
<p>ç”±æ­¤å¯çŸ¥ï¼Œå¯¹äºä¸€ä¸ª async å‡½æ•°ï¼Œè‹¥ä¸´æ—¶å˜é‡éœ€è·¨è¶Š await å­˜æ´»ï¼Œå°±ä¼šè¢«çº³å…¥çŠ¶æ€æœºï¼Œå¯¼è‡´ç¼–è¯‘æ—¶ç”Ÿæˆçš„ Future å¤§å°æ˜¾è‘—å¢åŠ ã€‚</p>
<h2 id="å°ºå¯¸å¯¹æ€§èƒ½çš„å½±å“"><a href="#å°ºå¯¸å¯¹æ€§èƒ½çš„å½±å“" class="headerlink" title="å°ºå¯¸å¯¹æ€§èƒ½çš„å½±å“"></a>å°ºå¯¸å¯¹æ€§èƒ½çš„å½±å“</h2>
<p>æ˜ç¡®äº† Future å¤§å°çš„å®šä¹‰åï¼Œæˆ‘ä»¬æ¥ç€é€šè¿‡ä»£ç éªŒè¯å…¶å¯¹æ€§èƒ½çš„å½±å“ã€‚åœ¨ä¹‹å‰çš„ <code>mem::size_of::&lt;Fut&gt;() &gt;= 2048</code> æ¡ä»¶ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœ Future çš„å¤§å°è¿‡å¤§ï¼Œ<code>Box::pin(future)</code> ä¼šä»å †ä¸Šåˆ†é…å†…å­˜ï¼Œç†è®ºä¸Šä¼šå¸¦æ¥é¢å¤–å¼€é”€ã€‚è¿™ç§è®¾è®¡å¯èƒ½åŸºäºå‡ ç‚¹è€ƒé‡ï¼šå°å‹ Future ç›´æ¥åµŒå…¥ä»»åŠ¡ç»“æ„ä½“ä¸­ï¼Œèƒ½æå‡ç¼“å­˜å‘½ä¸­ç‡ï¼›è€Œå¤§å‹ Future è‹¥åµŒå…¥ï¼Œä¼šè®©ä»»åŠ¡ç»“æ„ä½“è¿‡äºè‡ƒè‚¿ï¼Œå ç”¨è¿‡å¤šæ ˆç©ºé—´ï¼Œåè€Œä¸åˆ©äºæ€§èƒ½ã€‚</p>
<p>æˆ‘é€šè¿‡å®éªŒéªŒè¯ï¼Œè‹¥ async å‡½æ•°ä¸­åŒ…å«è¾ƒå¤§çš„ç»“æ„ä½“ï¼Œç¡®å®ä¼šå¯¼è‡´ Future æ‰§è¡Œå˜æ…¢ï¼ˆå³ä¾¿è®¡ç®—é€»è¾‘ç›¸åŒï¼‰ï¼š</p>
<pre class="line-numbers language-console" data-language="console"><code class="language-console">RESULTS:
--------
Small Future (64B): 100000 iterations in 30.863125ms (avg: 308ns per iteration)
Medium Future (1KB): 100000 iterations in 61.100916ms (avg: 611ns per iteration)
Large Future (3KB): 100000 iterations in 105.185292ms (avg: 1.051Âµs per iteration)
Very Large Future (10KB): 100000 iterations in 273.469167ms (avg: 2.734Âµs per iteration)
Huge Large Future (100KB): 100000 iterations in 5.896455959s (avg: 58.964Âµs per iteration)

PERFORMANCE RATIOS (compared to Small Future):
-------------------------------------------
Medium Future (1KB): 1.98x slower
Large Future (3KB): 3.41x slower
Very Large Future (10KB): 8.88x slower
Huge Large Future (100KB): 191.44x slower
</code></pre>
<p>åœ¨å¾®è°ƒè¿™ä¸ª async å‡½æ•°æ—¶ï¼Œæˆ‘å‘ç°äº†ä¸€äº›å¾®å¦™çš„ç°è±¡ã€‚ä¸ºäº†è®© <code>data</code> è·¨è¶Š await å­˜æ´»ï¼Œæˆ‘ç‰¹æ„åœ¨æœ€åå¼•ç”¨äº†å®ƒï¼Œä»¥é˜²ç¼–è¯‘å™¨ä¼˜åŒ–æ‰ï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust">async <span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">huge_large_future</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> <span class="token function return-type rust"><span class="token punctuation separator rust">-&gt;</span> <span class="token keyword rust">u64</span></span> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword rust">let</span> data <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">1</span><span class="token keyword numeric rust">u8</span><span class="token punctuation separator rust">;</span> <span class="token number integer decimal rust">102400</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation terminator rust">;</span> <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 10KB * 10
</span>    <span class="token keyword rust">let</span> len <span class="token operator rust">=</span> data.<span class="token function rust">len</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token path rust">future<span class="token punctuation accessor rust">::</span></span>yield_now<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.await<span class="token punctuation terminator rust">;</span>
    <span class="token group rust"><span class="token punctuation section group begin rust">(</span>data<span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">0</span><span class="token punctuation section group end rust">]</span></span> <span class="token operator rust">+</span> data<span class="token group rust"><span class="token punctuation section group begin rust">[</span>len <span class="token operator rust">-</span> <span class="token number integer decimal rust">1</span><span class="token punctuation section group end rust">]</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span> <span class="token operator rust">as</span> <span class="token keyword rust">u64</span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span></code></pre>
<p>ç†è®ºä¸Šï¼Œè‹¥æ”¹æˆä¸‹é¢è¿™æ ·ï¼Œç”±äº <code>len</code> åœ¨ await å‰å·²è®¡ç®—å®Œæˆï¼Œåé¢åˆæ²¡ç”¨å¼•ç”¨åˆ°ï¼Œç”Ÿæˆçš„ Future å¤§å°åº”è¯¥å¾ˆå°ï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust">async <span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">huge_large_future</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> <span class="token function return-type rust"><span class="token punctuation separator rust">-&gt;</span> <span class="token keyword rust">u64</span></span> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword rust">let</span> data <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">1</span><span class="token keyword numeric rust">u8</span><span class="token punctuation separator rust">;</span> <span class="token number integer decimal rust">102400</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation terminator rust">;</span> <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 10KB * 10
</span>    <span class="token keyword rust">let</span> len <span class="token operator rust">=</span> data.<span class="token function rust">len</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token path rust">future<span class="token punctuation accessor rust">::</span></span>yield_now<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.await<span class="token punctuation terminator rust">;</span>
    <span class="token number integer decimal rust">0</span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>

<span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">main</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword rust">let</span> ex <span class="token operator rust">=</span> <span class="token path rust">Executor<span class="token punctuation accessor rust">::</span></span>new<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> task <span class="token operator rust">=</span> ex.<span class="token function rust">spawn</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token function rust">huge_large_future</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="token keyword rust">let</span> res <span class="token operator rust">=</span> <span class="token path rust">future<span class="token punctuation accessor rust">::</span></span>block_on<span class="token group rust"><span class="token punctuation section group begin rust">(</span>ex.<span class="token function rust">run</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span>task</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    <span class="support macro rust">eprintln!</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span><span class="token string double rust"><span class="token punctuation definition string begin rust">&quot;</span>Result: {}<span class="token punctuation definition string end rust">&quot;</span></span><span class="token punctuation separator rust">,</span> res</span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>

</span></code></pre>
<p>ç„¶è€Œï¼Œæˆ‘å‘ç° <code>data</code> ä»è¢«ä¿ç•™åœ¨çŠ¶æ€æœºä¸­ï¼Œå³ä¾¿ <code>len</code> æœªè¢«åç»­ä½¿ç”¨ã€‚è¿™æ¶‰åŠåˆ°ç¼–è¯‘å™¨å¦‚ä½•åˆ¤æ–­å˜é‡æ˜¯å¦è·¨è¶Š await å­˜æ´»çš„é—®é¢˜ã€‚å½“ç„¶ï¼Œè‹¥æ˜¾å¼é™å®š <code>data</code> çš„ç”Ÿå‘½å‘¨æœŸåœ¨ await ä¹‹å‰ï¼Œå®ƒå°±ä¸ä¼šè¢«çº³å…¥çŠ¶æ€æœºï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust">async <span class="token function rust"><span class="token function rust"><span class="token keyword function rust">fn</span> </span><span class="token function rust">huge_large_future</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters begin rust">(</span></span><span class="token function rust"><span class="token function parameters rust"><span class="token punctuation section parameters end rust">)</span></span></span></span><span class="token function rust"> <span class="token function return-type rust"><span class="token punctuation separator rust">-&gt;</span> <span class="token keyword rust">u64</span></span> </span><span class="token function rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
        <span class="token keyword rust">let</span> data <span class="token operator rust">=</span> <span class="token group rust"><span class="token punctuation section group begin rust">[</span><span class="token number integer decimal rust">1</span><span class="token keyword numeric rust">u8</span><span class="token punctuation separator rust">;</span> <span class="token number integer decimal rust">102400</span><span class="token punctuation section group end rust">]</span></span><span class="token punctuation terminator rust">;</span> <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> 10KB * 10
</span>        <span class="token keyword rust">let</span> len <span class="token operator rust">=</span> data.<span class="token function rust">len</span><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span><span class="token punctuation terminator rust">;</span>
    </span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span>
    <span class="token path rust">future<span class="token punctuation accessor rust">::</span></span>yield_now<span class="token group rust"><span class="token punctuation section group begin rust">(</span></span><span class="token group rust"><span class="token punctuation section group end rust">)</span></span>.await<span class="token punctuation terminator rust">;</span>
    <span class="token number integer decimal rust">0</span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span></code></pre><h2 id="ç¼–è¯‘å™¨å¦‚ä½•åˆ¤æ–­å“ªäº›å˜é‡åº”è¯¥ä¿å­˜"><a href="#ç¼–è¯‘å™¨å¦‚ä½•åˆ¤æ–­å“ªäº›å˜é‡åº”è¯¥ä¿å­˜" class="headerlink" title="ç¼–è¯‘å™¨å¦‚ä½•åˆ¤æ–­å“ªäº›å˜é‡åº”è¯¥ä¿å­˜"></a>ç¼–è¯‘å™¨å¦‚ä½•åˆ¤æ–­å“ªäº›å˜é‡åº”è¯¥ä¿å­˜</h2>
<p>æˆ‘æŸ¥é˜…äº† Rust ç¼–è¯‘å™¨çš„æºç ï¼Œå‘ç°å˜é‡æ˜¯å¦è·¨è¶Š await å­˜æ´»ç”± <a target="_blank" rel="noopener" href="https://github.com/chenyukang/rust/blob/c089b1fe7d6b8ef5889f820fd8be4f78bb7efe42/compiler/rustc_mir_transform/src/coroutine.rs#L655-L660">locals_live_across_suspend_points å‡½æ•°</a> å†³å®šï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token comment documentation rust"><span class="token punctuation definition comment rust">///</span> The basic idea is as follows:
</span><span class="token comment documentation rust"><span class="token punctuation definition comment rust">///</span> - a local is live until we encounter a `StorageDead` statement. In
</span><span class="token comment documentation rust"><span class="token punctuation definition comment rust">///</span>   case none exist, the local is considered to be always live.
</span><span class="token comment documentation rust"><span class="token punctuation definition comment rust">///</span> - a local has to be stored if it is either directly used after the
</span><span class="token comment documentation rust"><span class="token punctuation definition comment rust">///</span>   the suspend point, or if it is live and has been previously borrowed.
</span></span></code></pre>
<p>åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­ï¼Œ<code>let len = data.len()</code> æ„æˆäº†å¯¹ <code>data</code> çš„å€Ÿç”¨ï¼Œå› æ­¤ <code>data</code> è¢«ä¿ç•™åœ¨çŠ¶æ€æœºä¸­ã€‚æˆ–è®¸è¿™é‡Œä»æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼Ÿæˆ‘å»ç¤¾åŒºé—®é—®çœ‹ã€‚</p>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2>
<p>æ‰€æœ‰å®éªŒä»£ç å‡å¯åœ¨ä»¥ä¸‹é“¾æ¥æ‰¾åˆ°ï¼š<a target="_blank" rel="noopener" href="https://github.com/chenyukang/async-executor/tree/yukang-post/examples">async-executor-examples</a>ã€‚</p>
<p>åœ¨ Rust å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œä»£ç çš„ç»†å¾®è°ƒæ•´å¯èƒ½å¼•å‘æ€§èƒ½çš„æ˜¾è‘—æ³¢åŠ¨ã€‚æ·±å…¥ç†è§£çŠ¶æ€æœºç”Ÿæˆçš„å†…åœ¨æœºåˆ¶ï¼Œèƒ½åŠ©ä½ æ‰“é€ æ›´é«˜æ•ˆçš„å¼‚æ­¥ä»£ç ã€‚ä¸‹æ¬¡ç¼–å†™ <code>async fn</code> æ—¶ï¼Œä¸å¦¨è‡ªé—®ï¼šè¿™ä¸ªçŠ¶æ€æœºç©¶ç«Ÿæœ‰å¤šå¤§ï¼Ÿ</p>
]]></content>
  </entry>
  <entry>
    <title>Fiber Network: åŸºäº CKB å®ç°çš„é—ªç”µç½‘ç»œ</title>
    <link href="http://catcoding.me/p/fiber-network-on-ckb/"/>
    <id>http://catcoding.me/p/fiber-network-on-ckb/</id>
    <published>2025-03-16T08:53:04+00:00</published>
    <updated>2026-02-13T06:43:00.095220832+00:00</updated>
    <content type="html"><![CDATA[<p>æœ€è¿‘ä¸€å¹´æˆ‘åœ¨åš <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber">Fiber Network</a> è¿™ä¸ªæ–°çš„å¼€æºé¡¹ç›®ï¼Œä¸Šä¸ªæœˆåº•åˆšå¥½<a target="_blank" rel="noopener" href="https://x.com/FiberDevs/status/1895486339505893880">ä¸»ç½‘ç¬¬ä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒ</a>ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250316084708.png" alt="" /></p>
<p>è¿™ä¸ªé¡¹ç›®çš„æŒ‘æˆ˜è¿˜æ˜¯æŒºå¤§çš„ï¼Œä¸Šä¸»ç½‘åªæ˜¯ä¸€ä¸ªæ–°çš„å¼€å§‹ã€‚æˆ‘åœ¨å¼€å‘è¿‡ç¨‹ä¸­å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼Œè¿™æ˜¯æˆ‘å‰æ®µæ—¶é—´å†™çš„ä¸€ç¯‡å…³äº Fiber çš„å¤§è‡´ä»‹ç»ã€‚</p>
<h2 id="Fiber-ç®€ä»‹"><a href="#Fiber-ç®€ä»‹" class="headerlink" title="Fiber ç®€ä»‹"></a>Fiber ç®€ä»‹</h2>
<p>Fiber æ˜¯åŸºäº CKB æ„å»ºçš„é—ªç”µç½‘ç»œåè®®ï¼Œæ—¨åœ¨å®ç°å¿«é€Ÿã€å®‰å…¨ä¸”é«˜æ•ˆçš„é“¾ä¸‹æ”¯ä»˜è§£å†³æ–¹æ¡ˆã€‚å€Ÿé‰´äº†æ¯”ç‰¹å¸é—ªç”µç½‘ç»œçš„æ ¸å¿ƒç†å¿µï¼ŒFiber é’ˆå¯¹ CKB çš„ç‹¬ç‰¹æ¶æ„è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼Œæä¾›ä½å»¶è¿Ÿã€é«˜ååé‡çš„æ”¯ä»˜é€šé“ï¼Œé€‚ç”¨äºå¾®æ”¯ä»˜å’Œé«˜é¢‘äº¤æ˜“ç­‰åœºæ™¯ã€‚ä¸ä¼ ç»Ÿçš„é—ªç”µç½‘ç»œä¸åŒï¼ŒFiber æ‹¥æœ‰å¤šé¡¹å…³é”®ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>å¤šèµ„äº§æ”¯æŒ</strong>ï¼šä¸å†å±€é™äºå•ä¸€å¸ç§ï¼Œèƒ½å¤Ÿå¤„ç†å¤šç§èµ„äº§äº¤æ˜“ï¼Œä¸ºå¤æ‚çš„è·¨é“¾é‡‘èåº”ç”¨é“ºå¹³é“è·¯ã€‚</li>
<li><strong>å¯ç¼–ç¨‹æ€§</strong>ï¼šåŸºäº CKB çš„å›¾çµå®Œå¤‡æ™ºèƒ½åˆçº¦ï¼Œæ”¯æŒæ›´å¤æ‚çš„æ¡ä»¶æ‰§è¡Œå’Œä¸šåŠ¡é€»è¾‘ï¼Œæ‹“å±•äº†æ”¯ä»˜é€šé“çš„åº”ç”¨è¾¹ç•Œã€‚</li>
<li><strong>è·¨é“¾äº’æ“ä½œæ€§</strong>ï¼šåŸç”Ÿè®¾è®¡æ”¯æŒä¸å…¶ä»– UTXO é“¾ï¼ˆå¦‚æ¯”ç‰¹å¸ï¼‰çš„é—ªç”µç½‘ç»œäº¤äº’ï¼Œæå‡äº†é“¾é—´èµ„äº§æµåŠ¨æ€§å’Œç½‘ç»œå…¼å®¹æ€§ã€‚</li>
<li><strong>æ›´çµæ´»çš„çŠ¶æ€ç®¡ç†</strong>ï¼šå¾—ç›Šäº CKB çš„ Cell æ¨¡å‹ï¼ŒFiber å¯ä»¥æ›´é«˜æ•ˆåœ°ç®¡ç†é€šé“çŠ¶æ€ï¼Œé™ä½é“¾ä¸‹äº¤äº’çš„å¤æ‚åº¦ã€‚</li>
</ul>
<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä»æºç å±‚é¢ä»‹ç» Fiber çš„æ•´ä½“æ¶æ„å’Œä¸»è¦æ¨¡å—ï¼Œä»¥åŠé¡¹ç›®çš„åç»­å±•æœ›å’Œè§„åˆ’ã€‚</p>
<h3 id="å‰æçŸ¥è¯†"><a href="#å‰æçŸ¥è¯†" class="headerlink" title="å‰æçŸ¥è¯†"></a>å‰æçŸ¥è¯†</h3>
<ul>
<li>Rust, and <a target="_blank" rel="noopener" href="https://github.com/slawlor/ractor">actor framework</a>ï¼ŒFiber æ˜¯ä¸€ä¸ªå®Œå…¨ç”± Rust ç¼–ç¨‹è¯­è¨€æ‰€å®ç°çš„é¡¹ç›®ï¼Œå¦å¤–æˆ‘ä»¬åœ¨å®ç°ä¸­é‡‡ç”¨äº† actor model çš„æ¨¡å¼ï¼Œä¾èµ–ç¤¾åŒºçš„é¡¹ç›® <a target="_blank" rel="noopener" href="https://github.com/slawlor/ractor">ractor</a> æ¡†æ¶ã€‚</li>
<li>Lightning networkï¼ŒFiber çš„åŸºæœ¬æ€æƒ³æ²¿ç”¨äº† Bitcoin çš„é—ªç”µç½‘ç»œï¼ŒåŸºæœ¬åŸç†æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥  <a target="_blank" rel="noopener" href="https://github.com/lnbook/lnbook">Mastering lightning network</a> å’Œ Bolts: <a target="_blank" rel="noopener" href="https://github.com/lightning/bolts">lightning/bolts</a> æ˜¯éå¸¸æœ‰ç”¨çš„å‚è€ƒèµ„æ–™ã€‚</li>
<li>CKB transaction and contractï¼ŒFiber ä¼šé€šè¿‡ RPC ä¸ CKB node è¿›è¡Œäº¤äº’ï¼Œæ¯”å¦‚ funding transaction æˆ–è€… shutdown commitment transaction å¯èƒ½éœ€è¦é€šè¿‡ RPC æäº¤ç»™ CKB çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥æŒæ¡ Fiber éœ€è¦äº†è§£ä¸€äº› CKB åˆçº¦å¼€å‘æ–¹é¢çš„çŸ¥è¯†ã€‚</li>
</ul>
<h2 id="é‡è¦æ¨¡å—"><a href="#é‡è¦æ¨¡å—" class="headerlink" title="é‡è¦æ¨¡å—"></a>é‡è¦æ¨¡å—</h2>
<p>æˆ‘ä»¬ä»æœ€é«˜çº¬åº¦å»çœ‹ä¸€ä¸ª Fiber Nodeï¼Œä¸»è¦åŒ…å«ä¸‹é¢å‡ ä¸ªä¸»è¦æ¨¡å—ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250316082730.png" alt="" /></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>Network Actor æ˜¯ Fiber Node ä¸­è´Ÿè´£èŠ‚ç‚¹å†…å¤–çš„æ¶ˆæ¯é€šä¿¡</li>
<li>Network graph åŒ…å«ä¸€ä¸ªèŠ‚ç‚¹å¯¹äºæ•´ä¸ªç½‘ç»œé‡Œå…¶ä»–èŠ‚ç‚¹å’Œ channel çš„ä¿¡æ¯ï¼Œå½“ä¸€ä¸ª Fiber Node æ”¶åˆ°ä¸€ä¸ªæ”¯ä»˜è¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šå°è¯•ä» network graph ä¸­æ‰¾åˆ°ä¸€æ¡è·¯å¾„èƒ½å¤Ÿè§¦è¾¾æ”¶æ¬¾èŠ‚ç‚¹ï¼Œè¿™ä¸ª network graph ç»“æ„æ˜¯è·Ÿç€ç½‘ç»œä¸Šçš„ gossip ä¿¡æ¯ä¸æ–­æ›´æ–°çš„</li>
<li>PaymentSession è´Ÿè´£ç®¡ç†ä¸€ä¸ªæ”¯ä»˜çš„ç”Ÿå‘½å‘¨æœŸ</li>
<li><a target="_blank" rel="noopener" href="https://github.com/cryptape/fiber-sphinx">fiber-sphinx</a> æ˜¯æˆ‘ä»¬è‡ªå·±å®ç°çš„ onion packet åŠ è§£å¯† Rust åº“</li>
<li>Gossip æ˜¯ Fiber èŠ‚ç‚¹ä¹‹é—´çš„äº¤æ¢ç½‘ç»œæ¶ˆæ¯çš„åè®®ï¼Œç”¨äº Node å’Œ Channe çš„å‘ç°å’Œæ›´æ–°ã€‚</li>
<li>Watchtowerï¼Œè¿™é‡Œè´Ÿè´£ç›‘å¬ Fiber node æ‰€å…³å¿ƒçš„ channel é‡Œé¢çš„é‡è¦äº‹ä»¶ï¼Œå¦å¤–å¦‚æœæŸä¸ª Node æäº¤ä¸€ä¸ªè€çš„ commitment transactionï¼Œwatch tower è´Ÿè´£å‘å‡º revocation transaction æ¥è¿›è¡Œæƒ©ç½š</li>
<li>Cross hubï¼Œè¿™ä¸ªæ¨¡å—è´Ÿè´£è·¨é“¾çš„äº’æ“ä½œï¼Œæ¯”å¦‚ä»˜æ¬¾è€…é€šè¿‡ Bitcoin çš„é—ªç”µç½‘ç»œå‘å‡º Bitcoinï¼Œè€Œæ¥æ”¶è€…æ”¶åˆ°çš„æ˜¯ CKBï¼Œcross hub è¿™é‡Œä¼šè¿›è¡Œä¸€ä¸ªè½¬æ¢ï¼Œå°† Bitcoin çš„ payment å’Œ invoice å’Œ Fiber è¿™è¾¹çš„ payment å’Œ invoice è¿›è¡Œæ˜ å°„ç®¡ç†</li>
<li><a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber-scripts/tree/main">Fiber-script</a> åœ¨ä¸€ä¸ªå•ç‹¬çš„ä»£ç ä»“åº“ï¼Œè¿™é‡Œé¢åŒ…å«äº†ä¸¤ä¸ªä¸»è¦çš„åˆçº¦ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber-scripts/tree/main/contracts/funding-lock">funding-lock</a> æ˜¯ä¸€ä¸ªèµ„é‡‘é”å®šåˆçº¦ï¼Œä½¿ç”¨ ckb-auth åº“æ¥å®ç°ä¸€ä¸ª 2-of-2 å¤šé‡ç­¾åï¼Œ<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber-scripts/tree/main/contracts/commitment-lock">commitment-lock</a> å®ç°äº†Â <a target="_blank" rel="noopener" href="https://eprint.iacr.org/2022/1295">daric</a>Â åè®®æ¥ä½œä¸º Fiber çš„æƒ©ç½šæœºåˆ¶</li>
</ul>
<h3 id="Actor-Model-å’Œ-Channel-ç®¡ç†"><a href="#Actor-Model-å’Œ-Channel-ç®¡ç†" class="headerlink" title="Actor Model å’Œ Channel ç®¡ç†"></a>Actor Model å’Œ Channel ç®¡ç†</h3>
<p>Channel çš„ç®¡ç†æ˜¯é—ªç”µç½‘ç»œä¸­éå¸¸é‡è¦ã€ä¹Ÿæ˜¯å¼‚å¸¸å¤æ‚çš„éƒ¨åˆ†ã€‚å…¶ä¸­çš„å¤æ‚æ€§ä¸»è¦æ¥è‡ªäº Channel å†…éƒ¨æ•°æ®å’ŒçŠ¶æ€çš„æ”¹å˜æ¥è‡ªäºç½‘ç»œä¸Š peer ä¹‹é—´çš„äº¤äº’ï¼Œäº‹ä»¶çš„å¤„ç†å¯èƒ½å­˜åœ¨å¹¶å‘ä¸Šçš„é—®é¢˜ï¼Œä¸€ä¸ª Channel çš„åŒè¾¹å¯èƒ½åŒæ—¶éƒ½æœ‰ TLC çš„æ“ä½œã€‚</p>
<p>é—ªç”µç½‘ç»œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª P2P ç³»ç»Ÿï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡ç½‘ç»œæ¶ˆæ¯ç›¸äº’é€šä¿¡è¿›è€Œæ”¹å˜å†…éƒ¨çš„æ•°æ®çŠ¶æ€ï¼Œæˆ‘ä»¬å‘ç° Actor Model éå¸¸é€‚åˆè¿™ç§åœºæ™¯ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250316082740.png" alt="" /></p>
<p>Actor Model æå¤§åœ°ç®€åŒ–äº†ä»£ç å®ç°çš„å¤æ‚åº¦ï¼Œä½¿ç”¨ Actor model åæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨é”æ¥ä¿æŠ¤æ•°æ®çš„æ›´æ–°ï¼Œå½“ä¸€ä¸ª  Message handle ç»“æŸçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæŠŠ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/81014d36502b76e2637dfa414b5a3ee494942c41/src/fiber/channel.rs#L2276">channel state çš„æ•°æ®æ›´æ–°å†™å…¥ db</a>ã€‚è€Œåƒ rust lightning å¦‚æœæ²¡ç”¨ä½¿ç”¨ actor modelï¼Œå°±å¯èƒ½ä¼šæ¶‰åŠåˆ°éå¸¸å¤æ‚çš„<a target="_blank" rel="noopener" href="https://github.com/lightningdevkit/rust-lightning/blob/b8b1ef3149f26992625a03d45c0307bfad70e8bd/lightning/src/ln/channelmanager.rs#L1167">é”ç›¸å…³çš„æ“ä½œ</a>ã€‚</p>
<p>æˆ‘ä»¬çš„æ‰€æœ‰çš„é‡è¦æ¨¡å—éƒ½é‡‡ç”¨äº† Actor Modelï¼Œ<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/network.rs#L694-L789">Network Actor</a>è´Ÿè´£èŠ‚ç‚¹å†…å¤–çš„æ¶ˆæ¯é€šä¿¡ï¼Œæ¯”å¦‚ä¸€ä¸ªèŠ‚ç‚¹è¦ç»™å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹å‘é€ Open channel çš„æ¶ˆæ¯ï¼Œè¿™ä¸ªæ¶ˆæ¯é¦–å…ˆä¼šé€šè¿‡ Fiber node A çš„ channel actor å‘é€åˆ° network actorï¼Œnode A çš„ network actor é€šè¿‡æ›´åº•å±‚çš„ç½‘ç»œå±‚ tentacle å‘é€åˆ° node B çš„ network actorï¼Œç„¶å network actor å†å‘ç»™ node B é‡Œé¢çš„æ‰€å¯¹åº”çš„ channel actorã€‚</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250316082758.png" alt="" /></p>
<p>åœ¨ä¸€ä¸ª Fiber Node å†…éƒ¨ï¼Œæ¯ä¸€ä¸ªæ–°çš„ Channel æˆ‘ä»¬éƒ½ä¼šå»ºç«‹ä¸€ä¸ªå¯¹åº”çš„ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/channel.rs#L301-L308">ChannelActor</a>ï¼Œè€Œè¿™ä¸ª ChannelActorState é‡Œé¢åŒ…å«äº†è¿™ä¸ª Channel æ‰€éœ€è¦æŒä¹…åŒ–çš„æ‰€æœ‰çš„æ•°æ®ã€‚é‡‡ç”¨ Actor Model çš„å¦å¤–ä¸€ä¸ªå¥½å¤„å°±æ˜¯æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä»£ç å®ç°è¿‡ç¨‹ä¸­ç›´è§‚åœ°æŠŠ HTLC ç½‘ç»œåè®®ç›¸å…³çš„æ“ä½œæ˜ å°„åˆ°ä¸€ä¸ªå‡½æ•°é‡Œï¼Œæ¯”å¦‚ä¸‹å›¾ä¸­å±•ç¤ºäº† HTLC åœ¨å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´çš„æµè½¬è¿‡ç¨‹ï¼Œå¯¹äº A åˆ° B ä¹‹é—´çš„ AddTlc æ“ä½œï¼ŒèŠ‚ç‚¹ A é‡Œçš„ actor 0 æ‰€åº”å¯¹çš„ä»£ç å®ç°å°±æ˜¯ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/channel.rs#L1251">handle_add_tlc_command</a>ï¼Œè€ŒèŠ‚ç‚¹ B é‡Œçš„ actor 1 æ‰€å¯¹åº”çš„ä»£ç å®ç°æ˜¯ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/channel.rs#L1069">handle_add_tlc_peer_message</a>ã€‚</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250316082810.png" alt="" /></p>
<p>Channel ä¹‹é—´çš„ TLC æ“ä½œæ˜¯å¤æ‚åº¦éå¸¸é«˜çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬åœ¨å®ç°ä¸Šå»¶ç”¨äº† rust-lightning çš„æ–¹å¼ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/channel.rs#L2463-L2496">ä½¿ç”¨çŠ¶æ€æœºæ¥è¡¨ç¤º TLC çš„çŠ¶æ€</a>ï¼Œæ ¹æ® actor ä¹‹é—´çš„ commitment_sign å’Œ revoke_ack çš„æ¶ˆæ¯æ¥æ”¹å˜çŠ¶æ€æœºï¼Œæ€»çš„æ¥è¯´ AddTlc çš„æ“ä½œæµç¨‹å’Œä¸¤ä¸ª Peer TLC çŠ¶æ€çš„æ”¹å˜è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250316082818.png" alt="" /></p>
<h3 id="æ”¯ä»˜å’Œå¤šè·³è·¯ç”±"><a href="#æ”¯ä»˜å’Œå¤šè·³è·¯ç”±" class="headerlink" title="æ”¯ä»˜å’Œå¤šè·³è·¯ç”±"></a>æ”¯ä»˜å’Œå¤šè·³è·¯ç”±</h3>
<p>æ¯ä¸ª Fiber èŠ‚ç‚¹éƒ½é€šè¿‡ Network graph ä¿å­˜äº†è‡ªå·±å¯¹äºæ•´ä¸ªç½‘ç»œçš„äº†è§£æƒ…å†µï¼Œæœ¬è´¨ä¸Šè¿™æ˜¯ä¸€ä¸ªåŒå‘æœ‰å‘å›¾ï¼Œæ¯ä¸€ä¸ª Fiber èŠ‚ç‚¹å¯¹åº”äº Graph é‡Œé¢çš„ä¸€ä¸ª vertexï¼Œæ¯ä¸€ä¸ª Channel å¯¹åº”äº Graph é‡Œé¢çš„ä¸€ä¸ª edgeï¼Œå‡ºäºéšç§ä¿æŠ¤çš„éœ€æ±‚ï¼ŒChannel çš„çœŸå® balance ä¸ä¼šå¹¿æ’­åˆ°ç½‘ç»œä¸­ï¼Œæ‰€æœ‰ edge çš„å¤§å°æ˜¯ Channel çš„ capacityã€‚</p>
<p>åœ¨æ”¯ä»˜å¼€å§‹å‰ï¼Œå‘èµ·è€…ä¼šé€šè¿‡è·¯å¾„è§„åˆ’æ‰¾åˆ°ä¸€æ¡é€šå¾€æ”¶æ¬¾è€…çš„è·¯å¾„ï¼Œå¦‚æœæœ‰å¤šæ¡è·¯å¾„å°±éœ€è¦æ‰¾åˆ°å„æ–¹é¢ç»¼åˆè€ƒè™‘æœ€ä¼˜çš„è·¯å¾„ï¼Œè€Œåœ¨ä¿¡æ¯ç¼ºå¤±çš„å›¾ä¸­æ‰¾åˆ°æœ€ä¼˜è·¯å¾„æ˜¯ä¸€ä¸ªåœ¨å·¥ç¨‹ä¸Šéå¸¸å…·æœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/lnbook/lnbook/blob/develop/12_path_finding.asciidoc#pathfinding-what-problem-are-we-solving">Mastering Lightning Network å¯¹è¿™ä¸ªé—®é¢˜æœ‰å¾ˆè¯¦ç»†çš„ä»‹ç»</a>ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250316082831.png" alt="" /></p>
<p>åœ¨ Fiber ä¸­ï¼Œæ”¯ä»˜åŠ¨ä½œç”±ç”¨æˆ·å‘ Fiber Node <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/rpc/payment.rs#L171-L209">é€šè¿‡ RPC å‘èµ·è¯·æ±‚</a>ï¼ŒèŠ‚ç‚¹æ”¶åˆ°è¯·æ±‚åä¼šåˆ›å»ºå¯¹åº”çš„ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/network.rs#L1866-L1871">PaymentSession</a> æ¥è¿½è¸ªæ”¯ä»˜çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>ç›®å‰æˆ‘ä»¬çš„è·¯å¾„è§„åˆ’çš„ç®—æ³•æ˜¯ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/graph.rs#L914-L925">å˜å½¢çš„ Dijkstra ç®—æ³•</a>ï¼Œè¿™ä¸ªç®—æ³•æ˜¯é€šè¿‡ target å¾€ source æ–¹å‘æ‰©å±•çš„ï¼Œæœç´¢è·¯å¾„çš„è¿‡ç¨‹ä¸­é€šè¿‡æŠ˜ç®—æ”¯ä»˜æˆåŠŸçš„æ¦‚ç‡ã€feeã€TLC çš„ lock time è¿™äº›å› ç´ åˆ°ä¸€ä¸ª <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/graph.rs#L1110">weight æ¥è¿›è¡Œæ’åº</a>ã€‚å…¶ä¸­çš„æ¦‚ç‡ä¼°ç®—æ¥è‡ªäºæ¯æ¬¡æ”¯ä»˜çš„ç»“æœè®°å½•å’Œåˆ†æï¼Œå®ç°åœ¨ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/history.rs#L481-L506">eval_probability</a>ã€‚è·¯å¾„çš„é€‰æ‹©è´¨é‡å¥½åå¯¹äºæ•´ä¸ªç½‘ç»œçš„æ•ˆç‡å’Œæ”¯ä»˜çš„æˆåŠŸç‡éå¸¸é‡è¦ï¼Œè¿™éƒ¨åˆ†æˆ‘ä»¬ä»Šåå°†ä¼šç»§ç»­æ”¹è¿›ï¼Œ<em>Multipart payments (MPP)</em> ä¹Ÿæ˜¯ä¸€ä¸ªä»Šåå¯èƒ½è¦å®ç°çš„åŠŸèƒ½ã€‚</p>
<p>è·¯å¾„è§„åˆ’å®Œæˆåä¸‹ä¸€æ­¥å°±æ˜¯<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/network.rs#L1634-L1656">æ„å»º Onion Packet</a>ï¼Œç„¶åç»™é€šè¿‡ source node å‘èµ· <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/network.rs#L1657-L1667">AddTlcCommand</a>ã€‚åç»­å¦‚æœ TLC å¤±è´¥æˆ–è€…æˆåŠŸä¼šé€šè¿‡äº‹ä»¶é€šçŸ¥çš„æ–¹å¼å¤„ç†ã€‚</p>
<p>æ•´ä¸ªæ”¯ä»˜çš„è¿‡ç¨‹å¯èƒ½ä¼šå‘ç”Ÿå¤šæ¬¡çš„é‡è¯•ï¼Œä¸€ä¸ªå¸¸è§çš„åœºæ™¯å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨ capacity ä½œä¸º Graph é‡Œè¾¹çš„å®¹é‡ï¼Œå¯èƒ½è·¯å¾„è§„åˆ’å‡ºæ¥çš„è·¯çº¿æ— æ³•çœŸå®æ»¡è¶³æ”¯ä»˜çš„å¤§å°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿”å›é”™è¯¯å¹¶æ›´æ–° Graphï¼Œç„¶åå†ç»§ç»­è‡ªåŠ¨å‘èµ·<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/network.rs#L1767-L1772">ä¸‹ä¸€æ¬¡è·¯å¾„è§„åˆ’å°è¯•è¿›è¡Œæ”¯ä»˜</a>ã€‚</p>
<h3 id="èŠ‚ç‚¹å¹¿æ’­åè®®-Gossip"><a href="#èŠ‚ç‚¹å¹¿æ’­åè®®-Gossip" class="headerlink" title="èŠ‚ç‚¹å¹¿æ’­åè®® Gossip"></a>èŠ‚ç‚¹å¹¿æ’­åè®® Gossip</h3>
<p>Fiber çš„èŠ‚ç‚¹ä¹‹é—´çš„é€šè¿‡ç›¸äº’å‘é€å¹¿æ’­æ¶ˆæ¯äº¤æ¢æ–°çš„ Node å’Œ Channel ä¿¡æ¯ï¼ŒFiber ä¸­çš„ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/gossip.rs#L293-L331">Gossip æ¨¡å—</a>å®ç°äº† <a target="_blank" rel="noopener" href="https://github.com/lightning/bolts/blob/master/07-routing-gossip.md">Botls 7 å®šä¹‰çš„ routing gossip</a>ã€‚åœ¨å®ç°è¿‡ç¨‹ä¸­æˆ‘ä»¬çš„ä¸»è¦æŠ€æœ¯å†³ç­–åœ¨è¿™ä¸ª <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/pull/308">PR: Refactor gossip protocol</a>é‡Œé¢æœ‰æè¿°ã€‚</p>
<p>å½“ä¸€ä¸ª Node èŠ‚ç‚¹ç¬¬ä¸€æ¬¡å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šé€šè¿‡é…ç½®æ–‡ä»¶é‡Œçš„ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/network.rs#L3169-L3174">bootnode_addrs</a>æ¥çš„è¿æ¥ç¬¬ä¸€æ‰¹ peersï¼Œå¹¿æ’­æ¶ˆæ¯çš„ç±»å‹æœ‰ä¸‰ç±»ï¼š<code>NodeAnnouncement</code> ã€<code>ChannelAnnouncement</code> ã€<code>ChannelUpdate</code> ã€‚</p>
<p>Fiber ä¼šæŠŠæ”¶åˆ°çš„<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/store/store.rs#L482-L711">å¹¿æ’­çš„åŸå§‹æ•°æ®ä¿å­˜ä¸‹æ¥</a>ï¼Œè¿™æ ·æ–¹ä¾¿é€šè¿‡ timestamp + message_id ç»„åˆçš„ cursor æ¥å¯¹å¹¿æ’­æ¶ˆæ¯è¿›è¡Œæ£€ç´¢ï¼Œä»¥æ–¹ä¾¿æ¥è‡ª peer node çš„ query è¯·æ±‚ã€‚</p>
<p>å½“ä¸€ä¸ªèŠ‚ç‚¹å¯åŠ¨çš„æ—¶å€™ï¼ŒGraph æ¨¡å—ä¼šé€šè¿‡ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/graph.rs#L361">load_from_store</a>æ¥è¯»å–æ‰€æœ‰çš„ messagesï¼Œé‡æ–°æ„å»ºè‡ªå·±çš„ network graphã€‚</p>
<p>æˆ‘ä»¬é‡‡ç”¨åŸºäºè®¢é˜…çš„æ–¹å¼åœ¨ç½‘ç»œä¸­ä¼ æ’­æ¶ˆæ¯ã€‚ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦ä¸»åŠ¨å‘å¦ä¸€ä¸ªèŠ‚ç‚¹å‘é€å¹¿æ’­æ¶ˆæ¯è¿‡æ»¤å™¨ï¼ˆBroadcastMessagesFilterï¼‰ï¼Œå¦ä¸€ä¸ªèŠ‚ç‚¹æ”¶åˆ°äº†è¯¥æ¶ˆæ¯ä¹‹åä¼šä¸ºå…¶åˆ›å»ºå¯¹åº”çš„ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/gossip.rs#L599-L614">PeerFilterActor</a>ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œåˆ›å»º Gossip æ¶ˆæ¯è®¢é˜…ã€‚é€šè¿‡åŸºäºè®¢é˜…çš„æ¨¡å‹è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥è®©å…¶ä»–èŠ‚ç‚¹æ¥æ”¶åœ¨ç‰¹å®šçš„ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/gossip.rs#L1027-L1049">cursor ä¹‹åæ¥æ”¶åˆ°æ–°ä¿å­˜çš„ Gossip æ¶ˆæ¯</a>ã€‚</p>
<h3 id="éšç§-Onion-åŠ è§£å¯†"><a href="#éšç§-Onion-åŠ è§£å¯†" class="headerlink" title="éšç§ Onion åŠ è§£å¯†"></a>éšç§ Onion åŠ è§£å¯†</h3>
<p>å¤„äºéšç§ä¿æŠ¤çš„éœ€æ±‚ï¼Œpayment çš„ TLC åœ¨å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´ä¼ æ’­çš„æ—¶å€™ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªèƒ½çŸ¥é“è‡ªå·±æ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å½“å‰èŠ‚ç‚¹æ¥æ”¶çš„ TLC çš„ amountã€expiryã€ä¸‹ä¸€ä¸ªä¼ æ’­çš„èŠ‚ç‚¹ç­‰ä¿¡æ¯ï¼Œè€Œæ— æ³•è·å¾—å…¶ä»–ä¸å¿…è¦çš„ä¿¡æ¯ï¼Œè€Œä¸”æ¯ä¸ª hop åœ¨å‘é€ TLC ç»™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ä¹Ÿéœ€è¦åšç›¸åº”çš„æ··æ·†ã€‚</p>
<p>ç±»ä¼¼çš„ï¼Œå¦‚æœ payment åœ¨æŸä¸ªèŠ‚ç‚¹ä¼ æ’­çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼Œè¿™ä¸ªèŠ‚ç‚¹ä¹Ÿå¯èƒ½è¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼Œè€Œè¿™ä¸ªé”™è¯¯ä¿¡æ¯ä¼šé€šè¿‡ payment çš„ route åå‘ä¼ é€’ç»™ payment çš„å‘èµ·èŠ‚ç‚¹ã€‚è¿™ä¸ªé”™è¯¯ä¿¡æ¯ä¹Ÿæ˜¯éœ€è¦ Onion åŠ å¯†çš„ï¼Œè¿™æ ·ç¡®ä¿ä¸­é—´èŠ‚ç‚¹æ— æ³•ç†è§£é”™è¯¯çš„å…·ä½“å†…å®¹ï¼Œè€Œåªæœ‰å‘é€è€…èƒ½å¤Ÿè·å¾—é”™è¯¯å†…å®¹ã€‚</p>
<p>æˆ‘ä»¬å‚è€ƒäº† rust-lightning åœ¨ <a target="_blank" rel="noopener" href="https://github.com/lightningdevkit/rust-lightning/blob/master/lightning/src/ln/onion_utils.rs">onion packet çš„å®ç°</a>ï¼Œå‘ç°å…¶å®ç°æ–¹å¼è¿˜æ˜¯ä¸å¤Ÿé€šç”¨ (ä¼šç»‘å®šäºå…¶é¡¹ç›®çš„å…·ä½“æ•°æ®ç»“æ„)ï¼Œæ‰€ä»¥æˆ‘ä»¬è‡ªå·±ä»å¤´å¼€å§‹å®ç°äº† <a target="_blank" rel="noopener" href="https://github.com/cryptape/fiber-sphinx/blob/develop/docs/spec.md">fiber-sphinx</a>ï¼Œæ›´è¯¦ç»†çš„å†…å®¹è¯·å‚è€ƒé¡¹ç›®çš„ specã€‚</p>
<p>æ¶‰åŠåˆ° Onion åŠ è§£å¯†çš„å‡ ä¸ªå…³é”®èŠ‚ç‚¹åœ¨è¿™ä¸‰ä¸ªåœ°æ–¹ï¼š</p>
<ul>
<li>send payment çš„æ—¶å€™<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/network.rs#L1640-L1666">åˆ›å»º onion packet</a>ï¼Œä½œä¸º AddTlcCommand é‡Œçš„ä¸€ä¸ªå­—æ®µå‘é€ç»™ç¬¬ä¸€ä¸ª hop</li>
<li>payment route ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹æ”¶åˆ° TLC ä¹‹åï¼Œå°è¯•å»è§£å¼€ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/channel.rs#L920-L937">Onion Packet çš„ä¸€å±‚</a>ï¼Œå°±åƒæ˜¯å‰¥ç¦»ä¸€å±‚æ´‹è‘±çš®ä¸€æ ·ï¼Œå¦‚æœåˆ¤æ–­è‡ªå·±æ˜¯æ¥æ”¶è€…åˆ™å¤„ç† payment settle ç›¸å…³çš„é€»è¾‘ï¼Œå¦‚æœå‘ç°åç»­è¿˜æœ‰æ¥æ”¶è€…åˆ™å¤„ç†äº† TLC ç›¸å…³çš„é€»è¾‘ä¹‹åç»§ç»­<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/channel.rs#L1037-L1064">å¾€ä¸‹ä¸€ä¸ª hop ä¼ é€’å‰©ä¸‹çš„ onion packet</a>ã€‚</li>
<li>å¦‚æœæŸä¸ª Hop åœ¨è½¬å‘ TLC çš„è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯å°±<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/channel.rs#L774-L797">ç”Ÿæˆä¸€ä¸ªæ–°çš„åŒ…å«æœ‰é”™è¯¯ä¿¡æ¯çš„ onion packet</a>ï¼Œå¹¶å‘å‰ä¸€ä¸ª hop å‘é€ onion packetã€‚</li>
<li>payment çš„å‘èµ·è€…æ”¶åˆ° TLC fail event çš„æ—¶å€™ï¼Œä»å…¶ä¸­<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/e7bb8874e308445fdf63a5bc538fc00c100f3dc9/src/fiber/network.rs#L1518-L1527">è§£å¼€åŒ…å«æœ‰é”™è¯¯ä¿¡æ¯çš„ onion packet</a>ï¼Œç„¶åæ ¹æ®é”™è¯¯ä¿¡æ¯å»åˆ¤æ–­æ˜¯å¦éœ€è¦é‡è¯•å’Œæ›´æ–° Network graphã€‚</li>
</ul>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250316082911.png" alt="" /></p>
<h3 id="Watchtower"><a href="#Watchtower" class="headerlink" title="Watchtower"></a>Watchtower</h3>
<p>Watchtower æ˜¯é—ªç”µç½‘ç»œä¸­çš„é‡è¦å®‰å…¨æœºåˆ¶ï¼Œä¸»è¦ç”¨äºå¸®åŠ©ç¦»çº¿ç”¨æˆ·é˜²æ­¢èµ„é‡‘è¢«ç›—ã€‚å®ƒé€šè¿‡å®æ—¶ç›‘æµ‹é“¾ä¸Šäº¤æ˜“ï¼Œå¹¶åœ¨å‘ç°è¿è§„è¡Œä¸ºæ—¶æ‰§è¡Œæƒ©ç½šäº¤æ˜“ï¼Œä»è€Œç»´æŠ¤é—ªç”µç½‘ç»œçš„å…¬å¹³æ€§å’Œå®‰å…¨æ€§ã€‚</p>
<p>Fiber çš„ watchtower å®ç°åœ¨ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/b5c38a800e94aaa368a4c8a8699f5db0c08ecfbd/src/watchtower/actor.rs#L73-L124">WatchtowerActor</a>é‡Œï¼Œè¿™ä¸ª actor ä¼šç›‘å¬ Fiber èŠ‚ç‚¹ä¸­å‘ç”Ÿçš„å…³é”®äº‹ä»¶ï¼Œæ¯”å¦‚ä¸€ä¸ªæ–°çš„ Channel åˆ›å»ºæˆåŠŸæ—¶å°†ä¼šæ”¶åˆ° <code>RemoteTxComplete</code>ï¼Œwatchtower å°±åœ¨æ•°æ®åº“é‡Œæ’å…¥ä¸€æ¡å¯¹åº”çš„è®°å½•æ¥å¼€å§‹ç›‘å¬è¿™ä¸ªé€šé“ï¼ŒChannel åŒæ–¹åå•†æˆåŠŸå…³é—­æ—¶ä¼šæ”¶åˆ° <code>ChannelClosed</code>ï¼Œwatchtower ä»æ•°æ®åº“ä¸­ç§»é™¤å¯¹åº”çš„è®°å½•ã€‚</p>
<p>åœ¨ Channel ä¸­ TLC äº¤äº’æ—¶å€™ï¼Œwatchertower å°†ä¼šæ”¶åˆ° <code>RemoteCommitmentSigned</code> å’Œ <code>RevokeAndAckReceived</code>ï¼Œåˆ†åˆ«å»æ›´æ–°æ•°æ®åº“ä¸­å­˜å‚¨çš„ <code>revocation_data</code> å’Œ <code>settlement_data</code>ï¼Œè¿™äº›å­—æ®µå°†ä¼šåœ¨åç»­åˆ›å»º revocation transaction å’Œ settlement trasaction çš„æ—¶å€™ç”¨åˆ°ã€‚</p>
<p>Watchtower çš„æƒ©ç½šæœºåˆ¶æ˜¯é€šè¿‡<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/b5c38a800e94aaa368a4c8a8699f5db0c08ecfbd/src/watchtower/actor.rs#L266">æ¯”è¾ƒ <code>commitment_number</code> </a>æ¥åˆ¤æ–­ CKB çš„é“¾ä¸Šäº¤æ˜“æ˜¯å¦ä½¿ç”¨äº†è€çš„ commitment transactionï¼Œå¦‚æœå‘ç°è¿è§„åˆ™æ„å»ºä¸€ä¸ª revocation transaction æäº¤åˆ°é“¾ä¸Šè¿›è¡Œæƒ©ç½šï¼Œå¦åˆ™å°±æ„å»ºå‘é€ä¸€ä¸ª settlement transaction æäº¤åˆ°é“¾ä¸Šã€‚</p>
<h3 id="å…¶ä»–æŠ€æœ¯å†³ç­–"><a href="#å…¶ä»–æŠ€æœ¯å†³ç­–" class="headerlink" title="å…¶ä»–æŠ€æœ¯å†³ç­–"></a>å…¶ä»–æŠ€æœ¯å†³ç­–</h3>
<ul>
<li>å­˜å‚¨ï¼šæˆ‘ä»¬ä½¿ç”¨ RocksDB ä½œä¸ºå­˜å‚¨å±‚ï¼Œå†™ä»£ç çš„è¿‡ç¨‹ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ serde æ¥åºåˆ—åŒ–ã€‚ä½†å› ä¸º scheme-lessï¼Œæ‰€ä»¥ä¸åŒç‰ˆæœ¬çš„æ•°æ®è¿ç§»ä»ç„¶æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ï¼Œæˆ‘ä»¬é€šè¿‡è¿™ä¸ª<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber/blob/develop/migrate/src/main.rs">ç‹¬ç«‹ç¨‹åº</a>æ¥è§£å†³ï¼Œæ¯”è¾ƒç²—æš´ï¼Œä½†ç›®å‰æ²¡æƒ³åˆ°æ›´å¥½çš„åŠæ³•ã€‚</li>
<li>åºåˆ—åŒ–ï¼šèŠ‚ç‚¹é—´çš„æ¶ˆæ¯ä½¿ç”¨ Molecule è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œå¸¦æ¥æ•ˆç‡ã€å…¼å®¹æ€§å’Œå®‰å…¨æ€§ä¼˜åŠ¿ã€‚è¦ç¡®ä¿ç¡®å®šæ€§ï¼Œè¿™æ ·ç›¸åŒçš„æ¶ˆæ¯åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šåºåˆ—åŒ–æ–¹å¼ç›¸åŒï¼Œè¿™å¯¹äºç­¾åç”Ÿæˆå’ŒéªŒè¯éå¸¸é‡è¦ã€‚</li>
</ul>
<h2 id="åç»­å±•æœ›"><a href="#åç»­å±•æœ›" class="headerlink" title="åç»­å±•æœ›"></a>åç»­å±•æœ›</h2>
<p>ç›®å‰ Fiber è¿˜å¤„äºå‰æœŸæ´»è·ƒå¼€å‘é˜¶æ®µï¼Œåç»­æˆ‘ä»¬å¯èƒ½å°†ç»§ç»­åšä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„æ”¹è¿›ï¼š</p>
<ul>
<li>ä¿®å¤è¿˜æœªå¤„ç†å¥½çš„ corner caseï¼Œå¢å¼ºé¡¹ç›®æ•´ä½“çš„å¥å£®æ€§</li>
<li>ç›®å‰çš„ cross hub è¿˜å¤„äº Demo é˜¶æ®µï¼Œæˆ‘ä»¬ä¼šå¯¹è¿™éƒ¨åˆ†å¢åŠ å¦‚ payment session ç­‰åŠŸèƒ½</li>
<li>å®Œå–„æ”¯ä»˜è·¯ç”±è§„åˆ’ç®—æ³•ï¼Œå¯èƒ½ä¼šå¼•å…¥å…¶ä»–è·¯å¾„æœç´¢ç­–ç•¥ï¼Œä»¥é€‚åº”ç”¨æˆ·ä¸åŒçš„è·¯ç”±åå¥½å’Œéœ€æ±‚</li>
<li>æ‰©å±•åˆçº¦çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å¼•å…¥åŸºäºç‰ˆæœ¬å·çš„æ’¤é”€æœºåˆ¶å’Œæ›´å®‰å…¨çš„ Point Time-Locked Contracts</li>
</ul>
<p>Letâ€™s scale P2P finance together! ğŸ©µ</p>
]]></content>
  </entry>
  <entry>
    <title>2024ï¼šç®€å•çš„ç†æƒ³ç”Ÿæ´»</title>
    <link href="http://catcoding.me/p/2024-summary/"/>
    <id>http://catcoding.me/p/2024-summary/</id>
    <published>2025-01-01T00:03:41+00:00</published>
    <updated>2026-02-13T06:43:00.090513841+00:00</updated>
    <content type="html"><![CDATA[<p>2024 å¹´å¿«ç»“æŸäº†ï¼Œåœ¨è¿™æœ€åçš„ä¸€ä¸¤ä¸ªå°æ—¶é‡Œæˆ‘å†™ç€è¿™ç¯‡å¹´ç»ˆæ€»ç»“å‡†å¤‡è·¨å¹´äº†ï¼Œé¡ºç€å¤§è‡´æ—¶é—´çº¿æ¥å›é¡¾ä¸€ä¸‹å°±å¥½äº†ã€‚</p>
<p>å¹´åˆå°±èµ·äº†ä¸ªå¥½å¤´ï¼Œä¼—å¤šåŠ å¯†è´§å¸å¼€å§‹ä¸Šæ¶¨ã€‚æ€»ä½“è€Œè¨€ï¼Œ2024 å¹´æ˜¯ä¸ªåŠ å¯†è´§å¸å’ŒåŒºå—é“¾çš„å¤§å¹´ã€‚æœ‰é‚£ä¹ˆä¸€å°æ®µæ—¶é—´æˆ‘æ¯å¤©éƒ½åœ¨å…³æ³¨æ¶¨è·Œï¼Œæ¸æ¸åœ°æˆ‘å‘ç°è¿™ä¸ªé¢†åŸŸæ¶¨è·Œéƒ½æ˜¯å¤ªé¢‘ç¹äº†ï¼Œè€Œè¿‡å¤šå…³æ³¨é™¤äº†æµªè´¹æ—¶é—´å¹¶æ²¡æœ‰ä»€ä¹ˆå¤§çš„ç”¨å¤„ã€‚å› ä¸ºä¸¤å¹´å‰å¼€å§‹åœ¨è¿™ä¸ªé¢†åŸŸå·¥ä½œï¼Œæ‰€ä»¥æˆ‘è‡ªç„¶ä¹Ÿä¼šæŠ•èµ„ä¸€äº›åŠ å¯†è´§å¸ã€‚åˆšå¼€å§‹æˆ‘ç¨å¾®æ¥è§¦äº†ä¸€ä¸‹åˆçº¦ï¼Œä½†å¾ˆå¿«äºæ‰äº†å‡ åƒå…ƒï¼Œç®—æ˜¯äº¤äº†å­¦è´¹ã€‚ç„¶åå¾ˆå¿«ç†æ™ºåœ°é€€å‡ºäº†ï¼Œåˆçº¦æœ¬è´¨ä¸Šæ¥è¯´å’ŒèµŒåšæœ‰ç‚¹ç±»ä¼¼ï¼Œé’±æ¥å¾—ä¹Ÿå¿«äºå¾—ä¹Ÿå¿«ï¼Œä½†å¤§æ¦‚ç‡æ˜¯è¦äºé’±çš„ã€‚</p>
<p>æˆ‘å¬ä»äº†ä¸€äº›è¡Œä¸šè€é¸Ÿçš„å»ºè®®ï¼Œæ‹¿ä½æ¯”ç‰¹å¸å°±è¡Œï¼Œå…¶ä»–çš„çœ‹ç€ä¹°ç‚¹ã€‚æˆ‘ä» 2023 å¹´å¼€å§‹é™†ç»­ä¹°å…¥äº†ä¸€äº›æ¯”ç‰¹å¸ï¼Œå½“æ—¶çš„ä»·æ ¼ä¸ç®—é«˜ï¼Œåˆ°ä»Šå¹´å¹´åº•çœ‹æ¥ä¹Ÿæœ‰ä¸å°‘æ¶¨å¹…äº†ã€‚æˆ‘æŠ±ç€é•¿æœŸæ‹¿ä½çš„å¿ƒæ€åœ¨ä¹°å…¥ï¼Œæ‰“ç®—è‡³å°‘æŒæœ‰å…«ä¹å¹´ä»¥ä¸Šã€‚æ‰€ä»¥ç°åœ¨æˆ‘åŸºæœ¬ä¸æ€ä¹ˆå…³å¿ƒä»·æ ¼äº†ï¼Œå¦‚æœä¹°äº†å°±å½“ä½œè¿™é’±æ˜¯å­˜åœ¨é‚£é‡Œå¥½äº†ï¼ŒæŠŠæ—¶é—´å¹…åº¦æ‹‰é•¿ï¼Œæˆ‘ç›¸ä¿¡æ¯”ç‰¹å¸æœªæ¥ä¼šæ›´å€¼é’±ã€‚æˆ‘æ„¿æ„ç›¸ä¿¡è¿™ä¸ªè¡Œä¸šæ˜¯å› ä¸ºä»æŠ€æœ¯çš„è§’åº¦è€ƒè™‘æ˜¯å³æœ‰è¶£åˆæœ‰æŒ‘æˆ˜ã€‚è¿™ä¸¤å¹´æ¥æˆ‘å·¥ä½œçš„é¡¹ç›®å’Œæ¯”ç‰¹å¸æ˜¯éå¸¸ç±»ä¼¼çš„ï¼Œå°±å½“ä½œä¸ºä¿¡ä»°å……å€¼ã€‚</p>
<p>2024 å¹´ 5 æœˆå¼€å§‹æˆ‘æŠ•å…¥åˆ°äº†å…¬å¸çš„ä¸€ä¸ªæ–°é¡¹ç›®å¼€å‘ä¸Šï¼Œè¿™æ˜¯ä¸ªå®Œå…¨å¼€æºçš„é¡¹ç›®å«ä½œ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/fiber">nervosnetwork/fiber</a>ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯ CKB ä¸Šçš„é—ªç”µç½‘ç»œå®ç°ã€‚æ‰€ä»¥ 2024 å¹´çš„å¤§éƒ¨åˆ†æ—¶é—´æˆ‘éƒ½ä¸“æ³¨äºè¿™ä¸ªé¡¹ç›®ï¼Œå› ä¸ºè¿™æ˜¯ä¸ªæ–°é¡¹ç›®æ‰€ä»¥å¾ˆå¤šåŠŸèƒ½éƒ½æ˜¯ä»å¤´å¼€å§‹å®ç°ï¼Œè¿™å¯¹äºç¨‹åºå‘˜æ¥è¯´æ—¶æ®µå¿«ä¹æ—¶å…‰ï¼Œæ¯•ç«Ÿç»´æŠ¤è€é¡¹ç›®å¾ˆå¤šæ—¶å€™éƒ½æ˜¯åœ¨è€ƒè™‘å…¼å®¹æ€§ï¼Œæ²¡æœ‰ä»€ä¹ˆå¤§é‡å†™ä»£ç çš„å¿«æ„Ÿã€‚</p>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E9%97%AA%E7%94%B5%E7%BD%91%E7%BB%9C">é—ªç”µç½‘ç»œ</a>ä¼¼ä¹ç°åœ¨å·²ç»è¿‡äº†æœ€ç«çš„æ—¶å€™ï¼Œä½†å´æ˜¯å¤å…¸åŒºå—é“¾æŠ€æœ¯çš„ä»£è¡¨ã€‚å¦‚ä½•åœ¨å»ä¸­å¿ƒçš„ç¯å¢ƒä¸­æ„å»ºå‡ºä¿¡ä»»é€šé“ï¼Œè¿™æ˜¯ä¸ªéå¸¸å¤æ‚çš„é—®é¢˜ï¼Œå¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬éƒ½æ˜¯åœ¨å‚è€ƒ <a target="_blank" rel="noopener" href="https://github.com/lightning/bolts/tree/master">BOLT</a>è¿™ä¸ªè§„èŒƒã€‚å¼€å‘è¿‡ç¨‹ä¸­ä¸€ç›´éœ€è¦è€ƒè™‘çš„æ˜¯è¿™æ ·å®‰å…¨ä¹ˆï¼Œå¦‚æœå¯¹æ–¹å‡ºé”™æˆ–è€…å‘å‡ºæ¶æ„çš„è¯·æ±‚ä¼šæ€æ ·ï¼Œchannel çš„åŸºæœ¬ä¿è¯æ˜¯ä»»ä½•æ—¶å€™ä»»æ„ä¸€æ–¹éƒ½å¯ä»¥é€€å‡ºï¼Œè€Œä¸ä¼šé€ æˆèµ„é‡‘ä¸Šçš„æŸå¤±ï¼Œå¦å¤–è¿˜éœ€è¦å…¼é¡¾çš„æ˜¯éšç§çš„é—®é¢˜ï¼Œæ‰€ä»¥æ”¯ä»˜çš„å¤šè·³ä¼ è¾“éœ€è¦ä½¿ç”¨æ´‹è‘±åŠ å¯†ï¼Œé”™è¯¯çš„è¿”å›é“¾è·¯ä¸Šä¹Ÿéœ€è¦ç”¨æ´‹è‘±åŠ å¯†ã€‚åæ­£æœ¬è´¨ä¸Šï¼Œè¿™äº›éƒ½å½’ç»“ä¸ºæ•°å­¦é—®é¢˜ï¼Œå¤šç­¾ã€åŠ å¯†å’Œè§£å¯†ã€å“ˆå¸Œæ—¶é—´é”åˆçº¦ï¼Œç¡®ä¿äº†äº¤æ˜“çš„ä¸å¯ä¼ªé€ æ€§å’Œéšç§æ€§ã€‚æˆ‘ä¸æ‰“ç®—ç»§ç»­åœ¨è¿™ç¯‡æ–‡ä¸­å†™æ›´å¤šå…³äºé—ªç”µç½‘ç»œçš„æŠ€æœ¯ç»†èŠ‚ï¼Œä¹Ÿè®¸ä»¥åä¼šå†™ä¸€ç³»åˆ—çš„ç›¸å…³æ–‡ç« ã€‚</p>
<p>æ€»ä½“æ¥è¯´ï¼Œ2024 å¹´åˆå¼€å¿ƒåœ°å†™äº†ä¸€å¹´ä»£ç ï¼Œç”šè‡³æˆ‘è§‰å¾—æŠ€æœ¯è¶Šåšè¶Šæœ‰æ„æ€äº†ï¼š
<img src="http://catcoding.me/images/ob_pasted-image-20241228233657.png" alt="" /></p>
<p>è¿œç¨‹å·¥ä½œä¸¤å¹´åï¼Œæˆ‘æ›´å¤šé‡‡ç”¨æŠŠé—®é¢˜ç•™åœ¨è„‘æµ·ä¸­ï¼Œæ—¶ä¸æ—¶æ‹¿å‡ºæ¥æ€è€ƒçš„å·¥ä½œæ–¹å¼ã€‚æœ‰å‡ æ¬¡è¿™æ ·çš„ç»å†ï¼Œæˆ‘åƒæ˜¯åœ¨ç¡è§‰çš„è¿‡ç¨‹ä¸­è¿˜åœ¨æ€è€ƒæŸä¸ªé—®é¢˜ï¼Œç„¶åç¬¬äºŒå¤©èµ·æ¥è¿˜è®°å¾—å½“æ—¶æƒ³å‡ºæ¥çš„åŠæ³•ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œæœ‰äº›é—æ†¾çš„æ˜¯æˆ‘ä»Šå¹´å‚ä¸ Rust ç­‰å¼€æºé¡¹ç›®çš„æ—¶é—´æ¯”è¾ƒå°‘äº†ï¼Œå†™æ–‡ç« ä¹Ÿæ¯”è¾ƒå°‘ã€‚ä¼¼ä¹åœ¨å…¬å¸çš„é¡¹ç›®ä¸Šå·¥ä½œå¾—è¶³å¤Ÿæœ‰è¶£ã€æ‰¾åˆ°äº†è¶³å¤Ÿçš„æ”¶è·æ„Ÿï¼Œæ²¡æœ‰å¤šå°‘åŠ¨åŠ›å’Œæ—¶é—´å»åšå…¶ä»–é¡¹ç›®ã€‚ä½†æ„æƒ³ä¸åˆ°çš„æ˜¯ä»Šå¹´å¹´åº•è¿˜æ˜¯æ”¶åˆ°äº† Rust åŸºé‡‘ä¼šçš„é‚®ä»¶ï¼Œæ„¿æ„èµ„åŠ©æˆ‘ä¸€å¹´ç»§ç»­åšè´¡çŒ®ã€‚æ‰€ä»¥æ˜å¹´æˆ‘åº”è¯¥è¿˜æ˜¯ä¼šæŠŠä¸€äº›ä¸šä½™æ—¶é—´æŠ•å…¥åˆ° Rust é¡¹ç›®ä¸Šï¼Œè¿™ä¹Ÿç®—æ˜¯æŠŠçˆ±å¥½æŠ˜è…¾æˆäº†è´£ä»»å’Œä¹‰åŠ¡ã€‚å¯ä»¥è¯´ Rust å»¶é•¿äº†æˆ‘çš„æŠ€æœ¯ç”Ÿå‘½ï¼Œè®©æˆ‘å¹¸è¿åœ°æŠ•å…¥åˆ°ä¸€å † Rust å¼€æºé¡¹ç›®ä¸Šï¼Œå¹¶ä¸”æ‰¾åˆ°é€‚åˆè‡ªå·±çš„å…¬å¸ï¼Œä»¥è¿œç¨‹çš„æ–¹å¼å·¥ä½œã€‚</p>
<p>å› ä¸ºæ•´å¤©é™¤äº†å¸¦å¨ƒå’Œå®…åœ¨å®¶ç¼–ç¨‹ï¼Œ2024 å¹´æˆ‘ä¼¼ä¹æ²¡è®¤è¯†ä»€ä¹ˆæ–°çš„äººï¼Œç¤¾äº¤åœˆå¾ˆå°ï¼Œç”šè‡³åˆ°äº†å¹´åº•æˆ‘æ‰æƒ³èµ·æ˜¯ä¸æ˜¯è¯¥çº¦ä¸Šè®¸ä¹…ä¸è§çš„æœ‹å‹çº¿ä¸‹èŠèŠã€‚æˆ‘ä¸çŸ¥é“å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™æœ‰ä¸€åŠæ˜¯è¿œç¨‹å·¥ä½œå¸¦æ¥çš„å‰¯ä½œç”¨ï¼Œå¦ä¸€åŠå°±æ˜¯äººåˆ°ä¸­å¹´åœ¨ç¤¾äº¤ä¸Šçš„éœ€æ±‚å°äº†ã€‚æˆ‘è¿˜åœ¨ Cambly ä¸Šç»ƒä¹ å£è¯­ï¼Œè¿™å·²ç»å˜æˆäº†æˆ‘å¼ºè¿«è‡ªå·±å’Œäººæ²Ÿé€šçš„ä¸€ä¸ªæ¸ é“ï¼Œæˆ‘æ¯å‘¨ä¸‰èŠ‚è¯¾ä¸€å…±ä¸€ä¸ªåŠå°æ—¶ï¼Œå…¶ä¸­ä¸€ä¸ªå°æ—¶å¤§å¤šæ•°éƒ½æ˜¯å’Œæˆ‘çš„å›ºå®šè€å¸ˆèŠï¼Œä»–æ¯”æˆ‘å¤§ 10 å²å·¦å³ï¼Œæˆ‘ä»¬èŠè¿‡å¾ˆå¤šè¯é¢˜ï¼Œæˆ‘ç»™ä»–ç§‘æ™®åŒºå—é“¾ç­‰æŠ€æœ¯é¢†åŸŸã€åšæ¨¡æ‹Ÿæ¼”è®²ç­‰ã€‚å¦å¤–æˆ‘å–œæ¬¢æ‰¾é‚£äº›ä¸€ç›´åœ¨æ—…æ¸¸çš„äººæˆ–è€…é€€ä¼‘äº†çš„äººèŠï¼Œå› ä¸ºé€šå¸¸èƒ½å¬åˆ°ä¸€äº›å¥½ç©çš„äº‹æƒ…ï¼Œæœ‰æ¬¡æœ‰ä¸ªä¸€ç›´æ»¡ä¸–ç•Œæ¼‚æµçš„äººå¯¹æˆ‘è¯´ä»–å¸Œæœ›çš„æ˜¯ die with my boots onï¼Œæˆ‘ä¸€ä¸‹å­æ²¡å¬å‡ºå…¶å«ä¹‰ï¼Œåæ¥é€šè¿‡ä»–çš„è§£é‡Šæˆ‘çŸ¥é“äº†è¿™ä¸ªä¿—è¯­çš„æ„æ€ï¼šä¸€ä¸ªç©¿ç€é´å­æ­»å»çš„äººä¼šä¸€ç›´ç”Ÿæ´»å’Œæˆ˜æ–—åˆ°æœ€åï¼Œä»–ä»¬åƒå¾€å¸¸ä¸€æ ·ç”Ÿæ´»æ—¶å»ä¸–ï¼Œè€Œä¸æ˜¯å› ä¸ºå¹´è€å’Œå› ç–¾ç—…ã€ä½“å¼±ç­‰å§åºŠä¸èµ·ï¼Œå¯¹ä»–æ¥è¯´ä»–å¸Œæœ›è‡ªå·±æ­»åœ¨æ—…æ¸¸çš„é€”ä¸­ã€‚æˆ‘æƒ³è¿™ç§ç”Ÿæ´»æ€åº¦çœŸæ˜¯å¤ªå¥½äº†ï¼Œè€Œä¸”ä»–ä¹Ÿåœ¨è·µè¡Œè‡ªå·±çš„è¿™ç§ç”Ÿæ´»æ–¹å¼ã€‚æˆ‘å–œæ¬¢çœ‹é‚£äº›ä¸€ç›´åœ¨è·¯ä¸Šçš„åšä¸»ï¼Œæ¯”å¦‚ <a target="_blank" rel="noopener" href="https://www.youtube.com/@shisanyao/videos">åä¸‰è¦å’Œæ‹³å¤´</a> å’Œ <a target="_blank" rel="noopener" href="https://www.youtube.com/@liuweiyuan">åˆ˜ä¼Ÿå…ƒçš„æ—…è¡Œ</a>ï¼Œå¯èƒ½æ­£æ˜¯å› ä¸ºæˆ‘å·²ç»ä¸å¤ªå¯èƒ½åšåˆ°åƒä»–ä»¬é‚£æ ·éšå¿ƒæ‰€æ¬²åœ°ç©è€ã€‚</p>
<p>è¯´åˆ°æ—…è¡Œï¼Œä»Šå¹´äº”æœˆåº•å…¬å¸å›¢å»ºæˆ‘ä»¬å»äº†å¤§ç†å¾…äº†ä¸€å‘¨ï¼Œé‚£é‡Œçš„é£æ™¯å’Œæ°”å€™éƒ½è¿˜æŒºä¸é”™ï¼Œæœ‰äº›åœ°æ–¹æ˜¾å¾—å•†ä¸šåŒ–å¤ªé‡ï¼Œä½†æ²¿ç€æ´±æµ·éª‘è¡Œå’Œåœ¨è‹å±±å¾’æ­¥éƒ½éå¸¸æƒ¬æ„ã€‚å¤å¤©æˆ‘å’Œå®¶äººå»äº†ä¸€è¶ŸåŒ—æ–¹ï¼Œèµ°çš„æ˜¯æ¯”è¾ƒçƒ­é—¨çš„è·¯çº¿ï¼Œé’å²›ã€å¨æµ·ã€å¤§è¿ã€‚ä¸è¿‡è¿™è¶Ÿå¾ˆç´¯ï¼Œå› ä¸ºæš‘å‡æœŸé—´éƒ½æ˜¯å®¶é•¿å¸¦ç€å­©å­ï¼Œæ‰€ä»¥å»å“ªé‡Œéƒ½æ˜¯äººæŒ¤äººï¼Œä½†å…¶å®å­©å­ä»¬ä¹Ÿè¿˜å¤ªå°ï¼Œä»–ä»¬åªæ˜¯æƒ³æ‰¾ä¸ªåœ°æ–¹ç©æ²™å­èµ¶æµ·ï¼Œè€Œå¯¹äºå†å²é—è¿¹ä¹‹ç±»çš„åœ°æ–¹åˆ™å®Œå…¨ä¸æ„Ÿå…´è¶£ã€‚</p>
<p>11 æœˆå…¬å¸ç»„ç»‡å»äº†è¶Ÿæ¸…è¿ˆï¼Œæˆ‘ä»¬åœ¨é‚£é‡Œä¸¾è¡Œäº†ç¬¬ä¸€æ¬¡çš„ <a target="_blank" rel="noopener" href="https://www.bitgetapps.com/zh-CN/news/detail/12560604322596">CKCON</a>ï¼Œæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡ç”¨è‹±è¯­åšæŠ€æœ¯æ¼”è®²ã€‚æ„Ÿè§‰æ¸…è¿ˆçš„åŸºç¡€è®¾æ–½è¿˜æœ‰å¾…æå‡ï¼Œæœ‰ä¸€æ¬¡æˆ‘ä¸€ä¸ªäººæ‰“è½¦ï¼Œå¸æœºå¥½åƒæ˜¯ä¸­é€”æ‹è¿›äº†åŸä¸­å°é“ä¸Šæ­ªæ­ªæ‰­æ‰­çš„ä¹±çªœï¼Œæˆ‘å¼€å§‹æ‹…å¿ƒè‡ªå·±ä¼šä¸ä¼šè¢«æ‹‰å»å‰²è…°å­ã€‚å…¶å®å¸æœºæ˜¯ä¸ªå¥½äººï¼Œåˆ°äº†ç»ˆç‚¹åæˆ‘æ‰å‘ç°è‡ªå·±çš„ Grab ä¸èƒ½ä»˜æ¬¾ï¼Œä»–å°±è€å¿ƒå¾—ç­‰æˆ‘å»æ‰¾äººå€Ÿç°é‡‘ã€‚</p>
<p>æˆ‘å¾ˆå–œæ¬¢å…¬å¸ç»„ç»‡çš„çº¿ä¸‹èšä¼šï¼Œä¸ä½†å¯ä»¥å’Œå¹³æ—¶åˆä½œçš„åŒäº‹è§é¢èŠèŠï¼Œä¹Ÿå¯ä»¥æš‚æ—¶ä»ä¸€ç›´å¸¦å¨ƒçš„ç”Ÿæ´»ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œæ¯æ¬¡å‡ºå»æˆ‘çš„æ„Ÿå—æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20241229004417.png" alt="" /></p>
<p>æ‰€ä»¥å¸¦å­©å­çœŸçš„å¾ˆç´¯ä¹ˆï¼Ÿç¡®å®æ¯”è¾ƒç´¯ï¼Œè€Œä¸”å¾—çœ‹è¿™ä¸ªå­©å­æ˜¯å‡ å²ã€‚æˆ‘å–œæ¬¢å¸¦ä¸¤ä¸‰å²åˆ°äº”å²è¿™ä¸ªå¹´é¾„æ®µçš„å­©å­ï¼Œå› ä¸ºè¿™æ—¶å€™çš„å­©å­éƒ½æ˜¯å¤©çœŸï¼Œåˆæ¯”è¾ƒå¬è¯ã€‚åƒæˆ‘å¤§å¥³å„¿åˆ°äº†ä¸ƒå²å…«å²ï¼Œå¼€å§‹æœ‰è‡ªä¸»æ„è¯†äº†å°±å¾ˆæ·˜æ°”ï¼Œå¾ˆå¤šæ—¶å€™ä¹Ÿä¸æ€ä¹ˆå¬è¯ï¼Œæœ‰æ—¶å€™ä¼šè®©æˆ‘ç„¦å¤´çƒ‚é¢ã€‚å°å­¦äºŒå¹´çº§çš„ä½œä¸šæ¯”è¾ƒå¤šï¼Œæˆ‘å¥³å„¿æ¯å¤©éœ€è¦åœ¨å®¶é‡ŒèŠ±å¤§æ¦‚ä¸€ä¸ªå°æ—¶æ¥å†™ä½œä¸šï¼Œè€Œä¸”ç°åœ¨çš„æ•°å­¦ä½œä¸šçœ‹èµ·æ¥å¾ˆå¤šåº”ç”¨é¢˜ï¼Œåƒæˆ‘å¥³å„¿è¿™ç§æ²¡æ¥å—è¿‡å¹¼å°è¡”æ¥çš„åšèµ·æ¥å°±å¾ˆæ…¢ï¼Œè‚¯å®šéœ€è¦å®¶é•¿å¸®å¿™ã€‚æœ‰æ—¶å€™å­©å­åšäº†åäº‹ï¼Œæˆ‘ä¼šæƒ³èµ·è‡ªå·±å°çš„æ—¶å€™ä¹Ÿåšè¿‡ç±»ä¼¼çš„äº‹æƒ…ï¼Œä½†æˆ‘ç°åœ¨å·²ç»å˜æˆäº†å­©å­çœ¼ä¸­é‚£ä¸ªä¸¥æ ¼çš„çˆ¶äº²äº†ã€‚æœ‰æ¬¡çˆ¶äº²çœ‹æˆ‘å¯¹å­©å­å‘ç«ï¼Œå°±å¯¹æˆ‘è¯´å¯¹å­©å­è¿˜æ˜¯è¦é€‚å½“å®½å®¹ä¸€äº›ï¼Œç„¶åæèµ·å°æ—¶å€™æ¯æ¬¡æ‰“äº†æˆ‘ä¹‹åéƒ½ä¼šå¿ƒé‡Œå¾ˆåæ‚”ï¼Œæˆ‘å¬äº†å°±å¾ˆæ„Ÿæ…¨ã€‚</p>
<p>ä»Šå¹´ä¸‹åŠå¹´å¼€å§‹ï¼Œæˆ‘åˆå¼€å§‹ç»å¸¸æ‰“ç¯®çƒäº†ã€‚åˆšå¼€å§‹ä¸»è¦æ˜¯ä¸ºäº†ç¼“è§£ä¹…åçš„ç–²åŠ³ï¼Œåæ¥å°±å˜æˆæ¯å¤©ä¸æ–­åœ°æå‡è‡ªå·±çš„æŠ•ç¯®æŠ€æœ¯ã€‚æ·±åœ³çš„ç§‹å†¬å­£èŠ‚å¾ˆèˆ’æœï¼Œæˆ‘ç»å¸¸ä¸­åˆ 11 ç‚¹åŠå»å°åŒºç¯®çƒåœºæŠ•ç¯®å·®ä¸å¤šä¸€ä¸ªå°æ—¶ï¼Œé¡ºä¾¿æ™’æ™’å¤ªé˜³ã€‚æ¯å¤©è¿™æ ·ç»ƒä¹ ä¹‹åæŠ•ç¯®æŠ€æœ¯æœ‰äº†å¾ˆå¤§çš„æå‡ï¼Œæ— äººé˜²å®ˆçš„æƒ…å†µä¸‹åŸºæœ¬æœ‰ 70% å·¦å³çš„å‘½ä¸­ç‡ã€‚ä¸€ä¸ªäººæŠ•ç¯®è¿™ç§äº‹æƒ…çœ‹èµ·æ¥å¾ˆæ¯ç‡¥å’Œæ— èŠï¼Œä½†å…¶å®æ²‰ä¸‹å¿ƒæ¥è¿åŠ¨çš„æ„Ÿå—éå¸¸å¥½ï¼Œæˆ‘æŠŠåˆ»æ„ç»ƒä¹ çš„å¿ƒæ€æŠ•å…¥åˆ°äº†è¿™ä¸ªé¡¹ç›®ä¸Šï¼Œé‚£ä¸€ä¸ªå°æ—¶å†…èƒ½è¾¾åˆ°ç±»ä¼¼å¿ƒæµçš„çŠ¶æ€ï¼Œæ—¶é—´å˜å¾—æ¸…æ¾ˆï¼Œä»¿ä½›åªæœ‰æˆ‘å’Œç¯®çƒäº†ã€‚æŠ•ç¯®æœ€é‡è¦çš„æ˜¯æŒæ¡å‡ºæ‰‹æ—¶å€™çš„å¹³è¡¡åº¦ï¼Œæ‰‹è…•å’Œæ‰‹æŒ‡ç”¨åŠ›ï¼Œè®©ç¯®çƒåæ—‹èµ·æ¥ï¼Œç»ƒä¹ å¤šäº†æŠ•ç¯®åŠ¨ä½œå°±å½¢æˆäº†è‚Œè‚‰è®°å¿†ï¼Œåªè¦åŠ¨ä½œåšå®Œå°±å¤§è‡´èƒ½çŸ¥é“æ˜¯å¦å‘½ä¸­ï¼Œç¯®çƒç©ºå¿ƒå…¥ç½‘çš„å£°éŸ³çœŸæ˜¯å¤ªæ‚¦è€³äº†ã€‚ç£¨ç»ƒæŠ€è‰ºçœŸæ˜¯ä¸€ç§æœ€å¥½çš„çŠ¶æ€ï¼Œè€Œç¼–ç¨‹ã€å†™ä½œã€ç¯®çƒéƒ½æ˜¯è¿™æ ·çš„äº‹æƒ…ã€‚</p>
<p>æ‰“ç¯®çƒå·²ç»æ˜¯æˆ‘æ•´æ•´ 20 å¹´çš„çˆ±å¥½äº†ï¼Œä½†æˆ‘ä»æœªå¥½å¥½ç»ƒä¹ è¿‡æŠ•ç¯®ï¼Œå¯æƒœå·¦è†ç›–åœ¨ 2017 å¹´ä¼¤è¿‡ä¸€æ¬¡ï¼Œè¿åŠ¨æ¿€çƒˆäº†å®¹æ˜“é…¸ç–¼ï¼Œæ‰€ä»¥å†ä¹Ÿä¸æ€ä¹ˆå»å’Œå¹´è½»äººæ‰“åŠåœºäº†ï¼Œå³ä½¿å¶å°”ç©ç©æ€»æ˜¯æ‹…å¿ƒè‡ªå·±å—ä¼¤ï¼Œåœ¨åœºä¸Šå˜å¾—ç•æ‰‹ç•è„šã€‚é‚£äº›ä¹‹å‰ç†æ‰€å½“ç„¶çš„äº‹æƒ…å˜å¾—å¥¢æ±‚äº†ï¼Œèƒ½åŠ›å’Œè‡ªç”±æ¸æ¸åœ°ä¸§å¤±ï¼Œè¿™çœŸæ˜¯å¤§é¾„å¸¦æ¥çš„åˆ‡èº«ç—›è‹¦ã€‚</p>
<p>æœ‰ä¸€æ¬¡æˆ‘å‚æ™šè¿˜åœ¨ç»ƒä¹ æŠ•ç¯®ï¼Œæœ‰ä¸ªçœ‹èµ·æ¥æ¯”æˆ‘å¤§ä¸ƒå…«å²çš„å¤§å“¥è¿‡æ¥ï¼Œæ¸æ¸åœ°æˆ‘ä»¬èŠäº†èµ·æ¥ã€‚æˆ‘çœ‹ä»–çš„ç¯®çƒé‹å¾ˆæ¼‚äº®ï¼Œä»–è¯´æ˜¯ä»–å„¿å­çš„ï¼Œåº”è¯¥å«ä½œç©ºå†›ä¸€å·ã€‚æˆ‘ä»¬è¾¹æŠ•ç¯®è¾¹èŠå¤©ï¼Œä¸€ç›´èŠåˆ°å¤©å®Œå…¨é»‘æ‰çœ‹ä¸åˆ°ç¯®ç­ã€‚æ²¡æƒ³åˆ°è¿™æ ·ä¸€ä¸ªåœ¨å›½ä¼å·¥ä½œçš„å¤§å“¥ä¹Ÿç»å¸¸ç¿»å¢™çœ‹æ–°é—»ï¼Œè¯´è¿™å‡ å¹´çš„æƒ…å½¢æ˜¯èªæ˜äººéƒ½åœ¨è›°ä¼å’Œä¼‘æ¯ã€‚è¿˜æœ‰ä¸€æ¬¡æˆ‘æ­£åœ¨æŠ•ç¯®ï¼Œåˆšå¥½ç¢°åˆ°ä¸€ä¸ªå¹¼å„¿å›­ç­çš„å°æœ‹å‹ä»¬ç»è¿‡ï¼Œå› ä¸ºçƒåœºä¸Šå°±åªæœ‰æˆ‘ä¸€ä¸ªäººåœ¨é”»ç‚¼ï¼Œä»–ä»¬å°±å›´åœ¨åœºè¾¹è§‚çœ‹ï¼Œæ¸æ¸åœ°æˆ‘æ¯è¿›ä¸€ä¸ªçƒå°æœ‹å‹ä»¬å°±å¼€å§‹æ¬¢å‘¼ï¼Œæ¯æ¬¡æ²¡è¿›å°±æƒ‹æƒœå¹å£°ï¼Œè¿™çœŸæ˜¯ä¸ªæœ‰è¶£çš„ç»å†ã€‚æ—¥å­å¤§å¤šå¹³æ·¡å¦‚æ°´ï¼Œä½†è¿™äº›å°ç¬é—´å´ç•™åœ¨äº†å¿ƒé‡Œã€‚</p>
<p>å›æƒ³èµ·æ¥ï¼Œä»Šå¹´ç”Ÿæ´»ä¸­çš„ä¸€äº›å…¶ä»–å˜åŒ–ï¼Œå½»åº•ä¸çœ‹æœ‹å‹åœˆï¼Œä¸æ€ä¹ˆè¿½æ–°é—»ï¼Œæ€»ä½“æ¥è¯´ä¿¡æ¯æ›´é—­å¡äº†ã€‚ä½† 2024 å´æ˜¯æˆ‘ç”Ÿæ´»ä¸Šæœ€æœ´ç´ å……å®çš„ä¸€å¹´ï¼Œä¸Šç­åšæ„Ÿå…´è¶£çš„é¡¹ç›®ä¸‹ç­åšå–œæ¬¢çš„è¿åŠ¨ï¼Œåœ¨æˆ‘åšäº†å¾ˆå¤šå‡æ³•åï¼Œç°åœ¨çš„ç”Ÿæ´»å¥½åƒå°±æ˜¯è‡ªå·±ç†æƒ³ä¸­çš„çŠ¶æ€ã€‚</p>
<p>ç¥å„ä½æ–°å¹´å¿«ä¹ï¼</p>
]]></content>
  </entry>
  <entry>
    <title>CKB new script verification with VM pause</title>
    <link href="http://catcoding.me/p/ckb-new-verify/"/>
    <id>http://catcoding.me/p/ckb-new-verify/</id>
    <published>2024-11-07T12:03:24+00:00</published>
    <updated>2026-02-13T06:43:00.093220799+00:00</updated>
    <content type="html"><![CDATA[<p>CKB ç›¸å…³æŠ€æœ¯æ–‡ç« ç¬¬ä¸‰ç¯‡ã€‚</p>
<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2>
<p>CKB çš„æ¯ä¸€ä¸ªäº¤æ˜“åœ¨æäº¤åˆ°äº¤æ˜“æ± ä¹‹å‰éƒ½ä¼šç»è¿‡ä¸€ä¸ª script verification çš„è¿‡ç¨‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯é€šè¿‡ CKB-VM æŠŠäº¤æ˜“é‡Œçš„ script è·‘ä¸€éï¼Œå¦‚æœå¤±è´¥äº†åˆ™ç›´æ¥ rejectï¼Œå¦‚æœé€šè¿‡äº†æ‰ä¼šç»§ç»­åé¢çš„æµç¨‹ã€‚</p>
<p><img src="http://catcoding.me/images/ob_what-is-verification.png" alt="" /></p>
<p>è¿™é‡Œçš„ script å°±æ˜¯ä¸€ç§å¯ä»¥åœ¨é“¾ä¸Šæ‰§è¡Œçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç§°ä¹‹ä¸º CKB ä¸Šçš„åˆçº¦ã€‚å®ƒæ˜¯å›¾çµå®Œå¤‡çš„ï¼Œæˆ‘ä»¬é€šå¸¸å¯ä»¥é€šè¿‡ Cã€Rust æ¥å®ç°è¿™äº› scriptï¼Œæ¯”å¦‚ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb-system-scripts">nervosnetwork/ckb-system-scripts</a> å°±æ˜¯ CKB ä¸Šçš„ä¸€äº›å¸¸ç”¨çš„ç³»ç»Ÿåˆçº¦ã€‚ç”¨æˆ·åœ¨å‘èµ·äº¤æ˜“çš„æ—¶å€™å°±è®¾ç½®å¥½ç›¸å…³çš„ scriptï¼Œæ¯”å¦‚ lock script æ˜¯ç”¨æ¥ä½œä¸ºèµ„äº§æ‰æ‰€æœ‰æƒçš„é‰´å®šï¼Œè€Œ type script é€šå¸¸ç”¨æ¥å®šä¹‰ cell è½¬æ¢çš„æ¡ä»¶ï¼Œæ¯”å¦‚å‘è¡Œä¸€ä¸ª User Define Token å°±éœ€è¦æŒ‡å®šå¥½ UDT æ‰€å¯¹åº”çš„ type scriptã€‚script æ˜¯é€šè¿‡ RISC-V æŒ‡ä»¤é›†çš„è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„ï¼Œæ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://docs.nervos.org/docs/script/intro-to-script">Intro to Script | Nervos CKB</a>ã€‚</p>
<h2 id="å¤§-cycle-äº¤æ˜“çš„æŒ‘æˆ˜"><a href="#å¤§-cycle-äº¤æ˜“çš„æŒ‘æˆ˜" class="headerlink" title="å¤§ cycle äº¤æ˜“çš„æŒ‘æˆ˜"></a>å¤§ cycle äº¤æ˜“çš„æŒ‘æˆ˜</h2>
<p>é€šå¸¸ä¸€ä¸ªç®€å•çš„ script åœ¨ CKB-VM é‡Œé¢æ‰§è¡Œæ˜¯éå¸¸å¿«çš„ï¼ŒVM ä¸Šè·‘å®Œä¹‹åä¼šè¿”å›ä¸€ä¸ª cycle æ•°ç›®ï¼Œè¿™ä¸ª cycle æ•°é‡å¾ˆé‡è¦ï¼Œæˆ‘ä»¬ç”¨æ¥è¡¡é‡ script æ ¡éªŒæ‰€è€—è´¹çš„è®¡ç®—é‡ã€‚ä¸€ä¸ªåˆçº¦çš„ cycle æ•°å¤šå°‘ï¼Œç†è®ºä¸Šæ¥è¯´ä¾èµ–äº VM è·‘çš„ä½¿ç”¨ç”¨äº†å¤šå°‘ä¸ªæŒ‡ä»¤ï¼Œè¿™ç”± VM åœ¨è·‘çš„æ—¶å€™å»è®¡ç®— <a target="_blank" rel="noopener" href="https://docs.nervos.org/docs/script/vm-cycle-limits">VM Cycle Limits</a>ã€‚</p>
<p>éšç€ä¸šåŠ¡çš„å¤æ‚ï¼Œé€æ¸å‡ºç°äº†ä¸€äº›å¤§ cycles çš„äº¤æ˜“ï¼Œè·‘è¿™äº›äº¤æ˜“å¯èƒ½ä¼šè€—è´¹æ›´å¤šçš„æ—¶é—´ï¼Œä½†æˆ‘ä»¬æ€»ä¸å¯èƒ½è®© VM ä¸€ç›´å ç€ CPUï¼Œæ¯”å¦‚åœ¨å¤„ç†æ–° block çš„æ—¶å€™ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/chenyukang/ckb/blob/8cb49e4d727f337a2c80e210507a9e277bab3391/chain/src/verify.rs#L79-L87">CPU åº”è¯¥åœ¨è®©æ¸¡å‡ºæ¥</a>ã€‚ä½†ä¹‹å‰ CKB-VM å¯¹è¿™å—çš„æ”¯æŒä¸å¤Ÿï¼Œä¸ºäº†è¾¾åˆ°å˜ç›¸çš„æš‚åœï¼Œå¤„ç†å¤§ cycles çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ª step cyclesï¼Œå‡è®¾æˆ‘ä»¬è®¾ç½®ä¸º 100 cyclesï¼Œæ¯æ¬¡å¯åŠ¨çš„æ—¶å€™å°±æŠŠ max_cycles è®¾ç½®ä¸º 100ï¼Œè¿™æ · VM åœ¨è·‘å®Œ 100 cycle çš„æ—¶å€™ä¼šé€€å‡ºï¼Œè¿”å›çš„ç»“æœæ˜¯ cycle limitation exceedï¼Œç„¶åæˆ‘ä»¬å°±çŸ¥é“è¿™ä¸ª script å…¶å®æ˜¯æ²¡è·‘å®Œçš„ï¼Œå…ˆæŠŠçŠ¶æ€ä¿å­˜ä¸º suspendï¼Œç„¶ååˆ‡æ¢åˆ°å…¶ä»–ä¸šåŠ¡ä¸Šåšå®Œå¤„ç†ä¹‹åå†ç»§ç»­æ¥è·‘ã€‚å›æ¥åå¦‚ä½•æ‰èƒ½æ¢å¤åˆ°ä¹‹å‰çš„æ‰§è¡ŒçŠ¶æ€å‘¢ï¼Œè¿™å°±éœ€è¦ä¿å­˜ VM çš„ <a target="_blank" rel="noopener" href="https://github.com/chenyukang/ckb/blob/aaa51583656f022ad64ec98d1fb0205fc2878dba/script/src/types.rs#L319-L333">snapshot</a>ï¼Œç›¸å½“äºç»™ VM å½“å‰çŠ¶æ€æ‰“äº†ä¸€ä¸ªå¿«ç…§ï¼š</p>
<p><img src="http://catcoding.me/images/ob_ckb-vm-snapshot.png" alt="" />
æ ¹æ®è¿™ä¸ªæœºåˆ¶ï¼Œæˆ‘ä»¬è€çš„ script æ ¡éªŒå¤§äº¤æ˜“çš„æ•´ä¸ªæµç¨‹æ˜¯é€šè¿‡ä¸€ä¸ª FIFO çš„é˜Ÿåˆ—ä¿å­˜å¤§äº¤æ˜“ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªåå°ä»»åŠ¡ä¸æ–­åœ°ä»è¿™ä¸ªé˜Ÿåˆ—ä¸­å–äº¤æ˜“è·‘ VMï¼Œæ¯æ¬¡éƒ½è·‘ 1000w cycle å·¦å³ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å°±å¯èƒ½åˆ‡æ¢å‡ºå»ï¼Œæ²¡è·‘å®Œçš„äº¤æ˜“ç»§ç»­æ”¾å…¥é˜Ÿåˆ—ç­‰å¾…ä¸‹ä¸€æ¬¡æ‰§è¡Œï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20241106114040.png" alt="" /></p>
<p>å¯¹åº”åˆ°ä»£ç å°±æ˜¯ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/develop/tx-pool/src/chunk_process.rs">ChunkProcess</a> è¿™ä¸ªå•ç‹¬æœåŠ¡æ¥å¤„ç†çš„ã€‚ç”±äº ChunkProcess æ˜¯ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡ï¼Œå®ƒçš„å¤„ç†æµç¨‹å’Œå…¶ä»–äº¤æ˜“çš„å¤„ç†æµç¨‹æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™æ ·ä¼šå¯¼è‡´ä»£ç çš„å¤æ‚åº¦å¢åŠ ï¼Œæ¯”å¦‚ï¼š</p>
<ol>
<li>è¦é’ˆå¯¹ ChunkProcess é‡Œé¢çš„äº¤æ˜“é¢å¤–åˆ¤æ–­ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/3d674d558e5574f0c77a52798775c903561a933a/tx-pool/src/process.rs#L321">ä¾‹å­ 1</a>, <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/3d674d558e5574f0c77a52798775c903561a933a/tx-pool/src/process.rs#L350">ä¾‹å­ 2</a></li>
<li>æš‚åœ / æ¢å¤ ChunkProcess å¤„ç†çš„æ—¶å€™ï¼Œéœ€è¦å¯¹ ckb-vm åšç›¸å…³çš„çŠ¶æ€ä¿å­˜å’Œæ¢å¤å¤„ç†ï¼Œå‚è€ƒç»“æ„ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/3d674d558e5574f0c77a52798775c903561a933a/script/src/types.rs#L308">TransactionSnapshot</a>, ä»£ç æ¯”è¾ƒå¤æ‚ä¸”å®¹æ˜“é—æ¼ï¼Œå†å²ä¸Šä¹Ÿæœ‰è¿‡ç›¸å…³çš„ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/pull/3188">bug 1</a>, <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/pull/3177">bug 2</a>, ä»¥åŠå®‰å…¨é—®é¢˜ã€‚</li>
<li>ä»£ç ä¸­åŒ…å«é‡å¤é€»è¾‘ï¼Œæ¯”å¦‚ <code>chunk_process</code> é‡Œçš„ <code>process_inner</code> å’Œ <code>_resumeble_process_tx</code>ã€‚</li>
<li>ç”±äºå®ƒåªèƒ½åŒæ—¶å¤„ç†ä¸€ä¸ªå¤§ cycle äº¤æ˜“ï¼Œåœ¨ tx pool æœ¬èº«æ¯”è¾ƒç©ºé—²çš„æƒ…å†µä¸‹å¦‚æœæ”¶åˆ°äº†å¤šä¸ªå¤§ cycle äº¤æ˜“ä¹Ÿä¸èƒ½å¹¶è¡Œå¤„ç†ï¼Œæ¯”å¦‚ .bit å›¢é˜Ÿä¹‹å‰æœ‰è¿‡åé¦ˆä»–ä»¬é€šè¿‡æœ¬åœ° rpc åŒæ—¶æäº¤å¤šä¸ªå¤§ cycle äº¤æ˜“ä¼šæ¯”è¾ƒæ…¢çš„é—®é¢˜ã€‚</li>
</ol>
<h2 id="CKV-VM-pause"><a href="#CKV-VM-pause" class="headerlink" title="CKV-VM pause"></a>CKV-VM pause</h2>
<p>è¿™äº›é—®é¢˜çš„æ ¹æœ¬æ˜¯ VM åªèƒ½é€šè¿‡ cycle step çš„æ–¹å¼æ¥æš‚åœï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼æ˜¯æˆ‘ä»¬ä»»ä½•æ—¶å€™æƒ³æš‚åœå°±æš‚åœï¼Œå°±æ˜¯ event based çš„æ–¹å¼ã€‚æ‰€ä»¥åæ¥ CKB-VM å›¢é˜Ÿåšäº†ä¸€äº›æ”¹è¿›ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb-vm/pull/348">ckb-vm æ–°çš„æš‚åœæ–¹å¼</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb-vm/pull/345">feat: Add alternative snapshot design. #345</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb-vm/pull/299">Make ckb-vm thread-safety #299</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/pull/3752">CKB feature: thread-safe vm</a></li>
</ul>
<p>è¿™ä¸ªæ–¹æ³•çš„æœ¬è´¨æ˜¯é€šè¿‡ VM çš„ <code>set_pause</code> æ¥å£ï¼ŒæŠŠä¸€ä¸ª <code>Arc&lt;AtomicU8&gt;</code> çš„ pause å…±äº«å˜é‡è®¾ç½®ç»™ VMã€‚ç„¶ååœ¨ VM å¤–é€šè¿‡æ›´æ–°è¿™ä¸ª pause çš„å˜é‡è®© VM è¿›å…¥æš‚åœçŠ¶æ€æˆ–è€…ç»§ç»­æ‰§è¡Œï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦ dump snapshot ç­‰æ“ä½œï¼Œå› ä¸º VM æ•´ä¸ªå°±è¿˜æ˜¯åœ¨å†…å­˜ä¸­ç­‰ç€ï¼š</p>
<p><img src="http://catcoding.me/images/ob_ckb-vm-pause.png" alt="" /></p>
<h2 id="æ–°çš„å®ç°æ–¹æ¡ˆ"><a href="#æ–°çš„å®ç°æ–¹æ¡ˆ" class="headerlink" title="æ–°çš„å®ç°æ–¹æ¡ˆ"></a>æ–°çš„å®ç°æ–¹æ¡ˆ</h2>
<p>åŸºäºè¿™äº›æ”¹è¿›æˆ‘ä»¬å¯ä»¥é‡æ–°è®¾è®¡å’Œå®ç° CKB verify è¿™éƒ¨åˆ†çš„ä»£ç ï¼Œä¸»è¦æ˜¯ä¸ºäº†ç®€åŒ–è¿™éƒ¨åˆ†ä»£ç ï¼Œå¹¶ä¸”æé«˜å¤§äº¤æ˜“å¤„ç†çš„æ•ˆç‡ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ queue based multiple worker æ–¹æ¡ˆï¼š</p>
<p><img src="http://catcoding.me/images/ob_new-ckb-verify.png" alt="" /></p>
<p>ä¸»è¦çš„æ ¸å¿ƒæ˜¯å°±æ˜¯è¿™æ®µå¼‚æ­¥æ‰§è¡Œ VM çš„é€»è¾‘ï¼š<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/develop/script/src/verify.rs#L1166-L1269">chunk_run_with_signal</a>ã€‚åšçš„è¿‡ç¨‹ä¸­å‘ç°ä¸€äº›å…¶ä»–é—®é¢˜ï¼š</p>
<ul>
<li>äº¤æ˜“æäº¤çš„æ—¶å€™ï¼Œ<code>SubmitLocalTx</code> å’Œ <code>SubmitRemoteTx</code> å¦‚æœ verify å¤±è´¥ç›®å‰ä¼šç«‹å³è¿”å› <code>Reject</code>ï¼Œå¦‚æœæ”¹æˆåŠ å…¥é˜Ÿåˆ—çš„æ–¹å¼ï¼Œè¿™ä¸ªç»“æœæ— æ³•å®æ—¶ç»™åˆ°ï¼Œæ‰€ä»¥åšäº†å¦‚ä¸‹æ”¹åŠ¨ï¼š
<ul>
<li>ä¼˜å…ˆå¤„ç†æœ¬åœ°çš„äº¤æ˜“ï¼Œæœ¬åœ°æäº¤çš„äº¤æ˜“ä¸ä¼šæ”¾å…¥ queueï¼Œè€Œæ˜¯ç›´æ¥ä¼šåœ¨ RPC çš„å¤„ç†é˜¶æ®µæ‰§è¡Œ</li>
<li>æ‰€æœ‰çš„æ¥è‡ªç½‘ç»œ peer çš„äº¤æ˜“éƒ½å…¨åˆ°æ”¾å…¥åˆ° queue</li>
</ul>
</li>
<li>åæ¥ CKB vm åˆæ–°å¢äº† spawn çš„å®ç°ï¼Œæ‰€ä»¥ä¼šæœ‰ parentã€child çš„æ¦‚å¿µï¼Œé‚£ä¹ˆ<code>Child VM</code> æ˜¯æ‰§è¡Œ syscall çš„æ—¶å€™æ‰§è¡Œ <code>machine.run</code> ï¼Œå¦‚æœä¸æ”¹è¿™å—æ‰§è¡Œ child vm çš„æ—¶å€™ä¸å¯æš‚åœ
<ul>
<li>åæ¥æˆ‘ä»¬è®¨è®ºäº†ä¹‹åå†³å®š spawn æ—¶æŠŠçˆ¶çš„ <code>Pause</code> ä¼ é€’ç»™å­ï¼Œç„¶åæš‚åœçš„æ—¶å€™ç»™çˆ¶çš„ <code>Pause</code> è®¾ç½®æš‚åœï¼Œè¿™æ ·æ‰€æœ‰çš„å­ machine åŒæ ·è¿”å› <code>VMError::Pause</code> ï¼ŒåŒæ—¶æŠŠå½“å‰çš„ machine æ ˆé‡æ–°å…¥æ ˆï¼Œæ¢å¤çš„æ—¶å€™ç»§ç»­æ‰§è¡Œï¼Œè¿™é‡Œé€»è¾‘æ¯”è¾ƒé‡ï¼Œç›¸å…³ä»£ç å®ç°ï¼š<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/6f643220c704138298e693b0ef737c56a98ed762/script/src/verify.rs#L1452">run_vms_child</a>ã€‚</li>
</ul>
</li>
<li>åæ¥ç”¨é‡æ–°è®¾è®¡äº† spawnï¼Œä½¿ç”¨äº†ä¸€ç§æ–°çš„ determined scheduler çš„æ–¹å¼å»ç®¡ç†æ‰€æœ‰çš„ vms å’Œ IOï¼Œä¹‹å‰å’Œ VM çš„ä½¿ç”¨è€…è§’åº¦æ¥è¯´ä¹‹å‰éœ€è¦å’Œ VM äº¤äº’ï¼Œç°åœ¨å˜æˆäº†éƒ½é€šè¿‡<a target="_blank" rel="noopener" href="https://github.com/chenyukang/ckb/blob/8cb49e4d727f337a2c80e210507a9e277bab3391/script/src/scheduler.rs#L207-L236"> scheduler æ¥ç®¡ç†</a>ã€‚å…³äº spawn çš„è®¾è®¡å‚è€ƒè¿™ä¸ªæ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/rfcs/pull/436/files">Update spawn syscalls</a>ã€‚</li>
</ul>
<hr />
<p>æ•´ä¸ª PR åœ¨è¿™é‡Œï¼š<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/pull/4291">New script verify with ckb-vm pause</a></p>
]]></content>
  </entry>
  <entry>
    <title>CKB RBF è®¾è®¡å’Œå®ç°</title>
    <link href="http://catcoding.me/p/ckb-rbf/"/>
    <id>http://catcoding.me/p/ckb-rbf/</id>
    <published>2024-11-06T11:55:13+00:00</published>
    <updated>2026-02-13T06:43:00.093220799+00:00</updated>
    <content type="html"><![CDATA[<p>CKB ç›¸å…³æŠ€æœ¯æ–‡ç« ç¬¬äºŒç¯‡ã€‚</p>
<h2 id="Replace-by-fee"><a href="#Replace-by-fee" class="headerlink" title="Replace by fee"></a>Replace by fee</h2><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3>
<p>å¦‚æœä¸€ä¸ªäº¤æ˜“æˆåŠŸå‘é€åˆ°äº¤æ˜“æ± ï¼Œä½†å¯èƒ½å‡ºç°å› ä¸ºè´¹ç”¨è¾ƒä½è€Œä¸€ç›´å¾—ä¸åˆ°å¤„ç†ã€‚ä¹‹å‰ CKB æ²¡æœ‰å…¶ä»–æªæ–½æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚</p>
<p>ä¾‹å¦‚ <a target="_blank" rel="noopener" href="https://www.notion.so/Dotbit-4-45e129cb4c434bd2902569aff67c4383?pvs=21">Dotbit 4 ä½åŸŸåæ³¨å†Œæ‹¥å µ</a> è¿™ä¸ªäº‹æ•…å‘ç”Ÿè¿‡ç¨‹ä¸­ï¼Œ<code>CKB</code> çš„åº”ç”¨æ–¹æ— æ³•ä½¿ç”¨ä»»ä½•æ–¹å¼æ¥å°½å¿«è®©è‡ªå·±çš„äº¤æ˜“è¢«æ‰“åŒ…ï¼Œè¿™å°±æ˜¯å¼•å…¥ <code>Replace-by-feeï¼ˆRBF)</code> çš„åŸå› ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœºåˆ¶æ¥æé«˜å·²ç»åœ¨äº¤æ˜“æ± é‡Œäº¤æ˜“çš„è´¹ç”¨ï¼Œæ›¿æ¢æ‰æ—§çš„äº¤æ˜“ï¼Œè®©æ–°çš„äº¤æ˜“å°½å¿«è¢«æ‰“åŒ…ã€‚</p>
<p>åœ¨æ–°çš„ <code>multi_index_map</code> é‡æ„åï¼Œäº¤æ˜“åœ¨ <code>pending</code> é˜¶æ®µä¹Ÿä¼šæŒ‰ç…§äº¤æ˜“çš„ <code>score</code> æ¥ä¼˜å…ˆå¤„ç† (é€šå¸¸è´¹ç”¨é«˜çš„äº¤æ˜“ <code>score</code> ä¹Ÿä¼šé«˜)ï¼Œè¿™ä¼šé¿å…é«˜è´¹ç”¨çš„äº¤æ˜“è¢«é˜»å¡ä½ï¼Œæ‰€ä»¥ç†è®ºä¸Šè¿°éœ€è¦æ‰‹åŠ¨æé«˜è´¹ç”¨çš„æƒ…å†µä¼šå‡å°‘ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯éœ€è¦ RBF æ¥æ‰‹åŠ¨æé«˜äº¤æ˜“çš„è´¹ç”¨ï¼Œåº”å¯¹æ„å¤–çš„æƒ…å†µã€‚</p>
<p>å¦å¤–ï¼ŒRBF å¯èƒ½å°†å¤šä¸ªè€çš„äº¤æ˜“æ›¿æ¢å‡ºå»ï¼Œå› æ­¤ä¹Ÿæ˜¯å°†ä¸¤ä¸ªæˆ–å¤šä¸ªæ”¯ä»˜åˆå¹¶ä¸ºä¸€çš„æ–¹æ³•ï¼Œä¾‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶ <code>tx-a</code>, <code>tx-b</code>, <code>tx-c</code>, <code>tx-d</code> éƒ½ä¼šè¢« <code>tx-e</code> è¿™ä¸ªäº¤æ˜“æ›¿æ¢æ‰ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20241031103004.png" alt="" /></p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0125.mediawiki">bips/bip-0125.mediawiki</a></li>
<li><a target="_blank" rel="noopener" href="https://bitcoincore.org/en/faq/optin_rbf/">Bitcoin Core :: Opt-in RBF FAQ</a></li>
<li><a target="_blank" rel="noopener" href="https://www.notion.so/RBF-in-CKB-draft-2023-01-05-79736edd0c824fae98f1e7ee42d4e436?pvs=21">RBF in CKB(draft 2023.01.05)</a></li>
<li><a target="_blank" rel="noopener" href="https://bitcoinops.org/en/newsletters/2022/03/16/#ideas-for-improving-rbf-policy">Bitcoin Optech Newsletter #191 | Bitcoin Optech</a></li>
</ul>
<p>ä¸­æœ¬èªæœ€åˆçš„ Bitcoin ç‰ˆæœ¬ä¸­å°±æœ‰å¼•å…¥ä¸€ä¸ª <code>nSequence</code> çš„å­—æ®µï¼Œå¦‚æœç›¸åŒäº¤æ˜“çš„ <code>nSequence</code> æ›´é«˜ï¼Œå°±å¯ä»¥<a target="_blank" rel="noopener" href="https://github.com/trottier/original-bitcoin/blob/master/src/main.cpp#L434">æ›¿æ¢</a>ä¹‹å‰è€çš„äº¤æ˜“ï¼Œè¿™ä¸ªå®ç°çš„é—®é¢˜æ˜¯æ²¡æœ‰æ”¯ä»˜é¢å¤–çš„ feeï¼Œminer æ²¡ç”¨åŠ¨åŠ›å»æ›¿æ¢äº¤æ˜“ï¼Œå¦å¤–å› ä¸ºæ²¡æœ‰ rate-limiting ä»è€Œå¯¼è‡´å¯èƒ½è¢«æ»¥ç”¨ï¼Œæ‰€ä»¥ Bitcoin åœ¨ 0.3.12 ç‰ˆæœ¬ä¸­ç¦æ­¢äº†è¿™ä¸ªåŠŸèƒ½ã€‚åæ¥ Bitcoin é‡æ–°å¼•å…¥äº†æ–°çš„ RBF æ”¹è¿›ï¼Œä¸»è¦åŒ…æ‹¬éœ€è¦æ”¯ä»˜é¢å¤–çš„è´¹ç”¨æ¥æ›¿æ¢è€äº¤æ˜“ï¼Œå¦å¤–ä¸º RBF æŒ‡å®šäº†æ›´å¤šçš„é™åˆ¶æ¡ä»¶ã€‚</p>
<p>åœ¨ CKB ä¸Šæˆ‘ä»¬ä¹‹å‰åšè¿‡ä¸¤æ¬¡ RBF çš„ç›¸å…³è°ƒç ”ï¼Œå› ä¸ºä¹‹å‰ <code>Pending</code> æ˜¯ä¸€ä¸ª FIFO çš„æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥å¤„ç†æ›¿æ¢ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œåœ¨ RBF in CKB(draft 2023.01.05) å°è¯•å¼•å…¥ä¸€ä¸ª <code>high priority queue</code> æ¥å®ç° <code>inject-replace</code>ã€‚äº¤æ˜“æ± æ”¹é€ ä¹‹åï¼Œæ•´ä¸ªäº¤æ˜“æ± å¯å½“ä½œä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ‰€ä»¥åº”å¯¹ <code>RBF</code> ä¼šç®€å•å¾ˆå¤šã€‚</p>
<h2 id="æ–°å¢-RBF-çš„æµç¨‹"><a href="#æ–°å¢-RBF-çš„æµç¨‹" class="headerlink" title="æ–°å¢ RBF çš„æµç¨‹"></a>æ–°å¢ RBF çš„æµç¨‹</h2>
<p><img src="http://catcoding.me/images/ob_rbf2.png" alt="" /></p>
<h2 id="å®ç°ç»†èŠ‚"><a href="#å®ç°ç»†èŠ‚" class="headerlink" title="å®ç°ç»†èŠ‚"></a>å®ç°ç»†èŠ‚</h2>
<ul>
<li><code>pre-check</code> ä¸º entry åŠ å…¥åˆ° tx-pool ä¹‹å‰å¿…é¡»è¦åšçš„æ£€æŸ¥ï¼Œä¹‹å‰åªæ˜¯åšåŒèŠ±çš„æ£€æŸ¥ï¼Œæ–°å¢ RBF åå¦‚æœåŒèŠ±æ£€æŸ¥å¤±è´¥ï¼ˆè¿™é‡Œæ„å‘³ç€å†²çªï¼‰ï¼Œç»§ç»­åš RBF çš„ç›¸å…³æ£€æŸ¥ï¼Œå¦‚æœ RBF æ£€æŸ¥æˆåŠŸåˆ™ä¹Ÿè¿”å›æˆåŠŸï¼Œå¦åˆ™ç›´æ¥è¿”å›é”™è¯¯ã€‚è¿™é‡Œé»˜è®¤ç›´æ¥åš resolve_tx çš„æ£€æŸ¥ï¼Œå¦‚æœæˆåŠŸåˆ™èµ°æ­£å¸¸æµç¨‹ï¼Œç›®çš„æ˜¯ä¸ç»™æ­£å¸¸æµç¨‹å¢åŠ é¢å¤–æˆæœ¬ã€‚æ‰€ä»¥è¿™å°±æ˜¯<a target="_blank" rel="noopener" href="https://github.com/chenyukang/ckb/blob/44331ec5b9fcda217f33c471057fa479bd36a89f/tx-pool/src/process.rs#L216-L255"><code>pre-check</code> ä¿®æ”¹åçš„ä¸»è¦é€»è¾‘</a> ã€‚</li>
</ul>
<p>RBF çš„æ£€æŸ¥è§„åˆ™å‚è€ƒ Bitcoin çš„å…­æ¡ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/chenyukang/ckb/blob/2be67e79acec94369a96f786d3041e6cb00cf1f2/tx-pool/src/pool.rs#L483-L565">check_rbf åˆæ­¥å®ç°</a></p>
<pre class="line-numbers language-plain" data-language="plain"><code class="language-plain">å®ç°ç»†èŠ‚ï¼šï¼ˆBitcoin Core 0.12.0ï¼‰

~~1. äº¤æ˜“éœ€è¦å£°æ˜ä¸ºå¯æ›¿æ¢äº¤æ˜“~~ 
2. æ–°æ›¿æ¢äº¤æ˜“æ²¡æœ‰åŒ…å«æ–°çš„ã€æœªç¡®è®¤çš„ inputs
3. æ–°æ›¿æ¢äº¤æ˜“çš„äº¤æ˜“è´¹ç”¨æ¯”å¾…æ›¿æ¢äº¤æ˜“è´¹ç”¨é«˜
4. æ–°æ›¿æ¢äº¤æ˜“è´¹ç”¨å¿…é¡»æ¯”èŠ‚ç‚¹çš„ min relay fee é«˜
5. å¾…æ›¿æ¢äº¤æ˜“çš„å­äº¤æ˜“æ•°é‡ä¸å¯è¶…è¿‡ 100 æ¡ï¼ˆå³ä½¿ç”¨äº†è¯¥äº¤æ˜“çš„ä»»æ„ outputsï¼Œè¯¥äº¤æ˜“æ›¿æ¢åå®ƒä»¬å°†è¢«ä»å†…å­˜æ± ä¸­ç§»å‡ºï¼‰
6. å› ä¸º ckb æ˜¯åšäº†ä¸¤æ­¥æäº¤ï¼Œæˆ‘ä»¬æ–°å¢è§„åˆ™ï¼šè¢«æ›¿æ¢çš„äº¤æ˜“åªèƒ½æ˜¯ Pending æˆ–è€… Gap é˜¶æ®µçš„ã€‚
</code></pre>
<p>æˆ‘ä»¬ä¸ç»™äº¤æ˜“åŠ æ–°çš„å­—æ®µè¡¨ç¤ºæ˜¯å¦å¯ä»¥è¢«æ›¿æ¢ï¼Œè€Œæ˜¯é€šè¿‡èŠ‚ç‚¹æ˜¯å¦é…ç½®äº† <code>min_rbf_rate</code> æ¥å†³å®šæ˜¯å¦èƒ½åšæ›¿æ¢ï¼Œå› æ­¤ <code>è§„åˆ™ 1</code> ä¸åšå¯¹åº”è€ƒè™‘ã€‚</p>
<h3 id="æ›¿æ¢å’Œæäº¤"><a href="#æ›¿æ¢å’Œæäº¤" class="headerlink" title="æ›¿æ¢å’Œæäº¤"></a>æ›¿æ¢å’Œæäº¤</h3>
<p>ä¿®æ”¹ <code>tx-pool</code> çš„ <code>submit_entry</code> å‡½æ•°ï¼Œä¼ å…¥ <code>conflicts</code>ï¼Œåœ¨æ–°å¢ entry ä¹‹å‰æŠŠæ‰€æœ‰å†²çªçš„äº¤æ˜“åˆ é™¤ æ”¾å…¥ <code>rejected</code> è®°å½•ï¼Œå¦å¤–ç¡®ä¿æ‰€æœ‰æ£€æŸ¥å®Œæˆäº†ä¹‹åæ‰åšåˆ é™¤å’Œå†™æ“ä½œï¼š<a target="_blank" rel="noopener" href="https://github.com/chenyukang/ckb/blob/2be67e79acec94369a96f786d3041e6cb00cf1f2/tx-pool/src/process.rs#L99-L154">submit_entry é€»è¾‘</a>ã€‚</p>
<p>æœ€ç»ˆå®ç°åœ¨è¿™ä¸ª PR é‡Œ<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/pull/4079">Tx pool Replace-by-fee</a>ã€‚</p>
<h3 id="å¹¶å‘çš„-Bug"><a href="#å¹¶å‘çš„-Bug" class="headerlink" title="å¹¶å‘çš„ Bug"></a>å¹¶å‘çš„ Bug</h3>
<p>åœ¨æœ€åˆçš„å®ç°ç‰ˆæœ¬ä¸­ï¼Œéšè—äº†ä¸€ä¸ªå¹¶å‘çš„ bug åæ¥åœ¨æµ‹è¯•å‘ç°äº†ã€‚RBF çš„æ£€æŸ¥å¦‚æœæ”¾åœ¨ <code>pre-check</code> ä¸­ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹ä¸­çš„å¤šä¸ªäº¤æ˜“å‘ç”Ÿäº†å†²çªï¼Œinput resolve å¯èƒ½ä¼šå‡ºé—®é¢˜ã€‚<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/pull/4258">Fix concurrency issue for RBF</a> è¿™ä¸ª PR ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ï¼ŒæŠŠ RBF çš„å†²çªæ£€æŸ¥ç§»åŠ¨äº† submit entry ä¹‹å‰ï¼Œå› ä¸ºåœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ä¼šæŒæœ‰ write é”ã€‚</p>
<h3 id="cycling-attack"><a href="#cycling-attack" class="headerlink" title="cycling attack"></a>cycling attack</h3>
<p>åæ¥æˆ‘ä»¬åœ¨åšé—ªç”µç½‘ç»œçš„æ—¶å€™åˆå‘ç° RBF å¯èƒ½ä¼šå¼•å…¥ cycling attack çš„é£é™©ï¼Œè¿™ä¸ªæ”»å‡»é€šè¿‡æ„é€ å·§å¦™çš„æ–°äº¤æ˜“ï¼Œè®©æ”¯ä»˜è·¯å¾„ä¸Šçš„ä¸­é—´èŠ‚ç‚¹çš„ commitment tx ä¸èƒ½æŒ‰æ—¶ä¸Šé“¾ï¼Œ<a target="_blank" rel="noopener" href="https://blog.satsbridge.com/lightning-replacement-cycling-attack-explained-45636e41bc6f">Lightning Replacement Cycling Attack Explained</a>è¿™ç¯‡æ–‡ç« æœ‰æ›´è¯¦ç»†çš„æè¿°ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬åæ¥åˆåšäº†è¿™ä¹ˆä¸€ä¸ªæ”¹è¿›ï¼š<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/pull/4561">Recover possible transaction in conflicted cache when RBF</a> æ¥è§„é¿è¿™ä¸ªé—®é¢˜ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>CKB äº¤æ˜“æ± é‡æ„</title>
    <link href="http://catcoding.me/p/ckb-txpool-refactor/"/>
    <id>http://catcoding.me/p/ckb-txpool-refactor/</id>
    <published>2024-11-06T11:39:21+00:00</published>
    <updated>2026-02-13T06:43:00.093220799+00:00</updated>
    <content type="html"><![CDATA[<p>åœ¨ 11.9 å·æ¸…è¿ˆçš„ <a target="_blank" rel="noopener" href="https://share.foresightnews.pro/article/detail/70811">CKCON</a> ä¼šè®®ä¸Šæˆ‘ä¼šåšä¸€ä¸ªå…³äº CKB äº¤æ˜“æ± çš„æ¼”è®²ï¼Œè¿™æ˜¯æˆ‘å‡†å¤‡çš„ slides <a target="_blank" rel="noopener" href="https://ckb-tx-pool.vercel.app/1">Key Upgrades of the CKB Core</a> ã€‚æ‰€ä»¥è¿™æ®µæ—¶é—´åœ¨æ•´ç†ä¹‹å‰åšé¡¹ç›®çš„æ—¶å€™å†™çš„ä¸€äº›æ–‡æ¡£ï¼Œé¡ºä¾¿åˆ†äº«åˆ°è‡ªå·±çš„åšå®¢ä¸Šã€‚æ—¢ç„¶æˆ‘ä»¬æ•´ä¸ªé¡¹ç›®çš„æºç éƒ½æ˜¯å…¬å¼€çš„ï¼Œè¿™äº›æ–‡æ¡£å…¶å®ä¹Ÿæ˜¯å¯ä»¥åˆ†äº«çš„ã€‚</p>
<p>ç¬¬ä¸€æ¬¡å¬è¯´ CKB çš„è¯»è€…å¯ä»¥å‚è€ƒè¿™ä¸ªæ–‡æ¡£ä»¥äº†è§£ä»€ä¹ˆæ˜¯ CKB ä»¥åŠå¦‚ä½•å·¥ä½œçš„ï¼š<a target="_blank" rel="noopener" href="https://docs.nervos.org/docs/getting-started/how-ckb-works">How CKB Works | Nervos CKB</a>ã€‚</p>
<p>æˆ‘åŠ å…¥ Cryptape ä¹‹åä¸€å¹´å†…åšçš„ä¸»è¦å·¥ä½œï¼Œæ¶‰åŠåˆ°äº¤æ˜“æ± é‡æ„ã€Replace-by-fee åŠŸèƒ½ã€ä»¥åŠ new-verifyã€‚è¿™æ˜¯ç¬¬ä¸€ç¯‡å…³äºäº¤æ˜“æ± é‡æ„çš„æ–‡ç« ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯äº¤æ˜“æ± "><a href="#ä»€ä¹ˆæ˜¯äº¤æ˜“æ± " class="headerlink" title="ä»€ä¹ˆæ˜¯äº¤æ˜“æ± "></a>ä»€ä¹ˆæ˜¯äº¤æ˜“æ± </h2>
<p>åœ¨ bitcoin ä¸­äº¤æ˜“æ± å«ä½œ mempoolï¼Œæ¯”å¦‚ <a target="_blank" rel="noopener" href="https://mempool.space/">mempool - Bitcoin Explorer</a> è¿™ä¸ªç½‘ç«™å°±å¾ˆå¥½åœ°å±•ç¤ºäº†å…¶å½“å‰çš„çŠ¶æ€ã€‚</p>
<p>äº¤æ˜“æ± æ˜¯ bitcoin ä¸­çš„ä¸€ä¸ªé‡è¦çš„ç»„ä»¶ï¼Œä½†æ„Ÿè§‰ä¸“é—¨å…³äºè¿™å—çš„èµ„æ–™å¾ˆå°‘ï¼Œåªèƒ½é€šè¿‡ PR å’Œé‚®ä»¶åˆ—è¡¨ä¸Šçš„è®¨è®ºçœ‹åˆ°ä¸€äº›æ–‡æ¡£ã€‚ä½†äº¤æ˜“æ± éå¸¸é‡è¦ï¼Œå› ä¸ºä¸€ä¸ªäº¤æ˜“è¦ä¸Šé“¾å¿…é¡»ä¼šé€šè¿‡äº¤æ˜“æ± ï¼Œè€Œå…¶ä¸­çš„äº¤æ˜“æ‰“åŒ…ç®—æ³•æ¶‰åŠåˆ°å¦‚ä½•é€‰æ‹©åˆé€‚çš„äº¤æ˜“ï¼Œè¿™é‡Œé¢æœ‰å¾ˆå¤šå› ç´ éœ€è¦è€ƒè™‘ï¼Œæ‰€ä»¥åœ¨å®ç°ä¸Šä¹Ÿæ˜¯æ¯”è¾ƒå¤æ‚çš„ã€‚</p>
<p>å½“ä¸€ä¸ªäº¤æ˜“è¢«æäº¤åˆ°ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œæˆ–è€…ä¸€ä¸ªèŠ‚ç‚¹ä»ç½‘ç»œä¸­åŒæ­¥åˆ°äº¤æ˜“æ—¶ï¼Œè¿™ä¸ªäº¤æ˜“é¦–å…ˆéœ€è¦è¢«åŠ å…¥åˆ°äº¤æ˜“æ± ä¸­ï¼Œäº¤æ˜“æ± é‡Œä¼šæ ¹æ®ä¸€å®šçš„ç®—æ³•å»é€‰æ‹©ä¸‹ä¸€ä¸ªéœ€è¦è¢«æ‰“åŒ…çš„äº¤æ˜“ï¼Œå¦å¤–äº¤æ˜“æ± ä½œä¸ºä¸€ä¸ªç¼“å­˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå…¶è®¾ç½®ä¸€ä¸ªæœ€å¤§çš„ sizeã€‚æ‰€ä»¥äº¤æ˜“æ± é‡Œé¢æœ€é‡è¦çš„ä¸¤ä¸ªæ“ä½œå°±æ˜¯ packaging å’Œ evictingã€‚</p>
<p>äº¤æ˜“æ± é‡Œé¢çš„äº¤æ˜“å­˜åœ¨çˆ¶å­å…³ç³»ï¼Œæ‰“åŒ…çš„æ—¶å€™éœ€è¦ä»äº¤æ˜“é“¾çš„çº¬åº¦å»è€ƒè™‘ï¼Œåé¢çš„ Replace by fee è¿™äº›åŠŸèƒ½ä¹Ÿéœ€è¦å…³æ³¨æ•´ä¸ªäº¤æ˜“çš„æ‰€æœ‰å­äº¤æ˜“ã€‚</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20250221102123.png" alt="" /></p>
<h2 id="äº¤æ˜“æ± é‡æ„"><a href="#äº¤æ˜“æ± é‡æ„" class="headerlink" title="äº¤æ˜“æ± é‡æ„"></a>äº¤æ˜“æ± é‡æ„</h2><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3>
<p>æ ¹æ® RFC <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0020-ckb-consensus-protocol/0020-ckb-consensus-protocol.md#two-step-transaction-confirmation">consensus-protocol</a> çš„è®¾è®¡ï¼ŒCKB é‡Œçš„ tx-pool é‡‡ç”¨äº†ä¸¤æ®µæäº¤çš„æ–¹å¼ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20241031100804.png" alt="" /></p>
<p>ç›¸åº”åœ°åœ¨äº¤æ˜“æ± æœ€åˆå®ç°çš„æ—¶å€™ï¼Œ <code>ckb</code> çš„ä»£ç å®ç°ä¸­ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/rc/v0.111.x/tx-pool/src/pool.rs">tx-pool</a> åŒæ ·é‡‡ç”¨äº†ä¸‰ä¸ªç‹¬ç«‹çš„é˜Ÿåˆ—ï¼Œå…·ä½“å®šä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>pending</code> äº¤æ˜“åˆšåŠ å…¥åˆ°äº¤æ˜“æ± æ—¶å€™çš„çŠ¶æ€ï¼Œæˆ‘ä»¬æ¯æ¬¡åªèƒ½å¤„ç†ä¸å¤šäº <code>MAX_BLOCK_PROPOSALS_LIMIT</code> ä¸ªäº¤æ˜“ï¼Œäº¤æ˜“éœ€è¦å…ˆè¿›å…¥ <code>gap</code> å¤‡é€‰ï¼Œå…·ä½“ä»£ç é€»è¾‘åœ¨ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/3de5a20ce60619927f41f81d9584cab9d39d1275/tx-pool/src/block_assembler/mod.rs#L345C11-L345C11">update_proposals</a> ã€‚</li>
<li><code>gap</code> å·²ç»è¢« proposed äº†ï¼Œä½†æ˜¯è¿˜ä¸èƒ½è¢«æ‰“åŒ…ï¼Œéœ€è¦ç­‰ä¸€ä¸ªå—åæ‰èƒ½è¢«æ‰“åŒ…ï¼Œæ‰€ä»¥è¿™åªæ˜¯å†…éƒ¨ä¸­é—´è¿‡æ¸¡çŠ¶æ€ã€‚</li>
<li><code>proposed</code> äº¤æ˜“å¯ä»¥åŠ å…¥åˆ° <code>block_template.transactions</code> , æœ€ç»ˆæ‰“åŒ…åˆ° block é‡Œï¼Œå…·ä½“ä»£ç é€»è¾‘åœ¨ <a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/e75ab3faf0f7b1d182be2f1daa30f300cfefabc8/tx-pool/src/block_assembler/mod.rs#L195">block_assembler</a>ã€‚</li>
</ul>
<p>å®ç°ä¸­ <code>pending</code> å’Œ <code>gap</code> åŒæ ·éƒ½æ˜¯ä½¿ç”¨äº† <code>PendingQueue(LinkedHashMap)</code>ï¼Œè€Œ <code>proposed</code> é‡‡ç”¨äº† <code>SortedTxMap(HashMap + BTreeSet)</code> ï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token struct rust"><span class="token keyword rust">pub</span> <span class="token keyword struct rust">struct</span> </span><span class="token struct rust"><span class="entity name struct rust">TxPool</span> </span><span class="token struct rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    <span class="token keyword rust">pub</span>(crate) <span class="token variable other member rust">config</span><span class="token punctuation separator rust">:</span> TxPoolConfig,
    <span class="token comment documentation rust"><span class="token punctuation definition comment rust">///</span> The short id that has not been proposed
</span>    <span class="token keyword rust">pub</span>(crate) <span class="token variable other member rust">pending</span><span class="token punctuation separator rust">:</span> PendingQueue,
    <span class="token comment documentation rust"><span class="token punctuation definition comment rust">///</span> The proposal gap
</span>    <span class="token keyword rust">pub</span>(crate) <span class="token variable other member rust">gap</span><span class="token punctuation separator rust">:</span> PendingQueue,
    <span class="token comment documentation rust"><span class="token punctuation definition comment rust">///</span> Tx pool that finely for commit
</span>    <span class="token keyword rust">pub</span>(crate) <span class="token variable other member rust">proposed</span><span class="token punctuation separator rust">:</span> ProposedPool,

    ....

    <span class="token keyword rust">pub</span>(crate) <span class="token variable other member rust">expiry</span><span class="token punctuation separator rust">:</span> <span class="token keyword rust">u64</span>,
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>

</span></code></pre>
<p>è¿™æ ·çš„å®ç°å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>
<p>æˆ‘ä»¬ä¸å®¹æ˜“å¯¹æ‰€æœ‰åœ¨äº¤æ˜“æ± ä¸­çš„ entry åšç»Ÿä¸€æ’åºï¼Œè¿™æ ·ä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>ä¸€ä¸ª fee é«˜çš„äº¤æ˜“å¯èƒ½åœ¨ transaction å¤šçš„æƒ…å†µä¸‹åœ¨ pending é˜¶æ®µä¸€ç›´å¡ç€ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ pending å’Œ gap é˜¶æ®µåªæ˜¯æŒ‰ç…§æ—¶é—´é¡ºåºæ¥å¤„ç†ï¼Œåªåœ¨ proposed åçš„æ‰“åŒ…é˜¶æ®µæŒ‰ç…§äº¤æ˜“è´¹æ¥å¤„ç†ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/issues/3942">issue 3942</a> äº¤æ˜“æ± æ»¡äº†ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€äº› entry åš evictï¼Œæˆ‘ä»¬ç›®å‰çš„ evict é€»è¾‘å¾ˆ<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/blob/fdee47bbd87c66d8a0e54c3ac1f5386cb9aba643/tx-pool/src/pool.rs#L322">ç®€å•ç²—æš´</a>ã€‚æˆ‘ä»¬å¸Œæœ›å°½é‡é€‰æ‹©æœ€å° descendants çš„äº¤æ˜“ï¼Œè¿™æ ·èƒ½é¿å…åœ¨ evict è¿‡ç¨‹ä¸­åˆ é™¤è¿‡å¤šäº¤æ˜“ã€‚æˆ‘ä»¬ç›®å‰åœ¨ pending å’Œ gap é˜¶æ®µæ²¡æœ‰è®°å½• descendantsï¼Œè€Œéœ€è¦åŠ å…¥è¿™ä¸ªé€»è¾‘å°±å’Œ proposed é˜¶æ®µå®Œå…¨é‡å¤ï¼Œè€Œä¸”å› ä¸ºä¸ä¼šç»Ÿä¸€æ’åºï¼Œåç»­å®ç°ä¹Ÿä¸å®¹æ˜“ã€‚</li>
</ul>
</li>
<li>
<p>pending, gap å’Œ proposed é™¤äº†æ‰€é‡‡ç”¨çš„æ•°æ®ç»“æ„ä¸åŒå¤–ï¼Œæœ‰å¾ˆå¤šé€»è¾‘é›·åŒçš„ä»£ç ï¼Œæ¯”å¦‚ entry çš„æ–°å¢å’Œåˆ é™¤ç­‰æ“ä½œï¼ŒåŒæ ·éƒ½ç»´æŠ¤äº† deps å’Œ header_depsï¼Œresolve_conflict, resolve_conflict_header_dep, resolve_tx ç­‰å‡½æ•°çš„é€»è¾‘ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œä½†å®ç°ä¸Šæœ‰äº›ç»†å¾®å·®å¼‚ï¼Œè¿™å¯¼è‡´é•¿æœŸæ¥è¯´ä»£ç ä¸å®¹æ˜“ç»´æŠ¤ã€‚</p>
</li>
<li>
<p>åŒæ ·æˆ‘ä»¬åœ¨ <code>tx-pool</code> ä¸Šå¯¹ entry åšè¿­ä»£å’ŒæŸ¥è¯¢æ—¶ï¼Œéœ€è¦ä¾æ¬¡é’ˆå¯¹ pending, gap, proposed åšç›¸åŒçš„é€»è¾‘ï¼Œæ¯”å¦‚ resolve_conflict_header_dep è¿™æ ·çš„å‡½æ•°åœ¨ pool ä¸­æœ‰å‡ ä¸ªç±»ä¼¼çš„ï¼Œç”šè‡³ get_tx_with_cycles è¿™æ ·çš„å‡½æ•°ï¼Œéœ€è¦ä¾æ¬¡åˆ¤æ–­å„ä¸ªé˜Ÿåˆ—ã€‚</p>
</li>
<li>
<p>å®ç°å…¶ä»–åŠŸèƒ½ä¸æ–¹ä¾¿ï¼Œæ¯”å¦‚æˆ‘ä»¬å¦‚æœè¦å®ç° Replace by feeï¼Œå°±éœ€è¦æ‰¾äº¤æ˜“æ± ä¸­å’Œæ–°äº¤æ˜“æœ‰å†²çªçš„äº¤æ˜“ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸‰ä¸ªæ•°æ®ç»“æ„ä¸Šåˆ†åˆ«è¿›è¡Œæ£€æŸ¥æ‰èƒ½å¾—åˆ°ç»“æœã€‚</p>
</li>
</ul>
<h3 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h3>
<p>åŸºäºä»¥ä¸Šè§£å†³ç°æœ‰é—®é¢˜ã€åº”å¯¹æœªæ¥çš„æ½œåœ¨éœ€æ±‚ã€ä¿æŒä»£ç å¯ç»´æŠ¤æ€§çš„è§’åº¦ï¼ŒåŒæ—¶å‚è€ƒ <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/blob/322ec63b01499c1ec52d3912ee382ebd59f2366b/src/txmempool.h">Bitcoin txmempool</a> çš„å®ç°ï¼Œæˆ‘ä»¬æå‡ºå¼•å…¥ <strong>Multi_index_map</strong> å¯¹ tx-pool è¿›è¡Œé‡æ„ã€‚</p>
<p>æ€»ä½“æ–¹å‘æ˜¯æŠŠæ‰€æœ‰çš„ <code>entry</code> æ”¾å…¥ç»Ÿä¸€çš„æ•°æ®ç»“æ„ä¸­è¿›è¡Œç®¡ç†ï¼ŒåŠ å…¥ä¸€ä¸ªæ–°çš„å­—æ®µ <code>status</code> æ ‡è¯†ç›®å‰ <code>entry</code> æ‰€å¤„çš„é˜¶æ®µï¼Œç„¶åé€šè¿‡ index_map çš„æ–¹å¼æ ¹æ®ä¸åŒçš„å±æ€§è¿›è¡Œæ’åºå’Œè¿­ä»£ï¼š</p>
<pre class="line-numbers language-rust" data-language="rust"><code class="language-rust"><span class="token rust"><span class="token enum rust"><span class="token keyword rust">pub</span> <span class="token keyword enum rust">enum</span> <span class="entity name enum rust">Status</span> <span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    Pending<span class="token punctuation separator rust">,</span>
    Gap<span class="token punctuation separator rust">,</span>
    Proposed<span class="token punctuation separator rust">,</span>
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>

<span class="token annotation rust"><span class="token punctuation definition annotation rust">#</span><span class="token punctuation section group begin rust">[</span><span class="token variable annotation rust">derive</span><span class="token annotation parameters rust"><span class="token group rust"><span class="token punctuation section group begin rust">(</span></span></span><span class="token annotation parameters rust"><span class="token group rust">MultiIndexMap<span class="token punctuation separator rust">,</span> Clone</span></span><span class="token annotation parameters rust"><span class="token group rust"><span class="token punctuation section group end rust">)</span></span></span><span class="token punctuation section group end rust">]</span></span>
<span class="token struct rust"><span class="token keyword rust">pub</span> <span class="token keyword struct rust">struct</span> </span><span class="token struct rust"><span class="entity name struct rust">PoolEntry</span> </span><span class="token struct rust"><span class="token block rust"><span class="token punctuation section block begin rust">{</span>
    #[multi_index(hashed_unique)]
    <span class="token keyword rust">pub</span> <span class="token variable other member rust">id</span><span class="token punctuation separator rust">:</span> ProposalShortId,
    #[multi_index(ordered_non_unique)]
    <span class="token keyword rust">pub</span> <span class="token variable other member rust">score</span><span class="token punctuation separator rust">:</span> AncestorsScoreSortKey,
    #[multi_index(ordered_non_unique)]
    <span class="token keyword rust">pub</span> <span class="token variable other member rust">status</span><span class="token punctuation separator rust">:</span> Status,
    #[multi_index(ordered_non_unique)]
    <span class="token keyword rust">pub</span> <span class="token variable other member rust">evict_key</span><span class="token punctuation separator rust">:</span> EvictKey,
    <span class="token comment double-slash rust"><span class="token punctuation definition comment rust">//</span> other sort key
</span>    <span class="token keyword rust">pub</span> <span class="token variable other member rust">inner</span><span class="token punctuation separator rust">:</span> TxEntry,
</span><span class="token block rust"><span class="token punctuation section block end rust">}</span></span></span>
</span></code></pre>
<p>å…¶ä¸­æ ¹æ® Rust ç¤¾åŒºçš„ <a target="_blank" rel="noopener" href="https://github.com/lun3x/multi_index_map">multi_index_map</a> å†…éƒ¨å®ç°é‡‡ç”¨çš„æ•°æ®ç»“æ„çœ‹ï¼Œæ€§èƒ½ä¸Šåº”è¯¥æ²¡æœ‰ä»€ä¹ˆå¤§é—®é¢˜ï¼š</p>
<ul>
<li>Hashed index retrievals are constant-time. (FxHashMap + Slab).</li>
<li>Sorted indexes retrievals are logarithmic-time. (BTreeMap + Slab).</li>
<li>Non-Unique Indexes
<ul>
<li>Hashed index retrievals are still constant-time with the total number of elements, but linear-time with the number of matching elements. (FxHashMap + (Slab * num_matches)).</li>
<li>Sorted indexes retrievals are still logarithmic-time with total number of elements, but linear-time with the number of matching elements. (BTreeMap + (Slab * num_matches)).</li>
<li>Iteration within an equal range of a non-unique index is fast, as the matching elements are stored contiguously in memory. Otherwise iteration is the same as unique indexes.</li>
</ul>
</li>
</ul>
<p>å…·ä½“å®ç°æ—¶æˆ‘ä»¬æ˜¯å¦æŠŠ inner ä¹Ÿæ”¾åœ¨ Slab é‡Œé¢ä»¥åå¯ä»¥é€šè¿‡ benchmark æ¥é€‰æ‹©ï¼Œä»å®ç°çš„ç®€æ´æ€§è§’åº¦è€ƒè™‘ç»Ÿä¸€æ”¾åœ¨ä¸€ä¸ªæ•°æ®ç»“æ„é‡Œé¢æ›´å®¹æ˜“ã€‚</p>
<p>ç›®å‰çš„å®ç°ç‰ˆæœ¬ï¼š<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/pull/3993">Tx pool rewrite with multi_index_map #3993</a></p>
<h2 id="å®ç°ç»“æœ"><a href="#å®ç°ç»“æœ" class="headerlink" title="å®ç°ç»“æœ"></a>å®ç°ç»“æœ</h2>
<p>æˆ‘ä»¬é¦–å…ˆåªæ˜¯åšæ¨¡å—å†…çš„é‡æ„ (ä¿æŒå¯¹å¤–é€»è¾‘å’Œä»¥å‰ä¸€æ ·)ï¼Œå½“ç„¶è€ƒè™‘å¼•å…¥äº†æ–°çš„æ•°æ®ç»“æ„ï¼Œä¸ç®¡æ˜¯ä»æ€§èƒ½ä¸Šè¿˜æ˜¯å†…å­˜å ç”¨ä¸Šéƒ½ä¼šæœ‰ä¸€äº›å½±å“ã€‚</p>
<p>ä¸ºäº†åšç»Ÿä¸€æ’åºè¿™ä»¶é¢å¤–çš„äº‹ï¼Œæœ¬è´¨ä¸Šæˆ‘ä»¬å¼•å…¥äº†é¢å¤–çš„ Map(FxHashMap æˆ– BTreeMap) æ¥å­˜å‚¨ï¼Œæ‰€ä»¥æ¯”ä»¥å‰éœ€è¦æ›´å¤šå†…å­˜ã€‚å¦å¤–ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦è°ƒç”¨ <code>get_by_status</code> æ¥ç­›é€‰æŸä¸ªçŠ¶æ€çš„ entriesï¼Œè¿™åœ¨æ–°çš„å®ç°é‡Œé¢éœ€è¦å…ˆä» index é‡Œé¢æ‰¾å‡º slab çš„ idï¼Œç„¶åå†æ‰¾åˆ°å¯¹åº”çš„ entryï¼Œæ‰€ä»¥å¿…ç„¶ä¹Ÿä¼šæ¯”ä»¥å‰æ…¢ã€‚</p>
<p>ä»æœ€ç»ˆçš„æ€§èƒ½å¯¹æ¯”ç»“æœä¸Šï¼Œé™¤äº†å†…å­˜ä¼šç¨å¾®æœ‰å¢åŠ ï¼Œæ€§èƒ½ä¸Šæ²¡æœ‰å¤§çš„å˜åŒ–ã€‚å¦å¤–æˆ‘ä»¬åœ¨å®ç°çš„è¿‡ç¨‹ä¸­å¯¹æ‰€ç”¨åˆ°çš„ Rust åŒ… multi-index-map åšäº†ä¸€äº›è´¡çŒ®ï¼š<a target="_blank" rel="noopener" href="https://github.com/lun3x/multi_index_map/pull/23">Non-unique index support, capacity operations, performance improvement & more by wyjin</a></p>
]]></content>
  </entry>
  <entry>
    <title>xz-backdoor è§‚æ„Ÿ</title>
    <link href="http://catcoding.me/p/xz-backdoor/"/>
    <id>http://catcoding.me/p/xz-backdoor/</id>
    <published>2024-04-04T18:04:33+00:00</published>
    <updated>2026-02-13T06:43:00.111221094+00:00</updated>
    <content type="html"><![CDATA[<p>å†™å†™æœ€è¿‘ä¸€å‘¨çš„å¤§ç“œ xz-backdoorï¼Œè¯¥äº‹ä»¶å¯èƒ½æˆä¸ºå¼€æºä¾›åº”é“¾å®‰å…¨çš„ä¸€ä¸ªåˆ†æ°´å²­ï¼Œä»æŠ€æœ¯è§’åº¦çœ‹ï¼Œè¿™é‡Œé¢çš„ç¤¾å·¥å’Œæ··æ·†ä¹Ÿæ˜¯ç²¾å½©ã€‚</p>
<p>ç®€å•ä»‹ç»ä¸€ä¸‹èƒŒæ™¯ï¼Œxz æ˜¯ä¸€ä¸ªå¼€æºçš„æ— æŸå‹ç¼©å·¥å…·ï¼Œåœ¨å‡ºäº‹ä¹‹å‰å¯èƒ½å¾ˆå°‘æœ‰äººæ³¨æ„åˆ°è¿™ä¸ªå‹ç¼©åº“ä½¿ç”¨å¦‚æ­¤ä¹‹å¹¿ï¼Œå‡ ä¹ä»»ä½•ä¸€ä¸ª Unix-Like çš„æ“ä½œç³»ç»Ÿé‡Œé¢éƒ½æœ‰ xz-utilsã€‚åœ¨ä¸¤å¹´å¤šçš„æ—¶é—´é‡Œï¼Œä¸€ä¸ªåä¸º <code>Jia Tan</code> çš„ç¨‹åºå‘˜å‹¤å¥‹è€Œé«˜æ•ˆåœ°ç»™ xz é¡¹ç›®åšè´¡çŒ®ï¼Œæœ€ç»ˆè·å¾—äº†è¯¥é¡¹ç›®çš„ç›´æ¥æäº¤æƒå’Œç»´æŠ¤æƒã€‚ä¹‹åä»–åœ¨ libzma ä¸­åŠ å…¥äº†ä¸€ä¸ªéå¸¸éšè”½çš„åé—¨ï¼Œè¯¥åé—¨å¯ä»¥è®©æ”»å‡»è€…åœ¨ SSH ä¼šè¯å¼€å§‹æ—¶å‘é€éšè—å‘½ä»¤ï¼Œä½¿æ”»å‡»è€…èƒ½å¤Ÿè·³è¿‡é‰´æƒè¿œç¨‹æ‰§è¡Œå‘½ä»¤ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://research.swtch.com/xz-timeline#jia_tan_arrives_on_scene_with_supporting_cast">Timeline of the xz open source attack</a> æ€»ç»“äº†è¯¥äº‹ä»¶çš„ä¸»è¦æ—¶é—´ç‚¹ï¼Œè¿™é‡Œæˆ‘æŒ‘ä¸€äº›å…³é”®èŠ‚ç‚¹ï¼š</p>
<h4 id="æ½œä¼"><a href="#æ½œä¼" class="headerlink" title="æ½œä¼"></a>æ½œä¼</h4>
<ul>
<li>2005 ~ 2008 xz é¡¹ç›®çš„åˆå§‹ç‰ˆæœ¬ï¼Œè¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶å‹ç¼©ç®—æ³•ï¼Œä¸»è¦ç”± <a target="_blank" rel="noopener" href="https://github.com/kobolabs/liblzma/blob/87b7682ce4b1c849504e2b3641cebaad62aaef87/doc/history.txt">Lasse Collin</a> å¼€å‘å’Œç»´æŠ¤ã€‚</li>
<li>2021-10-29 ~ 2022-06-29 Jia Tan å¼€å§‹è¾ƒä¸ºå¯†é›†åœ°ç»™ xz é¡¹ç›®è´¡çŒ®ä»£ç ï¼ŒåŒæ—¶å‡ ä¸ªç±»ä¼¼é©¬ç”²çš„è´¦å· (Jugar Kumar, Dennis Ens) åœ¨é‚®ä»¶åˆ—è¡¨é‡ŒæŠ±æ€¨ Merge å¾—ä¸åˆ°åŠæ—¶å¤„ç†ï¼Œé—®é¢˜å¾—ä¸åˆ°å›å¤ï¼Œæœ‰ç‚¹é€¼å®«çš„æ„æ€ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­é¡¹ç›®ä¸»å¯¼è€… Lasse Collin æŠŠæœ€è¿‘çš„ä¼˜ç§€è´¡çŒ®è€…åŠ å…¥äº†ç»´æŠ¤è€…åˆ—è¡¨ã€‚</li>
</ul>
<h4 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4>
<ul>
<li>2022-09-27 Jia Tan è·å¾—äº†ä¿¡ä»»ï¼Œå¹¶å¼€å§‹ä¸»å¯¼æ–°ç‰ˆæœ¬çš„å‘å¸ƒï¼Œä»–åœ¨è¿™æœŸé—´åšäº†å‡ ä¸ªçœ‹ä¼¼åˆç†çš„ PRï¼Œä½†å…¶å®æ˜¯åœ¨ä¸ºä»Šåçš„åé—¨åšä¼ç¬”ï¼Œå¦ä¸€ä¸ªé©¬ç”² Hans Jansen æä¾›äº†ä¸€ä¸ªé’©å­å¯ä»¥è®©åé—¨é‡Œçš„ä»£ç æ›¿æ¢å…¨å±€å‡½æ•°ï¼Œä»è€Œç»•è¿‡æ£€æŸ¥ã€‚</li>
<li>2023-07-07 Jia Tan åœ¨ Google çš„ oss-fuzz æä¾›ä¿®æ”¹ç¦ç”¨äº† <code>ifunc</code>ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºäº†é¿å… fuzz å¯èƒ½å‘ç°åé—¨ã€‚</li>
</ul>
<h4 id="å‘åŠ¨"><a href="#å‘åŠ¨" class="headerlink" title="å‘åŠ¨"></a>å‘åŠ¨</h4>
<ul>
<li>2024-02-23 Jia Tan å‘å¸ƒäº†ç¬¬ä¸€ä¸ªæœ‰å®³çš„ PRï¼Œåœ¨æµ‹è¯•ä»£ç ä¸­åŒ…å«äº†å‡ ä¸ª binary æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶çœ‹èµ·æ¥åªç”¨äºæµ‹è¯•ï¼Œæ‰€ä»¥åœ¨ä»£ç  review çš„è¿‡ç¨‹ä¸­è‚¯å®šä¸ä¼šè¢«ä»”ç»†æŸ¥çœ‹ã€‚</li>
<li>2024-02-26 Jia Tan é€šè¿‡ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://git.tukaani.org/?p=xz.git;a=commitdiff;h=328c52da8a2bbb81307644efdb58db2c422d9ba7">éå¸¸éšè”½çš„æäº¤</a>ï¼Œç»™ CMakeList.txt å¢åŠ äº†ä¸€ä¸ª <code>.</code>ï¼Œä½¿å¾—ä»£ç ä¼šç¼–è¯‘å¤±è´¥ä»è€Œè®© Landlock ä¸ä¼šè¢«æ¿€æ´»ã€‚</li>
<li>2024-02-24 Jia Tan å‘å¸ƒ v5.6.0ï¼Œå…¶ä¸­ä½¿ç”¨è„šæœ¬æ··æ·†æ‚„æ‚„åœ°æŠŠåé—¨çš„ payload å¡è¿›äº†ç›®æ ‡æ–‡ä»¶ä¸­ã€‚Gentoo å’Œ Debian å¼€å§‹åœ¨ unstable ç‰ˆæœ¬ä¸­å«æœ‰åé—¨ã€‚</li>
<li>Hans Jansen åŒæ—¶åœ¨å‘é‚®ä»¶å‚¬ä¿ƒ Debian å‡çº§ xz åˆ° v5.6.1</li>
</ul>
<h4 id="æš´éœ²"><a href="#æš´éœ²" class="headerlink" title="æš´éœ²"></a>æš´éœ²</h4>
<ul>
<li>2024-03-29: ä¸€ä¸ªå« Andres Freund çš„å¼€å‘è€…åœ¨åˆ†æä¸€ä¸ª sshd å¯ç–‘çš„ 500ms å»¶è¿Ÿæ—¶ï¼Œå‘ç°äº†éšè—åœ¨ xz çš„æ¶æ„åé—¨ã€‚å¦‚æœä¸æ˜¯å¶ç„¶çš„å‘ç°ï¼Œä¼°è®¡ç°åœ¨ä¸–ç•Œä¸Šæ— æ•°çš„æœåŠ¡å™¨å¤„äºè‚‰é¸¡çŠ¶æ€ï¼Œè¿™ä½å¾®è½¯çš„å‘˜å·¥å¦‚è‹±é›„ä¸€èˆ¬æ‹¯æ•‘äº†ä¸–ç•Œã€‚</li>
</ul>
<hr />
<h2 id="æ”»å‡»è€…æ˜¯ä¸­å›½äººï¼Ÿ"><a href="#æ”»å‡»è€…æ˜¯ä¸­å›½äººï¼Ÿ" class="headerlink" title="æ”»å‡»è€…æ˜¯ä¸­å›½äººï¼Ÿ"></a>æ”»å‡»è€…æ˜¯ä¸­å›½äººï¼Ÿ</h2>
<p>ä»ä¸»è¦æ”»å‡»è€…çš„åç§°çœ‹ä¼¼ä¹æ˜¯ä¸­å›½äººï¼Œä½† Git æ˜µç§°å’Œæ—¶åŒºè¿™ç§ä¸œè¥¿å¾ˆå®¹æ˜“ä¼ªé€ ï¼Œæœ‰äººåˆ†æè¿‡å¼€å‘è€…çš„ä»£ç æäº¤æ—¶é—´ï¼Œåˆ†æå¾—å‡ºå®é™…å¯èƒ½æ˜¯æ¬§æ´²äºº/ä»¥è‰²åˆ—äººå†’å……ã€‚</p>
<p>ä½†ä¸å¯å¦è®¤ï¼Œè‚¯å®šä¼šæœ‰ä¸å°‘å›½å¤–çš„å¼€å‘è€…ä¼šé»˜è®¤è¿™å°±æ˜¯ä¸­å›½äººæ‰€ä¸ºï¼Œæˆ‘ä¹Ÿçœ‹åˆ°äº†ä¸€äº›å¼€å‘è€…å¼€å§‹å¸¦èŠ‚å¥ï¼Œå¼€å§‹æ‰¾å„ç§å’Œ Jia Tan æœ‰è¿‡äº’åŠ¨çš„ä¸­å›½ç¨‹åºå‘˜ã€‚</p>
<p>æˆ‘å€¾å‘äºç›¸ä¿¡è¿™ä¸æ˜¯ä¸­å›½æ”»å‡»è€…ï¼Œæ„Ÿè§‰å…¶ commit ä¿¡æ¯é‡Œé¢çš„è‹±æ–‡ä¸­æ²¡æ‰¾åˆ°ä¸­å¼è¡¨è¾¾ã€‚æ¯”è¾ƒç¡®å®šçš„æ˜¯ï¼Œä»è¿™äº›é©¬ç”²ä¹‹é—´çš„å¯†åˆ‡é…åˆæ¥çœ‹ï¼Œè¿™åƒæ˜¯ä¸€ä¸ªæœ‰å¯†è°‹çš„ç»„ç»‡å›¢ä½“ã€‚</p>
<h2 id="å¼€æºè½¯ä»¶çš„è„†å¼±æ€§"><a href="#å¼€æºè½¯ä»¶çš„è„†å¼±æ€§" class="headerlink" title="å¼€æºè½¯ä»¶çš„è„†å¼±æ€§"></a>å¼€æºè½¯ä»¶çš„è„†å¼±æ€§</h2>
<p>å¼€æºæ„å‘³ç€é€æ˜ï¼Œä½†å¹¶ä¸æ„å‘³ç€å®‰å…¨ã€‚</p>
<p>10 å¤šå¹´å‰æˆ‘ä»¬ç»å†äº† OpenSSL çš„å¿ƒè„æ»´è¡€ï¼Œå¦‚ä»Šç±»ä¼¼çš„äº‹æƒ…å†æ¬¡å‘ç”Ÿã€‚ç”šè‡³è¿™æ¬¡äº‹ä»¶çš„æ€§è´¨æ›´ä¸¥é‡ï¼Œå¿ƒè„æ»´è¡€æ¼æ´æœ¬èº«æ˜¯å› ä¸ºä»£ç çš„é€»è¾‘é—®é¢˜å¯¼è‡´è¢«æ¶æ„åˆ©ç”¨ï¼Œè€Œè¿™æ¬¡æ˜¯æ”»å‡»è€…é€šè¿‡ä¾›åº”é“¾æ¶æ„æ¤å…¥åé—¨ã€‚</p>
<p>æœ‰ä¸€ç§è§‚ç‚¹æ˜¯å¼€æºè½¯ä»¶è¢«æ›´å¤šäºº reviewï¼Œæ‰€ä»¥ç†è®ºä¸Šæ¥è¯´å®‰å…¨æ¼æ´æ›´å®¹æ˜“è¢«å‘ç°ã€‚ä½†å®é™…ä¸Šçœ‹æ¥ï¼Œè¢«å·§å¦™è®¾è®¡è¿‡çš„ä»£ç æ”¹åŠ¨ï¼Œå¾ˆä¸å®¹æ˜“è¢«å‘ç°é—®é¢˜ï¼Œæ¯”å¦‚è¿™æ¬¡äº‹ä»¶ä¸­è¿™ä¸ªæäº¤ï¼Œæˆ‘ç›¸ä¿¡ç»å¤§éƒ¨åˆ†å¼€å‘è€…æ— æ³•å‘ç°è¢«æ¶æ„æ·»åŠ çš„ <code>.</code>:</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240403114716.png" alt="" /></p>
<p>è¿™æ¬¡åé—¨è¢«å‘ç°æœ‰å¾ˆå¤§çš„è¿æ°”æˆåˆ†ï¼Œå¤šäºäº† Andres Freund çš„ç»†å¿ƒå’Œåˆ¨æ ¹é—®åº•çš„ç²¾ç¥ï¼Œè¿™ä¹Ÿç®—æ˜¯æœ‰è¶³å¤Ÿå¤šçš„çœ¼ç›ç›¯ç€æ‰€ä»¥å‘ç°äº†é—®é¢˜å§ã€‚</p>
<h2 id="å¦‚ä½•é¢„é˜²"><a href="#å¦‚ä½•é¢„é˜²" class="headerlink" title="å¦‚ä½•é¢„é˜²"></a>å¦‚ä½•é¢„é˜²</h2>
<p>å¦‚æœæœ‰ä¸€ä¸ªå¼€æºè´¡çŒ®è€…çš„èº«ä»½è¯†åˆ«æœºåˆ¶ï¼Œå°±å¯èƒ½é¢„é˜²ç±»ä¼¼çš„äº‹æƒ…ã€‚æˆ‘çœ‹åˆ°æœ‰äººä¸¾ä¾‹ Linux Kernel æäº¤å¿…é¡»ä½¿ç”¨ Git çš„ Sign-offï¼Œä½†è¿™ä¸ª Sign-off æ›´å¤šçš„æ˜¯åœ¨è§£å†³æ³•å¾‹ä¸Šçš„é—®é¢˜ï¼ŒSign-off æœ¬æ¥å°±æ˜¯å› ä¸ºæ³•å¾‹è¯‰è®¼è€Œå¼•å…¥çš„ã€‚è€Œä¸”ï¼Œåœ¨æœ€åæƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¼€å‘è€…å¯èƒ½è¢«ç¤¾å·¥æˆ–è€…å…¥ä¾µè€Œå¯¼è‡´èº«ä»½è¢«å†’ç”¨ï¼Œæ‰€ä»¥ Sign-off å¹¶ä¸æ„å‘³ç€èº«ä»½è¯†åˆ«ã€‚</p>
<p>æœ‰çš„äººæåˆ°é€šè¿‡æ”¯ä»˜æ¥è¿›è¡Œ KYC(Know Your Customer)ï¼Œè¿™å¿…ç„¶æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºå¼€æºæœ¬æ¥å°±æ˜¯ä¸€ä¸ªé»‘å®¢æ–‡åŒ–çš„äº§ç‰©ï¼Œå¤§é‡çš„å¼€å‘è€…ä¼šåˆ»æ„é€‰æ‹©ä½¿ç”¨åŒ¿åèº«ä»½æäº¤ä»£ç ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹ Bitcoinï¼Œå¦‚æœè®ºé¡¹ç›®å€¼é’±ç¨‹åº¦ï¼Œæ¯”ç‰¹å¸çš„ä»£ç åº”è¯¥èƒ½æ’å¾—ä¸Šå·ã€‚ä½†æ¯”ç‰¹å¸æ˜¯æ”¯æŒ Permissionless and Pseudonymous development çš„ï¼Œç”šè‡³è¿™æ˜¯ä¿è¯æ¯”ç‰¹å¸å»ä¸­å¿ƒåŒ–çš„ä¸¤ä¸ªå¾ˆé‡è¦çš„æ‰‹æ®µï¼Œä¸­æœ¬èªçš„èº«ä»½ä»ç„¶æ˜¯ä¸€ä¸ªè¿·ã€‚ä¸­æœ¬èªé€‰æ‹©åŒ¿åå¯¹æ¯”ç‰¹å¸æœ¬èº«æ¥è¯´ä¹Ÿè‡³å…³é‡è¦ï¼Œ<code>No one controls Bitcoin</code> æ˜¯å…¶ä»·å€¼æ ¹æœ¬ã€‚</p>
<p>é‚£æ¯”ç‰¹å¸å¦‚ä½•ä¿è¯ä¸ä¼šè¢«æ¤å…¥åé—¨ï¼Œæ¯”å¦‚è¿™ç§ä¾›åº”é“¾æ”»å‡»ï¼Ÿ</p>
<ul>
<li>Reproducible buildsï¼Œè¿™æ˜¯ä¸ªæå¤§åœ°ç¼“è§£ä¾›åº”é“¾é£é™©çš„åŠæ³•ï¼Œä¸åŒçš„äººç¼–è¯‘ç›¸åŒçš„æºä»£ç å¿…ç„¶å¾—åˆ°ç›¸åŒçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œbinary file ä¸èƒ½å­˜åœ¨äºæºç åº“ä¸­ã€‚Bitcoin ä½¿ç”¨ Guix container ä»æºç ç¼–è¯‘æ‰€æœ‰çš„ä¸œè¥¿ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/pull/15277">contrib: Enable building in Guix containers</a>ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥åœ¨ä»»ä½• Linux å‘è¡Œç‰ˆä¸Šé‡ç°ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå‡ ä¹æ‰€æœ‰çš„ä¸€åˆ‡éƒ½ä»æºç ç¼–è¯‘ï¼Œæ‰€ä»¥ä¼šå­˜åœ¨ä¸€ä¸ªé¸¡ç”Ÿè›‹è›‹ç”Ÿé¸¡çš„é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å¿…ç„¶ä¼šéœ€è¦ä¸€äº› binary filesï¼Œä½†æœ€å¥½æ˜¯å°†è¿™ä¸ªèŒƒå›´é™åˆ¶åˆ°æœ€å°ï¼Œ<a target="_blank" rel="noopener" href="https://guix.gnu.org/manual/en/html_node/Preparing-to-Use-the-Bootstrap-Binaries.html">Preparing to Use the Bootstrap Binaries</a>ã€‚</li>
<li>Donâ€™t forget to verify yourselfï¼</li>
</ul>
<p>å¦å¤–æ¯”ç‰¹å¸çš„å®‰å…¨åœ¨äº PoWï¼Œå…¶è®¾è®¡æœ¬æ¥å°±å‡è®¾äº†å°‘éƒ¨åˆ†èŠ‚ç‚¹å¯èƒ½æ˜¯æ¶æ„èŠ‚ç‚¹ï¼Œé™¤éé»‘å®¢æ§åˆ¶ä½äº†å¤§éƒ¨åˆ†èŠ‚ç‚¹æ‰èƒ½é€ æˆç ´åï¼Œè€Œè¦è¾¾æˆè¿™ç‚¹åœ¨çš„æ¦‚ç‡å¯ä»¥è®¤ä¸ºå°±æ˜¯é›¶</p>
<h2 id="å¼€æºçš„å¯æŒç»­æ€§"><a href="#å¼€æºçš„å¯æŒç»­æ€§" class="headerlink" title="å¼€æºçš„å¯æŒç»­æ€§"></a>å¼€æºçš„å¯æŒç»­æ€§</h2>
<p>ä»è¿™ä¸ªå®‰å…¨äº‹ä»¶æˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨å¼€æºçš„å¯æŒç»­æ€§è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¸ªäº‹ä»¶ä¸­ xz çš„ç»´æŠ¤è€… Lesse Collin çœ‹èµ·æ¥å·²ç»æ˜¯å¤„äºç–²äºåº”ä»˜çš„åœ°æ­¥ã€‚ä»<a target="_blank" rel="noopener" href="https://github.com/xz-mirror/xz/graphs/contributors">è´¡çŒ®è€…ç»Ÿè®¡</a>å¯ä»¥çœ‹åˆ°è¿™ä¹ˆå¤šå¹´å‡ ä¹å°±æ˜¯ä»–ä¸€ä¸ªäººåœ¨ç»™é¡¹ç›®æäº¤ä»£ç ï¼ŒJia Tan é€šè¿‡ä¸¤å¹´çš„æ½œä¼å°±æˆä¸ºäº†è´¡çŒ®è€…ç¬¬äºŒçš„å¼€å‘è€…ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240403140505.png" alt="" /></p>
<p>é•¿æ—¶é—´ç»´æŠ¤ä¸€ä¸ªè¢«å¤§é‡ä½¿ç”¨çš„å¼€æºé¡¹ç›®æ˜¯ä¸ªå·¨å¤§çš„è´Ÿæ‹…ï¼Œå¯¹ç»´æŠ¤è€…è€Œè¨€ä¸ä»…ä»…æ˜¯æ—¶é—´çš„æŠ•å…¥ï¼Œæœ‰æ—¶å€™ä¹Ÿæ˜¯ç²¾ç¥ä¸Šçš„æŠ˜ç£¨ï¼Œå³ä½¿å¼€å‘è€…å½“åˆçš„æœ‰å¤šå¥½çš„æ„¿æ™¯ï¼Œä½†è°ä¹Ÿæ— æ³•ä¿è¯å¸¸å¹´çš„æŒç»­æŠ•å…¥ã€‚å…³äºè¿™ç‚¹å¯ä»¥é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼Œ<a target="_blank" rel="noopener" href="https://kettanaito.com/blog/the-dark-side-of-open-source">The Dark Side of Open Source</a>ã€‚</p>
<p>Lesse Collin åœ¨è¿™æ¬¡äº‹ä»¶ä¸­è¢«åˆ©ç”¨äº†è¿™ä¸ªå¼±ç‚¹ï¼Œä»–åœ¨è¿™å°é‚®ä»¶é‡Œè§£é‡Šåˆ°è‡ªå·±ä½œä¸ºé¡¹ç›®ä¸»å¯¼è€…çš„å›°å¢ƒï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240403014036.png" alt="" /></p>
<p>å†™åˆ°è¿™é‡Œæˆ‘æƒ³èµ·è‡ªå·±ä¹Ÿæ›¾ç»å‚¬è¿‡ä¸€ä¸ªåº“çš„ä½œè€…ï¼Œæ˜¯ä¸æ˜¯è€ƒè™‘è®©æ›´å¤šäººæ¥ç»´æŠ¤é¡¹ç›® <a target="_blank" rel="noopener" href="https://github.com/GREsau/schemars/issues/272">Maintenance status Â· Issue</a> ğŸ˜…ã€‚</p>
<p>ä¹Ÿè®¸æœªæ¥å¯èƒ½æœ‰ä¸€å¥—æœºåˆ¶ï¼Œèƒ½å¤Ÿè®©åŸºç¡€å¼€æºè½¯ä»¶çš„ç»´æŠ¤è€…å¾—åˆ°ç»æµæ¿€åŠ±ï¼Œä½†è¿™æ¡è·¯å¦‚ä½•æ¼”åŒ–å‡ºæ¥æˆ‘è¿˜æ²¡çœ‹å‡ºæ¥ï¼Œå¦‚æœçœŸçš„å‡ºæ¥æˆ–è®¸ä¸åŠ å¯†è´§å¸æœ‰ä¸€å®šå…³è”ã€‚</p>
<p>å¯æ€•çš„æ˜¯ï¼Œç°åœ¨è¿˜æœ‰å¾ˆå¤šäººæ²¡æœ‰æ„è¯†åˆ°å¼€æºè´¡çŒ®è€…å›°å¢ƒï¼Œé‚£äº›ä»·å€¼å‡ åƒä¸Šä¸‡äº¿çš„å…¬å¸ä¹Ÿæ˜¯åœ¨æœŸæœ›å¼€æºçš„å¼€å‘è€…èƒ½å¤Ÿåƒé›‡å‘˜ä¼¼çš„å“åº”ä»–ä»¬çš„ High Priorityï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240403013012.png" alt="" /></p>
<p>è¿™ä¸ªä¸–ç•Œä¸Šè¿˜æ˜¯æœ‰æ— æ•°çš„é»˜é»˜è€•è€˜çš„å¼€æºä»£ç ç»´æŠ¤è€…ï¼Œæ¯”å¦‚ SQLiteï¼Œå…¨çƒå¤§æ¦‚æœ‰ä¸Šä¸‡äº¿çš„ SQLite æ•°æ®å®ä¾‹è·‘åœ¨æœåŠ¡å™¨ä¸Šã€æ‰‹æœºä¸Šã€æµè§ˆå™¨é‡Œï¼Œä½†è¿™ä¸ªè½¯ä»¶å…¶å®åªç”± 3 ä¸ªç¨‹åºå‘˜ç»´æŠ¤äº† 20 å¤šå¹´ï¼›å‡ ä¹æ‰€æœ‰å·¥ç¨‹å¸ˆéƒ½ä½¿ç”¨çš„å·¥å…· curlï¼Œç”± Daniel Stenberg ä» 1998 ç»´æŠ¤åˆ°è‡³ä»Šï¼›vim çš„ä½œè€… Bram Moolenaar ä» 1991 å¹´ç»´æŠ¤é¡¹ç›®åˆ°è‡ªå·±å»ä¸–ï¼Œæ€»å…±æ•´æ•´ 32 å¹´ã€‚</p>
<p>å®é™…ä¸Šæ²¡æœ‰äººçŸ¥é“ï¼Œå¤šå°‘è¢«å¹¿æ³›ä½¿ç”¨çš„åŸºç¡€ç»„ä»¶å’Œä»£ç æ˜¯ç”±å„ç§é»˜é»˜æ— é—»ã€åˆ†æ¯«æœªå–çš„å¼€å‘è€…åœ¨ç”¨è‡ªå·±çš„ä¸šä½™æ—¶é—´ç»´æŠ¤ç€ã€‚</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240403135349.png" alt="" /></p>
<p>ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œäººç±»æ•°å­—åŸºç¡€è®¾æ–½è¿™è‰˜å·¨è½®å…¶å®å»ºç«‹åœ¨éå¸¸è„†å¼±çš„åŸºç¡€ä¸Šï¼Œè¯´ä¸å®šå“ªå¤©ä¸€ä¸ªåœ°æ–¹å°±è£‚å¼€äº†ã€‚æˆ‘ç°åœ¨å…»æˆäº†ä¸€ä¸ªä¹ æƒ¯ï¼Œå‡çº§ä»æ¥ä¸è¿½æ–°ï¼Œä»»ä½•å®‰è£…åˆ°è‡ªå·±ç”µè„‘ä¸Šçš„äºŒè¿›åˆ¶éƒ½å°å¿ƒç¿¼ç¿¼ã€‚</p>
<p>è¿™ä¸ªä¸–ç•Œä¸Šæœ‰æ— æ•°çš„æ¶é­”ï¼Œä¹Ÿä¼šæœ‰ä¸€äº›è‹±é›„å’Œå¹å“¨äººï¼Œè‡´æ•¬ Andres Freundã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>ä»æ˜å¤©èµ·ï¼Œåšä¸€ä¸ª Rust ç¨‹åºå‘˜</title>
    <link href="http://catcoding.me/p/rust-bootcamp/"/>
    <id>http://catcoding.me/p/rust-bootcamp/</id>
    <published>2024-03-18T16:28:13+00:00</published>
    <updated>2026-02-13T06:43:00.104220980+00:00</updated>
    <content type="html"><![CDATA[<p>3 æœˆæ˜¯æ€€å¿µæµ·å­çš„æœˆä»½ï¼š</p>
<blockquote>
<p>ä»æ˜å¤©èµ·ï¼Œåšä¸€ä¸ª Rust ç¨‹åºå‘˜ï¼Œå–‚é©¬ã€åŠˆæŸ´ï¼Œå‘¨æ¸¸ä¸–ç•Œã€‚</p>
</blockquote>
<p>10 å¹´å‰æˆ‘å¼€å§‹å†™ç¬¬ä¸€è¡Œ Rust ç¨‹åºï¼Œåˆ°å¦‚ä»Šå…¨èŒè¿œç¨‹åš Rust å¼€æºé¡¹ç›®ï¼Œä¹Ÿè®¸æˆ‘çœŸèƒ½å»è¿‡å–‚é©¬åŠˆæŸ´å‘¨æ¸¸ä¸–ç•Œäº†ğŸ˜†ã€‚ä½†å›æƒ³è‡ªå·±çš„å­¦ä¹ æ—…ç¨‹ï¼Œå…¶ä¸­æœ‰å„ç§æ›²æŠ˜æœ‰å‡ åº¦æ”¾å¼ƒçš„æ—¶å€™ï¼Œå¦‚æœä½ ä¹Ÿæƒ³å­¦ä¹ æˆ–è€…æé«˜ Rust æ–¹é¢çš„æŠ€èƒ½ï¼Œæˆ‘è¿™ç¯‡æ–‡ç« é‡Œæœ‰ä¸€æ¡æ›´å®¹æ˜“çš„è·¯ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆå­¦ä¹ -Rust"><a href="#ä¸ºä»€ä¹ˆå­¦ä¹ -Rust" class="headerlink" title="ä¸ºä»€ä¹ˆå­¦ä¹  Rust"></a>ä¸ºä»€ä¹ˆå­¦ä¹  Rust</h2>
<p>Rust 1.0 å‘å¸ƒå·²ç»å¿« 10 å¹´ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯ä¸€é—¨æ–°ç¼–ç¨‹è¯­è¨€äº†ï¼Œä»å‘å±•çš„è§’åº¦æ¥çœ‹ Rust å·²ç»åº¦è¿‡äº†ç”Ÿå­˜æœŸï¼Œå¹¶è¿›å…¥äº†è¿…é€Ÿå‘å±•çš„é˜¶æ®µã€‚ä»ç›®å‰å¯è§çš„ä¸šç•Œæ–¹å‘æ¥è¯´ï¼ŒRust ä¸»è¦åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å–å¾—äº†æˆåŠŸï¼š</p>
<ul>
<li>åœ¨åŸºç¡€è½¯ä»¶é¢†åŸŸæˆä¸ºæœ‰åŠ›ç«äº‰è€…
<ul>
<li>å¤§é‡å¼€æºçš„ Rust <a target="_blank" rel="noopener" href="https://github.com/sts10/rust-command-line-utilities">å‘½ä»¤è¡Œå·¥å…·</a>å’Œå¼€å‘åº“ï¼Œå¦‚æœä½ ä½¿ç”¨ Pythonï¼Œå¯ä»¥é€šè¿‡  <a target="_blank" rel="noopener" href="https://pyo3.rs/v0.21.0-beta.0/">PyO3</a> ç”¨ Rust æ¥å†™å¯¹æ€§èƒ½è¦æ±‚æ›´é«˜çš„æ¨¡å—ï¼Œè¿˜å‡ºç°äº† <a target="_blank" rel="noopener" href="https://github.com/apache/opendal">opendal</a> è¿™æ ·ä¼˜ç§€çš„åŸºç¡€åº“</li>
<li>Cloudflare ä½¿ç”¨ Rust å¼€å‘æ–°çš„ç½‘å…³ <a target="_blank" rel="noopener" href="https://blog.cloudflare.com/pingora-open-source">Pingora</a></li>
<li>å¼€æºæ•°æ®åº“å®ç°ï¼Œæ¯”å¦‚ <a target="_blank" rel="noopener" href="https://qdrant.tech/">Qdrant</a>ã€ <a target="_blank" rel="noopener" href="https://risingwave.com/">RisingWave</a>ã€<a target="_blank" rel="noopener" href="https://github.com/datafuselabs/databend">databend</a></li>
<li>AI æ–¹é¢å‚è€ƒ <a target="_blank" rel="noopener" href="https://www.arewelearningyet.com/">Are we learning yet</a>ï¼Œè™½ç„¶ Rust ML ç”Ÿæ€ç³»ç»Ÿè¿˜å¾ˆå¹´è½»å¹¶å¤„äºè¯•éªŒé˜¶æ®µï¼Œä½†å·²ç»å‡ºç°äº†ä¸€äº›é›„å¿ƒå‹ƒå‹ƒçš„é¡¹ç›®å’Œæ¨¡å—ï¼ŒHugging Face å¼€æºäº† <a target="_blank" rel="noopener" href="https://github.com/huggingface/candle">candle</a>æœºå™¨å­¦ä¹ æ¡†æ¶</li>
</ul>
</li>
<li>å‰ç«¯çš„åŸºç¡€è®¾æ–½
<ul>
<li>Rust åœ¨å‰ç«¯é¢†åŸŸå‘å±•è¿…é€Ÿï¼ŒRust æ˜¯ WebAssembly æ”¯æŒæœ€å¥½çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸å°‘ Runtime éƒ½æ˜¯ Rust å®ç°çš„ï¼Œæ¯”å¦‚ Wasmer</li>
<li>å¤§é‡å‰ç«¯åŸºç¡€å·¥å…·åœ¨ä½¿ç”¨ Rust é‡æ–°å®ç°ï¼Œæ¯”å¦‚ <a target="_blank" rel="noopener" href="https://www.rspack.dev/">Rspack</a>ã€<a target="_blank" rel="noopener" href="https://vercel.com/blog/turbopack">Turbopack</a>ã€å‰å‡ å¤©åˆå‡ºç°äº† <a target="_blank" rel="noopener" href="https://github.com/rolldown/rolldown">rolldown</a>ï¼Œ<a target="_blank" rel="noopener" href="https://leerob.io/blog/rust">Rust Is The Future of JavaScript Infrastructure</a>ä¼¼ä¹å·²ç»æˆä¸ºå…±è¯†</li>
</ul>
</li>
<li>æ“ä½œç³»ç»Ÿ
<ul>
<li>Windows å¼€å§‹ä½¿ç”¨ Rust å¼€å‘ä¸€äº›æ ¸å¿ƒç»„ä»¶</li>
<li>Rust å¼€å§‹è¿›å…¥ Linux å†…æ ¸ï¼Œä½¿å¾—ä½¿ç”¨ Rust å¼€å‘ Linux module æˆä¸ºå¯èƒ½</li>
<li>Andriod ä½¿ç”¨ Rust å¼€å‘æ›´å¤šç»„ä»¶ï¼Œå¹¶æœ‰æ•ˆå‡å°‘äº†å†…å­˜æ–¹é¢çš„æ¼æ´ï¼Œä»–ä»¬å‘å¸ƒçš„ <a target="_blank" rel="noopener" href="https://google.github.io/comprehensive-rust/">Comprehensive Rust</a>æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å­¦ä¹ èµ„æ–™ã€‚Google å¼€å§‹å°åˆ° Rust çš„å¥½å¤„ï¼Œå¹¶å¼€å§‹æŠ•å…¥æ›´å¤šèµ„é‡‘å’ŒäººåŠ›ï¼Œè¿‘æœŸ <a target="_blank" rel="noopener" href="https://security.googleblog.com/2024/02/improving-interoperability-between-rust-and-c.html">Google æ‰“ç®—æçŒ® 100 ä¸‡ç¾é‡‘ç»™ Rust åŸºé‡‘ä¼š</a>ç€é‡è§£å†³ Rust å’Œ C++ çš„äº’æ“ä½œæ€§</li>
</ul>
</li>
<li>åŒºå—é“¾é¢†åŸŸ
<ul>
<li>ä»¥æˆ‘åœ¨è¿™ä¸ªé¢†åŸŸå·¥ä½œä¸€ä»¶å¤šçš„ç»éªŒæ¥è¯´ï¼ŒRust æˆä¸ºäº†åŒºå—é“¾é¢†åŸŸçš„æ ‡é…ï¼ŒåŸºæœ¬åŒºå—é“¾ç›¸å…³çš„å·¥ä½œå²—ä½ Rust æŠ€èƒ½æ˜¯ä¸€ä¸ªæå¤§çš„åŠ åˆ†é¡¹</li>
<li>å¤§é‡å…¬é“¾ä½¿ç”¨ Rust æ¥å¼€å‘</li>
</ul>
</li>
<li>æ¸¸æˆå¼€å‘ï¼Œå‚è€ƒ <a target="_blank" rel="noopener" href="https://arewegameyet.rs/">Are we game yet?</a>ï¼Œç›®å‰å·²ç»æœ‰æˆç†Ÿçš„æ¸¸æˆå¼€å‘æ¡†æ¶ <a target="_blank" rel="noopener" href="https://bevyengine.org/">Bevy Engine</a></li>
</ul>
<p>å¦‚æœä½ å¯¹ Rust çš„å‘å±•æƒ…å†µæ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://blog.rust-lang.org/2024/02/19/2023-Rust-Annual-Survey-2023-results.html">2023 Annual Rust Survey Results</a>ã€‚åœ¨å†…å·çš„ IT å¸‚åœºï¼Œä½œä¸ºç¨‹åºå‘˜é€‰æ‹©ä¸€é—¨å°ä¼—çš„ç¼–ç¨‹è¯­è¨€æ˜¯é¿å…è¿‡åº¦ç«äº‰çš„æ–¹å¼ï¼Œæˆ‘ä¹‹å‰ä»‹ç»è¿‡å…¶ä»–äººçš„ç±»ä¼¼ç»éªŒï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <a target="_blank" rel="noopener" href="https://catcoding.me/p/weekly-13/">The Niche Programmer</a>ã€‚Rust è¿˜æœªæˆä¸ºä¸»æµç¼–ç¨‹è¯­è¨€ï¼Œä½†æ½œåŠ›å’Œå‘å±•ç©ºé—´å¾ˆå¤§ï¼Œè€Œé—¨æ§›ç›¸å¯¹å…¶ä»–è¯­è¨€æ¯”è¾ƒé«˜ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºä»æ±‚èŒçš„è§’åº¦æ¥è€ƒè™‘æ˜¯å€¼å¾—ä¸€è¯•çš„ã€‚</p>
<p>ä¹‹å‰æåˆ° Google æŠ•å…¥æ›´å¤šçš„èµ„é‡‘åœ¨ Rust ä¸Šé¢ï¼Œé’±è¿›æ¥åç›¸å…³çš„èŒä½å°±å‡ºæ¥äº† <a target="_blank" rel="noopener" href="https://foundation.rust-lang.org/careers/">C++/Rust Interop Initiative Software Engineer Lead</a>ã€‚</p>
<h2 id="æˆ‘å­¦ä¹ -Rust-çš„ä½“ä¼š"><a href="#æˆ‘å­¦ä¹ -Rust-çš„ä½“ä¼š" class="headerlink" title="æˆ‘å­¦ä¹  Rust çš„ä½“ä¼š"></a>æˆ‘å­¦ä¹  Rust çš„ä½“ä¼š</h2>
<p>æˆ‘ 2014 å¹´æ—¶è·µè¡Œæ¯å¹´å­¦ä¹ ä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼ŒRust ä½œä¸ºä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€è¿›å…¥äº†æˆ‘çš„è§†é‡ã€‚æˆ‘å¼€å§‹ä½¿ç”¨  Rust å†™äº›ç®€å•çš„ä¸ªäººå­¦ä¹ é¡¹ç›®ï¼Œç„¶åæˆ‘ç»§ç»­åšäº† <a target="_blank" rel="noopener" href="https://exercism.org/tracks/rust/exercises">Rust exercises</a> ã€‚</p>
<p>åç»­å‡ å¹´æˆ‘å¶å°”çœ‹çœ‹ Rust ç›¸å…³çš„æ–°é—»å’Œé¡¹ç›®ï¼Œæ—¶ä¸æ—¶åŠ¨æ‰‹å†™ç‚¹ä»£ç éƒ½ä¼šæœ‰ç‚¹ç£•ç£•ç¢°ç¢°ã€‚ç›´åˆ°å››å¹´å‰å¼€å§‹åœ¨ Github ä¸Šç»™ä¸€äº› Rust å¼€æºé¡¹ç›®è´¡çŒ®ï¼Œä¸¤å¹´å‰å¼€å§‹ç»™ Rust ç¼–è¯‘å™¨åšè´¡çŒ®ï¼Œä¸€å¹´å‰å¼€å§‹å…¨èŒä»äº‹ Rust åŒºå—é“¾ç›¸å…³çš„å·¥ä½œã€‚</p>
<p>ä»æŠ€æœ¯è§’åº¦æ¥è¯´ï¼ŒRust éå¸¸æœ‰è¶£ï¼Œè¿™é‡Œé¢åŒ…å«äº†è¿‘äº›å¹´ç¨‹åºè®¾è®¡æ–¹é¢çš„ä¸€äº›è‰¯å¥½å®è·µã€‚å…¨èŒå†™ Rust ç¨‹åºè¿™ä¸€å¹´å¤šæ˜¯æˆ‘å¼€å‘ä½“éªŒæœ€å¥½çš„é˜¶æ®µï¼Œå½“ç„¶æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å’Œç¼–è¯‘å™¨æ–—æ™ºæ–—å‹‡ã€åšç±»å‹ä½“æ“ï¼Œä½†å¾ˆå¤šé—®é¢˜åœ¨å¼€å‘é˜¶æ®µç»™è§„é¿æ‰äº†ã€‚</p>
<p>Rust çš„æœ€å¤§é—®é¢˜è¿˜æ˜¯åœ¨äºå­¦ä¹ é—¨æ§›ç›¸å¯¹è¾ƒé«˜ï¼Œå› ä¸ºåœ¨ Rust ä¸­ç¨‹åºå‘˜æ¥è§¦æœ€å¤šçš„  <code>=</code> è¯­ä¹‰éƒ½å˜äº†ã€‚ä»æˆ‘ä¸ªäººä½“éªŒæ¥è¯´ï¼Œåœ¨å­¦ä¼šäº† Rust è¯­æ³•åä¼šé™·å…¥ä¸€ä¸ªç“¶é¢ˆï¼Œå¦‚æœæ—¥å¸¸å·¥ä½œä¸­ä¸ä½¿ç”¨ Rustï¼Œå°±æ²¡æœ‰å¤šå°‘æœºä¼šå»å®è·µï¼Œå¦å¤–ä¸çŸ¥é“åšä¸€äº›ä»€ä¹ˆé¡¹ç›®ã€‚</p>
<p>æˆ‘ç›¸ä¿¡å¾ˆå¤šäººåŒæ ·å¦‚æ­¤ï¼Œçœ‹äº†å®˜æ–¹ tutorial ä¹‹åä¸çŸ¥é“å¦‚ä½•ä¸‹æ‰‹ï¼Œæˆ‘æƒ³å¦‚æœæœ‰ä¸€ä¸ªç»éªŒä¸°å¯Œçš„è€å¸ˆå¸¦ï¼Œä¼šå°‘èµ°å¾ˆå¤šå¼¯è·¯ï¼Œè¿™å°±æ˜¯æˆ‘è¦ä»‹ç»çš„æå®¢æ—¶é—´è®­ç»ƒè¥è¦è§£å†³çš„é—®é¢˜ã€‚</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240316231547.png" alt="" /></p>
<h2 id="æå®¢æ—¶é—´-Rust-è®­ç»ƒè¥"><a href="#æå®¢æ—¶é—´-Rust-è®­ç»ƒè¥" class="headerlink" title="æå®¢æ—¶é—´ Rust è®­ç»ƒè¥"></a>æå®¢æ—¶é—´ Rust è®­ç»ƒè¥</h2>
<p>è¯´èµ·æ¥æˆ‘ä¸è¿™ä¸ªè®­ç»ƒè¥è¿˜æœ‰äº›æ¸Šæºã€‚</p>
<p>å½“æå®¢æ—¶é—´åœ¨ç­¹åˆ’è¿™ä¸ª Rust è®­ç»ƒè¥çš„æ—¶å€™ï¼Œç­–åˆ’äººå‘˜æ‰¾åˆ°è¿‡æˆ‘é—®æˆ‘æ˜¯å¦æœ‰æ„æ„¿å½“è¿™ä¸ªè¯¾ç¨‹çš„è®²å¸ˆã€‚æˆ‘è¿˜ç¨å¾®çŠ¹è±«äº†ä¸€ä¸‹ï¼Œå› ä¸ºæˆ‘ä¹‹å‰ä¹Ÿæƒ³è¿‡å¦‚ä½•åœ¨ Rust é¢†åŸŸåšæ›´å¤šçš„åˆ†äº«ï¼Œæˆ‘å¾ˆç¾¡æ…•ä¼˜ç§€çš„æŠ€æœ¯åˆ†äº«è€…æ¯”å¦‚ <a target="_blank" rel="noopener" href="https://www.youtube.com/@jonhoo">Jon Gjengset</a>èƒ½å¤Ÿéå¸¸è‡ªå¦‚åœ°é€šè¿‡è§†é¢‘åˆ†äº« Rust æ–¹é¢çš„æŠ€æœ¯ã€‚å½“è€å¸ˆå½“ç„¶æ˜¯ä¸ªæœºä¼šèƒ½ä»æ²Ÿé€šå’Œè¡¨è¾¾æ–¹é¢æé«˜è¿™æ–¹é¢çš„èƒ½åŠ›ã€‚</p>
<p>åæ¥è€ƒè™‘åˆ°è‡ªå·±æ—¶é—´æ–¹é¢å®‰æ’ä¸è¿‡æ¥ï¼Œæˆ‘æœ‰å…¨èŒå·¥ä½œã€æœ‰ä¸šä½™çš„ Rust ç¤¾åŒºå·¥ä½œã€è¿˜æœ‰ä¸‰ä¸ªå°å­©ï¼Œæ‰€ä»¥æˆ‘åº”è¯¥çœŸæ²¡æ—¶é—´å»å½•åˆ¶è¯¾ç¨‹äº†ï¼Œè€Œä¸”ä»–ä»¬å·²ç»æ‰¾åˆ°äº†æˆ‘è®¤ä¸ºæœ€åˆé€‚çš„è®²å¸ˆï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240316223445.png" alt="" /></p>
<p>æˆ‘çœ‹äº†è¿™ä¸ªé¡¹ç›®çš„å¤§çº²ï¼Œé™ˆå¤©è€å¸ˆå¸Œæœ›å¯ä»¥æ•™å¤§å®¶æ€ä¹ˆç”¨ Rust æ¯”è¾ƒç®€å•çš„è¯­æ³•å’ŒæŠ€å·§ï¼Œæ¥å®Œæˆ 80% çš„æ—¥å¸¸å·¥ä½œï¼Œä¸»è¦æ˜¯é€šè¿‡å„ç§å®è·µé¡¹ç›®æ¥å­¦ä¹ ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æœ€æ¨å´‡çš„ Learn by doing çš„æ–¹å¼ã€‚</p>
<p>æœ‰å¾ˆå¤šä¸»é¢˜æˆ‘éƒ½æ²¡æ€ä¹ˆæ¥è§¦è¿‡ï¼Œæ¯”å¦‚æ„å»ºä¸€ä¸ª ChatGPT çš„åº”ç”¨ã€æ¯”å¦‚è·¨å¹³å° GUI ä¹‹ç±»çš„ï¼Œæ‰€ä»¥æˆ‘å¯¹è¿™ä¸ªè¯¾ç¨‹å¾ˆæ„Ÿå…´è¶£ï¼Œç„¶åæˆ‘å’Œç­–åˆ’è¯´èƒ½ä¸èƒ½åšè¿™ä¸ªé¡¹ç›®çš„åŠ©æ•™ï¼Œåæ¥æ²Ÿé€šä¸‹æ¥å‘ç°å½“åŠ©æ•™ä¹Ÿéœ€è¦ä¸å°‘æ—¶é—´çš„ï¼Œæ‰€ä»¥å°±æ²¡æœºä¼šå‚ä¸åˆ°å…·ä½“çš„æ•™å­¦é‡Œé¢äº†ã€‚</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240316231751.png" alt="" /></p>
<p>æ€»ä¹‹ï¼Œè¿™ä¸ªé¡¹ç›®å¯¹äºæƒ³å­¦ä¹  Rust æˆ–è€…å·²ç»æœ‰ä¸€å®š Rust ç»éªŒï¼Œä½†æƒ³è·å¾—æ›´å¤šå®è·µç»å†çš„äººæ˜¯éå¸¸åˆé€‚çš„ã€‚åœ¨å’Œæå®¢æ—¶é—´çš„ç›¸å…³äººå‘˜æ²Ÿé€šçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°ä»–ä»¬åšäº‹æƒ…å¾ˆç”¨å¿ƒï¼Œè¿™ä¸ªè®­ç»ƒè¥çš„è¯¾ç¨‹è´¨é‡æˆ‘è®¤ä¸ºæ˜¯æœ‰ä¿è¯çš„ã€‚</p>
<p>è¿™ä¸ªè®­ç»ƒè¥ä¸€å…±æ˜¯ 15 å‘¨çš„è¯¾ç¨‹å®‰æ’ï¼Œå…¶ä¸­æ¯å‘¨éƒ½ä¼šæœ‰æ˜ç¡®çš„é¡¹ç›®å®‰æ’ï¼Œè¯¾åè¿˜æœ‰åŠ©æ•™ç­”ç–‘ã€‚å…³äºè®­ç»ƒè¥çš„æ›´å¤šä¿¡æ¯è¯·å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://u.geekbang.org/subject/rust">æå®¢æ—¶é—´è®­ç»ƒè¥-Rust è®­ç»ƒè¥</a></p>
<p><img src="http://catcoding.me/images/ob_rust-boot-20240318164451.png" alt="" /></p>
<h2 id="æˆ‘ä¸é™ˆå¤©è€å¸ˆçš„å°æ•…äº‹"><a href="#æˆ‘ä¸é™ˆå¤©è€å¸ˆçš„å°æ•…äº‹" class="headerlink" title="æˆ‘ä¸é™ˆå¤©è€å¸ˆçš„å°æ•…äº‹"></a>æˆ‘ä¸é™ˆå¤©è€å¸ˆçš„å°æ•…äº‹</h2>
<p>æˆ‘æœ€æ—©çŸ¥é“é™ˆå¤©æ˜¯ä»–å†™çš„å…¬ä¼—å·ã€Šç¨‹åºäººç”Ÿã€‹ï¼Œä»–æ˜¯é‚£ç§æŠ€æœ¯å’Œæ–‡ç¬”éƒ½éå¸¸æ£’çš„ç¨‹åºå‘˜ï¼Œéå¸¸éš¾å¾—ã€‚æˆ‘è¿˜çœ‹è¿‡ä»–çš„ B ç«™ä¸Šçš„æŠ€æœ¯è®²è§£è§†é¢‘ï¼Œä»–çš„æ¼”è®²å’Œåˆ†äº«éƒ½å¾ˆæµç•…ã€‚é™ˆå¤©æ˜¯æå®¢æ—¶é—´ã€Šé™ˆå¤©Â Â·Â RustÂ ç¼–ç¨‹ç¬¬ä¸€è¯¾ã€‹ä¸“æ ä½œè€…ï¼Œå·²æœ‰Â 2.3wÂ äººå­¦è¿‡ï¼Œå¹¿å—å¥½è¯„ã€‚æŠ€æœ¯èƒ½åŠ›ã€æ¼”è®²è¡¨è¾¾ã€å¯¹æŠ€æœ¯çš„çƒ­æƒ…è¿™äº›éƒ½æ˜¯è®²å¸ˆæœ€é‡è¦çš„ç´ è´¨è¦æ±‚ï¼Œæ‰€ä»¥é™ˆå¤©æ˜¯è¿™ä¸ªè®­ç»ƒè¥æœ€å¥½çš„è®²å¸ˆäººé€‰ã€‚</p>
<p>å†åˆ†äº«ä¸€ä¸ªå°æ•…äº‹ï¼Œæˆ‘ä¸€å¹´å¤šå‰è·³æ§½çš„æ—¶å€™è¿˜æœ‰äº›çŠ¹è±«ï¼Œå› ä¸ºè‡ªå·±çš„èŒä¸šè§„åˆ’æ–¹é¢æœ‰äº›å›°æƒ‘ï¼Œæ‰€ä»¥æƒ³æ‰¾äº›äººèŠèŠã€‚å½“æ—¶æˆ‘çªç„¶æƒ³åˆ°é™ˆå¤©ä¹‹å‰ä»äº‹è¿‡åŒºå—é“¾æ–¹é¢çš„åˆ›ä¸šï¼Œåæ¥ä»é‡Œé¢é€€å‡ºæ¥äº†ï¼Œæ‰€ä»¥æˆ‘å°±æƒ³å‘ä»–å’¨è¯¢ä¸€ä¸‹ã€‚æˆ‘æ²¡æœ‰ä»–çš„è”ç³»æ–¹å¼ï¼Œä½†çµæœºä¸€åŠ¨æˆ‘æƒ³åˆ°äº†ä» Git çš„æäº¤è®°å½•é‡Œé¢æ‰¾ Emailï¼Œç„¶åæŠ±ç€è¯•ä¸€è¯•çš„æƒ³æ³•ç»™ä»–å‘äº†ä¸ªé‚®ä»¶è¯´æ˜äº†è‡ªå·±çš„æƒ…å†µå’Œå›°æƒ‘ã€‚æ²¡æƒ³åˆ°ä»–å¾ˆå¿«ç»™æˆ‘å›å¤äº†ï¼Œå¹¶å¾ˆè¯¦ç»†åœ°å‘Šè¯‰æˆ‘ä»–å¯¹äºåŒºå—é“¾çš„æƒ³æ³•ï¼Œè¿˜æœ‰å¦‚ä½•åˆ¤æ–­è‡ªå·±æ˜¯å¦é€‚åˆä¸€ä¸ªå…¬å¸ï¼Œé€šè¿‡å„ç§é€”å¾„äº†è§£å…¬å¸çš„ç›¸å…³äº§å“æ¥ä½œä¸ºå†³ç­–çš„ä¾æ®ç­‰ç­‰ã€‚</p>
<p>æˆ‘ä½œä¸ºä¸€ä¸ªé™Œç”Ÿäººï¼Œé™ˆå¤©è€å¸ˆéƒ½ä¼šä¹äºç»™ä¸æŒ‡å¯¼å’Œå¸®åŠ©ï¼Œå¯è§ä¸ºäººçœŸçš„å¾ˆå¥½ã€‚è¿˜æ²¡èƒ½æœ‰å¹¸å’Œé™ˆå¤©è€å¸ˆç°å®ä¸­æœ‰æ‰€äº¤æµï¼Œæˆ‘æœ¬æ¥æƒ³ç”¨å½“åŠ©æ•™çš„æœºä¼šå’Œé™ˆå¤©è€å¸ˆå¤šå­¦ä¹ ï¼Œä½†æ—¶é—´æ–¹é¢å®‰æ’ä¸è¿‡æ¥äº†ã€‚å¸Œæœ›å¤§å®¶èƒ½åœ¨è€å¸ˆçš„çš„è®­ç»ƒè¥å­¦åˆ°çŸ¥è¯†ã€ç»éªŒã€è¿˜æœ‰æ¢ç´¢æŠ€æœ¯çš„ä¹è¶£ï¼</p>
]]></content>
  </entry>
  <entry>
    <title>æˆ‘å–œæ¬¢çš„ shell å·¥å…·</title>
    <link href="http://catcoding.me/p/handy-sh-tools/"/>
    <id>http://catcoding.me/p/handy-sh-tools/</id>
    <published>2024-03-16T23:52:40+00:00</published>
    <updated>2026-02-13T06:43:00.097220865+00:00</updated>
    <content type="html"><![CDATA[<p>åˆ†äº«ä¸€äº›æ—¥å¸¸ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤è¡Œå°å·¥å…·ï¼Œæˆ‘è®¤ä¸ºè¿™äº›å°ä¸œè¥¿èƒ½æé«˜æˆ‘çš„å·¥ä½œæ•ˆç‡ã€‚</p>
<h2 id="percol"><a href="#percol" class="headerlink" title="percol"></a>percol</h2>
<p><a target="_blank" rel="noopener" href="https://github.com/mooz/percol?tab=readme-ov-file#zsh-history-search">mooz/percol</a> è¿™ä¸ªå·¥å…·æ˜¯å…¸å‹çš„ Unix é£æ ¼å·¥å…·ï¼Œå®ƒå”¯ä¸€åšçš„äº‹æƒ…å°±æ˜¯é€šè¿‡ç®¡é“æ¥æ”¶è¾“å…¥ï¼Œæä¾›ä¸€ä¸ªæ¨¡ç³Šæœç´¢å’Œ UIï¼Œç”¨æˆ·é€‰æ‹©åå†æŠŠç»“æœè¿”å›ç»™åé¢çš„ç®¡é“ç»§ç»­æ‰§è¡Œã€‚</p>
<p>æ¯”å¦‚æˆ‘è¿™ä¸ª <code>gt</code> çš„ alias æ˜¯æˆ‘æ—¥å¸¸ä½¿ç”¨éå¸¸å¤šçš„ä¸€ä¸ªå‘½ä»¤ï¼Œåšçš„äº‹æƒ…å°±æ˜¯ check out ä¸€ä¸ª git åˆ†æ”¯ï¼Œå› ä¸ºæˆ‘çš„æœ¬åœ°é€šå¸¸æœ‰å¾ˆå¤šçš„åˆ†æ”¯ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ¥æ¨¡ç³ŠæŸ¥æ‰¾ï¼Œç„¶åé€‰ä¸­å°±éå¸¸æ–¹ä¾¿äº†ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shell bash"><span class="token function-call shell"><span class="token function alias shell">alias</span> <span class="token function alias shell">gt</span><span class="token operator assignment shell">=</span><span class="token string unquoted shell"><span class="token string double shell"><span class="token punctuation definition string begin shell">&quot;</span>git branch| percol | awk &#39;{ print <span class="constant character escape shell">\$</span>1 }&#39; | xargs git checkout <span class="token punctuation definition string end shell">&quot;</span></span></span></span>
</span></code></pre>
<p>ç±»ä¼¼çš„ä¸‹é¢è¿™ä¸ªå‘½ä»¤æ˜¯ kill æ‰æŸä¸ªè¿›ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡ç³Šæœç´¢æ¥æ‰¾è¿›ç¨‹ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shell bash"><span class="token function-call shell"><span class="token function alias shell">alias</span> <span class="token function alias shell">pk</span><span class="token operator assignment shell">=</span><span class="token string unquoted shell"><span class="token string double shell"><span class="token punctuation definition string begin shell">&quot;</span>ps eaux | percol | awk &#39;{ print <span class="constant character escape shell">\$</span>2 }&#39; | xargs kill -9 <span class="token punctuation definition string end shell">&quot;</span></span></span></span>
</span></code></pre>
<p>å¦‚æœä½ ä»”ç»†æ€»ç»“ï¼Œæ—¥å¸¸å¼€å‘ä»»ä½•éœ€è¦é€‰æ‹©çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªå°å·¥å…·æ¥è¾¾åˆ°æ›´é«˜çš„æ•ˆç‡ï¼Œæ¯”å¦‚æˆ‘å·¥ä½œçš„ç›®å½•ä¸‹æœ‰å¾ˆå¤šæµ‹è¯•æ–‡ä»¶ï¼Œæµ‹è¯•å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶çš„å‘½ä»¤æ˜¯ <code>just ts file-path</code>ï¼Œæˆ‘éœ€è¦æ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªæ¥æµ‹è¯•ï¼š</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">find ./tests/ui/ -name \*.rs  | percol | xargs just ts
</code></pre>
<p><code>percol</code> å¯ä»¥åµŒå…¥åˆ°å¾ˆå¤šé…ç½®é‡Œé¢ï¼Œæ¯”å¦‚åœ¨ <code>tmux.conf</code> é‡Œé¢åŠ å…¥è¿™ä¸ªé…ç½®ï¼Œè¿™æ ·å¯ä»¥æ¨¡ç³ŠæŸ¥æ‰¾ tmux çš„ session å’Œ windowï¼š</p>
<pre class="line-numbers language-sh" data-language="sh"><code class="language-sh"><span class="token shell bash"><span class="token function-call shell"><span class="token function bind shell">bind</span></span><span class="token function-call arguments shell"> B split-window <span class="token string double shell"><span class="token punctuation definition string begin shell">&quot;</span>tmux lsw | percol --initial-index <span class="token group expansion command parens shell"><span class="token punctuation definition variable shell">$</span><span class="token punctuation section parens begin shell">(</span><span class="token function-call shell"><span class="token variable function shell">tmux</span></span><span class="token function-call arguments shell"> lsw</span> <span class="token operator logical pipe shell">|</span> <span class="token function-call shell"><span class="token variable function shell">awk</span></span><span class="token function-call arguments shell"> <span class="token string single shell"><span class="token punctuation definition string begin shell">&#39;</span>/active.$/ {print NR-1}<span class="token punctuation definition string end shell">&#39;</span></span></span><span class="token punctuation section parens end shell">)</span></span> | cut -d&#39;:&#39; -f 1 | tr -d &#39;\n&#39; | xargs -0 tmux select-window -t<span class="token punctuation definition string end shell">&quot;</span></span></span>

<span class="token function-call shell"><span class="token function bind shell">bind</span></span><span class="token function-call arguments shell"> b split-window <span class="token string double shell"><span class="token punctuation definition string begin shell">&quot;</span>tmux ls | percol --initial-index <span class="token group expansion command parens shell"><span class="token punctuation definition variable shell">$</span><span class="token punctuation section parens begin shell">(</span><span class="token function-call shell"><span class="token variable function shell">tmux</span></span><span class="token function-call arguments shell"> ls</span> <span class="token operator logical pipe shell">|</span> <span class="token function-call shell"><span class="token variable function shell">awk</span></span><span class="token function-call arguments shell"> <span class="constant character escape shell">\&quot;</span>/^<span class="token group expansion command parens shell"><span class="token punctuation definition variable shell">$</span><span class="token punctuation section parens begin shell">(</span><span class="token function-call shell"><span class="token variable function shell">tmux</span></span><span class="token function-call arguments shell"> display-message<span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> -</span>p</span> <span class="token string single shell"><span class="token punctuation definition string begin shell">&#39;</span>#{session_name}<span class="token punctuation definition string end shell">&#39;</span></span></span><span class="token punctuation section parens end shell">)</span></span>:/ <span class="token group expansion brace shell"><span class="token punctuation section expansion brace begin shell">{</span>print NR-1<span class="token punctuation section expansion brace end shell">}</span></span><span class="constant character escape shell">\&quot;</span></span><span class="token punctuation section parens end shell">)</span></span> | cut -d&#39;:&#39; -f 1 | tr -d &#39;\n&#39; | xargs -0 tmux switch-client -t<span class="token punctuation definition string end shell">&quot;</span></span></span>
</span></code></pre><h2 id="atuin"><a href="#atuin" class="headerlink" title="atuin"></a>atuin</h2>
<p><a target="_blank" rel="noopener" href="https://github.com/atuinsh/atuin">atuinsh</a> æ˜¯ä¸€ä¸ªè®°å½• shell å†å²çš„å°å·¥å…·ï¼Œä¸åŒäºæ™®é€šçš„è®°å½• shell history çš„å·¥å…·ï¼Œatuin ä¼šæŠŠæ•°æ®è®°å½•åœ¨ä¸€ä¸ª SQLite çš„æ•°æ®åº“æ–‡ä»¶ä¸­ï¼Œè¿™æ ·å¯ä»¥æ”¯æŒæ›´ä¸°å¯Œçš„æŸ¥è¯¢åŠŸèƒ½ã€‚</p>
<p>å¦å¤– atuin ä¹Ÿæ”¯æŒä¸åŒæœºå™¨ä¹‹é—´çš„åŒæ­¥ï¼Œå½“ç„¶è¿™éœ€è¦åŠ å¯†é€šä¿¡ã€‚æˆ‘ç›®å‰è¿˜æ²¡ä½¿ç”¨è¿™ç§åœºæ™¯ï¼Œåªæ˜¯æŠŠ <code>Ctrl-R</code> ç»‘å®šåˆ°äº† atuinã€‚</p>
<p>atuin ä¹Ÿæ˜¯ä¸€ä¸ª Rust å®ç°çš„å·¥å…·ã€‚</p>
<h2 id="tmux"><a href="#tmux" class="headerlink" title="tmux"></a>tmux</h2>
<p>tmux æˆ‘ä¹‹å‰å¬å¾ˆå¤šäººæ¨èè¿‡ï¼Œä½†æ˜¯æˆ‘ä¸€ç›´æ²¡æ€ä¹ˆå°è¯•ï¼Œç›´åˆ°æŸå¤©æˆ‘éœ€è¦é€šè¿‡ç½‘é¡µæ‰“å¼€è·³æ¿æœºç™»å½•åˆ°æœåŠ¡å™¨ä¸Šï¼Œç½‘ç»œä¸ç¨³å®šçš„æƒ…å†µä¸‹æˆ‘ç»å¸¸éœ€è¦é‡æ–°ç™»å½•ï¼Œè¿™æ—¶å€™æˆ‘å°è¯•äº†ä¸€ä¸‹ tmux å‘ç°çœŸæ˜¯å¤ªå¥½ç”¨äº†ã€‚</p>
<p>tmux çš„æ•™ç¨‹å¾ˆå¤šï¼Œæ¯”å¦‚ <a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2019/10/tmux.html">Tmux ä½¿ç”¨æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a>ã€‚æˆ‘çš„ <code>tmux.conf</code>é…ç½®å¾ˆç®€å•ï¼š</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">set -g @plugin &#39;tmux-plugins/tpm&#39;
set -g @plugin &#39;tmux-plugins/tmux-sensible&#39;

set -g @plugin &#39;tmux-plugins/tmux-resurrect&#39;
set -g @plugin &#39;tmux-plugins/tmux-continuum&#39;

unbind-key C-b
set-option -g prefix C-Space
bind-key C-Space send-prefix

set-option -s set-titles on
set-option -g set-titles-string &quot;#W/#T&quot;
run &#39;~/.tmux/plugins/tpm/tpm&#39;
</code></pre>
<p>å®‰è£… <code>tmux-resurrect</code> å’Œ <code>tmux-continuum</code>ï¼Œè¿™æ ·å³ä½¿æˆ‘é‡å¯äº†æœºå™¨ï¼Œæ‰“å¼€ tmux åæˆ‘çš„ session ä»ç„¶å’Œä¹‹å‰ä¸€æ ·ã€‚</p>
<p>æœ€è¿‘ä¹Ÿæœ‰ä¸ª Rust å†™çš„ <a target="_blank" rel="noopener" href="https://github.com/zellij-org/zellij">zellij</a>ï¼Œä½†æˆ‘è®¤ä¸ºè¿™ç§è½¯ä»¶ä½¿ç”¨æ›´è€çš„ä¼šæ›´æ–¹ä¾¿ï¼Œæ¯”å¦‚å…¬å¸çš„è¿œç¨‹æœåŠ¡å™¨å¿…ç„¶æœ‰ tmuxï¼Œä½†ä¸ä¸€å®šæœ‰ zellijã€‚</p>
<h2 id="just"><a href="#just" class="headerlink" title="just"></a>just</h2>
<p><a target="_blank" rel="noopener" href="https://github.com/casey/just">casey/just: ğŸ¤– Just a command runner</a> æ˜¯æˆ‘å–œæ¬¢çš„å¦å¤–ä¸€ä¸ª Rust å†™çš„å·¥å…·ï¼Œæˆ‘çš„æ—¥å¸¸å·¥ä½œä¸­ä¸¥é‡ä¾èµ–è¿™ä¸ªå·¥å…·ï¼Œæ¯”å¦‚æˆ‘çš„ rustc-dev é¡¹ç›®ä¸­é…ç½®æ¸æ¸ç§¯ç´¯äº†è¿™ä¹ˆå¤šçš„é…ç½®ï¼š<a target="_blank" rel="noopener" href="https://gist.github.com/chenyukang/1483cbbf75a4bd5ae2930415329cb682">rustc-justfile</a></p>
<p><code>just</code> æœ‰äº›åƒ Makefileï¼Œä½†ä½¿ç”¨èµ·æ¥åˆæ¯” Makefile çš„è¯­æ³•ç®€å•å’Œç›´è§‚ï¼Œæˆ‘é€šå¸¸æ˜¯æ¥æŠŠä¸€äº›å¸¸ç”¨çš„å‘½ä»¤å†™å…¥ justfileï¼Œç„¶åç•™ä¸‹ç»å¸¸éœ€è¦è°ƒæ•´çš„å‚æ•°ï¼Œæ¯”å¦‚ï¼š</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">err FILE N:
        rustup toolchain link dev2 ./build/aarch64-apple-darwin/stage1/
        RUSTC_ICE=/tmp rustc +dev2 {{FILE}} -Z treat-err-as-bug={{N}}
</code></pre>
<p>è¿™æ ·æˆ‘æ‰§è¡Œ <code>just err tests/ui/consts/const-eval/infinite_loop.rs 1</code> çš„æ—¶å€™å°±ç›¸å½“äºæ‰§è¡Œé…ç½®çš„ä¸€ç³»åˆ—å‘½ä»¤ã€‚</p>
<p>å¦å¤–æˆ‘ä¹Ÿä¼šæŠŠä¸€äº›é¢‘ç¹éœ€è¦ä¿®æ”¹çš„å‚æ•°æ”¾åˆ°æœ€åä¸€ä¸ªä½ç½®ï¼Œæ¯”å¦‚æœ¬æ¥æˆ‘éœ€è¦æ‰§è¡Œï¼š</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">CKB_TEST_ARGS={{SPEC}} make integration
</code></pre>
<p>åœ¨ justfile é‡Œé¢é…ç½®ï¼š</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">test-one SPEC:
        CKB_TEST_ARGS={{SPEC}} make integration
</code></pre>
<p>æ‰§è¡Œ <code>just test-one SPEC</code>  æ¥æµ‹è¯•ä¸åŒçš„ç”¨ä¾‹å°±ä¼šæ–¹ä¾¿ç‚¹ã€‚</p>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/bootandy/dust">bootandy/dust: A more intuitive version of du in rust</a> ä¸€ä¸ªæ›´ç›´è§‚çš„ du</li>
<li><a target="_blank" rel="noopener" href="https://github.com/aristocratos/btop">aristocratos/btop: A monitor of resources</a> å’Œ htop ç±»ä¼¼ï¼Œä½†æ˜¯ UI æ›´å¥½çœ‹äº›</li>
<li><a target="_blank" rel="noopener" href="https://github.com/Orange-OpenSource/hurl?tab=readme-ov-file">hurl: Hurl, run and test HTTP requests with plain text.</a> ç±»ä¼¼ Curlï¼Œä½†æ˜¯æ›´æ–¹ä¾¿</li>
</ul>
<hr />
<p>ä½ æœ‰ä»€ä¹ˆå–œæ¬¢çš„ Shell å·¥å…·ï¼Œå¸Œæœ›ä¹Ÿèƒ½åˆ†äº«ç»™æˆ‘ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>ä¸­å¤–ç¨‹åºå‘˜å·®å¼‚</title>
    <link href="http://catcoding.me/p/diff/"/>
    <id>http://catcoding.me/p/diff/</id>
    <published>2024-02-24T21:58:03+00:00</published>
    <updated>2026-02-13T06:43:00.094220816+00:00</updated>
    <content type="html"><![CDATA[<p>ä»Šå¤©çœ‹åˆ°è¿™ä¸ª<a target="_blank" rel="noopener" href="https://twitter.com/Piglei/status/1761051133135687853">æ¨ç‰¹</a>ï¼Œæˆ‘ç†è§£ä½œè€…çš„å¿ƒæƒ…éå¸¸å¤æ‚ï¼Œå› ä¸ºæˆ‘å‰ä¸‰å¹´å†™è¿‡ä¸€æ®µæ—¶é—´æŠ€æœ¯ç±»çš„è‹±æ–‡æ–‡ç« ï¼Œä¹Ÿå‘ç°è‹±æ–‡æŠ€æœ¯ç¤¾åŒºè¿˜æœ‰é‚£ç§è®¤çœŸè®¨è®ºçš„æ°›å›´ï¼Œè€Œåœ¨ä¸­æ–‡æŠ€æœ¯åœˆé‡Œï¼Œè¿™ç§æ°›å›´å·²ç»å‡ ä¹ç»è¿¹ã€‚</p>
<p>è¿™å‡ å¹´å› ä¸ºæˆ‘åœ¨å¤–ä¼å’Œå¼€æºä¸Šçš„å·¥ä½œç»å†ï¼Œæ¥è§¦äº†å¾ˆå¤šæ¥è‡ªå„ä¸ªå›½å®¶çš„ç¨‹åºå‘˜ï¼Œä»Šå¤©æƒ³å†™å†™æˆ‘å‘ç°çš„ä¸€äº›å›½å†…å¤–ç¨‹åºå‘˜é—´çš„å·®å¼‚ï¼Œæˆ‘ç›¸ä¿¡ç»å¸¸æ··è¿¹å¼€æºç¤¾åŒºçš„äººä¼šæœ‰äº›ç±»ä¼¼æ„Ÿå—ã€‚</p>
<h2 id="è®²ç©¶ç»†èŠ‚"><a href="#è®²ç©¶ç»†èŠ‚" class="headerlink" title="è®²ç©¶ç»†èŠ‚"></a>è®²ç©¶ç»†èŠ‚</h2>
<p>è¿™ç‚¹æ˜¯æˆ‘æ„Ÿå—æœ€æ·±çš„ï¼Œæˆ‘è‡ªè®¤ä¸ºå·²ç»ç®—æ˜¯ä¸€ä¸ªå¯¹ç»†èŠ‚æ¯”è¾ƒåœ¨ä¹çš„äººäº†ï¼Œä½†æˆ‘æ¥è§¦åˆ°ä¸€äº›å›½å¤–çš„ç¨‹åºå‘˜ï¼Œä»–ä»¬å¯¹ç»†èŠ‚çš„æŠŠæ¡è®©äººä½©æœã€‚</p>
<p>æœ€è¿‘çš„ä¸€ä¸ªä¾‹å­æ˜¯æˆ‘åœ¨å†™è¿™ç¯‡<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/docs.nervos.org/pull/206">è‹±æ–‡æ–‡æ¡£</a> çš„æ—¶å€™é‡åˆ°çš„ï¼Œå…¶ä¸­çš„ Reviewer jordanmack å¯¹æˆ‘æ–‡æ¡£é‡Œé¢çš„æ‰€æœ‰å†…å®¹é€å­—é€å¥éƒ½è¿‡äº†ä¸€éï¼Œå‘ç°ä¸æ‡‚çš„åœ°æ–¹ä¸€å®šè¦å¼„æ˜ç™½ã€‚è¿™é‡Œé¢æœ‰çš„æ˜¯ä¸­è‹±æ–‡è¡¨è¾¾å·®å¼‚é€ æˆçš„ç†è§£åå·®ï¼Œä¹Ÿæœ‰ä»–å¯¹è¿™ä¸ªåŠŸèƒ½çš„é€»è¾‘ä¸Šçš„è´¨ç–‘ï¼Œç”šè‡³å¯ä»¥ç»†èŠ‚åˆ°æˆ‘åœ¨æ–‡ä¸­ç»™å‡ºçš„ json ä¾‹å­é‡Œçš„æ•°å­—èŒƒå›´å’Œè‡ªæ´½æ€§ã€‚æˆ‘ä»¬åœ¨ Github ä¸Šæ¥å›è®¨è®ºäº†å¾ˆä¹…ï¼Œç„¶åç»§ç»­åœ¨ Discord ä¸Šè®¨è®ºï¼Œè€Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä¹Ÿç¡®å®å‘ç°äº†äº›ä»£ç ä¸Šéœ€è¦è°ƒæ•´çš„åœ°æ–¹ï¼Œæœ€åä»–ç»™æˆ‘çš„æ–‡ç« å‡ ä¹å…¨éƒ¨<a target="_blank" rel="noopener" href="https://github.com/chenyukang/docs.nervos.org/pull/3">æ¶¦è‰²äº†ä¸€é</a>ã€‚</p>
<p>jordanmack ä¸ç®—æ˜¯å…¨èŒçš„ç¨‹åºå‘˜ï¼Œä½†ä»–ä¹Ÿæœ‰ä¸€äº›ç¨‹åºå‘˜èƒŒæ™¯ã€‚åœ¨æˆ‘åšå¼€æºçš„ç»å†ä¸­ï¼ŒPR ä¸­è¢«æŒ‘ç»†èŠ‚çš„æ—¶å€™å¤ªå¤šäº†ï¼Œä¸€åº¦æˆ‘å·²ç»ä¸å†è®¤ä¸ºè‡ªå·±æ˜¯ä¸ªå¯¹ç»†èŠ‚å¾ˆæŠŠæ¡çš„äººäº†ã€‚åæ¥æˆ‘æ€»ç»“äº†ä¸€ä¸‹ï¼Œæœ‰æ—¶å€™æˆ‘æ˜¯åœ¨èµ¶æ—¶é—´ï¼Œè§‰å¾—æŸäº› corner case å°±æš‚ä¸”è·³è¿‡å§ï¼Œä½†å¤§å¤šä¼šåœ¨ä»£ç  Review ä¸­è¢«æå‡ºæ¥çš„ã€‚</p>
<p>ç„¶åç»å†å¤šäº†ä¹Ÿå°±çœ‹æ·¡äº†ï¼Œä¸å…‰æ˜¯æˆ‘ï¼Œä»»ä½•äººçš„ PR éƒ½å¯èƒ½å¼•å‘å¤§é‡çš„è®¨è®ºï¼Œæ¯”å¦‚åˆ°åº•æ˜¯ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/rust-lang/rust/pull/75065">Âµs è¿˜æ˜¯ us</a>ã€‚ä¹Ÿè®¸åœ¨å¾ˆå¤šäººçœ‹æ¥è¿™æ˜¯ä¸ªå°é—®é¢˜ï¼Œä½†å´å¼•èµ·äº†å¤§é‡çš„è®¨è®ºï¼Œç»†çœ‹å…¶ä¸­è¿˜æœ‰äº›å¼•ç»æ®å…¸å’Œé•¿ç¯‡å¤§è®ºã€‚éšä¾¿æŒ‘ä¸€ä¸ª RFCï¼Œä¹Ÿéƒ½å¯ä»¥çœ‹åˆ°<a target="_blank" rel="noopener" href="https://github.com/rust-lang/rfcs/pull/3573">å¤§é‡çš„è®¨è®º</a>ã€‚</p>
<p>æ‰€ä»¥æˆ‘çš„æ„Ÿå—æ˜¯ï¼Œå›½å¤–ç¨‹åºå‘˜ä¸­åœ¨æ„ç»†èŠ‚çš„æ¯”ä¾‹æ›´å¤§ã€‚é‚£ä¹ˆé—®é¢˜æ˜¯ï¼Œä»–ä»¬ä¸ºä»€ä¹ˆèƒ½çœ‹è¿™ä¹ˆç»†ï¼Ÿå›ºç„¶å…¶ä¸­ä¸€ä¸ªå¾ˆé‡è¦çš„åŸå› æ˜¯ä»–ä»¬ç¡®å®æœ‰æ—¶é—´ï¼Œæ‰èƒ½é™ä¸‹å¿ƒæ¥çœ‹å’Œå†™ã€‚</p>
<p>åœ¨å›½å†…å…¬å¸æˆ‘ä¹Ÿç¢°åˆ°è¿‡å¯¹ç»†èŠ‚çš„æŠŠæ¡ï¼Œä½†å¾ˆå¤šç”¨åœ¨äº†æˆ‘æœ€è®¨åŒçš„å½¢å¼ä¸»ä¹‰ä¸Šã€‚åœ¨å¾®è½¯çš„æ—¶å€™ï¼Œæˆ‘è§è¿‡å„ç§ä¸å¤Ÿæ¼‚äº®çš„ PPTï¼Œæœ‰çš„æ—¶å€™ç¿»æ¥ä¸€æ®µ onenote å°±å¼€å§‹è®²ï¼Œå› ä¸ºéƒ½æ²¡äººå…³æ³¨è¿™äº›ã€‚</p>
<h2 id="æ–‡å­—è¡¨è¾¾"><a href="#æ–‡å­—è¡¨è¾¾" class="headerlink" title="æ–‡å­—è¡¨è¾¾"></a>æ–‡å­—è¡¨è¾¾</h2>
<p>æ–‡å­—è¡¨è¾¾èƒ½åŠ›æ˜¯å¼€æºç¤¾åŒºé‡Œä¸€ä¸ªéå¸¸é‡è¦çš„ï¼Œå› ä¸ºä½†å‡¡ä¸€ä¸ªå¤§çš„æ”¹åŠ¨éƒ½éœ€è¦å’Œå…¶ä»–äººå¹¿æ³›è®¨è®ºå’Œåä½œã€‚</p>
<p>ä¸å°‘å›½å¤–çš„ç¨‹åºå‘˜æœ‰æ–‡å­—è¡¨è¾¾çš„ä¹ æƒ¯ï¼Œå°±æ˜¯å³ä½¿çœ‹å¾ˆå°çš„ä¸€ç‚¹é—®é¢˜ä¹Ÿä¼šé€šè¿‡æ–‡å­—è¡¨è¾¾å‡ºæ¥ã€‚è¿™æ˜¯å¾ˆå¤šå›½å†…ç¨‹åºå‘˜æ‰€æ²¡æœ‰çš„ä¹ æƒ¯ï¼Œå› ä¸ºæˆ‘ä»¬å¤§å¤šæ¯”è¾ƒå«è“„ï¼Œè®¤ä¸ºå¤šåšæ¯”è¯´å¼ºï¼Œè¯´å¤šå®¹æ˜“é”™ï¼Œè¯´å¤šå®¹æ˜“æš´éœ²è‡ªå·±ã€‚</p>
<p>å¯èƒ½å’Œæ•™è‚²å’Œç½‘ç»œç¯å¢ƒä¹Ÿæœ‰ä¸€å®šå…³ç³»ï¼Œå¦‚æœä¸æ˜¯åˆ»æ„ç»´æŒæ–‡å­—è¡¨è¾¾çš„ä¹ æƒ¯ï¼Œå¾ˆå¤šäººé«˜ä¸­æ¯•ä¸šåå°±æ²¡æœ‰å†™è¿‡å‡ ç¯‡é•¿æ–‡ï¼Œå¯¹å¾ˆå¤šäº‹æƒ…ä¹Ÿæ²¡æœ‰è‡ªå·±çš„çœ‹æ³•ã€‚</p>
<p>å¦å¤–ä»–ä»¬ä¹ æƒ¯ä½¿ç”¨ Email æ¥æ²Ÿé€šï¼Œä½†ä¸­å›½å¼€å‘äººå‘˜å¤§å¤šä¹ æƒ¯ä½¿ç”¨ IM æ²Ÿé€šã€‚è¿™ä¸¤è€…è¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼ŒIM æ²Ÿé€šä¼šè®©äººä¸è‡ªè§‰åœ°å›å¤å¾—æ›´å¿«ï¼Œæœ‰çš„æ¨¡ç³Šæƒ³æ³•éšå£å°±å°±è¡¨è¾¾äº†ã€‚è€Œ Email æ²Ÿé€šæ›´å®¹æ˜“è®©äººæŠŠäº‹æƒ…å†™æ¸…æ¥šï¼Œä¹Ÿæ›´å®¹æ˜“å†™å¾—æ›´é•¿å’Œæœ‰æ¡ç†ã€‚</p>
<p>è¿™ç§ç»†å¾®çš„å·®å¼‚é•¿ä¹…äº†ä¹‹åå°±å¯çœ‹å‡ºä¸­è‹±æ–‡æŠ€æœ¯ç¤¾åŒºçš„å·¨å¤§å·®åˆ«ã€‚å¦å¤–ï¼Œä¸­æ–‡ç½‘ç»œçš„ç¯å¢ƒä¸­æˆ¾æ°”æ›´é‡ä¸€äº›ï¼Œäººä»¬å¯¹è‡ªæˆ‘æ¨é”€å¾ˆåæ„Ÿï¼Œå®¹æ˜“æ£æµ‹ä½ çš„æ„å›¾ã€‚</p>
<h2 id="ä¸ªäººç›®æ ‡"><a href="#ä¸ªäººç›®æ ‡" class="headerlink" title="ä¸ªäººç›®æ ‡"></a>ä¸ªäººç›®æ ‡</h2>
<p>å¾ˆå¤šæ¬§ç¾å¤§å…¬å¸é‡Œæœ‰ä¸å°‘åªåš Individual Contributor è€Œä¸åšç®¡ç†çš„äººï¼Œåœ¨è¿™äº›å…¬å¸é‡Œï¼Œç®¡ç†å’ŒæŠ€æœ¯æ˜¯ä¸¤æ¡å¹¶è¡Œçº¿ï¼Œè–ªèµ„å’ŒèŒçº§æŒ‚é’©ï¼Œä¹Ÿå°±æ˜¯è¯´çº¯ IC çš„å²—ä½å¯èƒ½æ”¶å…¥æ¯”ç®¡ç†å²—ä½æ›´é«˜ï¼Œå› ä¸ºèŒçº§æ›´é«˜ã€‚</p>
<p>ç®¡ç†äººå‘˜å’ŒæŠ€æœ¯äººå‘˜å¤§å¤šæ˜¯ä¸Šä¸‹çº§å…³ç³»ï¼Œä½†ä¸‹å±å¯¹ç®¡ç†äººå‘˜æ²¡æœ‰ç»å¯¹çš„å•å‘æœä»å…³ç³»ã€‚å½“ç„¶å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç®¡ç†æ›´å®¹æ˜“å‡èŒä¸Šå»ï¼Œå› ä¸ºçº¯åšæŠ€æœ¯å²—ä½ä¸å®¹æ˜“é€šè¿‡æ†æ æ¥æ”¾å¤§è‡ªå·±ï¼Œç®¡ç†å°±æ˜¯ä¸€ç§å¾ˆæœ‰æ•ˆçš„æ æ†ã€‚ä½†è¿™ç§çº¯ç²¹çš„å¹¶è¡Œæ™‹çº§è·¯çº¿æ˜¯éå¸¸é‡è¦çš„ï¼Œå¯ä»¥è®©æŠ€æœ¯äººå‘˜æœ‰æ›´å¤šçš„é€‰æ‹©æƒï¼Œç”šè‡³å¦‚æœå¯¹è‡ªå·±çš„ç®¡ç†è€…ä¸æ»¡æ„ç›´æ¥ç»™å·®è¯„å’Œæ¢ç»„å°±æ˜¯äº†ã€‚</p>
<p>æ‰€ä»¥åœ¨å›½å¤–ç¨‹åºå‘˜ä¸­ï¼Œå¦‚æœä¸€ä¸ªäººåšäº†å¤šå¹´å¼€å‘ï¼Œå¾ˆå¯èƒ½å°±æ˜¯ä»–ç¡®å®å–œæ¬¢åšæŠ€æœ¯å’Œæ›´æ“…é•¿åšæŠ€æœ¯ã€‚è€Œä¸­å›½èŒåœºä¸­ï¼Œç®¡ç†å’ŒæŠ€æœ¯å²—çš„å·®åˆ«å¤ªå¤§äº†ï¼Œæˆ–è€…è¯´ç»å¤§éƒ¨åˆ†äººåˆ°äº†ä¸€å®šå¹´é¾„ï¼Œå¦‚æœä½ ä¸æ··ä¸ªç®¡ç†çš„ titleï¼Œå¥½åƒå°±å·²ç»è½åäº†ï¼Œç”šè‡³æ²¡æœ‰èŒåœºå®‰å…¨æ„Ÿã€‚</p>
<p>å¦å¤–æœ‰äº›äººæ˜¯å–œæ¬¢æ··åˆ°ç®¡ç†å²—ä¹‹åï¼Œçº¯ç²¹ä¸ºäº†è·å–æ›´é«˜çš„è–ªæ°´ï¼Œæˆ–è€…æ˜¯ä¸ºäº†æŠŠä¸å–œæ¬¢åšçš„äº‹æƒ…æ¨ç»™åˆ«äººã€‚å½“ç„¶ï¼Œè¿™å…¶ä¸­ä¹Ÿæœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†ä¸­å›½æ–‡åŒ–é‡Œçš„å®˜æœ¬ä½çš„å½±å“ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†åŸå› æ˜¯å¤ªçœ‹ä¸­é’±äº†ã€‚</p>
<p>æˆ‘æ¥è§¦è¿‡ä¸€äº›å¹´é¾„åœ¨ 40 å²å¤šçš„å›½å¤–ç¨‹åºå‘˜ï¼Œä»–ä»¬è¿˜æ˜¯å¯¹æŠ€æœ¯æœ‰å¾ˆå¤§çƒ­æƒ…ã€‚å¦‚æœå–œæ¬¢åšæŠ€æœ¯ï¼Œè€Œåˆèƒ½é€šè¿‡åšæŠ€æœ¯æŒ£é’±ï¼Œè¿™æ²¡æœ‰ä»€ä¹ˆå¤±è´¥çš„ï¼Œè¿™ä¸å¹´é¾„æ²¡å…³ç³»ï¼Œåè€Œè¿™æ˜¯ä¸€ç§å¾ˆå¥½çš„åº¦è¿‡è‡ªå·±çŸ­æš‚ä¸€ç”Ÿçš„æ–¹å¼ã€‚</p>
<p>åªæ˜¯åœ¨å›½å†…è¦åšåˆ°è¿™ç‚¹å¹¶ä¸å®¹æ˜“ï¼Œå¾ˆå¤šå²—ä½åšçš„äº‹æƒ…æœ¬æ¥å°±ä¸å¤Ÿæœ‰æ·±åº¦ï¼Œæ—¶é—´æ›´ä¹…ä¹Ÿæ— æ³•ç§¯ç´¯èµ·æ¥è¶³å¤Ÿçš„å£å’ï¼Œä¸šåŠ¡ä¸Šçš„å¼€å‘å¹´è½»äººä¸Šæ‰‹å¾ˆå¿«ï¼Œè€Œéœ€è¦æ·±å…¥åšä¸‹å»çš„å²—ä½ä¸å¤Ÿï¼Œæ‰€ä»¥å¹´é¾„å¤§äº†å°±å®¹æ˜“å¤±ä¸šã€‚</p>
<h2 id="ä¸šä½™æ—¶é—´"><a href="#ä¸šä½™æ—¶é—´" class="headerlink" title="ä¸šä½™æ—¶é—´"></a>ä¸šä½™æ—¶é—´</h2>
<p>å›½å¤–ç¨‹åºå‘˜çš„ä¸šä½™æ—¶é—´çœŸæ˜¯éå¸¸å¤šï¼Œå¦‚æœä½ ç»å¸¸æ·· Github å°±ä¼šå‘ç°ï¼Œæ¯å½“åˆ°äº† 12 æœˆä»½å°±å¾ˆå¤šå‡ºæ¥å¾ˆå¤š aoc å­—æ ·çš„é¡¹ç›®ï¼Œè¿™æ˜¯ä»–ä»¬åœ¨åš<a target="_blank" rel="noopener" href="https://adventofcode.com/">Advent of Code 2023</a>ã€‚</p>
<p>Advent of Code å°±æ˜¯æ•´ä¸ª 12 æœˆä»½æ¯å¤©å‡ºä¸€é“é¢˜ç›®ï¼Œéƒ½æ˜¯äº›ç¼–ç¨‹è°œé¢˜ï¼Œæœ‰ç‚¹ç±»ä¼¼ leetcodeï¼Œä½†é¢˜ç›®æè¿°æ›´é•¿ã€‚ä½ å¯ä»¥ç”¨ä»»ä½•è¯­è¨€æ¥å®ç°ï¼Œåæ­£è¦çš„ç»“æœå°±æ˜¯ç­”æ¡ˆã€‚å¯ä»¥å‘ç°è¿™äº› aoc é¡¹ç›®åŸºæœ¬éƒ½æ˜¯æ¬§ç¾çš„ç¨‹åºå‘˜åœ¨åšï¼Œå› ä¸ºä»–ä»¬å¤§å¤šåœ¨ 12 æœˆä»½æœ‰å‡ ä¹ä¸€ä¸ªæœˆçš„å‡æœŸï¼Œæˆ‘åœ¨å¾®è½¯å·¥ä½œçš„æ—¶å€™ï¼Œå¾ˆå¤šäººä¹Ÿæ˜¯ 12 æœˆä»½å¼€å§‹åŸºæœ¬ä¸è§äººå½±ã€‚</p>
<p>åˆ›é€ æ€§çš„å‰ææ˜¯ä¸ç”¨ä¸ºç”Ÿå­˜é—®é¢˜å‘æ„ï¼Œæ¬§æ´²é‚£äº›æå“²å­¦ã€åšç ”ç©¶çš„ï¼Œå¤§å¤šéƒ½æ˜¯å®¶åº•ä¸°åšï¼Œé—²å¾—å¤šäº†è‡ªç„¶å°±èƒ½æäº‹ã€‚å¦‚æœæœ‰å¤§æŠŠçš„ä¸šä½™æ—¶é—´ï¼Œç”¨æ¥å‘å±•å·¥ä½œå¤–çš„å¼€æºé¡¹ç›®å¯å°±å¤ªå¥½äº†ã€‚å…¶å®å¾ˆå¤šè‘—åçš„å¼€æºé¡¹ç›®åªæœ‰åƒé¥±é¥­æ²¡äº‹åšçš„æ—¶å€™æ‰èƒ½æå‡ºæ¥ï¼Œæˆ‘ä¹‹å‰åœ¨çŸ¥ä¹é—®é¢˜ <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/502884696/answer/2296787480">ä¸ºä»€ä¹ˆä¸­å›½ç¨‹åºå‘˜ä¸å¦‚å¤–å›½ç¨‹åºå‘˜æœ‰åˆ›é€ æ€§</a> ä¸­å†™åˆ°ï¼š</p>
<blockquote>
<p>è·å…°äºº<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E8%9F%92%E8%9B%87&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2296787480%7D">èŸ’è›‡</a>å¤§å”æƒ³ç€å“‡å¡åœ£è¯å‡æœŸè¿™ä¹ˆé•¿ï¼Œæ‰¾ç‚¹äº‹åšï¼Œç»“æœå‡ºäº† Pythonã€‚
æ—¥æœ¬äººæ¾æœ¬è¡Œå¼˜ï¼Œç»æµå±æœºæ—¶é—²å¾—å‘æ…Œï¼Œæå‡ºäº† Rubyã€‚
èŠ¬å…°äºº<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E6%9D%8E%E7%BA%B3%E6%96%AF&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2296787480%7D">æçº³æ–¯</a>ï¼Œå¤§ä¸‰ä¸ç”¨ä¸ºäº†æ‰¾å·¥ä½œèƒŒå…«è‚¡å’Œè€ƒç ”ï¼Œå†¬çœ ä¼¼åœ°å®…å®¶é‡Œå†™ä»£ç ï¼Œæå‡ºäº† Linuxã€‚</p>
</blockquote>
<p>åœ¨ Rust ç¤¾åŒºä¸­çš„è´¡çŒ®äººå‘˜é‡Œï¼Œé™¤äº†ç¾å›½ï¼Œç¬¬äºŒå¤šçš„æ˜¯æ¬§æ´²ï¼Œä»–ä»¬ä¹Ÿä¸æ˜¯ä¸ºäº†æŒ£é’±ï¼Œå®Œå…¨å°±æ˜¯æ„Ÿå…´è¶£åšåšè€Œå·²ï¼Œæˆ‘çœ‹åˆ°å¥½å‡ ä¸ªå¤§å­¦å¹´è½»äººåšçš„äº‹æƒ…å·²ç»éå¸¸æ·±å…¥äº†ï¼Œå½“ç„¶å…¶ä¸­èŠ±è´¹çš„æ—¶é—´ä¹Ÿæ˜¯å¾ˆå¤šï¼Œä»–ä»¬å‡ ä¹ä¸€ç›´åœ¨çº¿ã€‚</p>
<hr />
<p>è¿™äº›æ€»ç»“æ¯”è¾ƒç²—ç•¥ï¼Œå¦å¤–ä¹Ÿå¯èƒ½æœ‰å¹¸å­˜è€…åå·®å› ç´ ã€‚è¿™ä¸ªè¯é¢˜å¾ˆå¤§ï¼Œæ·±å…¥ä¸‹å»æ¢è®¨ä¼šåŒ…å«å¾ˆå¤šæ–¹é¢ã€‚</p>
<p>æˆ‘ä¹Ÿä¸æ˜¯åœ¨æŠ±æ€¨ï¼Œå¹´é¾„å¤§äº†ä¹‹åå‘ç°å¤šçœ‹çœ‹å†å²ç›¸å…³çš„ä¹¦è¿˜æŒºå¥½ï¼Œè®©è‡ªå·±æ›´å®¹æ˜“ç†è§£æ‰€å¤„çš„ç¯å¢ƒä¸ºä»€ä¹ˆæ˜¯è¿™æ ·çš„ï¼Œæ¯”å¦‚ã€Šä¸­å›½å›½æ°‘æ€§æ¼”å˜å²ã€‹è¿™æœ¬ä¹¦å€¼å¾—æ¨èã€‚å¦å¤–ã€Šç¾å›½ç§æ—ç®€å²ã€‹è¿™æœ¬ä¹¦ä¹Ÿå€¼å¾—ä¸€çœ‹ï¼Œå¤šäº†è§£äº†è§£å…¶ä»–äººçš„ç‰¹ç‚¹å’Œé•¿å¤„ï¼ŒåŠªåŠ›è®©è‡ªå·±ä¸è¦å±€é™äºå›½ç•Œï¼Œå¦å¤–åšåˆ°ç¨‹åºå‘˜ä¸­çš„ 80% ä»¥ä¸Šæ°´å¹³ï¼Œä¿æŒè‹±æ–‡èƒ½åŠ›ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>Copilotï¼Œæœ€å¥½çš„ç¼–ç¨‹åŠ©æ‰‹</title>
    <link href="http://catcoding.me/p/copilot-for-programming/"/>
    <id>http://catcoding.me/p/copilot-for-programming/</id>
    <published>2024-01-21T14:43:34+00:00</published>
    <updated>2026-02-13T06:43:00.093220799+00:00</updated>
    <content type="html"><![CDATA[<p>ä»Šå¤©ä¸‹åˆæˆ‘è§£å†³ä¸€ä¸ªå°é—®é¢˜çš„æ—¶å€™ï¼Œåœ¨ Copilot çš„å¸®åŠ©ä¸‹å¿«é€Ÿç»™å‡ºäº†ä¿®å¤ï¼Œè¿™ä¸ªå·¥å…·ä¼¼ä¹æœ‰äº›è¶…è¿‡æœŸæœ›äº†ï¼Œæ‰€ä»¥çªç„¶æƒ³å†™ç¯‡æ–‡ç« åˆ†äº«è¿™ä¸ªç›®å‰æˆ‘æœ€æ„¿æ„ä»˜è´¹çš„ AI å·¥å…·ã€‚</p>
<p><sub>Copilot ä»·æ ¼æ˜¯æ¯ä¸ªæœˆ 10 ç¾é‡‘ï¼Œä½†æˆ‘è‡³ä»Šè¿˜æ²¡ä»˜è´¹è¿‡ï¼Œæ„Ÿè°¢å¾®è½¯æ”¯æŒå¼€æºï¼Œä»æµ‹è¯•é˜¶æ®µå°±é‚€è¯·æˆ‘è¯•ç”¨ï¼Œåˆ°ç°åœ¨è¿˜ä¸€ç›´åœ¨å…è´¹ä½¿ç”¨ã€‚Github åº”è¯¥æœ‰äº›æ”¿ç­–ï¼Œæ¯”å¦‚å¦‚æœä½ æŒç»­ç»™ä¸€äº› star æ•°æ¯”è¾ƒå¤šçš„å¼€æºé¡¹ç›®åšè´¡çŒ®ï¼Œå°±å¯ä»¥å…è´¹ä½¿ç”¨ Copilot</sub>ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240120212918.png" alt="" /></p>
<p>æˆ‘ä¼šç»™å‡ºæ—¥å¸¸ç¢°åˆ°è¿‡çš„ä¸€äº›å…·ä½“çš„å®é™…æ¡ˆä¾‹æˆªå›¾ï¼Œä»¥æ–¹ä¾¿ä½ æ›´ç›´è§‚åœ°æ„Ÿå—åˆ°è¿™ä¸ªå·¥å…·å‡†ç¡®åº¦ã€‚</p>
<h3 id="Manual-ç±»æŸ¥è¯¢"><a href="#Manual-ç±»æŸ¥è¯¢" class="headerlink" title="Manual ç±»æŸ¥è¯¢"></a>Manual ç±»æŸ¥è¯¢</h3>
<p>æˆ‘ä»¬åœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­ç»å¸¸ä¼šç¢°åˆ°ä¸€äº›å‘½ä»¤çš„å‚æ•°è®°ä¸å¤ªæ¸…æ¥šï¼Œè¿™ç§é—®é¢˜å¾ˆé€‚åˆé—® Copilotã€‚è¿™æ¯”è‡ªå·±å» Google çš„æ„Ÿå—å¥½å¾ˆå¤šï¼Œå› ä¸ºä»–å‡ ä¹èƒ½å®Œå…¨ç†è§£ç”¨æˆ·è¯´çš„è‡ªç„¶è¯­è¨€ï¼Œè€Œä¸”ç»™å‡ºçš„ç­”æ¡ˆç®€ä»‹æ˜äº†ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240120224637.png" alt="" />
æ¯” Google æ›´å¥½çš„åœ°æ–¹åœ¨äºä¸Šä¸‹æ–‡çš„äº¤è°ˆï¼Œæ¯”å¦‚æˆ‘ç»§ç»­åŸºäºä¸Šé¢çš„é—®é¢˜è¯´æˆ‘çš„æƒ³æ³•ï¼Œä»–å°±èƒ½ç»§ç»­ç»™å‡ºåé¦ˆï¼Œæ¯”å¦‚æˆ‘è¯´å¤§æ¦‚æœ‰ä¸ªç±»ä¼¼ <code>--exact</code> çš„å‚æ•°ï¼ŒCopilot ä¼šç»§ç»­ç»™å‡ºä½¿ç”¨æ¡ˆä¾‹ã€‚</p>
<p>Copilot éå¸¸å–„äºå›ç­”å¯¹è¿™ç§ manual ç±»çš„é—®é¢˜ï¼Œå› ä¸ºè¿™æ˜¯æœ‰æ ‡å‡†ç­”æ¡ˆçš„ï¼Œå¹¶ä¸”æˆ‘ä½œä¸ºç”¨æˆ·å¯¹è¿™äº›æ˜¯æœ‰åˆ¤æ–­çš„ï¼Œåªæ˜¯æˆ‘ä»¬ç»†èŠ‚ä¸Šè®°ä¸æ¸…æ¥šäº†ã€‚</p>
<p>è¿˜æœ‰ä¸€æ¬¡æˆ‘å‘ç°è·‘æµ‹è¯•çš„æ—¶å€™æŒ‚äº†ï¼Œåˆ†æä¸‹æ¥æ˜¯è¿™ä¸ªå‘½ä»¤è¡Œå¤±è´¥äº†ï¼ˆä½†æ—¢ç„¶ CI æ˜¯è¿‡çš„ï¼Œæ‰€ä»¥å¿…ç„¶åªæ˜¯åœ¨ MacOs ä¸‹å¤±è´¥äº†)ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shell bash"><span class="token function-call shell"><span class="token variable function shell">diff</span></span><span class="token function-call arguments shell"><span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> -</span>u</span><span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> --</span>strip-trailing-cr</span><span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> -</span>r</span><span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> -</span>q</span> A_file.txt A_file.txt</span>
</span></code></pre>
<p>è¿™æ˜¯åœ¨ diff åŒä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥å¿…ç„¶åº”è¯¥è¿”å› 0ï¼Œä½†åœ¨ MacOS ä¸‹è¿™ä¸ªå‘½ä»¤ä¼šæŠ¥é”™ï¼š</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shell bash"><span class="token function-call shell"><span class="token variable function shell">âœ—</span></span><span class="token function-call arguments shell"> diff<span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> -</span>u</span><span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> --</span>strip-trailing-cr</span><span class="token variable parameter option shell"><span class="token punctuation definition parameter shell">  -</span>r</span><span class="token variable parameter option shell"><span class="token punctuation definition parameter shell"> -</span>q</span> ./x.py ./x.py</span>
<span class="token function-call shell"><span class="token variable function shell">error:</span></span><span class="token function-call arguments shell"> conflicting output format options.</span>
<span class="token function-call shell"><span class="token variable function shell">blah</span></span><span class="token function-call arguments shell"> blah ä¸€å¤§å †é”™è¯¯ </span>
<span class="token function-call shell"><span class="token variable function shell">blah</span></span><span class="token function-call arguments shell"> blah ä¸€å¤§å †é”™è¯¯ </span>
</span></code></pre>
<p>æˆ‘çŸ¥é“è¿™é‡Œé¢è‚¯å®šæ˜¯æœ‰å‚æ•°å†²çªäº†ï¼Œä½†æˆ‘å…·ä½“ä¸çŸ¥é“æ˜¯å“ªä¸¤ä¸ªå†²çªäº†ï¼Œæ‰€ä»¥è¿™æ—¶å€™æˆ‘é—® Copilotï¼š
<img src="http://catcoding.me/images/ob_pasted-image-20240120230403.png" alt="" /></p>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªè§£é‡Šéå¸¸æ¸…æ¥šï¼Œå¹¶ä¸”å¸®æˆ‘æ‰¾åˆ°äº†é—®é¢˜çš„æ ¹æºï¼Œæ‰€ä»¥æˆ‘å°±èƒ½å¾ˆå¿«åœ°å‘ PR ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”æˆ‘ PR é‡Œçš„æè¿°åŸºæœ¬éƒ½æ˜¯ä» Copilot é‡Œæ¥çš„ï¼š
<a target="_blank" rel="noopener" href="https://github.com/rust-lang/rust/pull/109036">Fix diff option conflict in UI test #109036</a></p>
<h2 id="ç»™å‡ºç¤ºä¾‹ä»£ç "><a href="#ç»™å‡ºç¤ºä¾‹ä»£ç " class="headerlink" title="ç»™å‡ºç¤ºä¾‹ä»£ç "></a>ç»™å‡ºç¤ºä¾‹ä»£ç </h2>
<p>æˆ‘ä»¬åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œç»å¸¸ä¼šå‡ºç°å›ºå®šçš„ Patternï¼Œä¸åŒçš„è¯­è¨€å¯¹å›ºå®šçš„ Pattern æœ‰ä¸€äº›ç›¸å¯¹å›ºå®šçš„ä»£ç æ ·å¼ã€‚æˆ‘å¾ˆå–œæ¬¢æ‰¾ Example ç±»çš„ä»£ç ï¼Œç„¶ååœ¨è¿™ä¸ªåŸºç¡€ä¸Šå†æ€è€ƒæˆ–è€…ä¿®æ”¹ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240120230905.png" alt="" /></p>
<p>å¯¹è¿™ç§æƒ…å†µæˆ‘ä»¬éœ€è¦ç»™ Copilot è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œä»–ç»™å‡ºçš„ Rust ä»£ç é€šå¸¸æ˜¯å¯ç›´æ¥ç¼–è¯‘é€šè¿‡çš„ï¼Œä½†å½“ç„¶è¿™äº›ç¤ºä¾‹ä»£ç éœ€è¦è¿›è¡Œä»”ç»†çš„ä¿®æ”¹ï¼Œä½†è¿™ä¹Ÿæ¯”æˆ‘è‡ªå·±ç¿» Doc ä¼šå¿«å¾ˆå¤šã€‚</p>
<h2 id="è¾…åŠ©æ’æŸ¥é—®é¢˜"><a href="#è¾…åŠ©æ’æŸ¥é—®é¢˜" class="headerlink" title="è¾…åŠ©æ’æŸ¥é—®é¢˜"></a>è¾…åŠ©æ’æŸ¥é—®é¢˜</h2>
<p>VSCode ä¸Šçš„ Copliot æ›´æ–°å¾ˆå¿«ï¼Œè‚‰çœ¼å¯è§åœ°ä½“éªŒè¶Šæ¥è¶Šå¥½ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€æ®µä»£ç ï¼Œç„¶åå°±é€‰æ‹©çš„ä»£ç æ¥è¿›è¡Œæé—®ã€‚</p>
<p>æœ‰æ—¶å€™æˆ‘ä¼šé€‰ä¸­ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åé—®è¿™æ®µå‡½æ•°èƒ½ä¸èƒ½é‡æ„å¾—æ›´ç®€å•ä¸€äº›ï¼Œæˆ–è€…æˆ‘ä»¬èƒ½ä¸èƒ½ç”¨å…¶ä»–æ–¹å¼å®ç°ã€‚</p>
<p>ä»Šå¤©è®©æˆ‘æœ‰æ¬²æœ›å†™ä¸‹è¿™ç¯‡åˆ†äº«çš„æ–‡ç« æ˜¯å› ä¸ºè¿™ä¸ªé—®é¢˜ï¼š
<a target="_blank" rel="noopener" href="https://github.com/nervosnetwork/ckb/issues/4309">Missing request extension: Extension of type</a></p>
<p>è¿™æ˜¯ä¸€ä¸ªæœ‰éå¸¸æ˜ç¡®çš„æŠ¥é”™çš„ç¹ç issueï¼Œåº”è¯¥å°±æ˜¯ Server ç«¯é™åˆ¶äº† HTTP çš„è¯·æ±‚ç±»å‹ï¼Œå®¢æˆ·ç«¯é€šè¿‡ curl å‘ GET è¯·æ±‚çš„æ—¶å€™æŠ¥é”™äº†ï¼Œåªæ˜¯è¿™ä¸ªæŠ¥é”™ä¿¡æ¯çœ‹èµ·æ¥å¾ˆä¸å‹å¥½ï¼Œè€Œä¸”å’Œè€ç‰ˆæœ¬è¡Œä¸ºä¸åŒã€‚æ‰€ä»¥æˆ‘å°±é€‰ä¸­ä»£ç ä¸­å¯¹åº”çš„å‡½æ•°ï¼Œç„¶åé—®è¿™é‡Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªé”™ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240120232057.png" alt="" />
å…¶å®æˆ‘å¯¹ Copilot è§£å†³è¿™ä¸ªé—®é¢˜ä¸æ€ä¹ˆæŠ¥æœ‰ä¿¡å¿ƒï¼Œåªæ˜¯å¥½å¥‡å…ˆè¯•äº†è¯•ï¼Œæ²¡æƒ³åˆ° Copilot çœŸçš„èƒ½ç†è§£æˆ‘çš„ä»£ç ï¼Œå¹¶ä¸”æŒ‡å‡ºäº†é—®é¢˜æ‰€åœ¨ã€‚æ³¨æ„çœ‹å®ƒåŠ çš„æ³¨é‡Šå°±æ˜¯æˆ‘ä»£ç ä¸­ç¼ºå°‘çš„é€»è¾‘ (ä¹‹å‰çš„ä»£ç åªæ˜¯åœ¨ <code>enable_websocket</code> çš„æ¡ä»¶ä¸‹æ‰åŠ è½½äº† stream_config è¿™ä¸ª Extension)ï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240120232121.png" alt="" /></p>
<p>åŠ ä¸Šå®ƒå»ºè®®çš„ä»£ç ä¹‹åï¼Œé‚£ä¸ªé”™è¯¯ä¿¡æ¯æ²¡äº†ï¼Œä½†æ˜¯ç°åœ¨å‘ GET è¯·æ±‚æ˜¯å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼š</p>
<pre class="line-numbers language-console" data-language="console"><code class="language-console">Connection header did not include &#39;upgrade&#39;
</code></pre>
<p>è¿™çœ‹èµ·æ¥æ˜¯æœåŠ¡ç«¯æœŸæœ›å®¢æˆ·ä½¿ç”¨ Websocketï¼Œä½†æ˜¯å®¢æˆ·ç«¯åªæ˜¯åœ¨é€šè¿‡ Curl å‘ä¸€ä¸ª GET è¯·æ±‚ï¼Œå¹¶æ²¡æœ‰æŒ‰ç…§è¿™ä¸ªæœŸæœ›æ¥ã€‚æ‰€ä»¥æˆ‘ç»§ç»­é—® Copilotï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240120232647.png" alt="" /></p>
<p>ä»–ç»™çš„å›å¤é‡Œçš„ä»£ç å¹¶æ²¡æœ‰ç›´æ¥ä¿®å¤é—®é¢˜ï¼Œä½†é‡Œé¢çš„
<code>you can separate the handlers for POST and GET requests</code>
æç¤ºäº†æˆ‘åº”è¯¥å°è¯•å¯¹ HTTP endpoint å’Œ Websocket endpoint çš„ handler è¿›è¡Œåˆ†å¼€ï¼Œæ‰€ä»¥æˆ‘ä¸€ä¸‹æƒ³åˆ°äº†ä¿®å¤æ–¹æ¡ˆï¼š</p>
<p><img src="http://catcoding.me/images/ob_pasted-image-20240120232901.png" alt="" /></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2>
<p>å¦‚ä»Šä½¿ç”¨ Copilot å·²ç»æˆä¸ºæˆ‘çš„ä¸€ä¸ªç¼–ç¨‹ä¹ æƒ¯ï¼Œå°±å¦‚åŒä¹‹å‰æˆ‘ä¸¥é‡ä¾èµ– Google ä¸€æ ·ï¼Œä½†è¿™ä¸ªå·¥å…·æ˜æ˜¾æ¯”æœç´¢å¼•æ“é«˜çº§äº†ä¸€ä¸ªç»´åº¦ï¼Œå½“ç„¶ç°åœ¨æˆ‘è¿˜æ˜¯ä¾èµ–æœç´¢ï¼Œä½†ä½¿ç”¨æ¯”ç‡æ˜æ˜¾ä¸‹é™äº†ä¸å°‘ï¼Œæœç´¢å¼•æ“æ›´åƒæ˜¯æˆäº†ä¸€ä¸ªä¹¦ç­¾çš„è§’è‰²äº†ã€‚</p>
<p>æˆ‘ä¹‹å‰è®¤ä¸º Copliot è¿™ç§å·¥å…·ç”šè‡³æ˜¯è¿™è¾ˆç¨‹åºå‘˜æ‰€ä¸èƒ½ä½“éªŒåˆ°çš„ä¸œè¥¿ï¼Œåœ¨æˆ‘ç¬¬ä¸€æ¬¡å°è¯•åˆ° ChatGPT å±…ç„¶å¯ä»¥ç†è§£ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æ‰¾å‡ºå‡½æ•°ä¸­çš„é—®é¢˜æ—¶ï¼Œå°±æ„Ÿè§‰æ–°çš„ç¼–ç¨‹æ—¶ä»£æ¥ä¸´äº†ã€‚</p>
<p>å‰æ®µæ—¶é—´ Redis çš„åˆ›å§‹äººåœ¨æ–‡ç«  <a target="_blank" rel="noopener" href="http://antirez.com/news/140">LLMs and Programming in the first days of 2024</a> ä¸­å†™åˆ°ï¼š</p>
<blockquote>
<p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘ä»¬è§è¯äº†æ¡†æ¶ã€ç¼–ç¨‹è¯­è¨€ã€å„ç§åº“çš„å¤§é‡æ¶Œç°ã€‚è¿™ç§å¤æ‚æ€§é€šå¸¸æ˜¯ä¸å¿…è¦çš„ï¼Œç”šè‡³æ— æ³•è‡ªåœ†å…¶è¯´ï¼Œä½†äº‹å®å°±æ˜¯å¦‚æ­¤ã€‚åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæ— æ‰€ä¸çŸ¥çš„â€œç™½ç—´â€æˆäº†å®è´µçš„åŠ©æ‰‹ã€‚</p>
</blockquote>
<blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªäº‹å®ï¼šç°ä»Šçš„ç¼–ç¨‹å¤§å¤šæ˜¯åœ¨å¾®è°ƒåŒæ ·çš„å†…å®¹ï¼Œåªæ˜¯å½¢å¼ç•¥æœ‰å˜åŒ–ã€‚è¿™ç§å·¥ä½œå¹¶ä¸éœ€è¦å¤ªé«˜çš„æ¨ç†èƒ½åŠ›ã€‚</p>
</blockquote>
<p>Copilot å·²ç»å¯ä»¥åœ¨ä¸€äº›å…·ä½“çš„ç¼–ç é—®é¢˜ä¸Šç»™åˆ°æˆ‘ä»¬å¾ˆå¤šå¸®åŠ©ï¼Œç”šè‡³ä½ æŠŠè¿™ä¸ªå½“ä½œä¸€ä¸ªåŒ…å«ä¸‡ç‰©çš„æ–‡æ¡£æŸ¥è¯¢å·¥å…·éƒ½éå¸¸æœ‰æ•ˆã€‚</p>
<p>å½“ç„¶æ²¡æœ‰é“¶å¼¹ï¼ŒCopilot å¹¶ä¸èƒ½è§£å†³ç¼–ç¨‹ä¸­çš„æ‰€æœ‰é—®é¢˜ï¼Œæ¯”å¦‚ç†è§£å¤§è§„æ¨¡çš„ç¨‹åºï¼Œé€šè¿‡æ·±å…¥åˆ†æå»æ‰¾å‡º bugï¼Œæˆ–è€…åšè®¾è®¡é—®é¢˜ä¸­çš„å„ç§æŠ˜ä¸­å’Œå–èˆï¼Œè¿™äº›éƒ½æ˜¯ä¸èƒ½å–ä»£äººç±»çš„ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘è®¤ä¸ºç¼–ç¨‹ä¸­çš„ä¹è¶£è¿˜æ²¡æœ‰å®Œå…¨æ¶ˆå¤±ã€‚</p>
<p>æˆ‘ä¼šæŠŠç¹çå’Œç»†èŠ‚çš„é—®é¢˜æŠ›ç»™ Copilotï¼Œç„¶åæ›´å¼€å¿ƒåœ°åšé‡è¦å’Œæœ‰è¶£çš„éƒ¨åˆ†ã€‚</p>
]]></content>
  </entry>
</feed>
